(self.webpackChunkgui=self.webpackChunkgui||[]).push([[179],{937:(po,Ss,Vr)=>{"use strict";function qt(i){return"function"==typeof i}function U(i){const t=i(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Rr=U(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function zr(i,e){if(i){const t=i.indexOf(e);0<=t&&i.splice(t,1)}}class nn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(qt(n))try{n()}catch(s){e=s instanceof Rr?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Ia(s)}catch(o){e=e??[],o instanceof Rr?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Rr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ia(e);else{if(e instanceof nn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&zr(t,e)}remove(e){const{_finalizers:t}=this;t&&zr(t,e),e instanceof nn&&e._removeParent(this)}}nn.EMPTY=(()=>{const i=new nn;return i.closed=!0,i})();const Mn=nn.EMPTY;function ll(i){return i instanceof nn||i&&"closed"in i&&qt(i.remove)&&qt(i.add)&&qt(i.unsubscribe)}function Ia(i){qt(i)?i():i.unsubscribe()}const Es={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},di={setTimeout(i,e,...t){const{delegate:n}=di;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){const{delegate:e}=di;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function hi(i){di.setTimeout(()=>{const{onUnhandledError:e}=Es;if(!e)throw i;e(i)})}function ss(){}const As=vn("C",void 0,void 0);function vn(i,e,t){return{kind:i,value:e,error:t}}let or=null;function Xl(i){if(Es.useDeprecatedSynchronousErrorHandling){const e=!or;if(e&&(or={errorThrown:!1,error:null}),i(),e){const{errorThrown:t,error:n}=or;if(or=null,t)throw n}}else i()}class cl extends nn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ll(e)&&e.add(this)):this.destination=SS}static create(e,t,n){return new Ko(e,t,n)}next(e){this.isStopped?sg(function mo(i){return vn("N",i,void 0)}(e),this):this._next(e)}error(e){this.isStopped?sg(function Ds(i){return vn("E",void 0,i)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sg(As,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Yo=Function.prototype.bind;function ul(i,e){return Yo.call(i,e)}class Ra{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){Kc(n)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){Kc(n)}else Kc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Kc(t)}}}class Ko extends cl{constructor(e,t,n){let r;if(super(),qt(e)||!e)r={next:e??void 0,error:t??void 0,complete:n??void 0};else{let s;this&&Es.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ul(e.next,s),error:e.error&&ul(e.error,s),complete:e.complete&&ul(e.complete,s)}):r=e}this.destination=new Ra(r)}}function Kc(i){Es.useDeprecatedSynchronousErrorHandling?function Xo(i){Es.useDeprecatedSynchronousErrorHandling&&or&&(or.errorThrown=!0,or.error=i)}(i):hi(i)}function sg(i,e){const{onStoppedNotification:t}=Es;t&&di.setTimeout(()=>t(i,e))}const SS={closed:!0,next:ss,error:function CS(i){throw i},complete:ss},og="function"==typeof Symbol&&Symbol.observable||"@@observable";function Pa(i){return i}function n0(i){return 0===i.length?Pa:1===i.length?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}let Cn=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){const s=function Zh(i){return i&&i instanceof cl||function AS(i){return i&&qt(i.next)&&qt(i.error)&&qt(i.complete)}(i)&&ll(i)}(t)?t:new Ko(t,n,r);return Xl(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=ka(n))((r,s)=>{const o=new Ko({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[og](){return this}pipe(...t){return n0(t)(this)}toPromise(t){return new(t=ka(t))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=e=>new i(e),i})();function ka(i){var e;return null!==(e=i??Es.Promise)&&void 0!==e?e:Promise}const Zo=U(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ge=(()=>{class i extends Cn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new r0(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new Zo}next(t){Xl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}})}error(t){Xl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){Xl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:r,observers:s}=this;return n||r?Mn:(this.currentObservers=null,s.push(t),new nn(()=>{this.currentObservers=null,zr(s,t)}))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:r,isStopped:s}=this;n?t.error(r):s&&t.complete()}asObservable(){const t=new Cn;return t.source=this,t}}return i.create=(e,t)=>new r0(e,t),i})();class r0 extends Ge{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Mn}}function s0(i){return qt(i?.lift)}function Fn(i){return e=>{if(s0(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function An(i,e,t,n,r){return new DS(i,e,t,n,r)}class DS extends cl{constructor(e,t,n,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Xe(i,e){return Fn((t,n)=>{let r=0;t.subscribe(An(n,s=>{n.next(i.call(e,s,r++))}))})}function _o(i){return this instanceof _o?(this.v=i,this):new _o(i)}function RS(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t.apply(i,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){n[p]&&(r[p]=function(m){return new Promise(function(_,b){s.push([p,m,_,b])>1||a(p,m)})})}function a(p,m){try{!function l(p){p.value instanceof _o?Promise.resolve(p.value.v).then(c,d):h(s[0][2],p)}(n[p](m))}catch(_){h(s[0][3],_)}}function c(p){a("next",p)}function d(p){a("throw",p)}function h(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Jc(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=function Zc(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}const rd=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function tf(i){return qt(i?.then)}function h0(i){return qt(i[og])}function f0(i){return Symbol.asyncIterator&&qt(i?.[Symbol.asyncIterator])}function p0(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const dg=function m0(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function g0(i){return qt(i?.[dg])}function _0(i){return RS(this,arguments,function*(){const t=i.getReader();try{for(;;){const{value:n,done:r}=yield _o(t.read());if(r)return yield _o(void 0);yield yield _o(n)}}finally{t.releaseLock()}})}function y0(i){return qt(i?.getReader)}function ar(i){if(i instanceof Cn)return i;if(null!=i){if(h0(i))return function v0(i){return new Cn(e=>{const t=i[og]();if(qt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(rd(i))return function PS(i){return new Cn(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}(i);if(tf(i))return function kS(i){return new Cn(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,hi)})}(i);if(f0(i))return nf(i);if(g0(i))return function OS(i){return new Cn(e=>{for(const t of i)if(e.next(t),e.closed)return;e.complete()})}(i);if(y0(i))return function LS(i){return nf(_0(i))}(i)}throw p0(i)}function nf(i){return new Cn(e=>{(function hg(i,e){var t,n,r,s;return function IS(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Jc(i);!(n=yield t.next()).done;)if(e.next(n.value),e.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(i,e).catch(t=>e.error(t))})}function Oa(i,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function Zi(i,e,t=1/0){return qt(e)?Zi((n,r)=>Xe((s,o)=>e(n,s,r,o))(ar(i(n,r))),t):("number"==typeof e&&(t=e),Fn((n,r)=>function FS(i,e,t,n,r,s,o,a){const l=[];let c=0,d=0,h=!1;const p=()=>{h&&!l.length&&!c&&e.complete()},m=b=>c<n?_(b):l.push(b),_=b=>{s&&e.next(b),c++;let v=!1;ar(t(b,d++)).subscribe(An(e,y=>{r?.(y),s?m(y):e.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<n;){const y=l.shift();o?Oa(e,o,()=>_(y)):_(y)}p()}catch(y){e.error(y)}}))};return i.subscribe(An(e,m,()=>{h=!0,p()})),()=>{a?.()}}(n,r,i,t)))}function Qc(i=1/0){return Zi(Pa,i)}const qs=new Cn(i=>i.complete());function b0(i){return i&&qt(i.schedule)}function rf(i){return i[i.length-1]}function x0(i){return qt(rf(i))?i.pop():void 0}function sd(i){return b0(rf(i))?i.pop():void 0}function w0(i,e=0){return Fn((t,n)=>{t.subscribe(An(n,r=>Oa(n,i,()=>n.next(r),e),()=>Oa(n,i,()=>n.complete(),e),r=>Oa(n,i,()=>n.error(r),e)))})}function M0(i,e=0){return Fn((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function C0(i,e){if(!i)throw new Error("Iterable cannot be null");return new Cn(t=>{Oa(t,e,()=>{const n=i[Symbol.asyncIterator]();Oa(t,e,()=>{n.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Ri(i,e){return e?function HS(i,e){if(null!=i){if(h0(i))return function US(i,e){return ar(i).pipe(M0(e),w0(e))}(i,e);if(rd(i))return function VS(i,e){return new Cn(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}(i,e);if(tf(i))return function sf(i,e){return ar(i).pipe(M0(e),w0(e))}(i,e);if(f0(i))return C0(i,e);if(g0(i))return function af(i,e){return new Cn(t=>{let n;return Oa(t,e,()=>{n=i[dg](),Oa(t,e,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>qt(n?.return)&&n.return()})}(i,e);if(y0(i))return function zS(i,e){return C0(_0(i),e)}(i,e)}throw p0(i)}(i,e):ar(i)}function Ts(...i){const e=sd(i),t=function BS(i,e){return"number"==typeof rf(i)?i.pop():e}(i,1/0),n=i;return n.length?1===n.length?ar(n[0]):Qc(t)(Ri(n,e)):qs}function lf(i={}){const{connector:e=(()=>new Ge),resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,d=!1,h=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=l=void 0,d=h=!1},_=()=>{const b=o;m(),b?.unsubscribe()};return Fn((b,v)=>{c++,!h&&!d&&p();const y=l=l??e();v.add(()=>{c--,0===c&&!h&&!d&&(a=fg(_,r))}),y.subscribe(v),!o&&c>0&&(o=new Ko({next:M=>y.next(M),error:M=>{h=!0,p(),a=fg(m,t,M),y.error(M)},complete:()=>{d=!0,p(),a=fg(m,n),y.complete()}}),ar(b).subscribe(o))})(s)}}function fg(i,e,...t){if(!0===e)return void i();if(!1===e)return;const n=new Ko({next:()=>{n.unsubscribe(),i()}});return ar(e(...t)).subscribe(n)}function Jn(i){for(let e in i)if(i[e]===Jn)return e;throw Error("Could not find renamed property on target object.")}function pg(i,e){for(const t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function Qn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Qn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const e=i.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function cf(i,e){return null==i||""===i?null===e?"":e:null==e||""===e?i:i+" "+e}const S0=Jn({__forward_ref__:Jn});function Wn(i){return i.__forward_ref__=Wn,i.toString=function(){return Qn(this())},i}function vt(i){return mg(i)?i():i}function mg(i){return"function"==typeof i&&i.hasOwnProperty(S0)&&i.__forward_ref__===Wn}class _e extends Error{constructor(e,t){super(function od(i,e){return`NG0${Math.abs(i)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Bt(i){return"string"==typeof i?i:null==i?"":String(i)}function ad(i,e){throw new _e(-201,!1)}function os(i,e){null==i&&function Un(i,e,t,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,i,null,"!=")}function Oe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ut(i){return{providers:i.providers||[],imports:i.imports||[]}}function gg(i){return I0(i,uf)||I0(i,R0)}function I0(i,e){return i.hasOwnProperty(e)?i[e]:null}function ei(i){return i&&(i.hasOwnProperty(_g)||i.hasOwnProperty(ZS))?i[_g]:null}const uf=Jn({\u0275prov:Jn}),_g=Jn({\u0275inj:Jn}),R0=Jn({ngInjectableDef:Jn}),ZS=Jn({ngInjectorDef:Jn});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let yg;function Xs(i){const e=yg;return yg=i,e}function lr(i,e,t){const n=gg(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&gt.Optional?null:void 0!==e?e:void ad(Qn(i))}function Ys(i){return{toString:i}.toString()}var Ks=(()=>((Ks=Ks||{})[Ks.OnPush=0]="OnPush",Ks[Ks.Default=1]="Default",Ks))(),Zs=(()=>{return(i=Zs||(Zs={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Zs;var i})();const $n=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kl={},In=[],Pr=Jn({\u0275cmp:Jn}),vg=Jn({\u0275dir:Jn}),as=Jn({\u0275pipe:Jn}),O0=Jn({\u0275mod:Jn}),ea=Jn({\u0275fac:Jn}),Js=Jn({__NG_ELEMENT_ID__:Jn});let df=0;function St(i){return Ys(()=>{const t=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Ks.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||In,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Zs.Emulated,id:"c"+df++,styles:i.styles||In,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=L0(i.inputs,n),r.outputs=L0(i.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(La).filter(hf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(zi).filter(hf):null,r})}function jn(i,e,t){const n=i.\u0275cmp;n.directiveDefs=()=>("function"==typeof e?e():e).map(La),n.pipeDefs=()=>("function"==typeof t?t():t).map(zi)}function La(i){return Vn(i)||cr(i)}function hf(i){return null!==i}function Gt(i){return Ys(()=>({type:i.type,bootstrap:i.bootstrap||In,declarations:i.declarations||In,imports:i.imports||In,exports:i.exports||In,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L0(i,e){if(null==i)return Kl;const t={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=n,e&&(e[r]=s)}return t}const Ne=St;function ls(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Vn(i){return i[Pr]||null}function cr(i){return i[vg]||null}function zi(i){return i[as]||null}function Is(i,e){const t=i[O0]||null;if(!t&&!0===e)throw new Error(`Type ${Qn(i)} does not have '\u0275mod' property.`);return t}function Gr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Mo(i){return Array.isArray(i)&&!0===i[1]}function wg(i){return 0!=(8&i.flags)}function mf(i){return 2==(2&i.flags)}function gf(i){return 1==(1&i.flags)}function Co(i){return null!==i.template}function _f(i){return 0!=(256&i[2])}function tc(i,e){return i.hasOwnProperty(ea)?i[ea]:null}class vf{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ui(){return dd}function dd(i){return i.type.prototype.ngOnChanges&&(i.setInput=bf),V0}function V0(){const i=Dg(this),e=i?.current;if(e){const t=i.previous;if(t===Kl)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function bf(i,e,t,n){const r=Dg(i)||function xf(i,e){return i[Ag]=e}(i,{previous:Kl,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new vf(l&&l.currentValue,e,o===Kl),i[n]=e}ui.ngInherit=!0;const Ag="__ngSimpleChanges__";function Dg(i){return i[Ag]||null}function _i(i){for(;Array.isArray(i);)i=i[0];return i}function fd(i,e){return _i(e[i])}function Qs(i,e){return _i(e[i.index])}function ki(i,e){return i.data[e]}function Oi(i,e){return i[e]}function Ps(i,e){const t=e[i];return Gr(t)?t:t[0]}function z0(i){return 4==(4&i[2])}function pd(i){return 64==(64&i[2])}function ta(i,e){return null==e?null:i[e]}function su(i){i[18]=0}function md(i,e){i[5]+=e;let t=i,n=i[3];for(;null!==n&&(1===e&&1===t[5]||-1===e&&0===t[5]);)n[5]+=e,t=n,n=n[3]}const bt={lFrame:q0(null),bindingsEnabled:!0};function H0(){return bt.bindingsEnabled}function we(){return bt.lFrame.lView}function hn(){return bt.lFrame.tView}function Qt(i){return bt.lFrame.contextLView=i,i[8]}function cn(i){return bt.lFrame.contextLView=null,i}function D(){let i=nc();for(;null!==i&&64===i.type;)i=i.parent;return i}function nc(){return bt.lFrame.currentTNode}function Li(i,e){const t=bt.lFrame;t.currentTNode=i,t.isParent=e}function un(){return bt.lFrame.isParent}function Pg(){bt.lFrame.isParent=!1}function Wr(){const i=bt.lFrame;let e=i.bindingRootIndex;return-1===e&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function cu(){return bt.lFrame.bindingIndex++}function wr(i){const e=bt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function uE(i,e){const t=bt.lFrame;t.bindingIndex=t.bindingRootIndex=i,kg(e)}function kg(i){bt.lFrame.currentDirectiveIndex=i}function Eo(i){const e=bt.lFrame.currentDirectiveIndex;return-1===e?null:i[e]}function $0(){return bt.lFrame.currentQueryIndex}function Og(i){bt.lFrame.currentQueryIndex=i}function hE(i){const e=i[1];return 2===e.type?e.declTNode:1===e.type?i[6]:null}function j0(i,e,t){if(t&gt.SkipSelf){let r=e,s=i;for(;!(r=r.parent,null!==r||t&gt.Host||(r=hE(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,i=s}const n=bt.lFrame=pl();return n.currentTNode=e,n.lView=i,!0}function Lg(i){const e=pl(),t=i[1];bt.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function pl(){const i=bt.lFrame,e=null===i?null:i.child;return null===e?q0(i):e}function q0(i){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=e),e}function X0(){const i=bt.lFrame;return bt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const eo=X0;function Fg(){const i=X0();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function $r(){return bt.lFrame.selectedIndex}function ml(i){bt.lFrame.selectedIndex=i}function yi(){const i=bt.lFrame;return ki(i.tView,i.selectedIndex)}function ks(){bt.lFrame.currentNamespace="svg"}function Ng(){!function Bg(){bt.lFrame.currentNamespace=null}()}function Af(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const s=i.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-t,o),a&&((i.contentHooks||(i.contentHooks=[])).push(t,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(t,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-t,l),c&&((i.viewHooks||(i.viewHooks=[])).push(t,c),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(t,c)),null!=d&&(i.destroyHooks||(i.destroyHooks=[])).push(t,d)}}function _d(i,e,t){Tf(i,e,3,t)}function Df(i,e,t,n){(3&i[2])===t&&Tf(i,e,t,n)}function Ao(i,e){let t=i[2];(3&t)===e&&(t&=2047,t+=1,i[2]=t)}function Tf(i,e,t,n){const s=n??-1,o=e.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=n&&a>=n)break}else e[l]<0&&(i[18]+=65536),(a<s||-1==s)&&(ic(i,t,e,l),i[18]=(4294901760&i[18])+l+2),l++}function ic(i,e,t,n){const r=t[n]<0,s=t[n+1],a=i[r?-t[n]:t[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===e){i[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class yd{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function vd(i,e,t){let n=0;for(;n<t.length;){const r=t[n];if("number"==typeof r){if(0!==r)break;n++;const s=t[n++],o=t[n++],a=t[n++];i.setAttribute(e,o,a,s)}else{const s=r,o=t[++n];If(s)?i.setProperty(e,s,o):i.setAttribute(e,s,o),n++}}return n}function fr(i){return 3===i||4===i||6===i}function If(i){return 64===i.charCodeAt(0)}function bd(i,e){if(null!==e&&0!==e.length)if(null===i||0===i.length)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?t=r:0===t||Do(i,t,r,null,-1===t||2===t?e[++n]:null)}}return i}function Do(i,e,t,n,r){let s=0,o=i.length;if(-1===e)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===t){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,e),s=o+1),i.splice(s++,0,t),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function Rf(i){return-1!==i}function Ua(i){return 32767&i}function sc(i,e){let t=function rc(i){return i>>16}(i),n=e;for(;t>0;)n=n[15],t--;return n}let Mr=!0;function uu(i){const e=Mr;return Mr=i,e}let Vg=0;const ia={};function du(i,e){const t=Hg(i,e);if(-1!==t)return t;const n=e[1];n.firstCreatePass&&(i.injectorIndex=e.length,zg(n.data,i),zg(e,null),zg(n.blueprint,null));const r=gl(i,e),s=i.injectorIndex;if(Rf(r)){const o=Ua(r),a=sc(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function zg(i,e){i.push(0,0,0,0,0,0,0,0,e)}function Hg(i,e){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===e[i.injectorIndex+8]?-1:i.injectorIndex}function gl(i,e){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;null!==r;){if(n=jg(r),null===n)return-1;if(t++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return-1}function Pf(i,e,t){!function xd(i,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(Js)&&(n=t[Js]),null==n&&(n=t[Js]=Vg++);const r=255&n;e.data[i+(r>>5)]|=1<<r}(i,e,t)}function kf(i,e,t){if(t&gt.Optional)return i;ad()}function Gg(i,e,t,n){if(t&gt.Optional&&void 0===n&&(n=null),0==(t&(gt.Self|gt.Host))){const r=i[9],s=Xs(void 0);try{return r?r.get(e,n,t&gt.Optional):lr(e,n,t&gt.Optional)}finally{Xs(s)}}return kf(n,0,t)}function eb(i,e,t,n=gt.Default,r){if(null!==i){if(1024&e[2]){const o=function ib(i,e,t,n,r){let s=i,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=tb(s,o,t,n|gt.Self,ia);if(a!==ia)return a;let l=s.parent;if(!l){const c=o[21];if(c){const d=c.get(t,ia,n);if(d!==ia)return d}l=jg(o),o=o[15]}s=l}return r}(i,e,t,n,ia);if(o!==ia)return o}const s=tb(i,e,t,n,ia);if(s!==ia)return s}return Gg(e,t,n,r)}function tb(i,e,t,n,r){const s=function vE(i){if("string"==typeof i)return i.charCodeAt(0)||0;const e=i.hasOwnProperty(Js)?i[Js]:void 0;return"number"==typeof e?e>=0?255&e:nb:e}(t);if("function"==typeof s){if(!j0(e,i,n))return n&gt.Host?kf(r,0,n):Gg(e,t,n,r);try{const o=s(n);if(null!=o||n&gt.Optional)return o;ad()}finally{eo()}}else if("number"==typeof s){let o=null,a=Hg(i,e),l=-1,c=n&gt.Host?e[16][6]:null;for((-1===a||n&gt.SkipSelf)&&(l=-1===a?gl(i,e):e[a+8],-1!==l&&Wg(n,!1)?(o=e[1],a=Ua(l),e=sc(l,e)):a=-1);-1!==a;){const d=e[1];if(Of(s,a,d.data)){const h=yE(a,e,t,o,n,c);if(h!==ia)return h}l=e[a+8],-1!==l&&Wg(n,e[1].data[a+8]===c)&&Of(s,a,e)?(o=d,a=Ua(l),e=sc(l,e)):a=-1}}return r}function yE(i,e,t,n,r,s){const o=e[1],a=o.data[i+8],d=wd(a,o,t,null==n?mf(a)&&Mr:n!=o&&0!=(3&a.type),r&gt.Host&&s===a);return null!==d?oc(e,o,d,a):ia}function wd(i,e,t,n,r){const s=i.providerIndexes,o=e.data,a=1048575&s,l=i.directiveStart,d=s>>20,p=r?a+d:i.directiveEnd;for(let m=n?a:a+d;m<p;m++){const _=o[m];if(m<l&&t===_||m>=l&&_.type===t)return m}if(r){const m=o[l];if(m&&Co(m)&&m.type===t)return l}return null}function oc(i,e,t,n){let r=i[t];const s=e.data;if(function Y0(i){return i instanceof yd}(r)){const o=r;o.resolving&&function E0(i,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new _e(-200,`Circular dependency in DI detected for ${i}${t}`)}(function Tn(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Bt(i)}(s[t]));const a=uu(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Xs(o.injectImpl):null;j0(i,n,gt.Default);try{r=i[t]=o.factory(void 0,s,i,n),e.firstCreatePass&&t>=n.directiveStart&&function Ef(i,e,t){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(n){const o=dd(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(i,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-i,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,s))}(t,s[t],e)}finally{null!==l&&Xs(l),uu(a),o.resolving=!1,eo()}}return r}function Of(i,e,t){return!!(t[e+(i>>5)]&1<<i)}function Wg(i,e){return!(i&gt.Self||i&gt.Host&&e)}class ac{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return eb(this._tNode,this._lView,e,n,t)}}function nb(){return new ac(D(),we())}function Mi(i){return Ys(()=>{const e=i.prototype.constructor,t=e[ea]||$g(e),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[ea]||$g(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function $g(i){return mg(i)?()=>{const e=$g(vt(i));return e&&e()}:tc(i)}function jg(i){const e=i[1],t=e.type;return 2===t?e.declTNode:1===t?i[6]:null}function Va(i){return function _E(i,e){if("class"===e)return i.classes;if("style"===e)return i.styles;const t=i.attrs;if(t){const n=t.length;let r=0;for(;r<n;){const s=t[r];if(fr(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(D(),i)}const hu="__parameters__";function fu(i,e,t){return Ys(()=>{const n=function Md(i){return function(...t){if(i){const n=i(...t);for(const r in n)this[r]=n[r]}}}(e);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const h=l.hasOwnProperty(hu)?l[hu]:Object.defineProperty(l,hu,{value:[]})[hu];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class Se{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Oe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Or(i,e){void 0===e&&(e=i);for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)?(e===i&&(e=i.slice(0,t)),Or(n,e)):e!==i&&e.push(n)}return e}function ra(i,e){i.forEach(t=>Array.isArray(t)?ra(t,e):e(t))}function Ff(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function Cd(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function cc(i,e){const t=[];for(let n=0;n<i;n++)t.push(e);return t}function qr(i,e,t){let n=pu(i,e);return n>=0?i[1|n]=t:(n=~n,function wE(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(1===r)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;)i[r]=i[r-2],r--;i[e]=t,i[e+1]=n}}(i,n,e,t)),n}function Yg(i,e){const t=pu(i,e);if(t>=0)return i[1|t]}function pu(i,e){return function Kg(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<t];if(e===o)return s<<t;o>e?r=s:n=s+1}return~(r<<t)}(i,e,1)}const oa={},Uf="__NG_DI_FLAG__",Sd="ngTempTokenPath",db=/\n/gm,gu="__source";let Ed;function dc(i){const e=Ed;return Ed=i,e}function hb(i,e=gt.Default){if(void 0===Ed)throw new _e(-203,!1);return null===Ed?lr(i,void 0,e):Ed.get(i,e&gt.Optional?null:void 0,e)}function X(i,e=gt.Default){return(function P0(){return yg}()||hb)(vt(i),e)}function qn(i,e=gt.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),X(i,e)}function Ad(i){const e=[];for(let t=0;t<i.length;t++){const n=vt(i[t]);if(Array.isArray(n)){if(0===n.length)throw new _e(900,!1);let r,s=gt.Default;for(let o=0;o<n.length;o++){const a=n[o],l=EE(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(X(r,s))}else e.push(X(n))}return e}function bl(i,e){return i[Uf]=e,i.prototype[Uf]=e,i}function EE(i){return i[Uf]}const Io=bl(fu("Optional"),8),xl=bl(fu("SkipSelf"),4);let r_,jf;function hs(i){return function s_(){if(void 0===jf&&(jf=null,$n.trustedTypes))try{jf=$n.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return jf}()?.createHTML(i)||i}class wl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class IE extends wl{getTypeName(){return"HTML"}}class RE extends wl{getTypeName(){return"Style"}}class PE extends wl{getTypeName(){return"Script"}}class kE extends wl{getTypeName(){return"URL"}}class xb extends wl{getTypeName(){return"ResourceURL"}}function fs(i){return i instanceof wl?i.changingThisBreaksApplicationSecurity:i}function aa(i,e){const t=function c_(i){return i instanceof wl&&i.getTypeName()||null}(i);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class Sb{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(hs(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class la{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const n=this.inertDocument.createElement("body");t.appendChild(n)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=hs(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=hs(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const OE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,FE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Rd(i){return(i=String(i)).match(OE)||i.match(FE)?i:"unsafe:"+i}function ca(i){const e={};for(const t of i.split(","))e[t]=!0;return e}function Pd(...i){const e={};for(const t of i)for(const n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}const Ab=ca("area,br,col,hr,img,wbr"),Db=ca("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Tb=ca("rp,rt"),qf=Pd(Ab,Pd(Db,ca("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pd(Tb,ca("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pd(Tb,Db)),Xf=ca("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yf=ca("srcset"),Ib=Pd(Xf,Yf,ca("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ca("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Rb=ca("script,style,template");class NE{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!qf.hasOwnProperty(t))return this.sanitizedSomething=!0,!Rb.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!Ib.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Xf[a]&&(l=Rd(l)),Yf[a]&&(i=l,l=(i=String(i)).split(",").map(e=>Rd(e.trim())).join(", ")),this.buf.push(" ",o,'="',Pb(l),'"')}var i;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();qf.hasOwnProperty(t)&&!Ab.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Pb(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const BE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,UE=/([^\#-~ |!])/g;function Pb(i){return i.replace(/&/g,"&amp;").replace(BE,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(UE,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Kf;function kb(i,e){let t=null;try{Kf=Kf||function Id(i){const e=new la(i);return function pc(){try{return!!(new window.DOMParser).parseFromString(hs(""),"text/html")}catch{return!1}}()?new Sb(e):e}(i);let n=e?String(e):"";t=Kf.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=t.innerHTML,t=Kf.getInertBodyElement(n)}while(n!==s);return hs((new NE).sanitizeChildren(ps(t)||t))}finally{if(t){const n=ps(t)||t;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function ps(i){return"content"in i&&function VE(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Nn=(()=>((Nn=Nn||{})[Nn.NONE=0]="NONE",Nn[Nn.HTML=1]="HTML",Nn[Nn.STYLE=2]="STYLE",Nn[Nn.SCRIPT=3]="SCRIPT",Nn[Nn.URL=4]="URL",Nn[Nn.RESOURCE_URL=5]="RESOURCE_URL",Nn))();function Zf(i){const e=function kd(){const i=we();return i&&i[12]}();return e?e.sanitize(Nn.URL,i)||"":aa(i,"URL")?fs(i):Rd(Bt(i))}const h_=new Se("ENVIRONMENT_INITIALIZER"),Fb=new Se("INJECTOR",-1),Nb=new Se("INJECTOR_DEF_TYPES");class Bb{get(e,t=oa){if(t===oa){const n=new Error(`NullInjectorError: No provider for ${Qn(e)}!`);throw n.name="NullInjectorError",n}return t}}function jE(...i){return{\u0275providers:Ub(0,i)}}function Ub(i,...e){const t=[],n=new Set;let r;return ra(e,s=>{const o=s;f_(o,t,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&Vb(r,t),t}function Vb(i,e){for(let t=0;t<i.length;t++){const{providers:r}=i[t];ra(r,s=>{e.push(s)})}}function f_(i,e,t,n){if(!(i=vt(i)))return!1;let r=null,s=ei(i);const o=!s&&Vn(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=ei(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)f_(c,e,t,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{ra(s.imports,d=>{f_(d,e,t,n)&&(c||(c=[]),c.push(d))})}finally{}void 0!==c&&Vb(c,e)}if(!a){const c=tc(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:In},{provide:Nb,useValue:r,multi:!0},{provide:h_,useValue:()=>X(r),multi:!0})}const l=s.providers;null==l||a||ra(l,d=>{e.push(d)})}}return r!==i&&void 0!==i.providers}const qE=Jn({provide:String,useValue:Jn});function p_(i){return null!==i&&"object"==typeof i&&qE in i}function mc(i){return"function"==typeof i}const Od=new Se("Set Injector scope."),Ld={},YE={};let m_;function Jf(){return void 0===m_&&(m_=new Bb),m_}class Ml{}class Gb extends Ml{constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,y_(e,o=>this.processProvider(o)),this.records.set(Fb,xu(void 0,this)),r.has("environment")&&this.records.set(Ml,xu(void 0,this));const s=this.records.get(Od);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Nb.multi,In,gt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=dc(this),n=Xs(void 0);try{return e()}finally{dc(t),Xs(n)}}get(e,t=oa,n=gt.Default){this.assertNotDestroyed();const r=dc(this),s=Xs(void 0);try{if(!(n&gt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function QE(i){return"function"==typeof i||"object"==typeof i&&i instanceof Se}(e)&&gg(e);a=l&&this.injectableDefInScope(l)?xu(g_(e),Ld):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&gt.Self?Jf():this.parent).get(e,t=n&gt.Optional&&t===oa?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Sd]=o[Sd]||[]).unshift(Qn(e)),r)throw o;return function fb(i,e,t,n){const r=i[Sd];throw e[gu]&&r.unshift(e[gu]),i.message=function Vf(i,e,t,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=Qn(e);if(Array.isArray(e))r=e.map(Qn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Qn(a)))}r=`{${s.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(db,"\n  ")}`}("\n"+i.message,r,t,n),i.ngTokenPath=r,i[Sd]=null,i}(o,e,"R3InjectorError",this.source)}throw o}finally{Xs(s),dc(r)}}resolveInjectorInitializers(){const e=dc(this),t=Xs(void 0);try{const n=this.get(h_.multi,In,gt.Self);for(const r of n)r()}finally{dc(e),Xs(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(Qn(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(e){let t=mc(e=vt(e))?e:vt(e&&e.provide);const n=function ZE(i){return p_(i)?xu(void 0,i.useValue):xu(__(i),Ld)}(e);if(mc(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=xu(void 0,Ld,!0),r.factory=()=>Ad(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===Ld&&(t.value=YE,t.value=t.factory()),"object"==typeof t.value&&t.value&&function JE(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=vt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function g_(i){const e=gg(i),t=null!==e?e.factory:tc(i);if(null!==t)return t;if(i instanceof Se)throw new _e(204,!1);if(i instanceof Function)return function KE(i){const e=i.length;if(e>0)throw cc(e,"?"),new _e(204,!1);const t=function KS(i){const e=i&&(i[uf]||i[R0]);if(e){const t=function ci(i){if(i.hasOwnProperty("name"))return i.name;const e=(""+i).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(i);return null!==t?()=>t.factory(i):()=>new i}(i);throw new _e(204,!1)}function __(i,e,t){let n;if(mc(i)){const r=vt(i);return tc(r)||g_(r)}if(p_(i))n=()=>vt(i.useValue);else if(function Hb(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Ad(i.deps||[]));else if(function zb(i){return!(!i||!i.useExisting)}(i))n=()=>X(vt(i.useExisting));else{const r=vt(i&&(i.useClass||i.provide));if(!function Qf(i){return!!i.deps}(i))return tc(r)||g_(r);n=()=>new r(...Ad(i.deps))}return n}function xu(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function eA(i){return!!i.\u0275providers}function y_(i,e){for(const t of i)Array.isArray(t)?y_(t,e):eA(t)?y_(t.\u0275providers,e):e(t)}class Wb{}class iA{resolveComponentFactory(e){throw function nA(i){const e=Error(`No component factory found for ${Qn(i)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=i,e}(e)}}let gc=(()=>{class i{}return i.NULL=new iA,i})();function rA(){return wu(D(),we())}function wu(i,e){return new $t(Qs(i,e))}let $t=(()=>{class i{constructor(t){this.nativeElement=t}}return i.__NG_ELEMENT_ID__=rA,i})();function sA(i){return i instanceof $t?i.nativeElement:i}class Mu{}let ua=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function oA(){const i=we(),t=Ps(D().index,i);return(Gr(t)?t:i)[11]}(),i})(),aA=(()=>{class i{}return i.\u0275prov=Oe({token:i,providedIn:"root",factory:()=>null}),i})();class _c{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const lA=new _c("14.1.2"),Cu={};function rp(i){return i.ngOriginalError}class Ha{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&rp(e);for(;t&&rp(t);)t=rp(t);return t||null}}const C_=new Map;let mA=0;const E_="__ngContext__";function Lr(i,e){Gr(e)?(i[E_]=e[20],function _A(i){C_.set(i[20],i)}(e)):i[E_]=e}function Kr(i){const e=i[E_];return"number"==typeof e?function Yb(i){return C_.get(i)||null}(e):e||null}function A_(i){const e=Kr(i);return e?Gr(e)?e:e.lView:null}const MA=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind($n))();function Ga(i){return i instanceof Function?i():i}var ms=(()=>((ms=ms||{})[ms.Important=1]="Important",ms[ms.DashCase=2]="DashCase",ms))();function I_(i,e){return undefined(i,e)}function Su(i){const e=i[3];return Mo(e)?e[3]:e}function R_(i){return Bd(i[13])}function ap(i){return Bd(i[4])}function Bd(i){for(;null!==i&&!Mo(i);)i=i[4];return i}function Ro(i,e,t,n,r){if(null!=n){let s,o=!1;Mo(n)?s=n:Gr(n)&&(o=!0,n=n[0]);const a=_i(n);0===i&&null!==t?null==r?ox(e,t,a):vc(e,t,a,r||null,!0):1===i&&null!==t?vc(e,t,a,r||null,!0):2===i?function hx(i,e,t){const n=cp(i,e);n&&function PA(i,e,t,n){i.removeChild(e,t,n)}(i,n,e,t)}(e,a,o):3===i&&e.destroyNode(a),null!=s&&function LA(i,e,t,n,r){const s=t[7];s!==_i(t)&&Ro(e,i,n,s,r);for(let a=10;a<t.length;a++){const l=t[a];pr(l[1],l,i,e,n,s)}}(e,i,s,t,r)}}function k_(i,e,t){return i.createElement(e,t)}function O_(i,e){const t=i[9],n=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,md(r,-1)),t.splice(n,1)}function L_(i,e){if(i.length<=10)return;const t=10+e,n=i[t];if(n){const r=n[17];null!==r&&r!==i&&O_(r,n),e>0&&(i[t-1][4]=n[4]);const s=Cd(i,10+e);!function RA(i,e){pr(i,e,e[11],2,null,null),e[0]=null,e[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function Bn(i,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&pr(i,e,t,3,null,null),function en(i){let e=i[13];if(!e)return F_(i[1],i);for(;e;){let t=null;if(Gr(e))t=e[13];else{const n=e[10];n&&(t=n)}if(!t){for(;e&&!e[4]&&e!==i;)Gr(e)&&F_(e[1],e),e=e[3];null===e&&(e=i),Gr(e)&&F_(e[1],e),t=e&&e[4]}e=t}}(e)}}function F_(i,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function lp(i,e){let t;if(null!=i&&null!=(t=i.destroyHooks))for(let n=0;n<t.length;n+=2){const r=e[t[n]];if(!(r instanceof yd)){const s=t[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(i,e),function ix(i,e){const t=i.cleanup,n=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):_i(e[o]),l=n[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),s+=2}else{const o=n[r=t[s+1]];t[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();e[7]=null}}(i,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Mo(e[3])){t!==e[3]&&O_(t,e);const n=e[19];null!==n&&n.detachView(i)}!function yA(i){C_.delete(i[20])}(e)}}function rx(i,e,t){return function sx(i,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===Zs.None||r===Zs.Emulated)return null}return Qs(n,t)}(i,e.parent,t)}function vc(i,e,t,n,r){i.insertBefore(e,t,n,r)}function ox(i,e,t){i.appendChild(e,t)}function ax(i,e,t,n,r){null!==n?vc(i,e,t,n,r):ox(i,e,t)}function cp(i,e){return i.parentNode(e)}function lx(i,e,t){return ux(i,e,t)}let ux=function cx(i,e,t){return 40&i.type?Qs(i,t):null};function dp(i,e,t,n){const r=rx(i,n,e),s=e[11],a=lx(n.parent||e[6],n,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)ax(s,r,t[l],a,!1);else ax(s,r,t,a,!1)}function Eu(i,e){if(null!==e){const t=e.type;if(3&t)return Qs(e,i);if(4&t)return B_(-1,i[e.index]);if(8&t){const n=e.child;if(null!==n)return Eu(i,n);{const r=i[e.index];return Mo(r)?B_(-1,r):_i(r)}}if(32&t)return I_(e,i)()||_i(i[e.index]);{const n=dx(i,e);return null!==n?Array.isArray(n)?n[0]:Eu(Su(i[16]),n):Eu(i,e.next)}}return null}function dx(i,e){return null!==e?i[16][6].projection[e.projection]:null}function B_(i,e){const t=10+i+1;if(t<e.length){const n=e[t],r=n[1].firstChild;if(null!==r)return Eu(n,r)}return e[7]}function Wi(i,e,t,n,r,s,o){for(;null!=t;){const a=n[t.index],l=t.type;if(o&&0===e&&(a&&Lr(_i(a),n),t.flags|=4),64!=(64&t.flags))if(8&l)Wi(i,e,t.child,n,r,s,!1),Ro(e,i,r,a,s);else if(32&l){const c=I_(t,n);let d;for(;d=c();)Ro(e,i,r,d,s);Ro(e,i,r,a,s)}else 16&l?fx(i,e,n,t,r,s):Ro(e,i,r,a,s);t=o?t.projectionNext:t.next}}function pr(i,e,t,n,r,s){Wi(t,n,i.firstChild,e,r,s,!1)}function fx(i,e,t,n,r,s){const o=t[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Ro(e,i,r,l[c],s);else Wi(i,e,l,o[3],r,s,!0)}function mx(i,e,t){i.setAttribute(e,"style",t)}function U_(i,e,t){""===t?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function gx(i,e,t){let n=i.length;for(;;){const r=i.indexOf(e,t);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=e.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}t=r+1}}const _x="ng-template";function NA(i,e,t){let n=0;for(;n<i.length;){let r=i[n++];if(t&&"class"===r){if(r=i[n],-1!==gx(r.toLowerCase(),e,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function yx(i){return 4===i.type&&i.value!==_x}function vx(i,e,t){return e===(4!==i.type||t?i.value:_x)}function bx(i,e,t){let n=4;const r=i.attrs||[],s=function Au(i){for(let e=0;e<i.length;e++)if(fr(i[e]))return e;return i.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!vx(i,l,t)||""===l&&1===e.length){if(Po(n))return!1;o=!0}}else{const c=8&n?l:e[++a];if(8&n&&null!==i.attrs){if(!NA(i.attrs,c,t)){if(Po(n))return!1;o=!0}continue}const h=BA(8&n?"class":l,r,yx(i),t);if(-1===h){if(Po(n))return!1;o=!0;continue}if(""!==c){let p;p=h>s?"":r[h+1].toLowerCase();const m=8&n?p:null;if(m&&-1!==gx(m,c,0)||2&n&&c!==p){if(Po(n))return!1;o=!0}}}}else{if(!o&&!Po(n)&&!Po(l))return!1;if(o&&Po(l))continue;o=!1,n=l|1&n}}return Po(n)||o}function Po(i){return 0==(1&i)}function BA(i,e,t,n){if(null===e)return-1;let r=0;if(n||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function VA(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){const n=i[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,i)}function xx(i,e,t=!1){for(let n=0;n<e.length;n++)if(bx(i,e[n],t))return!0;return!1}function zA(i,e){e:for(let t=0;t<e.length;t++){const n=e[t];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function wx(i,e){return i?":not("+e.trim()+")":e}function HA(i){let e=i[0],t=1,n=2,r="",s=!1;for(;t<i.length;){let o=i[t];if("string"==typeof o)if(2&n){const a=i[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Po(o)&&(e+=wx(s,r),r=""),n=o,s=s||!Po(n);t++}return""!==r&&(e+=wx(s,r)),e}const Lt={};function J(i){Cx(hn(),we(),$r()+i,!1)}function Cx(i,e,t,n){if(!n)if(3==(3&e[2])){const s=i.preOrderCheckHooks;null!==s&&_d(e,s,t)}else{const s=i.preOrderHooks;null!==s&&Df(e,s,0,t)}ml(t)}function Dx(i,e=null,t=null,n){const r=Tx(i,e,t,n);return r.resolveInjectorInitializers(),r}function Tx(i,e=null,t=null,n,r=new Set){const s=[t||In,jE(i)];return n=n||("object"==typeof i?void 0:Qn(i)),new Gb(s,e||Jf(),n||null,r)}let bi=(()=>{class i{static create(t,n){if(Array.isArray(t))return Dx({name:""},n,t,"");{const r=t.name??"";return Dx({name:r},t.parent,t.providers,r)}}}return i.THROW_IF_NOT_FOUND=oa,i.NULL=new Bb,i.\u0275prov=Oe({token:i,providedIn:"any",factory:()=>X(Fb)}),i.__NG_ELEMENT_ID__=-1,i})();function R(i,e=gt.Default){const t=we();return null===t?X(i,e):eb(D(),t,vt(i),e)}function bc(){throw new Error("invalid")}function Ud(i,e){return i<<17|e<<2}function ko(i){return i>>17&32767}function Vd(i){return 2|i}function Oo(i){return(131068&i)>>2}function q_(i,e){return-131069&i|e<<2}function X_(i){return 1|i}function Fk(i,e){const t=i.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const r=t[n],s=t[n+1];if(-1!==s){const o=i.data[s];Og(r),o.contentQueries(2,e[s],s)}}}function Gx(i,e,t,n,r,s,o,a,l,c,d){const h=e.blueprint.slice();return h[0]=r,h[2]=76|n,(null!==d||i&&1024&i[2])&&(h[2]|=1024),su(h),h[3]=h[15]=i,h[8]=t,h[10]=o||i&&i[10],h[11]=a||i&&i[11],h[12]=l||i&&i[12]||null,h[9]=c||i&&i[9]||null,h[6]=s,h[20]=function gA(){return mA++}(),h[21]=d,h[16]=2==e.type?i[16]:h,h}function gp(i,e,t,n,r){let s=i.data[e];if(null===s)s=function uD(i,e,t,n,r){const s=nc(),o=un(),l=i.data[e]=function L5(i,e,t,n,r,s){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(i,e,t,n,r),function cE(){return bt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=n,s.attrs=r;const o=function fl(){const i=bt.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Li(s,!0),s}function _p(i,e,t,n){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function Wx(i,e,t){Lg(e);try{const n=i.viewQuery;null!==n&&vD(1,n,t);const r=i.template;null!==r&&Nk(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Fk(i,e),i.staticViewQueries&&vD(2,i.viewQuery,t);const s=i.components;null!==s&&function R5(i,e){for(let t=0;t<e.length;t++)Z5(i,e[t])}(e,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[2]&=-5,Fg()}}function J_(i,e,t,n){const r=e[2];if(128!=(128&r)){Lg(e);try{su(e),function G0(i){return bt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==t&&Nk(i,e,t,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&_d(e,c,null)}else{const c=i.preOrderHooks;null!==c&&Df(e,c,0,null),Ao(e,0)}if(function Y5(i){for(let e=R_(i);null!==e;e=ap(e)){if(!e[2])continue;const t=e[9];for(let n=0;n<t.length;n++){const r=t[n],s=r[3];0==(512&r[2])&&md(s,1),r[2]|=512}}}(e),function X5(i){for(let e=R_(i);null!==e;e=ap(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];pd(n)&&J_(r,n,r.template,n[8])}}(e),null!==i.contentQueries&&Fk(i,e),o){const c=i.contentCheckHooks;null!==c&&_d(e,c)}else{const c=i.contentHooks;null!==c&&Df(e,c,1),Ao(e,1)}!function Hx(i,e){const t=i.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const r=t[n];if(r<0)ml(~r);else{const s=r,o=t[++n],a=t[++n];uE(o,s),a(2,e[s])}}}finally{ml(-1)}}(i,e);const a=i.components;null!==a&&function I5(i,e){for(let t=0;t<e.length;t++)K5(i,e[t])}(e,a);const l=i.viewQuery;if(null!==l&&vD(2,l,n),o){const c=i.viewCheckHooks;null!==c&&_d(e,c)}else{const c=i.viewHooks;null!==c&&Df(e,c,2),Ao(e,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,md(e[3],-1))}finally{Fg()}}}function P5(i,e,t,n){const r=e[10],o=z0(e);try{!o&&r.begin&&r.begin(),o&&Wx(i,e,n),J_(i,e,t,n)}finally{!o&&r.end&&r.end()}}function Nk(i,e,t,n,r){const s=$r(),o=2&n;try{ml(-1),o&&e.length>22&&Cx(i,e,22,!1),t(n,r)}finally{ml(s)}}function Bk(i,e,t){if(wg(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function dD(i,e,t){!H0()||(function V5(i,e,t,n){const r=t.directiveStart,s=t.directiveEnd;i.firstCreatePass||du(t,e),Lr(n,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=Co(l);c&&$5(e,t,l);const d=oc(e,i,a,t);Lr(d,e),null!==o&&j5(0,a-r,d,l,0,o),c&&(Ps(t.index,e)[8]=d)}}(i,e,t,Qs(t,e)),128==(128&t.flags)&&function z5(i,e,t){const n=t.directiveStart,r=t.directiveEnd,s=t.index,o=function dE(){return bt.lFrame.currentDirectiveIndex}();try{ml(s);for(let a=n;a<r;a++){const l=i.data[a],c=e[a];kg(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&$k(l,c)}}finally{ml(-1),kg(o)}}(i,e,t))}function hD(i,e,t=Qs){const n=e.localNames;if(null!==n){let r=e.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?t(e,i):i[o];i[r++]=a}}}function Uk(i){const e=i.tView;return null===e||e.incompleteFirstPass?i.tView=fD(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):e}function fD(i,e,t,n,r,s,o,a,l,c){const d=22+n,h=d+r,p=function k5(i,e){const t=[];for(let n=0;n<e;n++)t.push(n<i?null:Lt);return t}(d,h),m="function"==typeof c?c():c;return p[1]={type:i,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1}}function Vk(i,e,t,n){const r=Jk(e);null===t?r.push(n):(r.push(t),i.firstCreatePass&&Qk(i).push(n,r.length-1))}function zk(i,e,t){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(t=null===t?{}:t).hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}return t}function Hk(i,e){const n=e.directiveEnd,r=i.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<n;c++){const d=r[c],h=d.inputs,p=null===s||yx(e)?null:q5(h,s);o.push(p),a=zk(h,c,a),l=zk(d.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}function No(i,e,t,n,r,s,o,a){const l=Qs(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[n])?(bD(i,t,d,n,r),mf(e)&&Gk(t,e.index)):3&e.type&&(n=function F5(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,e.value||"",n):r,s.setProperty(l,n,r))}function Gk(i,e){const t=Ps(e,i);16&t[2]||(t[2]|=32)}function pD(i,e,t,n){let r=!1;if(H0()){const s=function H5(i,e,t){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];xx(t,o.selectors,!1)&&(r||(r=[]),Pf(du(t,e),i,o.type),Co(o)?(jk(i,t),r.unshift(o)):r.push(o))}return r}(i,e,t),o=null===n?null:{"":-1};if(null!==s){r=!0,qk(t,i.data.length,s.length);for(let d=0;d<s.length;d++){const h=s[d];h.providersResolver&&h.providersResolver(h)}let a=!1,l=!1,c=_p(i,e,s.length,null);for(let d=0;d<s.length;d++){const h=s[d];t.mergedAttrs=bd(t.mergedAttrs,h.hostAttrs),Xk(i,t,e,c,h),W5(c,h,o),null!==h.contentQueries&&(t.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=128);const p=h.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t.index),a=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t.index),l=!0),c++}Hk(i,t)}o&&function G5(i,e,t){if(e){const n=i.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new _e(-301,!1);n.push(e[r],s)}}}(t,n,o)}return t.mergedAttrs=bd(t.mergedAttrs,t.attrs),r}function Wk(i,e,t,n,r,s){const o=s.hostBindings;if(o){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~e.index;(function U5(i){let e=i.length;for(;e>0;){const t=i[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(n,r,o)}}function $k(i,e){null!==i.hostBindings&&i.hostBindings(1,e)}function jk(i,e){e.flags|=2,(i.components||(i.components=[])).push(e.index)}function W5(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;Co(e)&&(t[""]=i)}}function qk(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}function Xk(i,e,t,n,r){i.data[n]=r;const s=r.factory||(r.factory=tc(r.type)),o=new yd(s,Co(r),R);i.blueprint[n]=o,t[n]=o,Wk(i,e,0,n,_p(i,t,r.hostVars,Lt),r)}function $5(i,e,t){const n=Qs(e,i),r=Uk(t),s=i[10],o=$x(i,Gx(i,r,null,t.onPush?32:16,n,e,s,s.createRenderer(n,t),null,null,null));i[e.index]=o}function Al(i,e,t,n,r,s){const o=Qs(i,e);!function mD(i,e,t,n,r,s,o){if(null==s)i.removeAttribute(e,r,t);else{const a=null==o?Bt(s):o(s,n||"",r);i.setAttribute(e,r,a,t)}}(e[11],o,s,i.value,t,n,r)}function j5(i,e,t,n,r,s){const o=s[e];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],h=o[l++];null!==a?n.setInput(t,h,c,d):t[d]=h}}}function q5(i,e){let t=null,n=0;for(;n<e.length;){const r=e[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,i[r],e[n+1])),n+=2}else n+=2;else n+=4}return t}function Yk(i,e,t,n){return new Array(i,!0,!1,e,null,0,n,t,null,null)}function K5(i,e){const t=Ps(e,i);if(pd(t)){const n=t[1];48&t[2]?J_(n,t,n.template,t[8]):t[5]>0&&gD(t)}}function gD(i){for(let n=R_(i);null!==n;n=ap(n))for(let r=10;r<n.length;r++){const s=n[r];if(pd(s))if(512&s[2]){const o=s[1];J_(o,s,o.template,s[8])}else s[5]>0&&gD(s)}const t=i[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Ps(t[n],i);pd(r)&&r[5]>0&&gD(r)}}function Z5(i,e){const t=Ps(e,i),n=t[1];(function J5(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])})(n,t),Wx(n,t,t[8])}function $x(i,e){return i[13]?i[14][4]=e:i[13]=e,i[14]=e,e}function _D(i){for(;i;){i[2]|=32;const e=Su(i);if(_f(i)&&!e)return i;i=e}return null}function Zk(i){!function Kk(i){for(let e=0;e<i.components.length;e++){const t=i.components[e],n=A_(t);if(null!==n){const r=n[1];P5(r,n,r.template,t)}}}(i[8])}function vD(i,e,t){Og(0),e(i,t)}const eG=(()=>Promise.resolve(null))();function Jk(i){return i[7]||(i[7]=[])}function Qk(i){return i.cleanup||(i.cleanup=[])}function eO(i,e,t){return(null===i||Co(i))&&(t=function Rg(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(t[e.index])),t[11]}function tO(i,e){const t=i[9],n=t?t.get(Ha,null):null;n&&n.handleError(e)}function bD(i,e,t,n,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function xc(i,e,t){const n=fd(e,i);!function ex(i,e,t){i.setValue(e,t)}(i[11],n,t)}function jx(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=cf(r,a):2==s&&(n=cf(n,a+": "+e[++o]+";"))}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}function qx(i,e,t,n,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&n.push(_i(s)),Mo(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&qx(l[1],l,c,n)}const o=t.type;if(8&o)qx(i,e,t.child,n);else if(32&o){const a=I_(t,e);let l;for(;l=a();)n.push(l)}else if(16&o){const a=dx(e,t);if(Array.isArray(a))n.push(...a);else{const l=Su(e[16]);qx(l[1],l,a,n,!0)}}t=r?t.projectionNext:t.next}return n}class Q_{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return qx(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Mo(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(L_(e,n),Cd(t,n))}this._attachedToViewContainer=!1}Bn(this._lView[1],this._lView)}onDestroy(e){Vk(this._lView[1],this._lView,null,e)}markForCheck(){_D(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function yD(i,e,t){const n=e[10];n.begin&&n.begin();try{J_(i,e,i.template,t)}catch(r){throw tO(e,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $a(i,e){pr(i,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=e}}class tG extends Q_{constructor(e){super(e),this._view=e}detectChanges(){Zk(this._view)}checkNoChanges(){}get context(){return null}}class xD extends gc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Vn(e);return new ey(t,this.ngModule)}}function nO(i){const e=[];for(let t in i)i.hasOwnProperty(t)&&e.push({propName:i[t],templateName:t});return e}class iG{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){const r=this.injector.get(e,Cu,n);return r!==Cu||t===Cu?r:this.parentInjector.get(e,t,n)}}class ey extends Wb{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function GA(i){return i.map(HA).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return nO(this.componentDef.inputs)}get outputs(){return nO(this.componentDef.outputs)}create(e,t,n,r){let s=(r=r||this.ngModule)instanceof Ml?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new iG(e,s):e,a=o.get(Mu,null);if(null===a)throw new _e(407,!1);const l=o.get(aA,null),c=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",h=n?function O5(i,e,t){return i.selectRootElement(e,t===Zs.ShadowDom)}(c,n,this.componentDef.encapsulation):k_(a.createRenderer(null,this.componentDef),d,function nG(i){const e=i.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(d)),p=this.componentDef.onPush?288:272,m=function lG(i,e){return{components:[],scheduler:i||MA,clean:eG,playerHandler:e||null,flags:0}}(),_=fD(0,null,null,1,0,null,null,null,null,null),b=Gx(null,_,m,p,null,null,a,c,l,o,null);let v,y;Lg(b);try{const M=function oG(i,e,t,n,r,s){const o=t[1];t[22]=i;const l=gp(o,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(jx(l,c,!0),null!==i&&(vd(r,i,c),null!==l.classes&&U_(r,i,l.classes),null!==l.styles&&mx(r,i,l.styles)));const d=n.createRenderer(i,e),h=Gx(t,Uk(e),null,e.onPush?32:16,t[22],l,n,d,s||null,null,null);return o.firstCreatePass&&(Pf(du(l,t),o,e.type),jk(o,l),qk(l,t.length,1)),$x(t,h),t[22]=h}(h,this.componentDef,b,a,c);if(h)if(n)vd(c,h,["ng-version",lA.full]);else{const{attrs:x,classes:C}=function Mx(i){const e=[],t=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&e.push(s,i[++n]):8===r&&t.push(s);else{if(!Po(r))break;r=s}n++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);x&&vd(c,h,x),C&&C.length>0&&U_(c,h,C.join(" "))}if(y=ki(_,22),void 0!==t){const x=y.projection=[];for(let C=0;C<this.ngContentSelectors.length;C++){const E=t[C];x.push(null!=E?Array.from(E):null)}}v=function aG(i,e,t,n,r){const s=t[1],o=function B5(i,e,t){const n=D();i.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Xk(i,n,e,_p(i,e,1,null),t),Hk(i,n));const r=oc(e,i,n.directiveStart,n);Lr(r,e);const s=Qs(n,e);return s&&Lr(s,e),r}(s,t,e);if(n.components.push(o),i[8]=o,null!==r)for(const l of r)l(o,e);if(e.contentQueries){const l=D();e.contentQueries(1,o,l.directiveStart)}const a=D();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ml(a.index),Wk(t[1],a,0,a.directiveStart,a.directiveEnd,e),$k(e,o)),o}(M,this.componentDef,b,m,[cG]),Wx(_,b,null)}finally{Fg()}return new sG(this.componentType,v,wu(y,b),b,y)}}class sG extends class tA{}{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new tG(r),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[e])){const s=this._rootLView;bD(s[1],s,r,e,t),Gk(s,this._tNode.index)}}get injector(){return new ac(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function cG(){const i=D();Af(we()[1],i)}function ht(i){let e=function iO(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),t=!0;const n=[i];for(;e;){let r;if(Co(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new _e(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);const o=i;o.inputs=wD(i.inputs),o.declaredInputs=wD(i.declaredInputs),o.outputs=wD(i.outputs);const a=r.hostBindings;a&&fG(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&dG(i,l),c&&hG(i,c),pg(i.inputs,r.inputs),pg(i.declaredInputs,r.declaredInputs),pg(i.outputs,r.outputs),Co(r)&&r.data.animation){const d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===ht&&(t=!1)}}e=Object.getPrototypeOf(e)}!function uG(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=bd(r.hostAttrs,t=bd(t,r.hostAttrs))}}(n)}function wD(i){return i===Kl?{}:i===In?[]:i}function dG(i,e){const t=i.viewQuery;i.viewQuery=t?(n,r)=>{e(n,r),t(n,r)}:e}function hG(i,e){const t=i.contentQueries;i.contentQueries=t?(n,r,s)=>{e(n,r,s),t(n,r,s)}:e}function fG(i,e){const t=i.hostBindings;i.hostBindings=t?(n,r)=>{e(n,r),t(n,r)}:e}let Xx=null;function zd(){if(!Xx){const i=$n.Symbol;if(i&&i.iterator)Xx=i.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Xx=n)}}}return Xx}function ty(i){return!!MD(i)&&(Array.isArray(i)||!(i instanceof Map)&&zd()in i)}function MD(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Dl(i,e,t){return i[e]=t}function _s(i,e,t){return!Object.is(i[e],t)&&(i[e]=t,!0)}function Hd(i,e,t,n){const r=_s(i,e,t);return _s(i,e+1,n)||r}function Yt(i,e,t,n){const r=we();return _s(r,cu(),e)&&(hn(),Al(yi(),r,i,e,t,n)),Yt}function vp(i,e,t,n){return _s(i,cu(),t)?e+Bt(t)+n:Lt}function bp(i,e,t,n,r,s){const a=Hd(i,function Na(){return bt.lFrame.bindingIndex}(),t,r);return wr(2),a?e+Bt(t)+n+Bt(r)+s:Lt}function Pe(i,e,t,n,r,s,o,a){const l=we(),c=hn(),d=i+22,h=c.firstCreatePass?function wG(i,e,t,n,r,s,o,a,l){const c=e.consts,d=gp(e,i,4,o||null,ta(c,a));pD(e,t,d,ta(c,l)),Af(e,d);const h=d.tViews=fD(2,d,n,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,c,l,e,t,n,r,s,o):c.data[d];Li(h,!1);const p=l[11].createComment("");dp(c,l,p,h),Lr(p,l),$x(l,l[d]=Yk(p,l,p,h)),gf(h)&&dD(c,l,h),null!=o&&hD(l,h,a)}function ja(i){return Oi(function lE(){return bt.lFrame.contextLView}(),22+i)}function ee(i,e,t){const n=we();return _s(n,cu(),e)&&No(hn(),yi(),n,i,e,n[11],t,!1),ee}function CD(i,e,t,n,r){const o=r?"class":"style";bD(i,t,e.inputs[o],o,n)}function se(i,e,t,n){const r=we(),s=hn(),o=22+i,a=r[11],l=r[o]=k_(a,e,function gd(){return bt.lFrame.currentNamespace}()),c=s.firstCreatePass?function CG(i,e,t,n,r,s,o){const a=e.consts,c=gp(e,i,2,r,ta(a,s));return pD(e,t,c,ta(a,o)),null!==c.attrs&&jx(c,c.attrs,!1),null!==c.mergedAttrs&&jx(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,n):s.data[o];Li(c,!0);const d=c.mergedAttrs;null!==d&&vd(a,l,d);const h=c.classes;null!==h&&U_(a,l,h);const p=c.styles;return null!==p&&mx(a,l,p),64!=(64&c.flags)&&dp(s,r,l,c),0===function Cf(){return bt.lFrame.elementDepthCount}()&&Lr(l,r),function au(){bt.lFrame.elementDepthCount++}(),gf(c)&&(dD(s,r,c),Bk(s,c,r)),null!==n&&hD(r,c),se}function ae(){let i=D();un()?Pg():(i=i.parent,Li(i,!1));const e=i;!function sE(){bt.lFrame.elementDepthCount--}();const t=hn();return t.firstCreatePass&&(Af(t,i),wg(i)&&t.queries.elementEnd(i)),null!=e.classesWithoutHost&&function Z0(i){return 0!=(16&i.flags)}(e)&&CD(t,e,we(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function gE(i){return 0!=(32&i.flags)}(e)&&CD(t,e,we(),e.stylesWithoutHost,!1),ae}function Qe(i,e,t,n){return se(i,e,t,n),ae(),Qe}function Os(i,e,t){const n=we(),r=hn(),s=i+22,o=r.firstCreatePass?function SG(i,e,t,n,r){const s=e.consts,o=ta(s,n),a=gp(e,i,8,"ng-container",o);return null!==o&&jx(a,o,!0),pD(e,t,a,ta(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,n,e,t):r.data[s];Li(o,!0);const a=n[s]=n[11].createComment("");return dp(r,n,a,o),Lr(a,n),gf(o)&&(dD(r,n,o),Bk(r,o,n)),null!=t&&hD(n,o),Os}function Ls(){let i=D();const e=hn();return un()?Pg():(i=i.parent,Li(i,!1)),e.firstCreatePass&&(Af(e,i),wg(i)&&e.queries.elementEnd(i)),Ls}function Ei(){return we()}function iy(i){return!!i&&"function"==typeof i.then}function pO(i){return!!i&&"function"==typeof i.subscribe}const SD=pO;function nt(i,e,t,n){const r=we(),s=hn(),o=D();return mO(s,r,r[11],o,i,e,0,n),nt}function Kx(i,e){const t=D(),n=we(),r=hn();return mO(r,n,eO(Eo(r.data),t,n),t,i,e),Kx}function mO(i,e,t,n,r,s,o,a){const l=gf(n),d=i.firstCreatePass&&Qk(i),h=e[8],p=Jk(e);let m=!0;if(3&n.type||a){const v=Qs(n,e),y=a?a(v):v,M=p.length,x=a?E=>a(_i(E[n.index])):n.index;let C=null;if(!a&&l&&(C=function EG(i,e,t,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===n){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,e,r,n.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,m=!1;else{s=_O(n,e,h,s,!1);const E=t.listen(y,r,s);p.push(s,E),d&&d.push(r,x,M,M+1)}}else s=_O(n,e,h,s,!1);const _=n.outputs;let b;if(m&&null!==_&&(b=_[r])){const v=b.length;if(v)for(let y=0;y<v;y+=2){const T=e[b[y]][b[y+1]].subscribe(s),O=p.length;p.push(s,T),d&&d.push(r,n.index,O,-(O+1))}}}function gO(i,e,t,n){try{return!1!==t(n)}catch(r){return tO(i,r),!1}}function _O(i,e,t,n,r){return function s(o){if(o===Function)return n;_D(2&i.flags?Ps(i.index,e):e);let l=gO(e,0,n,o),c=s.__ngNextListenerFn__;for(;c;)l=gO(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Te(i=1){return function fE(i){return(bt.lFrame.contextLView=function pE(i,e){for(;i>0;)e=e[15],i--;return e}(i,bt.lFrame.contextLView))[8]}(i)}function AG(i,e){let t=null;const n=function UA(i){const e=i.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(i);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===n?xx(i,s,!0):zA(n,s))return r}else t=r}return t}function ro(i){const e=we()[16][6];if(!e.projection){const n=e.projection=cc(i?i.length:1,null),r=n.slice();let s=e.child;for(;null!==s;){const o=i?AG(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function ti(i,e=0,t){const n=we(),r=hn(),s=gp(r,22+i,16,null,t||null);null===s.projection&&(s.projection=e),Pg(),64!=(64&s.flags)&&function OA(i,e,t){fx(e[11],0,e,t,rx(i,t,e),lx(t.parent||e[6],t,e))}(r,n,s)}function AO(i,e,t,n,r){const s=i[t+1],o=null===e;let a=n?ko(s):Oo(s),l=!1;for(;0!==a&&(!1===l||o);){const d=i[a+1];IG(i[a],e)&&(l=!0,i[a+1]=n?X_(d):Vd(d)),a=n?ko(d):Oo(d)}l&&(i[t+1]=n?Vd(s):X_(s))}function IG(i,e){return null===i||null==e||(Array.isArray(i)?i[1]:i)===e||!(!Array.isArray(i)||"string"!=typeof e)&&pu(i,e)>=0}const Sr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function DO(i){return i.substring(Sr.key,Sr.keyEnd)}function TO(i,e){const t=Sr.textEnd;return t===e?-1:(e=Sr.keyEnd=function OG(i,e,t){for(;e<t&&i.charCodeAt(e)>32;)e++;return e}(i,Sr.key=e,t),Ap(i,e,t))}function Ap(i,e,t){for(;e<t&&i.charCodeAt(e)<=32;)e++;return e}function wc(i,e,t){return qa(i,e,t,!1),wc}function fi(i,e){return qa(i,e,null,!0),fi}function Il(i,e){for(let t=function PG(i){return function RO(i){Sr.key=0,Sr.keyEnd=0,Sr.value=0,Sr.valueEnd=0,Sr.textEnd=i.length}(i),TO(i,Ap(i,0,Sr.textEnd))}(e);t>=0;t=TO(e,t))qr(i,DO(e),!0)}function qa(i,e,t,n){const r=we(),s=hn(),o=wr(2);s.firstUpdatePass&&LO(s,i,o,n),e!==Lt&&_s(r,o,e)&&NO(s,s.data[$r()],r,r[11],i,r[o+1]=function $G(i,e){return null==i||("string"==typeof e?i+=e:"object"==typeof i&&(i=Qn(fs(i)))),i}(e,t),n,o)}function OO(i,e){return e>=i.expandoStartIndex}function LO(i,e,t,n){const r=i.data;if(null===r[t+1]){const s=r[$r()],o=OO(i,t);UO(s,n)&&null===e&&!o&&(e=!1),e=function UG(i,e,t,n){const r=Eo(i);let s=n?e.residualClasses:e.residualStyles;if(null===r)0===(n?e.classBindings:e.styleBindings)&&(t=ry(t=AD(null,i,e,t,n),e.attrs,n),s=null);else{const o=e.directiveStylingLast;if(-1===o||i[o]!==r)if(t=AD(r,i,e,t,n),null===s){let l=function VG(i,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==Oo(n))return i[ko(n)]}(i,e,n);void 0!==l&&Array.isArray(l)&&(l=AD(null,i,e,l[1],n),l=ry(l,e.attrs,n),function zG(i,e,t,n){i[ko(t?e.classBindings:e.styleBindings)]=n}(i,e,n,l))}else s=function HG(i,e,t){let n;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)n=ry(n,i[s].hostAttrs,t);return ry(n,e.attrs,t)}(i,e,n)}return void 0!==s&&(n?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,n),function DG(i,e,t,n,r,s){let o=s?e.classBindings:e.styleBindings,a=ko(o),l=Oo(o);i[n]=t;let d,c=!1;if(Array.isArray(t)){const h=t;d=h[1],(null===d||pu(h,d)>0)&&(c=!0)}else d=t;if(r)if(0!==l){const p=ko(i[a+1]);i[n+1]=Ud(p,a),0!==p&&(i[p+1]=q_(i[p+1],n)),i[a+1]=function rD(i,e){return 131071&i|e<<17}(i[a+1],n)}else i[n+1]=Ud(a,0),0!==a&&(i[a+1]=q_(i[a+1],n)),a=n;else i[n+1]=Ud(l,0),0===a?a=n:i[l+1]=q_(i[l+1],n),l=n;c&&(i[n+1]=Vd(i[n+1])),AO(i,d,n,!0),AO(i,d,n,!1),function TG(i,e,t,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof e&&pu(s,e)>=0&&(t[n+1]=X_(t[n+1]))}(e,d,i,n,s),o=Ud(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,n)}}function AD(i,e,t,n,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],n=ry(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(t.directiveStylingLast=a),n}function ry(i,e,t){const n=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),qr(i,o,!!t||e[++s]))}return void 0===i?null:i}function NO(i,e,t,n,r,s,o,a){if(!(3&e.type))return;const l=i.data,c=l[a+1];Zx(function Bx(i){return 1==(1&i)}(c)?BO(l,e,t,r,Oo(c),o):void 0)||(Zx(s)||function Nx(i){return 2==(2&i)}(c)&&(s=BO(l,null,t,r,a,o)),function px(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let s=-1===n.indexOf("-")?void 0:ms.DashCase;null==r?i.removeStyle(t,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ms.Important),i.setStyle(t,n,r,s))}}(n,o,fd($r(),t),r,s))}function BO(i,e,t,n,r,s){const o=null===e;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),d=c?l[1]:l,h=null===d;let p=t[r+1];p===Lt&&(p=h?In:void 0);let m=h?Yg(p,n):d===n?p:void 0;if(c&&!Zx(m)&&(m=Yg(l,n)),Zx(m)&&(a=m,o))return a;const _=i[r+1];r=o?ko(_):Oo(_)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Yg(l,n))}return a}function Zx(i){return void 0!==i}function UO(i,e){return 0!=(i.flags&(e?16:32))}function Ze(i,e=""){const t=we(),n=hn(),r=i+22,s=n.firstCreatePass?gp(n,r,1,e,null):n.data[r],o=t[r]=function P_(i,e){return i.createText(e)}(t[11],e);dp(n,t,o,s),Li(s,!1)}function pi(i){return es("",i,""),pi}function es(i,e,t){const n=we(),r=vp(n,i,e,t);return r!==Lt&&xc(n,$r(),r),es}function sy(i,e,t,n,r){const s=we(),o=bp(s,i,e,t,n,r);return o!==Lt&&xc(s,$r(),o),sy}function qO(i,e,t){!function Xa(i,e,t,n){const r=hn(),s=wr(2);r.firstUpdatePass&&LO(r,null,s,n);const o=we();if(t!==Lt&&_s(o,s,t)){const a=r.data[$r()];if(UO(a,n)&&!OO(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=cf(l,t||"")),CD(r,a,o,t,n)}else!function WG(i,e,t,n,r,s,o,a){r===Lt&&(r=In);let l=0,c=0,d=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==d||null!==h;){const p=l<r.length?r[l+1]:void 0,m=c<s.length?s[c+1]:void 0;let b,_=null;d===h?(l+=2,c+=2,p!==m&&(_=h,b=m)):null===h||null!==d&&d<h?(l+=2,_=d):(c+=2,_=h,b=m),null!==_&&NO(i,e,t,n,_,b,o,a),d=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function GG(i,e,t){if(null==t||""===t)return In;const n=[],r=fs(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&e(n,r);return n}(i,e,t),n,s)}}(qr,Il,vp(we(),i,e,t),!0)}function Dp(i,e,t){const n=we();return _s(n,cu(),e)&&No(hn(),yi(),n,i,e,n[11],t,!0),Dp}function Jx(i,e,t){const n=we();if(_s(n,cu(),e)){const s=hn(),o=yi();No(s,o,n,i,e,eO(Eo(s.data),o,n),t,!0)}return Jx}const Gd=void 0;var uW=["en",[["a","p"],["AM","PM"],Gd],[["AM","PM"],Gd,Gd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gd,"{1} 'at' {0}",Gd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cW(i){const t=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Tp={};function Fs(i){const e=function dW(i){return i.toLowerCase().replace(/_/g,"-")}(i);let t=rL(e);if(t)return t;const n=e.split("-")[0];if(t=rL(n),t)return t;if("en"===n)return uW;throw new _e(701,!1)}function rL(i){return i in Tp||(Tp[i]=$n.ng&&$n.ng.common&&$n.ng.common.locales&&$n.ng.common.locales[i]),Tp[i]}var qe=(()=>((qe=qe||{})[qe.LocaleId=0]="LocaleId",qe[qe.DayPeriodsFormat=1]="DayPeriodsFormat",qe[qe.DayPeriodsStandalone=2]="DayPeriodsStandalone",qe[qe.DaysFormat=3]="DaysFormat",qe[qe.DaysStandalone=4]="DaysStandalone",qe[qe.MonthsFormat=5]="MonthsFormat",qe[qe.MonthsStandalone=6]="MonthsStandalone",qe[qe.Eras=7]="Eras",qe[qe.FirstDayOfWeek=8]="FirstDayOfWeek",qe[qe.WeekendRange=9]="WeekendRange",qe[qe.DateFormat=10]="DateFormat",qe[qe.TimeFormat=11]="TimeFormat",qe[qe.DateTimeFormat=12]="DateTimeFormat",qe[qe.NumberSymbols=13]="NumberSymbols",qe[qe.NumberFormats=14]="NumberFormats",qe[qe.CurrencyCode=15]="CurrencyCode",qe[qe.CurrencySymbol=16]="CurrencySymbol",qe[qe.CurrencyName=17]="CurrencyName",qe[qe.Currencies=18]="Currencies",qe[qe.Directionality=19]="Directionality",qe[qe.PluralCase=20]="PluralCase",qe[qe.ExtraData=21]="ExtraData",qe))();const Ip="en-US";let sL=Ip;function ID(i,e,t,n,r){if(i=vt(i),Array.isArray(i))for(let s=0;s<i.length;s++)ID(i[s],e,t,n,r);else{const s=hn(),o=we();let a=mc(i)?i:vt(i.provide),l=__(i);const c=D(),d=1048575&c.providerIndexes,h=c.directiveStart,p=c.providerIndexes>>20;if(mc(i)||!i.multi){const m=new yd(l,r,R),_=PD(a,e,r?d:d+p,h);-1===_?(Pf(du(c,o),s,a),RD(s,i,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(m),o.push(m)):(t[_]=m,o[_]=m)}else{const m=PD(a,e,d+p,h),_=PD(a,e,d,d+p),b=m>=0&&t[m],v=_>=0&&t[_];if(r&&!v||!r&&!b){Pf(du(c,o),s,a);const y=function l6(i,e,t,n,r){const s=new yd(i,t,R);return s.multi=[],s.index=e,s.componentProviders=0,IL(s,r,n&&!t),s}(r?a6:o6,t.length,r,n,l);!r&&v&&(t[_].providerFactory=y),RD(s,i,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(y),o.push(y)}else RD(s,i,m>-1?m:_,IL(t[r?_:m],l,!r&&n));!r&&n&&v&&t[_].componentProviders++}}}function RD(i,e,t,n){const r=mc(e),s=function XE(i){return!!i.useClass}(e);if(r||s){const l=(s?vt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){const d=c.indexOf(t);-1===d?c.push(t,[n,l]):c[d+1].push(n,l)}else c.push(t,l)}}}function IL(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function PD(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function o6(i,e,t,n){return kD(this.multi,[])}function a6(i,e,t,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=oc(t,t[1],this.providerFactory.index,n);s=a.slice(0,o),kD(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],kD(r,s);return s}function kD(i,e){for(let t=0;t<i.length;t++)e.push((0,i[t])());return e}function Hn(i,e=[]){return t=>{t.providersResolver=(n,r)=>function s6(i,e,t){const n=hn();if(n.firstCreatePass){const r=Co(i);ID(t,n.data,n.blueprint,r,!0),ID(e,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,e)}}class Wd{}class RL{}class PL extends Wd{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xD(this);const n=Is(e);this._bootstrapComponents=Ga(n.bootstrap),this._r3Injector=Tx(e,t,[{provide:Wd,useValue:this},{provide:gc,useValue:this.componentFactoryResolver}],Qn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class OD extends RL{constructor(e){super(),this.moduleType=e}create(e){return new PL(this.moduleType,e)}}class u6 extends Wd{constructor(e,t,n){super(),this.componentFactoryResolver=new xD(this),this.instance=null;const r=new Gb([...e,{provide:Wd,useValue:this},{provide:gc,useValue:this.componentFactoryResolver}],t||Jf(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function iw(i,e,t=null){return new u6(i,e,t).injector}function Ns(i,e,t){const n=Wr()+i,r=we();return r[n]===Lt?Dl(r,n,t?e.call(t):e()):function ny(i,e){return i[e]}(r,n)}function $d(i,e,t,n){return UL(we(),Wr(),i,e,t,n)}function uy(i,e){const t=i[e];return t===Lt?void 0:t}function UL(i,e,t,n,r,s){const o=e+t;return _s(i,o,r)?Dl(i,o+1,s?n.call(s,r):n(r)):uy(i,o+1)}function Et(i,e){const t=hn();let n;const r=i+22;t.firstCreatePass?(n=function T6(i,e){if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];if(i===n.name)return n}}(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,n.onDestroy)):n=t.data[r];const s=n.factory||(n.factory=tc(n.type)),o=Xs(R);try{const a=uu(!1),l=s();return uu(a),function MG(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}(t,we(),r,l),l}finally{Xs(o)}}function Tt(i,e,t){const n=i+22,r=we(),s=Oi(r,n);return dy(r,n)?UL(r,Wr(),e,s.transform,t,s):s.transform(t)}function FD(i,e,t,n){const r=i+22,s=we(),o=Oi(s,r);return dy(s,r)?function VL(i,e,t,n,r,s,o){const a=e+t;return Hd(i,a,r,s)?Dl(i,a+2,o?n.call(o,r,s):n(r,s)):uy(i,a+2)}(s,Wr(),e,o.transform,t,n,o):o.transform(t,n)}function dy(i,e){return i[1].data[e].pure}function ND(i){return e=>{setTimeout(i,void 0,e)}}const st=class k6 extends Ge{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r=e,s=t||(()=>null),o=n;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=ND(s),r&&(r=ND(r)),o&&(o=ND(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof nn&&e.add(a),a}};function O6(){return this._results[zd()]()}class Pp{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=zd(),n=Pp.prototype;n[t]||(n[t]=O6)}get changes(){return this._changes||(this._changes=new st)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=Or(e);(this._changesDetected=!function ab(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=e[n];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let so=(()=>{class i{}return i.__NG_ELEMENT_ID__=N6,i})();const L6=so,F6=class extends L6{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tViews,r=Gx(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),Wx(n,r,e),new Q_(r)}};function N6(){return rw(D(),we())}function rw(i,e){return 4&i.type?new F6(e,i,wu(i,e)):null}let ts=(()=>{class i{}return i.__NG_ELEMENT_ID__=B6,i})();function B6(){return jL(D(),we())}const U6=ts,WL=class extends U6{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return wu(this._hostTNode,this._hostLView)}get injector(){return new ac(this._hostTNode,this._hostLView)}get parentInjector(){const e=gl(this._hostTNode,this._hostLView);if(Rf(e)){const t=sc(e,this._hostLView),n=Ua(e);return new ac(t[1].data[n+8],t)}return new ac(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=$L(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,n,r,s){const o=e&&!function to(i){return"function"==typeof i}(e);let a;if(o)a=t;else{const h=t||{};a=h.index,n=h.injector,r=h.projectableNodes,s=h.environmentInjector||h.ngModuleRef}const l=o?e:new ey(Vn(e)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const p=(o?c:this.parentInjector).get(Ml,null);p&&(s=p)}const d=l.create(c,r,void 0,s);return this.insert(d.hostView,a),d}insert(e,t){const n=e._lView,r=n[1];if(function rE(i){return Mo(i[3])}(n)){const d=this.indexOf(e);if(-1!==d)this.detach(d);else{const h=n[3],p=new WL(h,h[6],h[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function nx(i,e,t,n){const r=10+n,s=t.length;n>0&&(t[r-1][4]=e),n<s-10?(e[4]=t[r],Ff(t,10+n,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function io(i,e){const t=i[9];e[16]!==e[3][3][16]&&(i[2]=!0),null===t?i[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(i),e[2]|=64}(r,n,o,s);const a=B_(s,o),l=n[11],c=cp(l,o[7]);return null!==c&&function tx(i,e,t,n,r,s){n[0]=r,n[6]=e,pr(i,n,t,1,r,s)}(r,o[6],l,n,c,a),e.attachToViewContainerRef(),Ff(BD(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=$L(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=L_(this._lContainer,t);n&&(Cd(BD(this._lContainer),t),Bn(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=L_(this._lContainer,t);return n&&null!=Cd(BD(this._lContainer),t)?new Q_(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function $L(i){return i[8]}function BD(i){return i[8]||(i[8]=[])}function jL(i,e){let t;const n=e[i.index];if(Mo(n))t=n;else{let r;if(8&i.type)r=_i(n);else{const s=e[11];r=s.createComment("");const o=Qs(i,e);vc(s,cp(s,o),r,function kA(i,e){return i.nextSibling(e)}(s,o),!1)}e[i.index]=t=Yk(n,e,r,i),$x(e,t)}return new WL(t,i,e)}class UD{constructor(e){this.queryList=e,this.matches=null}clone(){return new UD(this.queryList)}setDirty(){this.queryList.setDirty()}}class VD{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<n;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new VD(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==ZL(e,t).matches&&this.queries[t].setDirty()}}class qL{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class zD{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new zD(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class HD{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new HD(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,H6(t,s)),this.matchTNodeWithReadOption(e,t,wd(t,e,s,!1,!1))}else n===so?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,wd(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===$t||r===ts||r===so&&4&t.type)this.addMatch(t.index,-2);else{const s=wd(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function H6(i,e){const t=i.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function W6(i,e,t,n){return-1===t?function G6(i,e){return 11&i.type?wu(i,e):4&i.type?rw(i,e):null}(e,i):-2===t?function $6(i,e,t){return t===$t?wu(e,i):t===so?rw(e,i):t===ts?jL(e,i):void 0}(i,e,n):oc(i,i[1],t,e)}function XL(i,e,t,n){const r=e[19].queries[n];if(null===r.matches){const s=i.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:W6(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function GD(i,e,t,n){const r=i.queries.getByIndex(t),s=r.matches;if(null!==s){const o=XL(i,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],d=e[-l];for(let h=10;h<d.length;h++){const p=d[h];p[17]===p[3]&&GD(p[1],p,c,n)}if(null!==d[9]){const h=d[9];for(let p=0;p<h.length;p++){const m=h[p];GD(m[1],m,c,n)}}}}}return n}function Kt(i){const e=we(),t=hn(),n=$0();Og(n+1);const r=ZL(t,n);if(i.dirty&&z0(e)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?GD(t,e,n,[]):XL(t,e,r,n);i.reset(s,sA),i.notifyOnChanges()}return!0}return!1}function Qi(i,e,t){const n=hn();n.firstCreatePass&&(KL(n,new qL(i,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),YL(n,we(),e)}function Ai(i,e,t,n){const r=hn();if(r.firstCreatePass){const s=D();KL(r,new qL(e,t,n),s.index),function q6(i,e){const t=i.contentQueries||(i.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(i.queries.length-1,e)}(r,i),2==(2&t)&&(r.staticContentQueries=!0)}YL(r,we(),t)}function Zt(){return function j6(i,e){return i[19].queries[e].queryList}(we(),$0())}function YL(i,e,t){const n=new Pp(4==(4&t));Vk(i,e,n,n.destroy),null===e[19]&&(e[19]=new VD),e[19].queries.push(new UD(n))}function KL(i,e,t){null===i.queries&&(i.queries=new zD),i.queries.track(new HD(e,t))}function ZL(i,e){return i.queries.getByIndex(e)}function sw(i,e){return rw(i,e)}function aw(...i){}const lw=new Se("Application Initializer");let cw=(()=>{class i{constructor(t){this.appInits=t,this.resolve=aw,this.reject=aw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(iy(s))t.push(s);else if(SD(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{n()}).catch(r=>{this.reject(r)}),0===t.length&&n(),this.initialized=!0}}return i.\u0275fac=function(t){return new(t||i)(X(lw,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Fp=new Se("AppId",{providedIn:"root",factory:function gF(){return`${XD()}${XD()}${XD()}`}});function XD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _F=new Se("Platform Initializer"),YD=new Se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),yF=new Se("appBootstrapListener"),oo=new Se("AnimationModuleType");let f8=(()=>{class i{log(t){console.log(t)}warn(t){console.warn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Rl=new Se("LocaleId",{providedIn:"root",factory:()=>qn(Rl,gt.Optional|gt.SkipSelf)||function p8(){return typeof $localize<"u"&&$localize.locale||Ip}()});class g8{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let KD=(()=>{class i{compileModuleSync(t){return new OD(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const n=this.compileModuleSync(t),s=Ga(Is(t).declarations).reduce((o,a)=>{const l=Vn(a);return l&&o.push(new ey(l)),o},[]);return new g8(n,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const v8=(()=>Promise.resolve(0))();function ZD(i){typeof Zone>"u"?v8.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Dt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new st(!1),this.onMicrotaskEmpty=new st(!1),this.onStable=new st(!1),this.onError=new st(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function b8(){let i=$n.requestAnimationFrame,e=$n.cancelAnimationFrame;if(typeof Zone<"u"&&i&&e){const t=i[Zone.__symbol__("OriginalDelegate")];t&&(i=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function M8(i){const e=()=>{!function w8(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call($n,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,QD(i),i.isCheckStableRunning=!0,JD(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),QD(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,o,a)=>{try{return xF(i),t.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&e(),wF(i)}},onInvoke:(t,n,r,s,o,a,l)=>{try{return xF(i),t.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&e(),wF(i)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,QD(i),JD(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dt.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(Dt.isInAngularZone())throw new _e(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,x8,aw,aw);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const x8={};function JD(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function QD(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function xF(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function wF(i){i._nesting--,JD(i)}class C8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new st,this.onMicrotaskEmpty=new st,this.onStable=new st,this.onError=new st}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}const MF=new Se(""),uw=new Se("");let nT,eT=(()=>{class i{constructor(t,n,r){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nT||(function S8(i){nT=i}(r),r.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dt.assertNotInAngularZone(),ZD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ZD(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,r){return[]}}return i.\u0275fac=function(t){return new(t||i)(X(Dt),X(tT),X(uw))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})(),tT=(()=>{class i{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return nT?.findTestabilityInTree(this,t,n)??null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Du=null;const CF=new Se("AllowMultipleToken"),iT=new Se("PlatformDestroyListeners");class SF{constructor(e,t){this.name=e,this.token=t}}function AF(i,e,t=[]){const n=`Platform: ${e}`,r=new Se(n);return(s=[])=>{let o=rT();if(!o||o.injector.get(CF,!1)){const a=[...t,...s,{provide:r,useValue:!0}];i?i(a):function D8(i){if(Du&&!Du.get(CF,!1))throw new _e(400,!1);Du=i;const e=i.get(TF);(function EF(i){const e=i.get(_F,null);e&&e.forEach(t=>t())})(i)}(function DF(i=[],e){return bi.create({name:e,providers:[{provide:Od,useValue:"platform"},{provide:iT,useValue:new Set([()=>Du=null])},...i]})}(a,n))}return function I8(i){const e=rT();if(!e)throw new _e(401,!1);return e}()}}function rT(){return Du?.get(TF)??null}let TF=(()=>{class i{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const r=function R8(i,e){let t;return t="noop"===i?new C8:("zone.js"===i?void 0:i)||new Dt(e),t}(n?.ngZone,function IF(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Dt,useValue:r}];return r.run(()=>{const o=bi.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Ha,null);if(!l)throw new _e(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{dw(this._modules,a),c.unsubscribe()})}),function RF(i,e,t){try{const n=t();return iy(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get(cw);return c.runInitializers(),c.donePromise.then(()=>(function oL(i){os(i,"Expected localeId to be defined"),"string"==typeof i&&(sL=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Rl,Ip)||Ip),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,n=[]){const r=PF({},n);return function E8(i,e,t){const n=new OD(t);return Promise.resolve(n)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const n=t.injector.get(Np);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new _e(403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(iT,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(t){return new(t||i)(X(bi))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function PF(i,e){return Array.isArray(e)?e.reduce(PF,i):{...i,...e}}let Np=(()=>{class i{constructor(t,n,r){this._zone=t,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Cn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Cn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Dt.assertNotInAngularZone(),ZD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Dt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=Ts(s,o.pipe(lf()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,n){const r=t instanceof Wb;if(!this._injector.get(cw).done)throw!r&&function Op(i){const e=Vn(i)||cr(i)||zi(i);return null!==e&&e.standalone}(t),new _e(405,false);let o;o=r?t:this._injector.get(gc).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function A8(i){return i.isBoundToModule}(o)?void 0:this._injector.get(Wd),c=o.create(bi.NULL,[],n||o.selector,a),d=c.location.nativeElement,h=c.injector.get(MF,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),dw(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;dw(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(yF,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>dw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new _e(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(t){return new(t||i)(X(Dt),X(Ml),X(Ha))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function dw(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}let OF=!0,ni=(()=>{class i{}return i.__NG_ELEMENT_ID__=O8,i})();function O8(i){return function L8(i,e,t){if(mf(i)&&!t){const n=Ps(i.index,e);return new Q_(n,n)}return 47&i.type?new Q_(e[16],e):null}(D(),we(),16==(16&i))}class UF{constructor(){}supports(e){return ty(e)}create(e){return new z8(e)}}const V8=(i,e)=>e;class z8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||V8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<zF(n,r,s)?t:n,a=zF(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let p=0;p<c;p++){const m=p<s.length?s[p]:s[p]=0,_=m+p;d<=_&&_<c&&(s[p]=m+1)}s[o.previousIndex]=d-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ty(e))throw new _e(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,n=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),n=!0),t=t._next}else r=0,function yG(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{const t=i[zd()]();let n;for(;!(n=t.next()).done;)e(n.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),n=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new H8(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new VF),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VF),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class H8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class G8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class VF{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new G8,this.map.set(t,n)),n.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zF(i,e,t){const n=i.previousIndex;if(null===n)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}class HF{constructor(){}supports(e){return e instanceof Map||MD(e)}create(){return new W8}}class W8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||MD(e)))throw new _e(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,n);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new $8(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class $8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function GF(){return new pw([new UF])}let pw=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(null!=n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||GF()),deps:[[i,new xl,new Io]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(null!=n)return n;throw new _e(901,!1)}}return i.\u0275prov=Oe({token:i,providedIn:"root",factory:GF}),i})();function WF(){return new fy([new HF])}let fy=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||WF()),deps:[[i,new xl,new Io]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(n)return n;throw new _e(901,!1)}}return i.\u0275prov=Oe({token:i,providedIn:"root",factory:WF}),i})();const X8=AF(null,"core",[]);let Y8=(()=>{class i{constructor(t){}}return i.\u0275fac=function(t){return new(t||i)(X(Np))},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({}),i})();let mw=null;function Pl(){return mw}const Ft=new Se("DocumentToken");let cT=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:function(){return function Q8(){return X($F)}()},providedIn:"platform"}),i})();const e$=new Se("Location Initialized");let $F=(()=>{class i extends cT{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pl().getBaseHref(this._doc)}onPopState(t){const n=Pl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=Pl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,n,r){jF()?this._history.pushState(t,n,r):this.location.hash=r}replaceState(t,n,r){jF()?this._history.replaceState(t,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(X(Ft))},i.\u0275prov=Oe({token:i,factory:function(){return function t$(){return new $F(X(Ft))}()},providedIn:"platform"}),i})();function jF(){return!!window.history.pushState}function uT(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function qF(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function Sc(i){return i&&"?"!==i[0]?"?"+i:i}let qd=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:function(){return qn(YF)},providedIn:"root"}),i})();const XF=new Se("appBaseHref");let YF=(()=>{class i extends qd{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??qn(Ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return uT(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+Sc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${n}${r}`:n}pushState(t,n,r,s){const o=this.prepareExternalUrl(r+Sc(s));this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){const o=this.prepareExternalUrl(r+Sc(s));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(X(cT),X(XF,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),n$=(()=>{class i extends qd{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=uT(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,r,s){let o=this.prepareExternalUrl(r+Sc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){let o=this.prepareExternalUrl(r+Sc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(X(cT),X(XF,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})(),py=(()=>{class i{constructor(t){this._subject=new st,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._baseHref=qF(KF(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+Sc(n))}normalize(t){return i.stripTrailingSlash(function r$(i,e){return i&&e.startsWith(i)?e.substring(i.length):e}(this._baseHref,KF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",r=null){this._locationStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sc(n)),r)}replaceState(t,n="",r=null){this._locationStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sc(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(r=>r(t,n))}subscribe(t,n,r){return this._subject.subscribe({next:t,error:n,complete:r})}}return i.normalizeQueryParams=Sc,i.joinWithSlash=uT,i.stripTrailingSlash=qF,i.\u0275fac=function(t){return new(t||i)(X(qd))},i.\u0275prov=Oe({token:i,factory:function(){return function i$(){return new py(X(qd))}()},providedIn:"root"}),i})();function KF(i){return i.replace(/\/index.html$/,"")}var ao=(()=>((ao=ao||{})[ao.Decimal=0]="Decimal",ao[ao.Percent=1]="Percent",ao[ao.Currency=2]="Currency",ao[ao.Scientific=3]="Scientific",ao))(),At=(()=>((At=At||{})[At.Decimal=0]="Decimal",At[At.Group=1]="Group",At[At.List=2]="List",At[At.PercentSign=3]="PercentSign",At[At.PlusSign=4]="PlusSign",At[At.MinusSign=5]="MinusSign",At[At.Exponential=6]="Exponential",At[At.SuperscriptingExponent=7]="SuperscriptingExponent",At[At.PerMille=8]="PerMille",At[At.Infinity=9]="Infinity",At[At.NaN=10]="NaN",At[At.TimeSeparator=11]="TimeSeparator",At[At.CurrencyDecimal=12]="CurrencyDecimal",At[At.CurrencyGroup=13]="CurrencyGroup",At))();function ha(i,e){const t=Fs(i),n=t[qe.NumberSymbols][e];if(typeof n>"u"){if(e===At.CurrencyDecimal)return t[qe.NumberSymbols][At.Decimal];if(e===At.CurrencyGroup)return t[qe.NumberSymbols][At.Group]}return n}const I$=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function yT(i){const e=parseInt(i);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+i);return e}let _y=(()=>{class i{constructor(t,n,r,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(ty(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Qn(n.item)}`);this._toggleClass(n.item,!0)}),t.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!0)):Object.keys(t).forEach(n=>this._toggleClass(n,!!t[n])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!1)):Object.keys(t).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(t,n){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(t){return new(t||i)(R(pw),R(fy),R($t),R(ua))},i.\u0275dir=Ne({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class G${constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pa=(()=>{class i{constructor(t,n,r){this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new G$(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),aN(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{aN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(R(ts),R(so),R(pw))},i.\u0275dir=Ne({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function aN(i,e){i.context.$implicit=e.item}let qi=(()=>{class i{constructor(t,n){this._viewContainer=t,this._context=new $$,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lN("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lN("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(R(ts),R(so))},i.\u0275dir=Ne({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class $${constructor(){this.$implicit=null,this.ngIf=null}}function lN(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${Qn(e)}'.`)}class bT{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Bp=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const n=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(t)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),Sw=(()=>{class i{constructor(t,n,r){this.ngSwitch=r,r._addCase(),this._view=new bT(t,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(t){return new(t||i)(R(ts),R(so),R(Bp,9))},i.\u0275dir=Ne({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),cN=(()=>{class i{constructor(t,n,r){r._addDefault(new bT(t,n))}}return i.\u0275fac=function(t){return new(t||i)(R(ts),R(so),R(Bp,9))},i.\u0275dir=Ne({type:i,selectors:[["","ngSwitchDefault",""]],standalone:!0}),i})(),Ew=(()=>{class i{constructor(t,n,r){this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,n){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:ms.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(n=>this._setStyle(n.key,null)),t.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),t.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(fy),R(ua))},i.\u0275dir=Ne({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),dN=(()=>{class i{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(t){return new(t||i)(R(ts))},i.\u0275dir=Ne({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ui]}),i})();function Za(i,e){return new _e(2100,!1)}class q${createSubscription(e,t){return e.subscribe({next:t,error:n=>{throw n}})}dispose(e){e.unsubscribe()}}class X${createSubscription(e,t){return e.then(t,n=>{throw n})}dispose(e){}}const Y$=new X$,K$=new q$;let Ac=(()=>{class i{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,n=>this._updateLatestValue(t,n))}_selectStrategy(t){if(iy(t))return Y$;if(pO(t))return K$;throw Za()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,n){t===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(R(ni,16))},i.\u0275pipe=ls({name:"async",type:i,pure:!1,standalone:!0}),i})(),hN=(()=>{class i{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=fN}transform(t,n=fN){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const r=this.differ.diff(t),s=n!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function aj(i,e){return{key:i,value:e}}(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return i.\u0275fac=function(t){return new(t||i)(R(fy,16))},i.\u0275pipe=ls({name:"keyvalue",type:i,pure:!1,standalone:!0}),i})();function fN(i,e){const t=i.key,n=e.key;if(t===n)return 0;if(void 0===t)return 1;if(void 0===n)return-1;if(null===t)return 1;if(null===n)return-1;if("string"==typeof t&&"string"==typeof n)return t<n?-1:1;if("number"==typeof t&&"number"==typeof n)return t-n;if("boolean"==typeof t&&"boolean"==typeof n)return t<n?-1:1;const r=String(t),s=String(n);return r==s?0:r<s?-1:1}let pN=(()=>{class i{constructor(t){this._locale=t}transform(t,n,r){if(!function xT(i){return!(null==i||""===i||i!=i)}(t))return null;r=r||this._locale;try{return function F$(i,e,t){return function gT(i,e,t,n,r,s,o=!1){let a="",l=!1;if(isFinite(i)){let c=function B$(i){let n,r,s,o,a,e=Math.abs(i)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))n=[0],r=1;else{for(a--;"0"===e.charAt(a);)a--;for(r-=s,n=[],o=0;s<=a;s++,o++)n[o]=Number(e.charAt(s))}return r>22&&(n=n.splice(0,21),t=r-1,r=1),{digits:n,exponent:t,integerLen:r}}(i);o&&(c=function N$(i){if(0===i.digits[0])return i;const e=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===e?i.digits.push(0,0):1===e&&i.digits.push(0),i.integerLen+=2),i}(c));let d=e.minInt,h=e.minFrac,p=e.maxFrac;if(s){const M=s.match(I$);if(null===M)throw new Error(`${s} is not a valid digit info`);const x=M[1],C=M[3],E=M[5];null!=x&&(d=yT(x)),null!=C&&(h=yT(C)),null!=E?p=yT(E):null!=C&&h>p&&(p=h)}!function U$(i,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let n=i.digits,r=n.length-i.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+i.integerLen,a=n[o];if(o>0){n.splice(Math.max(i.integerLen,o));for(let h=o;h<n.length;h++)n[h]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let h=1;h<o;h++)n[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[o-1]++;for(;r<Math.max(0,s);r++)n.push(0);let l=0!==s;const c=e+i.integerLen,d=n.reduceRight(function(h,p,m,_){return _[m]=(p+=h)<10?p:p-10,l&&(0===_[m]&&m>=c?_.pop():l=!1),p>=10?1:0},0);d&&(n.unshift(d),i.integerLen++)}(c,h,p);let m=c.digits,_=c.integerLen;const b=c.exponent;let v=[];for(l=m.every(M=>!M);_<d;_++)m.unshift(0);for(;_<0;_++)m.unshift(0);_>0?v=m.splice(_,m.length):(v=m,m=[0]);const y=[];for(m.length>=e.lgSize&&y.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)y.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&y.unshift(m.join("")),a=y.join(ha(t,n)),v.length&&(a+=ha(t,r)+v.join("")),b&&(a+=ha(t,At.Exponential)+"+"+b)}else a=ha(t,At.Infinity);return a=i<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(i,function _T(i,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(";"),r=n[0],s=n[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let d=0;d<l.length;d++){const h=l.charAt(d);"0"===h?t.minFrac=t.maxFrac=d+1:"#"===h?t.maxFrac=d+1:t.posSuf+=h}const c=a.split(",");if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const d=r.length-t.posPre.length-t.posSuf.length,h=s.indexOf("#");t.negPre=s.substring(0,h).replace(/'/g,""),t.negSuf=s.slice(h+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function dT(i,e){return Fs(i)[qe.NumberFormats][e]}(e,ao.Decimal),ha(e,At.MinusSign)),e,At.Group,At.Decimal,t)}(function wT(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(t),r,n)}catch(s){throw Za()}}}return i.\u0275fac=function(t){return new(t||i)(R(Rl,16))},i.\u0275pipe=ls({name:"number",type:i,pure:!0,standalone:!0}),i})();let Ja=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({}),i})();const mN="browser";let mj=(()=>{class i{}return i.\u0275prov=Oe({token:i,providedIn:"root",factory:()=>new gj(X(Ft),window)}),i})();class gj{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function _j(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gN(this.window.history)||gN(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function gN(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class MT extends class vj extends class J8{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Z8(i){mw||(mw=i)}(new MT)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bj(){return yy=yy||document.querySelector("base"),yy?yy.getAttribute("href"):null}();return null==t?null:function xj(i){Aw=Aw||document.createElement("a"),Aw.setAttribute("href",i);const e=Aw.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){yy=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function z$(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const n=t.indexOf("="),[r,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Aw,yy=null;const _N=new Se("TRANSITION_ID"),Mj=[{provide:lw,useFactory:function wj(i,e,t){return()=>{t.get(cw).donePromise.then(()=>{const n=Pl(),r=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[_N,Ft,bi],multi:!0}];let Sj=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();const Dw=new Se("EventManagerPlugins");let Tw=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}addGlobalEventListener(t,n,r){return this._findPluginFor(n).addGlobalEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(X(Dw),X(Dt))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();class yN{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Pl().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let vN=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})(),vy=(()=>{class i extends vN{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(bN),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(t,r,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bN))}}return i.\u0275fac=function(t){return new(t||i)(X(Ft))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();function bN(i){Pl().remove(i)}const CT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ST=/%COMP%/g;function Iw(i,e,t){for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?Iw(i,r,t):(r=r.replace(ST,i),t.push(r))}return t}function MN(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let Rw=(()=>{class i{constructor(t,n,r){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ET(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case Zs.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new Rj(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(t),r}case 1:case Zs.ShadowDom:return new Pj(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const r=Iw(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(X(Tw),X(vy),X(Fp))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();class ET{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(CT[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(SN(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(SN(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=CT[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=CT[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(ms.DashCase|ms.Important)?e.style.setProperty(t,n,r&ms.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&ms.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,MN(n)):this.eventManager.addEventListener(e,t,MN(n))}}function SN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Rj extends ET{constructor(e,t,n,r){super(e),this.component=n;const s=Iw(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr=function Dj(i){return"_ngcontent-%COMP%".replace(ST,i)}(r+"-"+n.id),this.hostAttr=function Tj(i){return"_nghost-%COMP%".replace(ST,i)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Pj extends ET{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Iw(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let kj=(()=>{class i extends yN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}}return i.\u0275fac=function(t){return new(t||i)(X(Ft))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();const EN=["alt","control","meta","shift"],Lj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AN={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fj={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Nj=(()=>{class i extends yN{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if(EN.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),o+=l+".")}),o+=s,0!=n.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let n="",r=function Bj(i){let e=i.key;if(null==e){if(e=i.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===i.location&&AN.hasOwnProperty(e)&&(e=AN[e]))}return Lj[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),EN.forEach(s=>{s!=r&&(0,Fj[s])(t)&&(n+=s+".")}),n+=r,n}static eventCallback(t,n,r){return s=>{i.getEventFullKey(s)===t&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(X(Ft))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();const Hj=AF(X8,"browser",[{provide:YD,useValue:mN},{provide:_F,useValue:function Uj(){MT.makeCurrent()},multi:!0},{provide:Ft,useFactory:function zj(){return function yb(i){r_=i}(document),document},deps:[]}]),TN=new Se(""),IN=[{provide:uw,useClass:class Cj{addToWindow(e){$n.getAngularTestability=(n,r=!0)=>{const s=e.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},$n.getAllAngularTestabilities=()=>e.getAllTestabilities(),$n.getAllAngularRootElements=()=>e.getAllRootElements(),$n.frameworkStabilizers||($n.frameworkStabilizers=[]),$n.frameworkStabilizers.push(n=>{const r=$n.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?Pl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:MF,useClass:eT,deps:[Dt,tT,uw]},{provide:eT,useClass:eT,deps:[Dt,tT,uw]}],RN=[{provide:Od,useValue:"root"},{provide:Ha,useFactory:function Vj(){return new Ha},deps:[]},{provide:Dw,useClass:kj,multi:!0,deps:[Ft,Dt,YD]},{provide:Dw,useClass:Nj,multi:!0,deps:[Ft]},{provide:Rw,useClass:Rw,deps:[Tw,vy,Fp]},{provide:Mu,useExisting:Rw},{provide:vN,useExisting:vy},{provide:vy,useClass:vy,deps:[Ft]},{provide:Tw,useClass:Tw,deps:[Dw,Dt]},{provide:class yj{},useClass:Sj,deps:[]},[]];let PN=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:Fp,useValue:t.appId},{provide:_N,useExisting:Fp},Mj]}}}return i.\u0275fac=function(t){return new(t||i)(X(TN,12))},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[...RN,...IN],imports:[Ja,Y8]}),i})(),kN=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(X(Ft))},i.\u0275prov=Oe({token:i,factory:function(t){let n=null;return n=t?new t:function Wj(){return new kN(X(Ft))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let TT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:function(t){let n=null;return n=t?new(t||i):X(FN),n},providedIn:"root"}),i})(),FN=(()=>{class i extends TT{constructor(t){super(),this._doc=t}sanitize(t,n){if(null==n)return null;switch(t){case Nn.NONE:return n;case Nn.HTML:return aa(n,"HTML")?fs(n):kb(this._doc,String(n)).toString();case Nn.STYLE:return aa(n,"Style")?fs(n):n;case Nn.SCRIPT:if(aa(n,"Script"))return fs(n);throw new Error("unsafe value used in a script context");case Nn.URL:return aa(n,"URL")?fs(n):Rd(String(n));case Nn.RESOURCE_URL:if(aa(n,"ResourceURL"))return fs(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function wb(i){return new IE(i)}(t)}bypassSecurityTrustStyle(t){return function Td(i){return new RE(i)}(t)}bypassSecurityTrustScript(t){return function u_(i){return new PE(i)}(t)}bypassSecurityTrustUrl(t){return function Mb(i){return new kE(i)}(t)}bypassSecurityTrustResourceUrl(t){return function Cb(i){return new xb(i)}(t)}}return i.\u0275fac=function(t){return new(t||i)(X(Ft))},i.\u0275prov=Oe({token:i,factory:function(t){let n=null;return n=t?new t:function Zj(i){return new FN(i.get(Ft))}(X(bi)),n},providedIn:"root"}),i})();function ot(...i){return Ri(i,sd(i))}class Nt extends Ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}const by=U(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Jj}=Array,{getPrototypeOf:Qj,prototype:e7,keys:t7}=Object;function NN(i){if(1===i.length){const e=i[0];if(Jj(e))return{args:e,keys:null};if(function n7(i){return i&&"object"==typeof i&&Qj(i)===e7}(e)){const t=t7(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}const{isArray:i7}=Array;function IT(i){return Xe(e=>function r7(i,e){return i7(e)?i(...e):i(e)}(i,e))}function BN(i,e){return i.reduce((t,n,r)=>(t[n]=e[r],t),{})}function Iu(...i){const e=sd(i),t=x0(i),{args:n,keys:r}=NN(i);if(0===n.length)return Ri([],e);const s=new Cn(function s7(i,e,t=Pa){return n=>{UN(e,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)UN(e,()=>{const c=Ri(i[l],e);let d=!1;c.subscribe(An(n,h=>{s[l]=h,d||(d=!0,a--),a||n.next(t(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,e,r?o=>BN(r,o):Pa));return t?s.pipe(IT(t)):s}function UN(i,e,t){i?Oa(t,i,e):e()}function xy(...i){return function o7(){return Qc(1)}()(Ri(i,sd(i)))}function wy(i){return new Cn(e=>{ar(i()).subscribe(e)})}function Up(i,e){const t=qt(i)?i:()=>i,n=r=>r.error(t());return new Cn(e?r=>e.schedule(n,0,r):n)}function RT(){return Fn((i,e)=>{let t=null;i._refCount++;const n=An(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const r=i._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}class VN extends Cn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,s0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nn;const t=this.getSubject();e.add(this.source.subscribe(An(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nn.EMPTY)}return e}refCount(){return RT()(this)}}function ys(i,e){return Fn((t,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();t.subscribe(An(n,l=>{r?.unsubscribe();let c=0;const d=s++;ar(i(l,d)).subscribe(r=An(n,h=>n.next(e?e(l,h,d,c++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Di(i){return i<=0?()=>qs:Fn((e,t)=>{let n=0;e.subscribe(An(t,r=>{++n<=i&&(t.next(r),i<=n&&t.complete())}))})}function ns(...i){const e=sd(i);return Fn((t,n)=>{(e?xy(i,t,e):xy(i,t)).subscribe(n)})}function Rn(i,e){return Fn((t,n)=>{let r=0;t.subscribe(An(n,s=>i.call(e,s,r++)&&n.next(s)))})}function Pw(i){return Fn((e,t)=>{let n=!1;e.subscribe(An(t,r=>{n=!0,t.next(r)},()=>{n||t.next(i),t.complete()}))})}function zN(i=a7){return Fn((e,t)=>{let n=!1;e.subscribe(An(t,r=>{n=!0,t.next(r)},()=>n?t.complete():t.error(i())))})}function a7(){return new by}function Ru(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Rn((r,s)=>i(r,s,n)):Pa,Di(1),t?Pw(e):zN(()=>new by))}function Pu(i,e){return qt(e)?Zi(i,e,1):Zi(i,1)}function Ti(i,e,t){const n=qt(i)||e||t?{next:i,error:e,complete:t}:i;return n?Fn((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(An(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Pa}function Dc(i){return Fn((e,t)=>{let s,n=null,r=!1;n=e.subscribe(An(t,void 0,void 0,o=>{s=ar(i(o,Dc(i)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(t))})}function l7(i,e,t,n,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(An(o,d=>{const h=c++;l=a?i(l,d,h):(a=!0,d),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function HN(i,e){return Fn(l7(i,e,arguments.length>=2,!0))}function PT(i){return i<=0?()=>qs:Fn((e,t)=>{let n=[];e.subscribe(An(t,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)t.next(r);t.complete()},void 0,()=>{n=null}))})}function GN(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Rn((r,s)=>i(r,s,n)):Pa,PT(1),t?Pw(e):zN(()=>new by))}function WN(i,e=!1){return Fn((t,n)=>{let r=0;t.subscribe(An(n,s=>{const o=i(s,r++);(o||e)&&n.next(s),!o&&n.complete()}))})}function $N(i){return Xe(()=>i)}function ku(i){return Fn((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}const fn="primary";class c7{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vp(i){return new c7(i)}function u7(i,e,t){const n=t.path.split("/");if(n.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function kl(i,e){const t=i?Object.keys(i):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!jN(i[r],e[r]))return!1;return!0}function jN(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}return i===e}function qN(i){return Array.prototype.concat.apply([],i)}function XN(i){return i.length>0?i[i.length-1]:null}function is(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function Tc(i){return SD(i)?i:iy(i)?Ri(Promise.resolve(i)):ot(i)}const f7={exact:function ZN(i,e,t){if(!Yd(i.segments,e.segments)||!kw(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!i.children[n]||!ZN(i.children[n],e.children[n],t))return!1;return!0},subset:JN},YN={exact:function p7(i,e){return kl(i,e)},subset:function m7(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>jN(i[t],e[t]))},ignored:()=>!0};function KN(i,e,t){return f7[t.paths](i.root,e.root,t.matrixParams)&&YN[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function JN(i,e,t){return QN(i,e,e.segments,t)}function QN(i,e,t,n){if(i.segments.length>t.length){const r=i.segments.slice(0,t.length);return!(!Yd(r,t)||e.hasChildren()||!kw(r,t,n))}if(i.segments.length===t.length){if(!Yd(i.segments,t)||!kw(i.segments,t,n))return!1;for(const r in e.children)if(!i.children[r]||!JN(i.children[r],e.children[r],n))return!1;return!0}{const r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!!(Yd(i.segments,r)&&kw(i.segments,r,n)&&i.children[fn])&&QN(i.children[fn],e,s,n)}}function kw(i,e,t){return e.every((n,r)=>YN[t](i[r].parameters,n.parameters))}class Xd{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vp(this.queryParams)),this._queryParamMap}toString(){return y7.serialize(this)}}class _n{constructor(e,t){this.segments=e,this.children=t,this.parent=null,is(t,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ow(this)}}class My{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vp(this.parameters)),this._parameterMap}toString(){return r2(this)}}function Yd(i,e){return i.length===e.length&&i.every((t,n)=>t.path===e[n].path)}let e2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:function(){return new OT},providedIn:"root"}),i})();class OT{parse(e){const t=new A7(e);return new Xd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Cy(e.root,!0)}`,n=function x7(i){const e=Object.keys(i).map(t=>{const n=i[t];return Array.isArray(n)?n.map(r=>`${Lw(t)}=${Lw(r)}`).join("&"):`${Lw(t)}=${Lw(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function v7(i){return encodeURI(i)}(e.fragment)}`:""}`}}const y7=new OT;function Ow(i){return i.segments.map(e=>r2(e)).join("/")}function Cy(i,e){if(!i.hasChildren())return Ow(i);if(e){const t=i.children[fn]?Cy(i.children[fn],!1):"",n=[];return is(i.children,(r,s)=>{s!==fn&&n.push(`${s}:${Cy(r,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function _7(i,e){let t=[];return is(i.children,(n,r)=>{r===fn&&(t=t.concat(e(n,r)))}),is(i.children,(n,r)=>{r!==fn&&(t=t.concat(e(n,r)))}),t}(i,(n,r)=>r===fn?[Cy(i.children[fn],!1)]:[`${r}:${Cy(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[fn]?`${Ow(i)}/${t[0]}`:`${Ow(i)}/(${t.join("//")})`}}function t2(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lw(i){return t2(i).replace(/%3B/gi,";")}function LT(i){return t2(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fw(i){return decodeURIComponent(i)}function n2(i){return Fw(i.replace(/\+/g,"%20"))}function r2(i){return`${LT(i.path)}${function b7(i){return Object.keys(i).map(e=>`;${LT(e)}=${LT(i[e])}`).join("")}(i.parameters)}`}const w7=/^[^\/()?;=#]+/;function Nw(i){const e=i.match(w7);return e?e[0]:""}const M7=/^[^=?&#]+/,S7=/^[^&#]+/;class A7{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _n([],{}):new _n([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[fn]=new _n(e,t)),n}parseSegment(){const e=Nw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(e),new My(Fw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Nw(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const r=Nw(this.remaining);r&&(n=r,this.capture(n))}e[Fw(t)]=Fw(n)}parseQueryParam(e){const t=function C7(i){const e=i.match(M7);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const o=function E7(i){const e=i.match(S7);return e?e[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=n2(t),s=n2(n);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Nw(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new _e(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fn);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[fn]:new _n([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _e(4011,!1)}}function FT(i){return i.segments.length>0?new _n([],{[fn]:i}):i}function Bw(i){const e={};for(const n of Object.keys(i.children)){const s=Bw(i.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function D7(i){if(1===i.numberOfChildren&&i.children[fn]){const e=i.children[fn];return new _n(i.segments.concat(e.segments),e.children)}return i}(new _n(i.segments,e))}function Kd(i){return i instanceof Xd}function R7(i,e,t,n,r){if(0===t.length)return zp(e.root,e.root,e.root,n,r);const s=function a2(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new o2(!0,0,i);let e=0,t=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return is(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new o2(t,e,n)}(t);return s.toRoot()?zp(e.root,e.root,new _n([],{}),n,r):function o(l){const c=function k7(i,e,t,n){if(i.isAbsolute)return new Hp(e.root,!0,0);if(-1===n)return new Hp(t,t===e.root,0);return function l2(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new _e(4005,!1);r=n.segments.length}return new Hp(n,!1,r-s)}(t,n+(Sy(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,e,i.snapshot?._urlSegment,l),d=c.processChildren?Ay(c.segmentGroup,c.index,s.commands):BT(c.segmentGroup,c.index,s.commands);return zp(e.root,c.segmentGroup,d,n,r)}(i.snapshot?._lastPathIndex)}function Sy(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Ey(i){return"object"==typeof i&&null!=i&&i.outlets}function zp(i,e,t,n,r){let o,s={};n&&is(n,(l,c)=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),o=i===e?t:s2(i,e,t);const a=FT(Bw(o));return new Xd(a,s,r)}function s2(i,e,t){const n={};return is(i.children,(r,s)=>{n[s]=r===e?t:s2(r,e,t)}),new _n(i.segments,n)}class o2{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Sy(n[0]))throw new _e(4003,!1);const r=n.find(Ey);if(r&&r!==XN(n))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hp{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function BT(i,e,t){if(i||(i=new _n([],{})),0===i.segments.length&&i.hasChildren())return Ay(i,e,t);const n=function L7(i,e,t){let n=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;const o=i.segments[r],a=t[n];if(Ey(a))break;const l=`${a}`,c=n<t.length-1?t[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!u2(l,c,o))return s;n+=2}else{if(!u2(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new _n(i.segments.slice(0,n.pathIndex),{});return s.children[fn]=new _n(i.segments.slice(n.pathIndex),i.children),Ay(s,0,r)}return n.match&&0===r.length?new _n(i.segments,{}):n.match&&!i.hasChildren()?UT(i,e,t):n.match?Ay(i,0,r):UT(i,e,t)}function Ay(i,e,t){if(0===t.length)return new _n(i.segments,{});{const n=function O7(i){return Ey(i[0])?i[0].outlets:{[fn]:i}}(t),r={};return is(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=BT(i.children[o],e,s))}),is(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new _n(i.segments,r)}}function UT(i,e,t){const n=i.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Ey(s)){const l=F7(s.outlets);return new _n(n,l)}if(0===r&&Sy(t[0])){n.push(new My(i.segments[e].path,c2(t[0]))),r++;continue}const o=Ey(s)?s.outlets[fn]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Sy(a)?(n.push(new My(o,c2(a))),r+=2):(n.push(new My(o,{})),r++)}return new _n(n,{})}function F7(i){const e={};return is(i,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=UT(new _n([],{}),0,t))}),e}function c2(i){const e={};return is(i,(t,n)=>e[n]=`${t}`),e}function u2(i,e,t){return i==t.path&&kl(e,t.parameters)}class Ic{constructor(e,t){this.id=e,this.url=t}}class VT extends Ic{constructor(e,t,n="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zd extends Ic{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Uw extends Ic{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class d2 extends Ic{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class N7 extends Ic{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B7 extends Ic{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U7 extends Ic{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class V7 extends Ic{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z7 extends Ic{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H7{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class G7{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class W7{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $7{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j7{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q7{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class h2{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class f2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zT(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=zT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=HT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return HT(e,this._root).map(t=>t.value)}}function zT(i,e){if(i===e.value)return e;for(const t of e.children){const n=zT(i,t);if(n)return n}return null}function HT(i,e){if(i===e.value)return[e];for(const t of e.children){const n=HT(i,t);if(n.length)return n.unshift(e),n}return[]}class Rc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Gp(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class p2 extends f2{constructor(e,t){super(e),this.snapshot=t,GT(this,e)}toString(){return this.snapshot.toString()}}function m2(i,e){const t=function Y7(i,e){const o=new Vw([],{},{},"",{},fn,e,null,i.root,-1,{});return new _2("",new Rc(o,[]))}(i,e),n=new Nt([new My("",{})]),r=new Nt({}),s=new Nt({}),o=new Nt({}),a=new Nt(""),l=new Wp(n,r,o,a,s,fn,e,t.root);return l.snapshot=t.root,new p2(new Rc(l,[]),t)}class Wp{constructor(e,t,n,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Xe(e=>Vp(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Xe(e=>Vp(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function g2(i,e="emptyOnly"){const t=i.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const r=t[n],s=t[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function K7(i){return i.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(n))}class Vw{constructor(e,t,n,r,s,o,a,l,c,d,h,p){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._correctedLastPathIndex=p??d,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _2 extends f2{constructor(e,t){super(t),this.url=e,GT(this,t)}toString(){return y2(this._root)}}function GT(i,e){e.value._routerState=i,e.children.forEach(t=>GT(i,t))}function y2(i){const e=i.children.length>0?` { ${i.children.map(y2).join(", ")} } `:"";return`${i.value}${e}`}function WT(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,kl(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),kl(e.params,t.params)||i.params.next(t.params),function d7(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!kl(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),kl(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function $T(i,e){const t=kl(i.params,e.params)&&function g7(i,e){return Yd(i,e)&&i.every((t,n)=>kl(t.parameters,e[n].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||$T(i.parent,e.parent))}function Dy(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const r=function J7(i,e,t){return e.children.map(n=>{for(const r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Dy(i,n,r);return Dy(i,n)})}(i,e,t);return new Rc(n,r)}{if(i.shouldAttach(e.value)){const s=i.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Dy(i,a)),o}}const n=function Q7(i){return new Wp(new Nt(i.url),new Nt(i.params),new Nt(i.queryParams),new Nt(i.fragment),new Nt(i.data),i.outlet,i.component,i)}(e.value),r=e.children.map(s=>Dy(i,s));return new Rc(n,r)}}const jT="ngNavigationCancelingError";function v2(i,e){const{redirectTo:t,navigationBehaviorOptions:n}=Kd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=b2(!1,0,e);return r.url=t,r.navigationBehaviorOptions=n,r}function b2(i,e,t){const n=new Error("NavigationCancelingError: "+(i||""));return n[jT]=!0,n.cancellationCode=e,t&&(n.url=t),n}function x2(i){return w2(i)&&Kd(i.url)}function w2(i){return i&&i[jT]}class e9{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ty,this.attachRef=null}}let Ty=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new e9,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zw=!1;let M2=(()=>{class i{constructor(t,n,r,s,o){this.parentContexts=t,this.location=n,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new st,this.deactivateEvents=new st,this.attachEvents=new st,this.detachEvents=new st,this.name=r||fn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,zw);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,zw);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,zw);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new _e(4013,zw);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new t9(t,a,r.injector);if(n&&function n9(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)(R(Ty),R(ts),Va("name"),R(ni),R(Ml))},i.\u0275dir=Ne({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class t9{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Wp?this.route:e===Ty?this.childContexts:this.parent.get(e,t)}}let C2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,n){1&t&&Qe(0,"router-outlet")},dependencies:[M2],encapsulation:2}),i})();function S2(i,e){return i.providers&&!i._injector&&(i._injector=iw(i.providers,e,`Route: ${i.path}`)),i._injector??e}function XT(i){const e=i.children&&i.children.map(XT),t=e?{...i,children:e}:{...i};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fn&&(t.component=C2),t}function ma(i){return i.outlet||fn}function E2(i,e){const t=i.filter(n=>ma(n)===e);return t.push(...i.filter(n=>ma(n)!==e)),t}function A2(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class a9{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),WT(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Gp(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),is(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=Gp(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=Gp(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Gp(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new q7(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $7(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(WT(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),WT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=A2(r.snapshot),l=a?.get(gc)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}class D2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hw{constructor(e,t){this.component=e,this.route=t}}function l9(i,e,t){const n=i._root;return Iy(n,e?e._root:null,t,[n.value])}function Gw(i,e,t){return(A2(e)??t).get(i)}function Iy(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Gp(e);return i.children.forEach(o=>{(function u9(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=e?e.value:null,a=t?t.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function d9(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!Yd(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Yd(i.url,e.url)||!kl(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$T(i,e)||!kl(i.queryParams,e.queryParams);default:return!$T(i,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new D2(n)):(s.data=o.data,s._resolvedData=o._resolvedData),Iy(i,e,s.component?a?a.children:null:t,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Hw(a.outlet.component,o))}else o&&Ry(e,a,r),r.canActivateChecks.push(new D2(n)),Iy(i,null,s.component?a?a.children:null:t,n,r)})(o,s[o.value.outlet],t,n.concat([o.value]),r),delete s[o.value.outlet]}),is(s,(o,a)=>Ry(o,t.getContext(a),r)),r}function Ry(i,e,t){const n=Gp(i),r=i.value;is(n,(s,o)=>{Ry(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Hw(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Py(i){return"function"==typeof i}function YT(i){return i instanceof by||"EmptyError"===i?.name}const Ww=Symbol("INITIAL_VALUE");function $p(){return ys(i=>Iu(i.map(e=>e.pipe(Di(1),ns(Ww)))).pipe(Xe(e=>{for(const t of e)if(!0!==t){if(t===Ww)return Ww;if(!1===t||t instanceof Xd)return t}return!0}),Rn(e=>e!==Ww),Di(1)))}function T2(i){return function ES(...i){return n0(i)}(Ti(e=>{if(Kd(e))throw v2(0,e)}),Xe(e=>!0===e))}const KT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function I2(i,e,t,n,r){const s=ZT(i,e,t);return s.matched?function D9(i,e,t,n){const r=e.canMatch;return r&&0!==r.length?ot(r.map(o=>{const a=i.get(o),l=function _9(i){return i&&Py(i.canMatch)}(a)?a.canMatch(e,t):a(e,t);return Tc(l)})).pipe($p(),T2()):ot(!0)}(n=S2(e,n),e,t).pipe(Xe(o=>!0===o?s:{...KT})):ot(s)}function ZT(i,e,t){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?{...KT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||u7)(t,i,e);if(!r)return{...KT};const s={};is(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function $w(i,e,t,n,r="corrected"){if(t.length>0&&function R9(i,e,t){return t.some(n=>jw(i,e,n)&&ma(n)!==fn)}(i,t,n)){const o=new _n(e,function I9(i,e,t,n){const r={};r[fn]=n,n._sourceSegment=i,n._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ma(s)!==fn){const o=new _n([],{});o._sourceSegment=i,o._segmentIndexShift=e.length,r[ma(s)]=o}return r}(i,e,n,new _n(t,i.children)));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function P9(i,e,t){return t.some(n=>jw(i,e,n))}(i,t,n)){const o=new _n(i.segments,function T9(i,e,t,n,r,s){const o={};for(const a of n)if(jw(i,t,a)&&!r[ma(a)]){const l=new _n([],{});l._sourceSegment=i,l._segmentIndexShift="legacy"===s?i.segments.length:e.length,o[ma(a)]=l}return{...r,...o}}(i,e,t,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new _n(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function jw(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function R2(i,e,t,n){return!!(ma(i)===n||n!==fn&&jw(e,t,i))&&("**"===i.path||ZT(e,i,t).matched)}function P2(i,e,t){return 0===e.length&&!i.children[t]}const qw=!1;class Xw{constructor(e){this.segmentGroup=e||null}}class k2{constructor(e){this.urlTree=e}}function ky(i){return Up(new Xw(i))}function O2(i){return Up(new k2(i))}class F9{constructor(e,t,n,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=$w(this.urlTree.root,[],[],this.config).segmentGroup,t=new _n(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,fn).pipe(Xe(s=>this.createUrlTree(Bw(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Dc(s=>{if(s instanceof k2)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Xw?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,fn).pipe(Xe(r=>this.createUrlTree(Bw(r),e.queryParams,e.fragment))).pipe(Dc(r=>{throw r instanceof Xw?this.noMatchError(r):r}))}noMatchError(e){return new _e(4002,qw)}createUrlTree(e,t,n){const r=FT(e);return new Xd(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Xe(s=>new _n([],s))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Ri(r).pipe(Pu(s=>{const o=n.children[s],a=E2(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Xe(l=>({segment:l,outlet:s})))}),HN((s,o)=>(s[o.outlet]=o.segment,s),{}),GN())}expandSegment(e,t,n,r,s,o){return Ri(n).pipe(Pu(a=>this.expandSegmentAgainstRoute(e,t,n,a,r,s,o).pipe(Dc(c=>{if(c instanceof Xw)return ot(null);throw c}))),Ru(a=>!!a),Dc((a,l)=>{if(YT(a))return P2(t,r,s)?ot(new _n([],{})):ky(t);throw a}))}expandSegmentAgainstRoute(e,t,n,r,s,o,a){return R2(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o):ky(t):ky(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?O2(s):this.lineralizeSegments(n,s).pipe(Zi(o=>{const a=new _n(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=ZT(t,r,s);if(!a)return ky(t);const h=this.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?O2(h):this.lineralizeSegments(r,h).pipe(Zi(p=>this.expandSegment(e,t,n,p.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,n,r,s){return"**"===n.path?(e=S2(n,e),n.loadChildren?(n._loadedRoutes?ot({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(e,n)).pipe(Xe(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new _n(r,{})))):ot(new _n(r,{}))):I2(t,n,r,e).pipe(ys(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=n._injector??e,n,r).pipe(Zi(d=>{const h=d.injector??e,p=d.routes,{segmentGroup:m,slicedSegments:_}=$w(t,a,l,p),b=new _n(m.segments,m.children);if(0===_.length&&b.hasChildren())return this.expandChildren(h,p,b).pipe(Xe(x=>new _n(a,x)));if(0===p.length&&0===_.length)return ot(new _n(a,{}));const v=ma(n)===s;return this.expandSegment(h,b,p,_,v?fn:s,!0).pipe(Xe(M=>new _n(a.concat(M.segments),M.children)))})):ky(t)))}getChildConfig(e,t,n){return t.children?ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function A9(i,e,t,n){const r=e.canLoad;return void 0===r||0===r.length?ot(!0):ot(r.map(o=>{const a=i.get(o),l=function f9(i){return i&&Py(i.canLoad)}(a)?a.canLoad(e,t):a(e,t);return Tc(l)})).pipe($p(),T2())}(e,t,n).pipe(Zi(r=>r?this.configLoader.loadChildren(e,t).pipe(Ti(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function O9(i){return Up(b2(qw,3))}())):ot({routes:[],injector:e})}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ot(n);if(r.numberOfChildren>1||!r.children[fn])return Up(new _e(4e3,qw));r=r.children[fn]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreateUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new Xd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return is(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=t[a]}else n[s]=r}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let o={};return is(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,n,r)}),new _n(s,o)}createSegments(e,t,n,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new _e(4001,qw);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}class B9{}class z9{constructor(e,t,n,r,s,o,a,l){this.injector=e,this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const e=$w(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,fn).pipe(Xe(t=>{if(null===t)return null;const n=new Vw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},fn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Rc(n,t),s=new _2(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,n=g2(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,r)}processChildren(e,t,n){return Ri(Object.keys(n.children)).pipe(Pu(r=>{const s=n.children[r],o=E2(t,r);return this.processSegmentGroup(e,o,s,r)}),HN((r,s)=>r&&s?(r.push(...s),r):null),WN(r=>null!==r),Pw(null),GN(),Xe(r=>{if(null===r)return null;const s=L2(r);return function H9(i){i.sort((e,t)=>e.value.outlet===fn?-1:t.value.outlet===fn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,n,r,s){return Ri(t).pipe(Pu(o=>this.processSegmentAgainstRoute(o._injector??e,o,n,r,s)),Ru(o=>!!o),Dc(o=>{if(YT(o))return P2(n,r,s)?ot([]):ot(null);throw o}))}processSegmentAgainstRoute(e,t,n,r,s){if(t.redirectTo||!R2(t,n,r,s))return ot(null);let o;if("**"===t.path){const a=r.length>0?XN(r).parameters:{},l=N2(n)+r.length;o=ot({snapshot:new Vw(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U2(t),ma(t),t.component??t._loadedComponent??null,t,F2(n),l,V2(t),l),consumedSegments:[],remainingSegments:[]})}else o=I2(n,t,r,e).pipe(Xe(({matched:a,consumedSegments:l,remainingSegments:c,parameters:d})=>{if(!a)return null;const h=N2(n)+l.length;return{snapshot:new Vw(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U2(t),ma(t),t.component??t._loadedComponent??null,t,F2(n),h,V2(t),h),consumedSegments:l,remainingSegments:c}}));return o.pipe(ys(a=>{if(null===a)return ot(null);const{snapshot:l,consumedSegments:c,remainingSegments:d}=a;e=t._injector??e;const h=t._loadedInjector??e,p=function G9(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(t),{segmentGroup:m,slicedSegments:_}=$w(n,c,d,p.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution);if(0===_.length&&m.hasChildren())return this.processChildren(h,p,m).pipe(Xe(v=>null===v?null:[new Rc(l,v)]));if(0===p.length&&0===_.length)return ot([new Rc(l,[])]);const b=ma(t)===s;return this.processSegment(h,p,m,_,b?fn:s).pipe(Xe(v=>null===v?null:[new Rc(l,v)]))}))}}function W9(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function L2(i){const e=[],t=new Set;for(const n of i){if(!W9(n)){e.push(n);continue}const r=e.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),t.add(r)):e.push(n)}for(const n of t){const r=L2(n.children);e.push(new Rc(n.value,r))}return e.filter(n=>!t.has(n))}function F2(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function N2(i){let e=i,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function U2(i){return i.data||{}}function V2(i){return i.resolve||{}}const JT=Symbol("RouteTitle");function z2(i){return"string"==typeof i.title||null===i.title}function QT(i){return ys(e=>{const t=i(e);return t?Ri(t).pipe(Xe(()=>e)):ot(e)})}let H2=(()=>{class i{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===fn);return n}getResolvedTitleForRoute(t){return t.data[JT]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:function(){return qn(G2)},providedIn:"root"}),i})(),G2=(()=>{class i extends H2{constructor(t){super(),this.title=t}updateTitle(t){const n=this.buildTitle(t);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(t){return new(t||i)(X(kN))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class J9{}class eq extends class Q9{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const e1=new Se("",{providedIn:"root",factory:()=>({})}),t1=new Se("ROUTES");let n1=(()=>{class i{constructor(t,n){this.injector=t,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const n=Tc(t.loadComponent()).pipe(Ti(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ku(()=>{this.componentLoaders.delete(t)})),r=new VN(n,()=>new Ge).pipe(RT());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ot({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(Xe(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,d=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=qN(l.get(t1,[],gt.Self|gt.Optional)));return{routes:c.map(XT),injector:l}}),ku(()=>{this.childrenLoaders.delete(n)})),o=new VN(s,()=>new Ge).pipe(RT());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(t){return Tc(t()).pipe(Zi(n=>n instanceof RL||Array.isArray(n)?ot(n):Ri(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(t){return new(t||i)(X(bi),X(KD))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class nq{}class iq{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function rq(i){throw i}function sq(i,e,t){return e.parse("/")}const oq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function $2(){const i=qn(e2),e=qn(Ty),t=qn(py),n=qn(bi),r=qn(KD),s=qn(t1,{optional:!0})??[],o=qn(e1,{optional:!0})??{},a=qn(G2),l=qn(H2,{optional:!0}),c=qn(nq,{optional:!0}),d=qn(J9,{optional:!0}),h=new Us(null,i,e,t,n,r,qN(s));return c&&(h.urlHandlingStrategy=c),d&&(h.routeReuseStrategy=d),h.titleStrategy=l??a,function lq(i,e){i.errorHandler&&(e.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(e.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(e.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(e.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(e.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(e.canceledNavigationResolution=i.canceledNavigationResolution)}(o,h),h}let Us=(()=>{class i{constructor(t,n,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ge,this.errorHandler=rq,this.malformedUriErrorHandler=sq,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ot(void 0),this.urlHandlingStrategy=new iq,this.routeReuseStrategy=new eq,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(n1),this.configLoader.onLoadEndListener=p=>this.triggerEvent(new G7(p)),this.configLoader.onLoadStartListener=p=>this.triggerEvent(new H7(p)),this.ngModule=o.get(Wd),this.console=o.get(f8);const h=o.get(Dt);this.isNgZoneEnabled=h instanceof Dt&&Dt.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function h7(){return new Xd(new _n([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=m2(this.currentUrlTree,this.rootComponentType),this.transitions=new Nt({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const n=this.events;return t.pipe(Rn(r=>0!==r.id),Xe(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ys(r=>{let s=!1,o=!1;return ot(r).pipe(Ti(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ys(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return j2(a.source)&&(this.browserUrlTree=a.extractedUrl),ot(a).pipe(ys(h=>{const p=this.transitions.getValue();return n.next(new VT(h.id,this.serializeUrl(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions.getValue()?qs:Promise.resolve(h)}),function N9(i,e,t,n){return ys(r=>function L9(i,e,t,n,r){return new F9(i,e,t,n,r).apply()}(i,e,t,r.extractedUrl,n).pipe(Xe(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ti(h=>{this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects},r.urlAfterRedirects=h.urlAfterRedirects}),function j9(i,e,t,n,r,s){return Zi(o=>function V9(i,e,t,n,r,s,o="emptyOnly",a="legacy"){return new z9(i,e,t,n,r,o,a,s).recognize().pipe(ys(l=>null===l?function U9(i){return new Cn(e=>e.error(i))}(new B9):ot(l)))}(i,e,t,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,r,s).pipe(Xe(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Ti(h=>{if(r.targetSnapshot=h.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!h.extras.skipLocationChange){const m=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl);this.setBrowserUrl(m,h)}this.browserUrlTree=h.urlAfterRedirects}const p=new N7(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);n.next(p)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:p,extractedUrl:m,source:_,restoredState:b,extras:v}=a,y=new VT(p,this.serializeUrl(m),_,b);n.next(y);const M=m2(m,this.rootComponentType).snapshot;return ot(r={...a,targetSnapshot:M,urlAfterRedirects:m,extras:{...v,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),qs}),Ti(a=>{const l=new B7(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Xe(a=>r={...a,guards:l9(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function v9(i,e){return Zi(t=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ot({...t,guardsResult:!0}):function b9(i,e,t,n){return Ri(i).pipe(Zi(r=>function E9(i,e,t,n,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ot(s.map(a=>{const l=Gw(a,e,r);return Tc(function g9(i){return i&&Py(i.canDeactivate)}(l)?l.canDeactivate(i,e,t,n):l(i,e,t,n)).pipe(Ru())})).pipe($p()):ot(!0)}(r.component,r.route,t,e,n)),Ru(r=>!0!==r,!0))}(o,n,r,i).pipe(Zi(a=>a&&function h9(i){return"boolean"==typeof i}(a)?function x9(i,e,t,n){return Ri(e).pipe(Pu(r=>xy(function M9(i,e){return null!==i&&e&&e(new W7(i)),ot(!0)}(r.route.parent,n),function w9(i,e){return null!==i&&e&&e(new j7(i)),ot(!0)}(r.route,n),function S9(i,e,t){const n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function c9(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(o)).filter(o=>null!==o).map(o=>wy(()=>ot(o.guards.map(l=>{const c=Gw(l,o.node,t);return Tc(function m9(i){return i&&Py(i.canActivateChild)}(c)?c.canActivateChild(n,i):c(n,i)).pipe(Ru())})).pipe($p())));return ot(s).pipe($p())}(i,r.path,t),function C9(i,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return ot(!0);const r=n.map(s=>wy(()=>{const o=Gw(s,e,t);return Tc(function p9(i){return i&&Py(i.canActivate)}(o)?o.canActivate(e,i):o(e,i)).pipe(Ru())}));return ot(r).pipe($p())}(i,r.route,t))),Ru(r=>!0!==r,!0))}(n,s,i,e):ot(a)),Xe(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Ti(a=>{if(r.guardsResult=a.guardsResult,Kd(a.guardsResult))throw v2(0,a.guardsResult);const l=new U7(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Rn(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),QT(a=>{if(a.guards.canActivateChecks.length)return ot(a).pipe(Ti(l=>{const c=new V7(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),ys(l=>{let c=!1;return ot(l).pipe(function q9(i,e){return Zi(t=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return ot(t);let s=0;return Ri(r).pipe(Pu(o=>function X9(i,e,t,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!z2(r)&&(s[JT]=r.title),function Y9(i,e,t,n){const r=function K9(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return ot({});const s={};return Ri(r).pipe(Zi(o=>function Z9(i,e,t,n){const r=Gw(i,e,n);return Tc(r.resolve?r.resolve(e,t):r(e,t))}(i[o],e,t,n).pipe(Ru(),Ti(a=>{s[o]=a}))),PT(1),$N(s),Dc(o=>YT(o)?qs:Up(o)))}(s,i,e,n).pipe(Xe(o=>(i._resolvedData=o,i.data=g2(i,t).resolve,r&&z2(r)&&(i.data[JT]=r.title),null)))}(o.route,n,i,e)),Ti(()=>s++),PT(1),Zi(o=>s===r.length?ot(t):qs))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ti({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),Ti(l=>{const c=new z7(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),QT(a=>{const l=c=>{const d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Ti(h=>{c.component=h}),Xe(()=>{})));for(const h of c.children)d.push(...l(h));return d};return Iu(l(a.targetSnapshot.root)).pipe(Pw(),Di(1))}),QT(()=>this.afterPreactivation()),Xe(a=>{const l=function Z7(i,e,t){const n=Dy(i,e._root,t?t._root:void 0);return new p2(n,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),Ti(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((i,e,t)=>Xe(n=>(new a9(e,n.targetRouterState,n.currentRouterState,t).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Ti({next(){s=!0},complete(){s=!0}}),ku(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Dc(a=>{if(o=!0,w2(a)){x2(a)||(this.navigated=!0,this.restoreHistory(r,!0));const l=new Uw(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(n.next(l),x2(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||j2(r.source)};this.scheduleNavigation(c,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new d2(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);n.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return qs}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(XT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=r||this.routerState.root,d=l?this.currentUrlTree.fragment:o;let h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}return null!==h&&(h=this.removeEmptyProps(h)),R7(c,this.currentUrlTree,t,h,d??null)}navigateByUrl(t,n={skipLocationChange:!1}){const r=Kd(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(t,n={skipLocationChange:!1}){return function cq(i){for(let e=0;e<i.length;e++){if(null==i[e])throw new _e(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return n}isActive(t,n){let r;if(r=!0===n?{...oq}:!1===n?{...aq}:n,Kd(t))return KN(this.currentUrlTree,t,r);const s=this.parseUrl(t);return KN(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((n,r)=>{const s=t[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((p,m)=>{a=p,l=m});const d=++this.navigationId;let h;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),h=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):h=0,this.setTransition({id:d,targetPageId:h,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}setBrowserUrl(t,n){const r=this.urlSerializer.serialize(t),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,n,r){const s=new Uw(t.id,this.serializeUrl(t.extractedUrl),n,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return i.\u0275fac=function(t){bc()},i.\u0275prov=Oe({token:i,factory:function(){return $2()},providedIn:"root"}),i})();function j2(i){return"imperative"!==i}class q2{}let X2=(()=>{class i{constructor(t,n,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Rn(t=>t instanceof Zd),Pu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=iw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ri(r).pipe(Qc())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(t,n):ot(null);const s=r.pipe(Zi(o=>null===o?ot(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return n.loadComponent&&!n._loadedComponent?Ri([s,this.loader.loadComponent(n)]).pipe(Qc()):s})}}return i.\u0275fac=function(t){return new(t||i)(X(Us),X(KD),X(Ml),X(q2),X(n1))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();const Y2=new Se("");let hq=(()=>{class i{constructor(t,n,r={}){this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof VT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof h2&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.router.triggerEvent(new h2(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(t){bc()},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();const K2=new Se("ROUTER_FORROOT_GUARD"),Z2=new Se(""),fq=[py,{provide:e2,useClass:OT},{provide:Us,useFactory:$2},Ty,{provide:Wp,useFactory:function pq(i){return i.routerState.root},deps:[Us]},n1];function mq(){return new SF("Router",Us)}let J2=(()=>{class i{constructor(t){}static forRoot(t,n){return{ngModule:i,providers:[fq,[],Q2(t),{provide:K2,useFactory:vq,deps:[[Us,new Io,new xl]]},{provide:e1,useValue:n||{}},n?.useHash?{provide:qd,useClass:n$}:{provide:qd,useClass:YF},{provide:Y2,useFactory:()=>{const i=qn(Us),e=qn(mj),t=qn(e1);return t.scrollOffset&&e.setOffset(t.scrollOffset),new hq(i,e,t)}},n?.preloadingStrategy?Eq(n.preloadingStrategy):[],{provide:SF,multi:!0,useFactory:mq},n?.initialNavigation?xq(n):[],[{provide:e3,useFactory:bq},{provide:yF,multi:!0,useExisting:e3}]]}}static forChild(t){return{ngModule:i,providers:[Q2(t)]}}}return i.\u0275fac=function(t){return new(t||i)(X(K2,8))},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({}),i})();function vq(i){return"guarded"}function Q2(i){return[{provide:t1,multi:!0,useValue:i}]}function bq(){const i=qn(bi);return e=>{const t=i.get(Np);if(e!==t.components[0])return;const n=i.get(Us),r=i.get(t3);1===i.get(o1)&&n.initialNavigation(),i.get(Z2,null,gt.Optional)?.setUpPreloading(),i.get(Y2,null,gt.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const e3=new Se("");function xq(i){return["disabled"===i.initialNavigation?[{provide:lw,multi:!0,useFactory:()=>{const i=qn(Us);return()=>{i.setUpLocationChangeListener()}}},{provide:o1,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:o1,useValue:0},{provide:lw,multi:!0,deps:[bi],useFactory:i=>{const e=i.get(e$,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(r=>{const s=i.get(Us),o=i.get(t3);(function n(r){i.get(Us).events.pipe(Rn(o=>o instanceof Zd||o instanceof Uw||o instanceof d2),Xe(o=>o instanceof Zd||o instanceof Uw&&(0===o.code||1===o.code)&&null),Rn(o=>null!==o),Di(1)).subscribe(()=>{r()})})(()=>{r(!0),t=!0}),s.afterPreactivation=()=>(r(!0),t||o.closed?ot(void 0):o),s.initialNavigation()}))}}]:[]]}const t3=new Se("",{factory:()=>new Ge}),o1=new Se("",{providedIn:"root",factory:()=>1});function Eq(i){return[X2,{provide:Z2,useExisting:X2},{provide:q2,useExisting:i}]}const Aq=[];let a1,Dq=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[J2.forRoot(Aq),J2]}),i})();function n3(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(n,r)}function an(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){n3(s,n,r,o,a,"next",l)}function a(l){n3(s,n,r,o,a,"throw",l)}o(void 0)})}}try{a1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{a1=!1}let jp,Ar=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function pj(i){return i===mN}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!a1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(t){return new(t||i)(X(YD))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const i3=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function r3(){if(jp)return jp;if("object"!=typeof document||!document)return jp=new Set(i3),jp;let i=document.createElement("input");return jp=new Set(i3.filter(e=>(i.setAttribute("type",e),i.type===e))),jp}let Oy,Jd,l1;function qp(i){return function Tq(){if(null==Oy&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Oy=!0}))}finally{Oy=Oy||!1}return Oy}()?i:!!i.capture}function Iq(){if(null==Jd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Jd=!1,Jd;if("scrollBehavior"in document.documentElement.style)Jd=!0;else{const i=Element.prototype.scrollTo;Jd=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Jd}function s3(i){if(function Rq(){if(null==l1){const i=typeof document<"u"?document.head:null;l1=!(!i||!i.createShadowRoot&&!i.attachShadow)}return l1}()){const e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function c1(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const e=i.shadowRoot.activeElement;if(e===i)break;i=e}return i}function Qd(i){return i.composedPath?i.composedPath()[0]:i.target}function u1(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ga(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}class Gq extends nn{constructor(e,t){super()}schedule(e,t=0){return this}}const eM={setInterval(i,e,...t){const{delegate:n}=eM;return n?.setInterval?n.setInterval(i,e,...t):setInterval(i,e,...t)},clearInterval(i){const{delegate:e}=eM;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};class h1 extends Gq{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var n;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,n=0){return eM.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&eM.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,n=!1;try{this.work(e)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,zr(n,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const o3={now:()=>(o3.delegate||Date).now(),delegate:void 0};class By{constructor(e,t=By.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,n){return new this.schedulerActionCtor(this,e).schedule(n,t)}}By.now=o3.now;class f1 extends By{constructor(e,t=By.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const Uy=new f1(h1),Wq=Uy;function Kp(i,e=Uy){return Fn((t,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,d=e.now();if(d<c)return r=this.schedule(void 0,c-d),void n.add(r);a()}t.subscribe(An(n,c=>{s=c,o=e.now(),r||(r=e.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function a3(i){return Rn((e,t)=>i<=t)}function eh(i,e=Pa){return i=i??$q,Fn((t,n)=>{let r,s=!0;t.subscribe(An(n,o=>{const a=e(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function $q(i,e){return i===e}function at(i){return Fn((e,t)=>{ar(i).subscribe(An(t,()=>t.complete(),ss)),!t.closed&&e.subscribe(t)})}function Xn(i){return null!=i&&"false"!=`${i}`}function _a(i,e=0){return function jq(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):e}function tM(i){return Array.isArray(i)?i:[i]}function _r(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Pc(i){return i instanceof $t?i.nativeElement:i}let l3=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),qq=(()=>{class i{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,n)=>this._cleanupObserver(n))}observe(t){const n=Pc(t);return new Cn(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const n=new Ge,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:n,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:n,stream:r}=this._observedElements.get(t);n&&n.disconnect(),r.complete(),this._observedElements.delete(t)}}}return i.\u0275fac=function(t){return new(t||i)(X(l3))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Xq=(()=>{class i{constructor(t,n,r){this._contentObserver=t,this._elementRef=n,this._ngZone=r,this.event=new st,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Xn(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=_a(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Kp(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(R(qq),R($t),R(Dt))},i.\u0275dir=Ne({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),c3=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[l3]}),i})();const u3=new Set;let Zp,Yq=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Zq}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Kq(i){if(!u3.has(i))try{Zp||(Zp=document.createElement("style"),Zp.setAttribute("type","text/css"),document.head.appendChild(Zp)),Zp.sheet&&(Zp.sheet.insertRule(`@media ${i} {body{ }}`,0),u3.add(i))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)(X(Ar))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Zq(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let nM=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new Ge}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return d3(tM(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=Iu(d3(tM(t)).map(o=>this._registerQuery(o).observable));return s=xy(s.pipe(Di(1)),s.pipe(a3(1),Kp(0))),s.pipe(Xe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),s={observable:new Cn(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(ns(n),Xe(({matches:o})=>({query:t,matches:o})),at(this._destroySubject)),mql:n};return this._queries.set(t,s),s}}return i.\u0275fac=function(t){return new(t||i)(X(Yq),X(Dt))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function d3(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function iM(i,e){return(i.getAttribute(e)||"").match(/\S+/g)||[]}const p3="cdk-describedby-message",rM="cdk-describedby-host";let p1=0,eX=(()=>{class i{constructor(t,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+p1++,this._document=t,this._id=qn(Fp)+"-"+p1++}describe(t,n,r){if(!this._canBeDescribed(t,n))return;const s=m1(n,r);"string"!=typeof n?(m3(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,n,r){if(!n||!this._isElementNode(t))return;const s=m1(n,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof n){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${rM}="${this._id}"]`);for(let n=0;n<t.length;n++)this._removeCdkDescribedByReferenceIds(t[n]),t[n].removeAttribute(rM);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,n){const r=this._document.createElement("div");m3(r,this._id),r.textContent=t,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(m1(t,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const n=iM(t,"aria-describedby").filter(r=>0!=r.indexOf(p3));t.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(t,n){const r=this._messageRegistry.get(n);(function Jq(i,e,t){const n=iM(i,e);n.some(r=>r.trim()==t.trim())||(n.push(t.trim()),i.setAttribute(e,n.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(rM,this._id),r.referenceCount++}_removeMessageReference(t,n){const r=this._messageRegistry.get(n);r.referenceCount--,function Qq(i,e,t){const r=iM(i,e).filter(s=>s!=t.trim());r.length?i.setAttribute(e,r.join(" ")):i.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(rM)}_isElementDescribedByMessage(t,n){const r=iM(t,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(t,n){if(!this._isElementNode(t))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(t){return new(t||i)(X(Ft),X(Ar))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function m1(i,e){return"string"==typeof i?`${e||""}/${i}`:i}function m3(i,e){i.id||(i.id=`${p3}-${e}-${p1++}`)}class g3{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Ge,this._typeaheadSubscription=nn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Ge,this.change=new Ge,e instanceof Pp&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ti(t=>this._pressedLetters.push(t)),Kp(e),Rn(()=>this._pressedLetters.length>0),Xe(()=>this._pressedLetters.join(""))).subscribe(t=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||ga(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e);this._activeItem=t[n]??null,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Pp?this._items.toArray():this._items}}class tX extends g3{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class _3 extends g3{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let sM=(()=>{class i{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function iX(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const n=function nX(i){try{return i.frameElement}catch{return null}}(function dX(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(n&&(-1===v3(n)||!this.isVisible(n)))return!1;let r=t.nodeName.toLowerCase(),s=v3(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function cX(i){let e=i.nodeName.toLowerCase(),t="input"===e&&i.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,n){return function uX(i){return!function sX(i){return function aX(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function rX(i){let e=i.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(i)||function oX(i){return function lX(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||y3(i))}(t)&&!this.isDisabled(t)&&(n?.ignoreVisibility||this.isVisible(t))}}return i.\u0275fac=function(t){return new(t||i)(X(Ar))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function y3(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let e=i.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function v3(i){if(!y3(i))return null;const e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class hX{constructor(e,t,n,r,s=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const n=this._getFirstTabbableElement(t);return n?.focus(e),!!n}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=0;n<t.length;n++){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=t.length-1;n>=0;n--){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Di(1)).subscribe(e)}}let g1=(()=>{class i{constructor(t,n,r){this._checker=t,this._ngZone=n,this._document=r}create(t,n=!1){return new hX(t,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(t){return new(t||i)(X(sM),X(Dt),X(Ft))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _1(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function y1(i){const e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const fX=new Se("cdk-input-modality-detector-options"),pX={ignoreKeys:[18,17,224,91,16]},Jp=qp({passive:!0,capture:!0});let mX=(()=>{class i{constructor(t,n,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Nt(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Qd(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(_1(o)?"keyboard":"mouse"),this._mostRecentTarget=Qd(o))},this._onTouchstart=o=>{y1(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Qd(o))},this._options={...pX,...s},this.modalityDetected=this._modality.pipe(a3(1)),this.modalityChanged=this.modalityDetected.pipe(eh()),t.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Jp),r.addEventListener("mousedown",this._onMousedown,Jp),r.addEventListener("touchstart",this._onTouchstart,Jp)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Jp),document.removeEventListener("mousedown",this._onMousedown,Jp),document.removeEventListener("touchstart",this._onTouchstart,Jp))}}return i.\u0275fac=function(t){return new(t||i)(X(Ar),X(Dt),X(Ft),X(fX,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const gX=new Se("liveAnnouncerElement",{providedIn:"root",factory:function _X(){return null}}),yX=new Se("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let v1=(()=>{class i{constructor(t,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...n){const r=this._defaultOptions;let s,o;return 1===n.length&&"number"==typeof n[0]?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",n=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return i.\u0275fac=function(t){return new(t||i)(X(gX,8),X(Dt),X(Ft),X(yX,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vX=new Se("cdk-focus-monitor-default-options"),oM=qp({passive:!0,capture:!0});let kc=(()=>{class i{constructor(t,n,r,s,o){this._ngZone=t,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ge,this._rootNodeFocusAndBlurListener=a=>{for(let c=Qd(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,n=!1){const r=Pc(t);if(!this._platform.isBrowser||1!==r.nodeType)return ot(null);const s=s3(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new Ge,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const n=Pc(t),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(t,n,r){const s=Pc(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,n){t.classList.toggle("cdk-focused",!!n),t.classList.toggle("cdk-touch-focused","touch"===n),t.classList.toggle("cdk-keyboard-focused","keyboard"===n),t.classList.toggle("cdk-mouse-focused","mouse"===n),t.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(t,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,n){const r=this._elementInfo.get(n),s=Qd(t);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(t,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&t.relatedTarget instanceof Node&&n.contains(t.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(t,n){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(n))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,oM),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,oM)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(at(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const n=t.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,oM),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,oM),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,n,r){this._setClasses(t,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(t){const n=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}}return i.\u0275fac=function(t){return new(t||i)(X(Dt),X(Ar),X(mX),X(Ft,8),X(vX,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const x3="cdk-high-contrast-black-on-white",w3="cdk-high-contrast-white-on-black",b1="cdk-high-contrast-active";let M3=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=qn(nM).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(b1,x3,w3),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?t.add(b1,x3):2===n&&t.add(b1,w3)}}}return i.\u0275fac=function(t){return new(t||i)(X(Ar),X(Ft))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),C3=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(t){return new(t||i)(X(M3))},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[c3]}),i})();const bX=["addListener","removeListener"],xX=["addEventListener","removeEventListener"],wX=["on","off"];function ya(i,e,t,n){if(qt(t)&&(n=t,t=void 0),n)return ya(i,e,t).pipe(IT(n));const[r,s]=function SX(i){return qt(i.addEventListener)&&qt(i.removeEventListener)}(i)?xX.map(o=>a=>i[o](e,a,t)):function MX(i){return qt(i.addListener)&&qt(i.removeListener)}(i)?bX.map(S3(i,e)):function CX(i){return qt(i.on)&&qt(i.off)}(i)?wX.map(S3(i,e)):[];if(!r&&rd(i))return Zi(o=>ya(o,e,t))(ar(i));if(!r)throw new TypeError("Invalid event target");return new Cn(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function S3(i,e){return t=>n=>i[t](e,n)}const Vy={schedule(i){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:n}=Vy;n&&(e=n.requestAnimationFrame,t=n.cancelAnimationFrame);const r=e(s=>{t=void 0,i(s)});return new nn(()=>t?.(r))},requestAnimationFrame(...i){const{delegate:e}=Vy;return(e?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:e}=Vy;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},E3=new class AX extends f1{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class EX extends h1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=Vy.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Vy.cancelAnimationFrame(t),e._scheduled=void 0)}});let x1,DX=1;const aM={};function A3(i){return i in aM&&(delete aM[i],!0)}const TX={setImmediate(i){const e=DX++;return aM[e]=!0,x1||(x1=Promise.resolve()),x1.then(()=>A3(e)&&i()),e},clearImmediate(i){A3(i)}},{setImmediate:IX,clearImmediate:RX}=TX,lM={setImmediate(...i){const{delegate:e}=lM;return(e?.setImmediate||IX)(...i)},clearImmediate(i){const{delegate:e}=lM;return(e?.clearImmediate||RX)(i)},delegate:void 0},w1=new class kX extends f1{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class PX extends h1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=lM.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(lM.clearImmediate(t),e._scheduled=void 0)}});function cM(i=0,e,t=Wq){let n=-1;return null!=e&&(b0(e)?t=e:n=e),new Cn(r=>{let s=function LX(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function M1(i,e=Uy){return function OX(i){return Fn((e,t)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(An(t,c=>{n=!0,r=c,s||ar(i(c)).subscribe(s=An(t,a,l))},()=>{o=!0,(!n||!s||s.closed)&&t.complete()}))})}(()=>cM(i,e))}const FX=new Se("cdk-dir-doc",{providedIn:"root",factory:function NX(){return qn(Ft)}}),BX=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Lu=(()=>{class i{constructor(t){if(this.value="ltr",this.change=new st,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function UX(i){const e=i?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?BX.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(t){return new(t||i)(X(FX,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),zy=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({}),i})(),D3=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._platform=n,this._scrolled=new Ge,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Cn(n=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(M1(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ot()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){const r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(Rn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let r=Pc(n),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ya(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)(X(Dt),X(Ar),X(Ft,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),uM=(()=>{class i{constructor(t,n,r){this._platform=t,this._change=new Ge,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(M1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)(X(Ar),X(Dt),X(Ft,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Hy=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({}),i})(),T3=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[zy,Hy,zy,Hy]}),i})();class C1{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Qp extends C1{constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r}}class em extends C1{constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class HX extends C1{constructor(e){super(),this.element=e instanceof $t?e.nativeElement:e}}class dM{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Qp?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof em?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof HX?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class GX extends dM{constructor(e,t,n,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||bi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);-1!==r&&t.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let tm=(()=>{class i extends dM{constructor(t,n,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new st,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const n=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=n.createComponent(s,n.length,t.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return i.\u0275fac=function(t){return new(t||i)(R(gc),R(ts),R(Ft))},i.\u0275dir=Ne({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ht]}),i})(),nm=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({}),i})();const I3=Iq();class WX{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=_r(-this._previousScrollPosition.left),e.style.top=_r(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,n=e.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),I3&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),I3&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}}class $X{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class R3{enable(){}disable(){}attach(){}}function S1(i,e){return e.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function P3(i,e){return e.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class jX{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();S1(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let qX=(()=>{class i{constructor(t,n,r,s){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new R3,this.close=o=>new $X(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new WX(this._viewportRuler,this._document),this.reposition=o=>new jX(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(t){return new(t||i)(X(D3),X(uM),X(Dt),X(Ft))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Gy{constructor(e){if(this.scrollStrategy=new R3,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class XX{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let k3=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)(X(Ft))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),YX=(()=>{class i extends k3{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)(X(Ft),X(Dt,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),KX=(()=>{class i extends k3{constructor(t,n,r){super(t),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Qd(s)},this._clickListener=s=>{const o=Qd(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(t){if(super.add(t),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(t){return new(t||i)(X(Ft),X(Ar),X(Dt,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),hM=(()=>{class i{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||u1()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(t),u1()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(t){return new(t||i)(X(Ft),X(Ar))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Wy{constructor(e,t,n,r,s,o,a,l,c,d=!1){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Ge,this._attachments=new Ge,this._detachments=new Ge,this._locationChanges=nn.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Ge,this._outsidePointerEvents=new Ge,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Di(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=_r(this._config.width),e.height=_r(this._config.height),e.minWidth=_r(this._config.minWidth),e.minHeight=_r(this._config.minHeight),e.maxWidth=_r(this._config.maxWidth),e.maxHeight=_r(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){const r=tM(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(at(Ts(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const O3="cdk-overlay-connected-position-bounding-box",ZX=/([A-Za-z%]+)$/;class JX{constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ge,this._resizeSubscription=nn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(O3),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),d=this._getOverlayFit(c,t,n,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,n)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&th(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(O3),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r,s;if("center"==n.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==n.originX?o:a}return t.left<0&&(r-=t.left),s="center"==n.originY?e.top+e.height/2:"top"==n.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r,s;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){const s=F3(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,m=a+s.height-n.height,_=this._subtractOverflows(s.width,0-o,o+s.width-n.width),b=this._subtractOverflows(s.height,p,m),v=_*b;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,s=n.right-t.x,o=L3(this._overlayRef.getConfig().minHeight),a=L3(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=F3(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-n.top-e.y,0),c=Math.max(s.left-n.left-e.x,0);let d=0,h=0;return d=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-n.left-e.x:0,h=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:d,y:h},{x:e.x+d,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new XX(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let s,o,a,d,h,p;if("top"===t.overlayY)o=e.y,s=n.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=n.height-e.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const m=Math.min(n.bottom-e.y+n.top,e.y),_=this._lastBoundingBoxSize.height;s=2*m,o=e.y-m,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=n.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,d=n.right-e.x;else{const m=Math.min(n.right-e.x+n.left,e.x),_=this._lastBoundingBoxSize.width;d=2*m,h=e.x-m,d>_&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-_/2)}return{top:o,left:h,bottom:a,right:p,width:d,height:s}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=_r(n.height),r.top=_r(n.top),r.bottom=_r(n.bottom),r.width=_r(n.width),r.left=_r(n.left),r.right=_r(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=_r(s)),o&&(r.maxWidth=_r(o))}this._lastBoundingBoxSize=n,th(this._boundingBox.style,r)}_resetBoundingBoxStyles(){th(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){th(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();th(n,this._getExactOverlayY(t,e,d)),th(n,this._getExactOverlayX(t,e,d))}else n.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=_r(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=_r(o.maxWidth):s&&(n.maxWidth="")),th(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=_r(s.y),r}_getExactOverlayX(e,t,n){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=_r(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:P3(e,n),isOriginOutsideView:S1(e,n),isOverlayClipped:P3(t,n),isOverlayOutsideView:S1(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&tM(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof $t)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function th(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function L3(i){if("number"!=typeof i&&null!=i){const[e,t]=i.split(ZX);return t&&"px"!==t?null:parseFloat(e)}return i||null}function F3(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const N3="cdk-global-overlay-wrapper";class QX{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(N3),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",_="",b="";l?b="flex-start":"center"===d?(b="center",p?_=h:m=h):p?"left"===d||"end"===d?(b="flex-end",m=h):("right"===d||"start"===d)&&(b="flex-start",_=h):"left"===d||"start"===d?(b="flex-start",m=h):("right"===d||"end"===d)&&(b="flex-end",_=h),e.position=this._cssPosition,e.marginLeft=l?"0":m,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":_,t.justifyContent=b,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(N3),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let eY=(()=>{class i{constructor(t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new QX}flexibleConnectedTo(t){return new JX(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)(X(uM),X(Ft),X(Ar),X(hM))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),tY=0,lo=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,h,p,m){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=h,this._outsideClickDispatcher=p,this._animationsModuleType=m}create(t){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new Gy(t);return o.direction=o.direction||this._directionality.value,new Wy(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const n=this._document.createElement("div");return n.id="cdk-overlay-"+tY++,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Np)),new GX(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)(X(qX),X(hM),X(gc),X(eY),X(YX),X(bi),X(Dt),X(Ft),X(Lu),X(py),X(KX),X(oo,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();const nY=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],B3=new Se("cdk-connected-overlay-scroll-strategy");let U3=(()=>{class i{constructor(t){this.elementRef=t}}return i.\u0275fac=function(t){return new(t||i)(R($t))},i.\u0275dir=Ne({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),i})(),V3=(()=>{class i{constructor(t,n,r,s,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=nn.EMPTY,this._attachSubscription=nn.EMPTY,this._detachSubscription=nn.EMPTY,this._positionSubscription=nn.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new st,this.positionChange=new st,this.attach=new st,this.detach=new st,this.overlayKeydown=new st,this.overlayOutsideClick=new st,this._templatePortal=new em(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Xn(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Xn(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Xn(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Xn(t)}get push(){return this._push}set push(t){this._push=Xn(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=nY);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!ga(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),n=new Gy({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(t){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof U3?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(WN(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(R(lo),R(so),R(ts),R(B3),R(Lu,8))},i.\u0275dir=Ne({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[ui]}),i})();const rY={provide:B3,deps:[lo],useFactory:function iY(i){return()=>i.scrollStrategies.reposition()}};let im=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[lo,rY],imports:[zy,nm,T3,T3]}),i})();function sY(i,e){}class fM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let z3=(()=>{class i extends dM{constructor(t,n,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),n}attachTemplatePortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,n){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(n)}_focusByCssSelector(t,n){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,n)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let n=null;if("string"==typeof t?n=this._document.querySelector(t):"boolean"==typeof t?n=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(n=t),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=c1(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,n=c1();return t===n||t.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=c1())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(g1),R(Ft,8),R(fM),R(sM),R(Dt),R(Wy),R(kc))},i.\u0275cmp=St({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(t,n){if(1&t&&Qi(tm,7),2&t){let r;Kt(r=Zt())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,n){2&t&&Yt("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[ht],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&Pe(0,sY,0,0,"ng-template",0)},dependencies:[tm],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),i})();class E1{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Ge,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!ga(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const H3=new Se("DialogScrollStrategy"),oY=new Se("DialogData"),aY=new Se("DefaultDialogConfig"),cY={provide:H3,deps:[lo],useFactory:function lY(i){return()=>i.scrollStrategies.block()}};let uY=0,G3=(()=>{class i{constructor(t,n,r,s,o,a){this._overlay=t,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ge,this._afterOpenedAtThisLevel=new Ge,this._ariaHiddenElements=new Map,this.afterAllClosed=wy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ns(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,n){(n={...this._defaultOptions||new fM,...n}).id=n.id||"cdk-dialog-"+uY++,n.id&&this.getDialogById(n.id);const s=this._getOverlayConfig(n),o=this._overlay.create(s),a=new E1(o,n),l=this._attachContainer(o,a,n);return a.containerInstance=l,this._attachDialogContent(t,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){A1(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){A1(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),A1(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const n=new Gy({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(n.backdropClass=t.backdropClass),n}_attachContainer(t,n,r){const s=r.injector??r.viewContainerRef?.injector,o=[{provide:fM,useValue:r},{provide:E1,useValue:n},{provide:Wy,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=z3;const l=new Qp(a,r.viewContainerRef,bi.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,n,r,s){const o=this._createInjector(s,n,r);if(t instanceof so){let a={$implicit:s.data,dialogRef:n};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new em(t,null,a,o))}else{const a=r.attachComponentPortal(new Qp(t,s.viewContainerRef,o,s.componentFactoryResolver));n.componentInstance=a.instance}}_createInjector(t,n,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:oY,useValue:t.data},{provide:E1,useValue:n}];return t.providers&&("function"==typeof t.providers?o.push(...t.providers(n,t,r)):o.push(...t.providers)),t.direction&&(!s||!s.get(Lu,null,gt.Optional))&&o.push({provide:Lu,useValue:{value:t.direction,change:ot()}}),bi.create({parent:t.injector||s||this._injector,providers:o})}_removeOpenDialog(t,n){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const n=t.parentElement.children;for(let r=n.length-1;r>-1;r--){const s=n[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return i.\u0275fac=function(t){return new(t||i)(X(lo),X(bi),X(aY,8),X(i,12),X(hM),X(H3))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();function A1(i,e){let t=i.length;for(;t--;)e(i[t])}let dY=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[G3,cY],imports:[im,nm,C3,nm]}),i})();function hY(i,e){if(1&i&&Qe(0,"mat-pseudo-checkbox",4),2&i){const t=Te();ee("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function fY(i,e){if(1&i&&(se(0,"span",5),Ze(1),ae()),2&i){const t=Te();J(1),es("(",t.group.label,")")}}const pY=["*"],gY=new Se("mat-sanity-checks",{providedIn:"root",factory:function mY(){return!0}});let Dn=(()=>{class i{constructor(t,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!u1()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return i.\u0275fac=function(t){return new(t||i)(X(M3),X(gY,8),X(Ft))},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[zy,zy]}),i})();function pM(i){return class extends i{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Xn(e)}}}function $y(i,e){return class extends i{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const n=t||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function jy(i){return class extends i{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Xn(e)}}}function j3(i,e=0){return class extends i{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?_a(t):this.defaultTabIndex}}}function q3(i){return class extends i{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}function _Y(i){return class extends i{constructor(...e){super(...e),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Cn(t=>{this._isInitialized?this._notifySubscriber(t):this._pendingSubscribers.push(t)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(e){e.next(),e.complete()}}}let D1=(()=>{class i{isErrorState(t,n){return!!(t&&t.invalid&&(t.touched||n&&n.submitted))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),vY=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),i})();function qy(i,e,t){i.nativeElement.classList.toggle(e,t)}let X3=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Dn,Dn]}),i})();class xY{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Y3={enterDuration:225,exitDuration:150},T1=qp({passive:!0}),K3=["mousedown","touchstart"],Z3=["mouseup","mouseleave","touchend","touchcancel"];class MY{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Pc(n))}fadeInRipple(e,t,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...Y3,...n.animation};n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=n.radius||function CY(i,e,t){const n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=n.color&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,_="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m,b=new xY(this,d,n,_);d.style.transform="scale3d(1, 1, 1)",b.state=0,n.persistent||(this._mostRecentTransientRipple=b);let v=null;return!_&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const y=()=>this._finishRippleTransition(b),M=()=>this._destroyRipple(b);d.addEventListener("transitionend",y),d.addEventListener("transitioncancel",M),v={onTransitionEnd:y,onTransitionCancel:M}}),this._activeRipples.set(b,v),(_||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,n={...Y3,...e.config.animation};t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Pc(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(K3))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Z3),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=1,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=_1(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!y1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,T1)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(K3.forEach(e=>{this._triggerElement.removeEventListener(e,this,T1)}),this._pointerUpEventsRegistered&&Z3.forEach(e=>{this._triggerElement.removeEventListener(e,this,T1)}))}}const SY=new Se("mat-ripple-global-options");let Xy=(()=>{class i{constructor(t,n,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new MY(this,n,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(Dt),R(Ar),R(SY,8),R(oo,8))},i.\u0275dir=Ne({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,n){2&t&&fi("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),mM=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Dn,Dn]}),i})(),J3=(()=>{class i{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return i.\u0275fac=function(t){return new(t||i)(R(oo,8))},i.\u0275cmp=St({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,n){2&t&&fi("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,n){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),i})(),I1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Dn]}),i})();const Q3=new Se("MAT_OPTION_PARENT_COMPONENT"),eB=new Se("MatOptgroup");let EY=0;class AY{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let DY=(()=>{class i{constructor(t,n,r,s){this._element=t,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+EY++,this.onSelectionChange=new st,this._stateChanges=new Ge}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Xn(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!ga(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new AY(this,t))}}return i.\u0275fac=function(t){bc()},i.\u0275dir=Ne({type:i,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),Yy=(()=>{class i extends DY{constructor(t,n,r,s){super(t,n,r,s)}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(ni),R(Q3,8),R(eB,8))},i.\u0275cmp=St({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,n){1&t&&nt("click",function(){return n._selectViaInteraction()})("keydown",function(s){return n._handleKeydown(s)}),2&t&&(Dp("id",n.id),Yt("tabindex",n._getTabIndex())("aria-selected",n._getAriaSelected())("aria-disabled",n.disabled.toString()),fi("mat-selected",n.selected)("mat-option-multiple",n.multiple)("mat-active",n.active)("mat-option-disabled",n.disabled))},exportAs:["matOption"],features:[ht],ngContentSelectors:pY,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,n){1&t&&(ro(),Pe(0,hY,1,2,"mat-pseudo-checkbox",0),se(1,"span",1),ti(2),ae(),Pe(3,fY,2,1,"span",2),Qe(4,"div",3)),2&t&&(ee("ngIf",n.multiple),J(3),ee("ngIf",n.group&&n.group._inert),J(1),ee("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[Xy,qi,J3],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),i})();function tB(i,e,t){if(t.length){let n=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}let nB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[mM,Ja,Dn,I1]}),i})();class iB{}const Oc="*";function Ol(i,e){return{type:7,name:i,definitions:e,options:{}}}function co(i,e=null){return{type:4,styles:e,timings:i}}function rB(i,e=null){return{type:3,steps:i,options:e}}function sB(i,e=null){return{type:2,steps:i,options:e}}function Zn(i){return{type:6,styles:i,offset:null}}function vs(i,e,t){return{type:0,name:i,styles:e,options:t}}function Vs(i,e,t=null){return{type:1,expr:i,animation:e,options:t}}function R1(i=null){return{type:9,options:i}}function P1(i,e,t=null){return{type:11,selector:i,animation:e,options:t}}function oB(i){Promise.resolve(null).then(i)}class Ky{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){oB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class aB{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?oB(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}function PY(i,e){}const rm={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},kY={dialogContainer:Ol("dialogContainer",[vs("void, exit",Zn({opacity:0,transform:"scale(0.7)"})),vs("enter",Zn({transform:"none"})),Vs("* => enter",rB([co("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",Zn({transform:"none",opacity:1})),P1("@*",R1(),{optional:!0})]),rm),Vs("* => void, * => exit",rB([co("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",Zn({opacity:0})),P1("@*",R1(),{optional:!0})]),rm)])};class gM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=rm.params.enterAnimationDuration,this.exitAnimationDuration=rm.params.exitAnimationDuration}}let OY=(()=>{class i extends z3{constructor(t,n,r,s,o,a,l,c){super(t,n,r,s,o,a,l,c),this._animationStateChanged=new st}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(g1),R(Ft,8),R(gM),R(sM),R(Dt),R(Wy),R(kc))},i.\u0275cmp=St({type:i,selectors:[["ng-component"]],features:[ht],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})(),LY=(()=>{class i extends OY{constructor(t,n,r,s,o,a,l,c,d){super(t,n,r,s,o,a,l,d),this._changeDetectorRef=c,this._state="enter"}_onAnimationDone({toState:t,totalTime:n}){"enter"===t?this._openAnimationDone(n):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:n})}_onAnimationStart({toState:t,totalTime:n}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||rm.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||rm.params.exitAnimationDuration}}}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(g1),R(Ft,8),R(gM),R(sM),R(Dt),R(Wy),R(ni),R(kc))},i.\u0275cmp=St({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,n){1&t&&Kx("@dialogContainer.start",function(s){return n._onAnimationStart(s)})("@dialogContainer.done",function(s){return n._onAnimationDone(s)}),2&t&&(Dp("id",n._config.id),Yt("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),Jx("@dialogContainer",n._getAnimationState()))},features:[ht],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&Pe(0,PY,0,0,"ng-template",0)},dependencies:[tm],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[kY.dialogContainer]}}),i})();class Zy{constructor(e,t,n){this._ref=e,this._containerInstance=n,this._afterOpened=new Ge,this._beforeClosed=new Ge,this._state=0,this.disableClose=t.disableClose,this.id=e.id,n._animationStateChanged.pipe(Rn(r=>"opened"===r.state),Di(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Rn(r=>"closed"===r.state),Di(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ts(this.backdropClick(),this.keydownEvents().pipe(Rn(r=>27===r.keyCode&&!this.disableClose&&!ga(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),lB(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Rn(t=>"closing"===t.state),Di(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function lB(i,e,t){return i._closeInteractionType=e,i.close(t)}const O1=new Se("MatDialogData"),FY=new Se("mat-dialog-default-options"),cB=new Se("mat-dialog-scroll-strategy"),BY={provide:cB,deps:[lo],useFactory:function NY(i){return()=>i.scrollStrategies.block()}};let UY=0,VY=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,h){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ge,this._afterOpenedAtThisLevel=new Ge,this._idPrefix="mat-dialog-",this.afterAllClosed=wy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ns(void 0))),this._scrollStrategy=a,this._dialog=n.get(G3)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,n){let r;(n={...this._defaultOptions||new gM,...n}).id=n.id||`${this._idPrefix}${UY++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:gM,useValue:n},{provide:fM,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,n,l),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let n=t.length;for(;n--;)t[n].close()}}return i.\u0275fac=function(t){bc()},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})(),_M=(()=>{class i extends VY{constructor(t,n,r,s,o,a,l,c){super(t,n,s,a,l,o,Zy,LY,O1,c)}}return i.\u0275fac=function(t){return new(t||i)(X(lo),X(bi),X(py,8),X(FY,8),X(cB),X(i,12),X(hM),X(oo,8))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})(),zY=0,HY=(()=>{class i{constructor(t,n,r){this.dialogRef=t,this._elementRef=n,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=fB(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const n=t._matDialogClose||t._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(t){lB(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return i.\u0275fac=function(t){return new(t||i)(R(Zy,8),R($t),R(_M))},i.\u0275dir=Ne({type:i,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,n){1&t&&nt("click",function(s){return n._onButtonClick(s)}),2&t&&Yt("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[ui]}),i})(),uB=(()=>{class i{constructor(t,n,r){this._dialogRef=t,this._elementRef=n,this._dialog=r,this.id="mat-dialog-title-"+zY++}ngOnInit(){this._dialogRef||(this._dialogRef=fB(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return i.\u0275fac=function(t){return new(t||i)(R(Zy,8),R($t),R(_M))},i.\u0275dir=Ne({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,n){2&t&&Dp("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),i})(),dB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),i})(),hB=(()=>{class i{constructor(){this.align="start"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(t,n){2&t&&fi("mat-dialog-actions-align-center","center"===n.align)("mat-dialog-actions-align-end","end"===n.align)},inputs:{align:"align"}}),i})();function fB(i,e){let t=i.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(n=>n.id===t.id):null}let GY=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[_M,BY],imports:[dY,im,nm,Dn,Dn]}),i})();const WY=["mat-button",""],$Y=["*"],qY=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],XY=$y(pM(jy(class{constructor(i){this._elementRef=i}})));let nh=(()=>{class i extends XY{constructor(t,n,r){super(t),this._focusMonitor=n,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of qY)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,n){t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(n=>this._getHostElement().hasAttribute(n))}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(kc),R(oo,8))},i.\u0275cmp=St({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,n){if(1&t&&Qi(Xy,5),2&t){let r;Kt(r=Zt())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,n){2&t&&(Yt("disabled",n.disabled||null),fi("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ht],attrs:WY,ngContentSelectors:$Y,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,n){1&t&&(ro(),se(0,"span",0),ti(1),ae(),Qe(2,"span",1)(3,"span",2)),2&t&&(J(2),fi("mat-button-ripple-round",n.isRoundButton||n.isIconButton),ee("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},dependencies:[Xy],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),L1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[mM,Dn,Dn]}),i})();const YY=["class","dialog"];let pB=(()=>{class i{constructor(t,n){this.dialogRef=t,this.data=n}}return i.\u0275fac=function(t){return new(t||i)(R(Zy),R(O1))},i.\u0275cmp=St({type:i,selectors:[["app-confirm",8,"dialog"]],attrs:YY,decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(t,n){1&t&&(se(0,"h1",0),Ze(1,"Confirmation"),ae(),se(2,"div",1)(3,"p"),Ze(4),ae()(),se(5,"div",2)(6,"button",3),nt("click",function(){return n.dialogRef.close()}),Ze(7,"Cancel"),ae(),se(8,"button",4),Ze(9,"Yes"),ae()()),2&t&&(J(4),pi(n.data.text),J(4),ee("mat-dialog-close",!0))},dependencies:[nh,HY,uB,dB,hB]}),i})();function F1(i,e){const t="object"==typeof e;return new Promise((n,r)=>{const s=new Ko({next:o=>{n(o),s.unsubscribe()},error:r,complete:()=>{t?n(e.defaultValue):r(new by)}});i.subscribe(s)})}function mB(...i){const e=x0(i),{args:t,keys:n}=NN(i),r=new Cn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let h=!1;ar(t[d]).subscribe(An(s,p=>{h||(h=!0,c--),a[d]=p},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(n?BN(n,a):a),s.complete())}))}});return e?r.pipe(IT(e)):r}let gB=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(R(ua),R($t))},i.\u0275dir=Ne({type:i}),i})(),ih=(()=>{class i extends gB{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Mi(i)))(n||i)}}(),i.\u0275dir=Ne({type:i,features:[ht]}),i})();const Qa=new Se("NgValueAccessor"),ZY={provide:Qa,useExisting:Wn(()=>Ll),multi:!0},QY=new Se("CompositionEventMode");let Ll=(()=>{class i extends gB{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function JY(){const i=Pl()?Pl().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(R(ua),R($t),R(QY,8))},i.\u0275dir=Ne({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&nt("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Hn([ZY]),ht]}),i})();function Fu(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function yB(i){return null!=i&&"number"==typeof i.length}const bs=new Se("NgValidators"),Nu=new Se("NgAsyncValidators"),tK=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class N1{static min(e){return vB(e)}static max(e){return bB(e)}static required(e){return function xB(i){return Fu(i.value)?{required:!0}:null}(e)}static requiredTrue(e){return function wB(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function MB(i){return Fu(i.value)||tK.test(i.value)?null:{email:!0}}(e)}static minLength(e){return function CB(i){return e=>Fu(e.value)||!yB(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function SB(i){return e=>yB(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function EB(i){if(!i)return yM;let e,t;return"string"==typeof i?(t="","^"!==i.charAt(0)&&(t+="^"),t+=i,"$"!==i.charAt(i.length-1)&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(Fu(n.value))return null;const r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return PB(e)}static composeAsync(e){return kB(e)}}function vB(i){return e=>{if(Fu(e.value)||Fu(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function bB(i){return e=>{if(Fu(e.value)||Fu(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function yM(i){return null}function AB(i){return null!=i}function DB(i){return iy(i)?Ri(i):i}function TB(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function IB(i,e){return e.map(t=>t(i))}function RB(i){return i.map(e=>function nK(i){return!i.validate}(e)?e:t=>e.validate(t))}function PB(i){if(!i)return null;const e=i.filter(AB);return 0==e.length?null:function(t){return TB(IB(t,e))}}function B1(i){return null!=i?PB(RB(i)):null}function kB(i){if(!i)return null;const e=i.filter(AB);return 0==e.length?null:function(t){return mB(IB(t,e).map(DB)).pipe(Xe(TB))}}function U1(i){return null!=i?kB(RB(i)):null}function OB(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function LB(i){return i._rawValidators}function FB(i){return i._rawAsyncValidators}function V1(i){return i?Array.isArray(i)?i:[i]:[]}function vM(i,e){return Array.isArray(i)?i.includes(e):i===e}function NB(i,e){const t=V1(e);return V1(i).forEach(r=>{vM(t,r)||t.push(r)}),t}function BB(i,e){return V1(e).filter(t=>!vM(i,t))}class UB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=B1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=U1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class zs extends UB{get formDirective(){return null}get path(){return null}}class Fl extends UB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class VB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Lc=(()=>{class i extends VB{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Fl,2))},i.\u0275dir=Ne({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&fi("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[ht]}),i})(),zB=(()=>{class i extends VB{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(R(zs,10))},i.\u0275dir=Ne({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,n){2&t&&fi("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[ht]}),i})();const Jy="VALID",xM="INVALID",sm="PENDING",Qy="DISABLED";function W1(i){return(wM(i)?i.validators:i)||null}function GB(i){return Array.isArray(i)?B1(i):i||null}function $1(i,e){return(wM(e)?e.asyncValidators:i)||null}function WB(i){return Array.isArray(i)?U1(i):i||null}function wM(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function $B(i,e,t){const n=i.controls;if(!(e?Object.keys(n):n).length)throw new _e(1e3,"");if(!n[t])throw new _e(1001,"")}function jB(i,e,t){i._forEachChild((n,r)=>{if(void 0===t[r])throw new _e(1002,"")})}class MM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=GB(this._rawValidators),this._composedAsyncValidatorFn=WB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Jy}get invalid(){return this.status===xM}get pending(){return this.status==sm}get disabled(){return this.status===Qy}get enabled(){return this.status!==Qy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=GB(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=WB(e)}addValidators(e){this.setValidators(NB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(BB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(BB(e,this._rawAsyncValidators))}hasValidator(e){return vM(this._rawValidators,e)}hasAsyncValidator(e){return vM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=sm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qy,this.errors=null,this._forEachChild(n=>{n.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jy,this._forEachChild(n=>{n.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jy||this.status===sm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qy:Jy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=sm,this._hasOwnPendingAsyncValidator=!0;const t=DB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new st,this.statusChanges=new st}_calculateStatus(){return this._allControlsDisabled()?Qy:this.errors?xM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sm)?sm:this._anyControlsHaveStatus(xM)?xM:Jy}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class CM extends MM{constructor(e,t,n){super(W1(t),$1(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){jB(this,0,e),Object.keys(e).forEach(n=>{$B(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{const r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>!!n._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function SM(i,e){return[...e.path,i]}function ev(i,e){j1(i,e),e.valueAccessor.writeValue(i.value),i.disabled&&e.valueAccessor.setDisabledState?.(!0),function dK(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&qB(i,e)})}(i,e),function fK(i,e){const t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function hK(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&qB(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function uK(i,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function EM(i,e,t=!0){const n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),DM(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function AM(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function j1(i,e){const t=LB(i);null!==e.validator?i.setValidators(OB(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const n=FB(i);null!==e.asyncValidator?i.setAsyncValidators(OB(n,e.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();AM(e._rawValidators,r),AM(e._rawAsyncValidators,r)}function DM(i,e){let t=!1;if(null!==i){if(null!==e.validator){const r=LB(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,i.setValidators(s))}}if(null!==e.asyncValidator){const r=FB(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,i.setAsyncValidators(s))}}}const n=()=>{};return AM(e._rawValidators,n),AM(e._rawAsyncValidators,n),t}function qB(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function XB(i,e){j1(i,e)}function q1(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function KB(i,e){i._syncPendingControls(),e.forEach(t=>{const n=t.control;"submit"===n.updateOn&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function X1(i,e){if(!e)return null;let t,n,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Ll?t=s:function gK(i){return Object.getPrototypeOf(i.constructor)===ih}(s)?n=s:r=s}),r||n||t||null}const yK={provide:zs,useExisting:Wn(()=>nv)},tv=(()=>Promise.resolve(null))();let nv=(()=>{class i extends zs{constructor(t,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new st,this.form=new CM({},B1(t),U1(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){tv.then(()=>{const n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),ev(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){tv.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){tv.then(()=>{const n=this._findContainer(t.path),r=new CM({});XB(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){tv.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){tv.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,KB(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return i.\u0275fac=function(t){return new(t||i)(R(bs,10),R(Nu,10))},i.\u0275dir=Ne({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,n){1&t&&nt("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Hn([yK]),ht]}),i})();function ZB(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function JB(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const iv=class extends MM{constructor(e=null,t,n){super(W1(t),$1(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wM(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=JB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){JB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},xK={provide:Fl,useExisting:Wn(()=>Fc)},tU=(()=>Promise.resolve(null))();let Fc=(()=>{class i extends Fl{constructor(t,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new iv,this._registered=!1,this.update=new st,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=X1(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),q1(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ev(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){tU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const n=t.isDisabled.currentValue,r=0!==n&&function Cc(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}(n);tU.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?SM(t,this._parent):[t]}}return i.\u0275fac=function(t){return new(t||i)(R(zs,9),R(bs,10),R(Nu,10),R(Qa,10),R(ni,8))},i.\u0275dir=Ne({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Hn([xK]),ht,ui]}),i})(),nU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const wK={provide:Qa,useExisting:Wn(()=>rh),multi:!0};let rh=(()=>{class i extends ih{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=n=>{t(""==n?null:parseFloat(n))}}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Mi(i)))(n||i)}}(),i.\u0275dir=Ne({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,n){1&t&&nt("input",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},features:[Hn([wK]),ht]}),i})(),iU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({}),i})();const Y1=new Se("NgModelWithFormControlWarning"),AK={provide:zs,useExisting:Wn(()=>om)};let om=(()=>{class i extends zs{constructor(t,n){super(),this.validators=t,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new st,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(DM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const n=this.form.get(t.path);return ev(n,t),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){EM(t.control||null,t,!1),function _K(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this.submitted=!0,KB(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const n=t.control,r=this.form.get(t.path);n!==r&&(EM(n||null,t),(i=>i instanceof iv)(r)&&(ev(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const n=this.form.get(t.path);XB(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const n=this.form.get(t.path);n&&function pK(i,e){return DM(i,e)}(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){j1(this.form,this),this._oldForm&&DM(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(t){return new(t||i)(R(bs,10),R(Nu,10))},i.\u0275dir=Ne({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,n){1&t&&nt("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Hn([AK]),ht,ui]}),i})();const IK={provide:Fl,useExisting:Wn(()=>J1)};let J1=(()=>{class i extends Fl{constructor(t,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new st,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=X1(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),q1(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return SM(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(t){return new(t||i)(R(zs,13),R(bs,10),R(Nu,10),R(Qa,10),R(Y1,8))},i.\u0275dir=Ne({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Hn([IK]),ht,ui]}),i})();function dU(i){return"number"==typeof i?i:parseFloat(i)}let sh=(()=>{class i{constructor(){this._validator=yM}ngOnChanges(t){if(this.inputName in t){const n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):yM,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,features:[ui]}),i})();const NK={provide:bs,useExisting:Wn(()=>rv),multi:!0};let rv=(()=>{class i extends sh{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>dU(t),this.createValidator=t=>bB(t)}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Mi(i)))(n||i)}}(),i.\u0275dir=Ne({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,n){2&t&&Yt("max",n._enabled?n.max:null)},inputs:{max:"max"},features:[Hn([NK]),ht]}),i})();const BK={provide:bs,useExisting:Wn(()=>sv),multi:!0};let sv=(()=>{class i extends sh{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>dU(t),this.createValidator=t=>vB(t)}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Mi(i)))(n||i)}}(),i.\u0275dir=Ne({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,n){2&t&&Yt("min",n._enabled?n.min:null)},inputs:{min:"min"},features:[Hn([BK]),ht]}),i})(),_U=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[iU]}),i})(),$K=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[_U]}),i})(),yU=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Y1,useValue:t.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[_U]}),i})();class vU extends MM{constructor(e,t,n){super(W1(t),$1(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){jB(this,0,e),e.forEach((n,r)=>{$B(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,n)=>!!n._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function bU(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let jK=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new i;return t.useNonNullable=!0,t}group(t,n=null){const r=this._reduceControls(t);let s={};return bU(n)?s=n:null!==n&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new CM(r,s)}control(t,n,r){let s={};return this.useNonNullable?(bU(n)?s=n:(s.validators=n,s.asyncValidators=r),new iv(t,{...s,nonNullable:!0})):new iv(t,n,r)}array(t,n,r){const s=t.map(o=>this._createControl(o));return new vU(s,n,r)}_reduceControls(t){const n={};return Object.keys(t).forEach(r=>{n[r]=this._createControl(t[r])}),n}_createControl(t){return t instanceof iv||t instanceof MM?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:yU}),i})();const qK=["connectionContainer"],XK=["inputContainer"],YK=["label"];function KK(i,e){1&i&&(Os(0),se(1,"div",14),Qe(2,"div",15)(3,"div",16)(4,"div",17),ae(),se(5,"div",18),Qe(6,"div",15)(7,"div",16)(8,"div",17),ae(),Ls())}function ZK(i,e){if(1&i){const t=Ei();se(0,"div",19),nt("cdkObserveContent",function(){return Qt(t),cn(Te().updateOutlineGap())}),ti(1,1),ae()}2&i&&ee("cdkObserveContentDisabled","outline"!=Te().appearance)}function JK(i,e){if(1&i&&(Os(0),ti(1,2),se(2,"span"),Ze(3),ae(),Ls()),2&i){const t=Te(2);J(3),pi(t._control.placeholder)}}function QK(i,e){1&i&&ti(0,3,["*ngSwitchCase","true"])}function eZ(i,e){1&i&&(se(0,"span",23),Ze(1," *"),ae())}function tZ(i,e){if(1&i){const t=Ei();se(0,"label",20,21),nt("cdkObserveContent",function(){return Qt(t),cn(Te().updateOutlineGap())}),Pe(2,JK,4,1,"ng-container",12),Pe(3,QK,1,0,"ng-content",12),Pe(4,eZ,2,0,"span",22),ae()}if(2&i){const t=Te();fi("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),ee("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Yt("for",t._control.id)("aria-owns",t._control.id),J(2),ee("ngSwitchCase",!1),J(1),ee("ngSwitchCase",!0),J(1),ee("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function nZ(i,e){1&i&&(se(0,"div",24),ti(1,4),ae())}function iZ(i,e){if(1&i&&(se(0,"div",25),Qe(1,"span",26),ae()),2&i){const t=Te();J(1),fi("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function rZ(i,e){1&i&&(se(0,"div"),ti(1,5),ae()),2&i&&ee("@transitionMessages",Te()._subscriptAnimationState)}function sZ(i,e){if(1&i&&(se(0,"div",30),Ze(1),ae()),2&i){const t=Te(2);ee("id",t._hintLabelId),J(1),pi(t.hintLabel)}}function oZ(i,e){if(1&i&&(se(0,"div",27),Pe(1,sZ,2,2,"div",28),ti(2,6),Qe(3,"div",29),ti(4,7),ae()),2&i){const t=Te();ee("@transitionMessages",t._subscriptAnimationState),J(1),ee("ngIf",t.hintLabel)}}const aZ=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],lZ=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let cZ=0;const xU=new Se("MatError");let uZ=(()=>{class i{constructor(t,n){this.id="mat-error-"+cZ++,t||n.nativeElement.setAttribute("aria-live","polite")}}return i.\u0275fac=function(t){return new(t||i)(Va("aria-live"),R($t))},i.\u0275dir=Ne({type:i,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,n){2&t&&Yt("id",n.id)},inputs:{id:"id"},features:[Hn([{provide:xU,useExisting:i}])]}),i})();const dZ={transitionMessages:Ol("transitionMessages",[vs("enter",Zn({opacity:1,transform:"translateY(0%)"})),Vs("void => enter",[Zn({opacity:0,transform:"translateY(-5px)"}),co("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let TM=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i}),i})();const hZ=new Se("MatHint");let Nc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["mat-label"]]}),i})(),fZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["mat-placeholder"]]}),i})();const pZ=new Se("MatPrefix"),mZ=new Se("MatSuffix");let wU=0;const _Z=$y(class{constructor(i){this._elementRef=i}},"primary"),yZ=new Se("MAT_FORM_FIELD_DEFAULT_OPTIONS"),nI=new Se("MatFormField");let oh=(()=>{class i extends _Z{constructor(t,n,r,s,o,a,l){super(t),this._changeDetectorRef=n,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Ge,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+wU++,this._labelId="mat-form-field-label-"+wU++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){const n=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&n!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Xn(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(ns(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(at(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(at(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Ts(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ns(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ns(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(at(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const n=this._control?this._control.ngControl:null;return n&&n[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,ya(this._label.nativeElement,"transitionend").pipe(Di(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;n?t.push(n.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,n=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const d=n.querySelectorAll(`${r}, ${s}`);for(let h=0;h<d.length;h++)d[h].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=n.querySelectorAll(r),c=n.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const d=n.getBoundingClientRect();if(0===d.width&&0===d.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const h=this._getStartEnd(d),p=t.children,m=this._getStartEnd(p[0].getBoundingClientRect());let _=0;for(let b=0;b<p.length;b++)_+=p[b].offsetWidth;o=Math.abs(m-h)-5,a=_>0?.75*_+10:0}for(let d=0;d<l.length;d++)l[d].style.width=`${o}px`;for(let d=0;d<c.length;d++)c[d].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const n=t.getRootNode();return n&&n!==t}return document.documentElement.contains(t)}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(ni),R(Lu,8),R(yZ,8),R(Ar),R(Dt),R(oo,8))},i.\u0275cmp=St({type:i,selectors:[["mat-form-field"]],contentQueries:function(t,n,r){if(1&t&&(Ai(r,TM,5),Ai(r,TM,7),Ai(r,Nc,5),Ai(r,Nc,7),Ai(r,fZ,5),Ai(r,xU,5),Ai(r,hZ,5),Ai(r,pZ,5),Ai(r,mZ,5)),2&t){let s;Kt(s=Zt())&&(n._controlNonStatic=s.first),Kt(s=Zt())&&(n._controlStatic=s.first),Kt(s=Zt())&&(n._labelChildNonStatic=s.first),Kt(s=Zt())&&(n._labelChildStatic=s.first),Kt(s=Zt())&&(n._placeholderChild=s.first),Kt(s=Zt())&&(n._errorChildren=s),Kt(s=Zt())&&(n._hintChildren=s),Kt(s=Zt())&&(n._prefixChildren=s),Kt(s=Zt())&&(n._suffixChildren=s)}},viewQuery:function(t,n){if(1&t&&(Qi(qK,7),Qi(XK,5),Qi(YK,5)),2&t){let r;Kt(r=Zt())&&(n._connectionContainerRef=r.first),Kt(r=Zt())&&(n._inputContainerRef=r.first),Kt(r=Zt())&&(n._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,n){2&t&&fi("mat-form-field-appearance-standard","standard"==n.appearance)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-appearance-legacy","legacy"==n.appearance)("mat-form-field-invalid",n._control.errorState)("mat-form-field-can-float",n._canLabelFloat())("mat-form-field-should-float",n._shouldLabelFloat())("mat-form-field-has-label",n._hasFloatingLabel())("mat-form-field-hide-placeholder",n._hideControlPlaceholder())("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-focused",n._control.focused)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))("_mat-animation-noopable",!n._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Hn([{provide:nI,useExisting:i}]),ht],ngContentSelectors:lZ,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,n){1&t&&(ro(aZ),se(0,"div",0)(1,"div",1,2),nt("click",function(s){return n._control.onContainerClick&&n._control.onContainerClick(s)}),Pe(3,KK,9,0,"ng-container",3),Pe(4,ZK,2,1,"div",4),se(5,"div",5,6),ti(7),se(8,"span",7),Pe(9,tZ,5,16,"label",8),ae()(),Pe(10,nZ,2,0,"div",9),ae(),Pe(11,iZ,2,4,"div",10),se(12,"div",11),Pe(13,rZ,2,1,"div",12),Pe(14,oZ,5,2,"div",13),ae()()),2&t&&(J(3),ee("ngIf","outline"==n.appearance),J(1),ee("ngIf",n._prefixChildren.length),J(5),ee("ngIf",n._hasFloatingLabel()),J(1),ee("ngIf",n._suffixChildren.length),J(1),ee("ngIf","outline"!=n.appearance),J(1),ee("ngSwitch",n._getDisplayedMessages()),J(1),ee("ngSwitchCase","error"),J(1),ee("ngSwitchCase","hint"))},dependencies:[qi,Bp,Sw,Xq],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[dZ.transitionMessages]},changeDetection:0}),i})(),IM=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Ja,Dn,c3,Dn]}),i})();const CU=qp({passive:!0});let vZ=(()=>{class i{constructor(t,n){this._platform=t,this._ngZone=n,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return qs;const n=Pc(t),r=this._monitoredElements.get(n);if(r)return r.subject;const s=new Ge,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,CU),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",a,CU)}}),s}stopMonitoring(t){const n=Pc(t),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((t,n)=>this.stopMonitoring(n))}}return i.\u0275fac=function(t){return new(t||i)(X(Ar),X(Dt))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),SU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({}),i})();const bZ=new Se("MAT_INPUT_VALUE_ACCESSOR"),xZ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let wZ=0;const MZ=q3(class{constructor(i,e,t,n){this._defaultErrorStateMatcher=i,this._parentForm=e,this._parentFormGroup=t,this.ngControl=n,this.stateChanges=new Ge}});let ah=(()=>{class i extends MZ{constructor(t,n,r,s,o,a,l,c,d,h){super(a,s,o,r),this._elementRef=t,this._platform=n,this._autofillMonitor=c,this._formField=h,this._uid="mat-input-"+wZ++,this.focused=!1,this.stateChanges=new Ge,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(_=>r3().has(_)),this._iOSKeyupListener=_=>{const b=_.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const p=this._elementRef.nativeElement,m=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&d.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===m,this._isTextarea="textarea"===m,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Xn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(N1.required)??!1}set required(t){this._required=Xn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&r3().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Xn(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,n=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(n!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=n,n?r.setAttribute("placeholder",n):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){xZ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,n=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(Ar),R(Fl,10),R(nv,8),R(om,8),R(D1),R(bZ,10),R(vZ),R(Dt),R(nI,8))},i.\u0275dir=Ne({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,n){1&t&&nt("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&t&&(Dp("disabled",n.disabled)("required",n.required),Yt("id",n.id)("data-placeholder",n.placeholder)("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required),fi("mat-input-server",n._isServer)("mat-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Hn([{provide:TM,useExisting:i}]),ht,ui]}),i})(),CZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[D1],imports:[SU,IM,Dn,SU,IM]}),i})();const SZ=["class","dialog"];function EZ(i,e){if(1&i&&(se(0,"mat-form-field",7)(1,"mat-label"),Ze(2),ae(),Qe(3,"input",8),ae()),2&i){const t=e.$implicit;J(2),pi(t.title),J(1),ee("id",t.id)("type",t.type)("formControlName",t.id)}}let AZ=(()=>{class i{constructor(t,n,r){this.dialogRef=t,this.fb=n,this.data=r;const s={};for(const o of r.args)s[o.id]=["",N1.required];this.argsForm=this.fb.group(s)}submit(){const t=this.argsForm.value;for(const n of this.data.args)"number"==n.type&&(t[n.id]=+t[n.id]);this.dialogRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Zy),R(jK),R(O1))},i.\u0275cmp=St({type:i,selectors:[["app-run-custom-action",8,"dialog"]],attrs:SZ,decls:12,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["appearance","fill",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],["appearance","fill"],["matInput","",3,"id","type","formControlName"]],template:function(t,n){1&t&&(se(0,"h1",0),Ze(1),ae(),se(2,"div",1)(3,"p"),Ze(4),ae()(),se(5,"form",2),Pe(6,EZ,4,4,"mat-form-field",3),ae(),se(7,"div",4)(8,"button",5),nt("click",function(){return n.dialogRef.close()}),Ze(9,"Cancel"),ae(),se(10,"button",6),nt("click",function(){return n.submit()}),Ze(11,"Run"),ae()()),2&t&&(J(1),es('Run action "',n.data.title,'"'),J(3),pi(n.data.description),J(1),ee("formGroup",n.argsForm),J(1),ee("ngForOf",n.data.args),J(4),ee("disabled",n.argsForm.invalid))},dependencies:[pa,nU,Ll,Lc,zB,oh,Nc,ah,nh,uB,dB,hB,om,J1]}),i})(),lh=(()=>{class i{constructor(t){this.ngZone=t,this.openedResource$=new Nt(null),this.openedResourcePath$=new Nt(null),eel.expose(this.wrapHandler(this.openFile),"open_file"),eel.on_angular_ready()}wrapHandler(t){return(...n)=>{try{Dt.assertInAngularZone(),t.bind(this)(...n)}catch{this.ngZone.run(t,this,n)}}}openFile(t,n=!1){var r=this;return an(function*(){r.openedResource$.next(null),r.openedResourcePath$.next(null);const s=yield eel.open_file(t,n)();r.openedResource$.next(s),r.openedResourcePath$.next(t)})()}openFileWithSystemApp(t){return an(function*(){yield eel.open_file_with_system_app(t)()})()}runCustomAction(t,n,r){return an(function*(){return eel.run_custom_action(t.block_id,n,r)()})()}saveFile(t){var n=this;return an(function*(){return eel.save_file(n.openedResourcePath$.getValue(),t)()})()}serializeResource(t,n={}){return an(function*(){return eel.serialize_resource(t,n)()})()}serializeResourceTmp(t,n,r={}){return an(function*(){return eel.serialize_resource_tmp(t,n,r)()})()}serializeReversible(t,n){return an(function*(){return eel.serialize_reversible(t,n)()})()}deserializeResource(t){return an(function*(){return eel.deserialize_resource(t)()})()}}return i.\u0275fac=function(t){return new(t||i)(X(Dt))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ov=Vr(489);let am=(()=>{class i{constructor(t){this.eelDelegate=t,this.resourceData$=new Nt(null),this.resourceError$=new Nt(null),this.customActionRunning$=new Nt(!1),this.changedDataBlocks={},this.dataBlockChange$=new Ge,this.unknownsHidden$=new Nt(!0),this.eelDelegate.openedResource$.subscribe(n=>{this.clearUnsavedChanges(),n?n.block_class_mro?(this.dataSnapshot=(0,ov.cloneDeep)(this.buildResourceDataSnapshot(n.value)),this.resourceData$.next(n),this.resourceError$.next(null)):(this.resourceData$.next(null),this.resourceError$.next(n)):(this.resourceData$.next(null),this.resourceError$.next(null))}),this.dataBlockChange$.subscribe(([n,r])=>{(0,ov.isEqual)(r,this.getInitialValueFromSnapshot(n))?delete this.changedDataBlocks[n]:this.changedDataBlocks[n]=r})}get hasUnsavedChanges(){return Object.keys(this.changedDataBlocks).length>0}getInitialValueFromSnapshot(t){let n=this.dataSnapshot;const r=t.replace("__","/").split("/");for(let s=0;s<r.length-1;s++)n=n[r[s]];return n[r[r.length-1]]}buildResourceDataSnapshot(t){const n={},r=s=>{(0,ov.forOwn)(s,o=>{if((0,ov.isObject)(o)){if(o&&o.block_class_mro){const a=o.block_id.replace("__","/").split("/");let l=n;for(let c=0;c<a.length-1;c++)(!l[a[c]]||!l[a[c]].__snap__)&&(l[a[c]]={__snap__:!0}),l=l[a[c]];l[a[a.length-1]]=o.value}r(o)}})};return r(t),n}clearUnsavedChanges(){Object.keys(this.changedDataBlocks).forEach(t=>{delete this.changedDataBlocks[t]})}processExternalChanges(t){var n=this;return an(function*(){n.customActionRunning$.next(!0);const r=yield t();if(r.error_class)throw n.customActionRunning$.next(!1),r;return(0,ov.merge)(n.resourceData$.getValue(),r),n.changedDataBlocks.__has_external_changes__=1,n.customActionRunning$.next(!1),r})()}runCustomAction(t,n){var r=this;return an(function*(){return r.processExternalChanges(()=>r.eelDelegate.runCustomAction(r.resourceData$.getValue(),t,n))})()}deserializeResource(t){var n=this;return an(function*(){return n.processExternalChanges(()=>n.eelDelegate.deserializeResource(t))})()}}return i.\u0275fac=function(t){return new(t||i)(X(lh))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function DZ(i,e){if(1&i){const t=Ei();se(0,"div",2)(1,"button",3),nt("click",function(){return Qt(t),cn(Te().action())}),Ze(2),ae()()}if(2&i){const t=Te();J(2),pi(t.data.action)}}function TZ(i,e){}const EU=new Se("MatSnackBarData");class RM{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const IZ=Math.pow(2,31)-1;class iI{constructor(e,t){this._overlayRef=t,this._afterDismissed=new Ge,this._afterOpened=new Ge,this._onAction=new Ge,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,IZ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let RZ=(()=>{class i{constructor(t,n){this.snackBarRef=t,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(t){return new(t||i)(R(iI),R(EU))},i.\u0275cmp=St({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,n){1&t&&(se(0,"span",0),Ze(1),ae(),Pe(2,DZ,3,1,"div",1)),2&t&&(J(1),pi(n.data.message),J(1),ee("ngIf",n.hasAction))},dependencies:[qi,nh],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),i})();const PZ={snackBarState:Ol("state",[vs("void, hidden",Zn({transform:"scale(0.8)",opacity:0})),vs("visible",Zn({transform:"scale(1)",opacity:1})),Vs("* => visible",co("150ms cubic-bezier(0, 0, 0.2, 1)")),Vs("* => void, * => hidden",co("75ms cubic-bezier(0.4, 0.0, 1, 1)",Zn({opacity:0})))])};let kZ=(()=>{class i extends dM{constructor(t,n,r,s,o){super(),this._ngZone=t,this._elementRef=n,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Ge,this._onExit=new Ge,this._onEnter=new Ge,this._animationState="void",this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),n}attachTemplatePortal(t){this._assertNotAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),n}onAnimationEnd(t){const{fromState:n,toState:r}=t;if(("void"===r&&"void"!==n||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Di(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(r=>t.classList.add(r)):t.classList.add(n))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),n.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(t){return new(t||i)(R(Dt),R($t),R(ni),R(Ar),R(RM))},i.\u0275dir=Ne({type:i,viewQuery:function(t,n){if(1&t&&Qi(tm,7),2&t){let r;Kt(r=Zt())&&(n._portalOutlet=r.first)}},features:[ht]}),i})(),OZ=(()=>{class i extends kZ{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Mi(i)))(n||i)}}(),i.\u0275cmp=St({type:i,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,n){1&t&&Kx("@state.done",function(s){return n.onAnimationEnd(s)}),2&t&&Jx("@state",n._animationState)},features:[ht],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,n){1&t&&(se(0,"div",0),Pe(1,TZ,0,0,"ng-template",1),ae(),Qe(2,"div")),2&t&&(J(2),Yt("aria-live",n._live)("role",n._role))},dependencies:[tm],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[PZ.snackBarState]}}),i})(),AU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[im,nm,Ja,L1,Dn,Dn]}),i})();const DU=new Se("mat-snack-bar-default-options",{providedIn:"root",factory:function LZ(){return new RM}});let FZ=(()=>{class i{constructor(t,n,r,s,o,a){this._overlay=t,this._live=n,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,n){return this._attach(t,n)}openFromTemplate(t,n){return this._attach(t,n)}open(t,n="",r){const s={...this._defaultConfig,...r};return s.data={message:t,action:n},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,n){const s=bi.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:RM,useValue:n}]}),o=new Qp(this.snackBarContainerComponent,n.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=n,a.instance}_attach(t,n){const r={...new RM,...this._defaultConfig,...n},s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new iI(o,s);if(t instanceof so){const l=new em(t,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new Qp(t,void 0,l),d=o.attachComponentPortal(c);a.instance=d.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(at(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,n){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),n.duration&&n.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(n.duration))}_createOverlay(t){const n=new Gy;n.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,a=!o&&"center"!==t.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(t,n){return bi.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:iI,useValue:n},{provide:EU,useValue:t.data}]})}}return i.\u0275fac=function(t){return new(t||i)(X(lo),X(v1),X(bi),X(nM),X(i,12),X(DU))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})(),NZ=(()=>{class i extends FZ{constructor(t,n,r,s,o,a){super(t,n,r,s,o,a),this.simpleSnackBarComponent=RZ,this.snackBarContainerComponent=OZ,this.handsetCssClass="mat-snack-bar-handset"}}return i.\u0275fac=function(t){return new(t||i)(X(lo),X(v1),X(bi),X(nM),X(i,12),X(DU))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:AU}),i})();const BZ=["*",[["mat-toolbar-row"]]],UZ=["*","mat-toolbar-row"],VZ=$y(class{constructor(i){this._elementRef=i}});let zZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),HZ=(()=>{class i extends VZ{constructor(t,n,r){super(t),this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(Ar),R(Ft))},i.\u0275cmp=St({type:i,selectors:[["mat-toolbar"]],contentQueries:function(t,n,r){if(1&t&&Ai(r,zZ,5),2&t){let s;Kt(s=Zt())&&(n._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,n){2&t&&fi("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[ht],ngContentSelectors:UZ,decls:2,vars:0,template:function(t,n){1&t&&(ro(BZ),ti(0),ti(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),i})(),GZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Dn,Dn]}),i})(),TU=(()=>{class i{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Xn(t)}get inset(){return this._inset}set inset(t){this._inset=Xn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,n){2&t&&(Yt("aria-orientation",n.vertical?"vertical":"horizontal"),fi("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),i})(),IU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Dn,Dn]}),i})();const WZ=["tooltip"],RU="tooltip-panel",PU=qp({passive:!0}),kU=new Se("mat-tooltip-scroll-strategy"),XZ={provide:kU,deps:[lo],useFactory:function qZ(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},YZ=new Se("mat-tooltip-default-options",{providedIn:"root",factory:function KZ(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let ZZ=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,h,p,m){this._overlay=t,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=h,this._defaultOptions=p,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Ge,this._scrollStrategy=d,this._document=m,p&&(p.position&&(this.position=p.position),p.touchGestures&&(this.touchGestures=p.touchGestures)),h.change.pipe(at(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=Xn(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=_a(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=_a(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(at(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{t.removeEventListener(n,r,PU)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const n=this._createOverlay();this._detach(),this._portal=this._portal||new Qp(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=n.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(at(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),n=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(t);return n.positionChanges.pipe(at(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:n,panelClass:`${this._cssClassPrefix}-${RU}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(at(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(at(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(at(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&27===r.keyCode&&!ga(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const n=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Di(1),at(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){const{overlayY:n,originX:r,originY:s}=t;let o;if(o="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${RU}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",n=>{const r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,PU)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const n=this._elementRef.nativeElement,r=n.style;("on"===t||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(t){bc()},i.\u0275dir=Ne({type:i,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),PM=(()=>{class i extends ZZ{constructor(t,n,r,s,o,a,l,c,d,h,p,m){super(t,n,r,s,o,a,l,c,d,h,p,m),this._tooltipComponent=QZ}}return i.\u0275fac=function(t){return new(t||i)(R(lo),R($t),R(D3),R(ts),R(Dt),R(Ar),R(eX),R(kc),R(kU),R(Lu,8),R(YZ,8),R(Ft))},i.\u0275dir=Ne({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[ht]}),i})(),JZ=(()=>{class i{constructor(t,n){this._changeDetectorRef=t,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Ge,this._animationsDisabled="NoopAnimations"===n}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(t?s:r),n.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(n);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return i.\u0275fac=function(t){return new(t||i)(R(ni),R(oo,8))},i.\u0275dir=Ne({type:i}),i})(),QZ=(()=>{class i extends JZ{constructor(t,n,r){super(t,r),this._breakpointObserver=n,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return i.\u0275fac=function(t){return new(t||i)(R(ni),R(nM),R(oo,8))},i.\u0275cmp=St({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(t,n){if(1&t&&Qi(WZ,7),2&t){let r;Kt(r=Zt())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,n){1&t&&nt("mouseleave",function(s){return n._handleMouseLeave(s)}),2&t&&wc("zoom",n.isVisible()?1:null)},features:[ht],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(t,n){if(1&t&&(se(0,"div",0,1),nt("animationend",function(s){return n._handleAnimationEnd(s)}),Et(2,"async"),Ze(3),ae()),2&t){let r;fi("mat-tooltip-handset",null==(r=Tt(2,4,n._isHandset))?null:r.matches),ee("ngClass",n.tooltipClass),J(3),pi(n.message)}},dependencies:[_y,Ac],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),i})(),OU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[XZ],imports:[C3,Ja,im,Dn,Dn,Hy]}),i})();class eJ{}class Bu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const r=t.slice(0,n),s=r.toLowerCase(),o=t.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class tJ{encodeKey(e){return LU(e)}encodeValue(e){return LU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const iJ=/%(\d[a-f0-9])/gi,rJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function LU(i){return encodeURIComponent(i).replace(iJ,(e,t)=>rJ[t]??e)}function kM(i){return`${i}`}class Uu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function nJ(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],r=Array.isArray(n)?n.map(kM):[kM(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Uu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(kM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const r=n.indexOf(kM(e.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class sJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function FU(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function NU(i){return typeof Blob<"u"&&i instanceof Blob}function BU(i){return typeof FormData<"u"&&i instanceof FormData}class av{constructor(e,t,n,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function oJ(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Bu),this.context||(this.context=new sJ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Uu,this.urlWithParams=t}serializeBody(){return null===this.body?null:FU(this.body)||NU(this.body)||BU(this.body)||function aJ(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Uu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||BU(this.body)?null:NU(this.body)?this.body.type||null:FU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Uu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),c)),new av(t,n,s,{params:c,headers:l,context:d,reportProgress:a,responseType:r,withCredentials:o})}}var rs=(()=>((rs=rs||{})[rs.Sent=0]="Sent",rs[rs.UploadProgress=1]="UploadProgress",rs[rs.ResponseHeader=2]="ResponseHeader",rs[rs.DownloadProgress=3]="DownloadProgress",rs[rs.Response=4]="Response",rs[rs.User=5]="User",rs))();class rI extends class lJ{constructor(e,t=200,n="OK"){this.headers=e.headers||new Bu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=rs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new rI({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function sI(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let VU=(()=>{class i{constructor(t){this.handler=t}request(t,n,r={}){let s;if(t instanceof av)s=t;else{let l,c;l=r.headers instanceof Bu?r.headers:new Bu(r.headers),r.params&&(c=r.params instanceof Uu?r.params:new Uu({fromObject:r.params})),s=new av(t,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=ot(s).pipe(Pu(l=>this.handler.handle(l)));if(t instanceof av||"events"===r.observe)return o;const a=o.pipe(Rn(l=>l instanceof rI));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Xe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Xe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Xe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Xe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new Uu).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,r={}){return this.request("PATCH",t,sI(r,n))}post(t,n,r={}){return this.request("POST",t,sI(r,n))}put(t,n,r={}){return this.request("PUT",t,sI(r,n))}}return i.\u0275fac=function(t){return new(t||i)(X(eJ))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();const uJ=["*"];let OM;function lv(i){return function dJ(){if(void 0===OM&&(OM=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(OM=i.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return OM}()?.createHTML(i)||i}function zU(i){return Error(`Unable to find icon with the name "${i}"`)}function HU(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function GU(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class ch{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let LM=(()=>{class i{constructor(t,n,r,s){this._httpClient=t,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,n,r){return this.addSvgIconInNamespace("",t,n,r)}addSvgIconLiteral(t,n,r){return this.addSvgIconLiteralInNamespace("",t,n,r)}addSvgIconInNamespace(t,n,r,s){return this._addSvgIconConfig(t,n,new ch(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,n,r,s){const o=this._sanitizer.sanitize(Nn.HTML,r);if(!o)throw GU(r);const a=lv(o);return this._addSvgIconConfig(t,n,new ch("",a,s))}addSvgIconSet(t,n){return this.addSvgIconSetInNamespace("",t,n)}addSvgIconSetLiteral(t,n){return this.addSvgIconSetLiteralInNamespace("",t,n)}addSvgIconSetInNamespace(t,n,r){return this._addSvgIconSetConfig(t,new ch(n,null,r))}addSvgIconSetLiteralInNamespace(t,n,r){const s=this._sanitizer.sanitize(Nn.HTML,n);if(!s)throw GU(n);const o=lv(s);return this._addSvgIconSetConfig(t,new ch("",o,r))}registerFontClassAlias(t,n=t){return this._fontCssClassesByAlias.set(t,n),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const n=this._sanitizer.sanitize(Nn.RESOURCE_URL,t);if(!n)throw HU(t);const r=this._cachedIconsByUrl.get(n);return r?ot(FM(r)):this._loadSvgIconFromConfig(new ch(t,null)).pipe(Ti(s=>this._cachedIconsByUrl.set(n,s)),Xe(s=>FM(s)))}getNamedSvgIcon(t,n=""){const r=WU(n,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(t,o):Up(zU(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ot(FM(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Xe(n=>FM(n)))}_getSvgFromIconSetConfigs(t,n){const r=this._extractIconWithNameFromAnySet(t,n);return r?ot(r):mB(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Dc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Nn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),ot(null)})))).pipe(Xe(()=>{const o=this._extractIconWithNameFromAnySet(t,n);if(!o)throw zU(t);return o}))}_extractIconWithNameFromAnySet(t,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ti(n=>t.svgText=n),Xe(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ot(null):this._fetchIcon(t).pipe(Ti(n=>t.svgText=n))}_extractSvgIconFromSet(t,n,r){const s=t.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(lv("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const n=this._document.createElement("DIV");n.innerHTML=t;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const n=this._svgElementFromString(lv("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(t.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(t,n){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),n&&n.viewBox&&t.setAttribute("viewBox",n.viewBox),t}_fetchIcon(t){const{url:n,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function hJ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(Nn.RESOURCE_URL,n);if(!o)throw HU(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Xe(c=>lv(c)),ku(()=>this._inProgressUrlFetches.delete(o)),lf());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,n,r){return this._svgIconConfigs.set(WU(t,n),r),this}_addSvgIconSetConfig(t,n){const r=this._iconSetConfigs.get(t);return r?r.push(n):this._iconSetConfigs.set(t,[n]),this}_svgElementFromConfig(t){if(!t.svgElement){const n=this._svgElementFromString(t.svgText);this._setSvgAttributes(n,t.options),t.svgElement=n}return t.svgElement}_getIconConfigFromResolvers(t,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,t);if(s)return pJ(s)?new ch(s.url,null,s.options):new ch(s,null)}}}return i.\u0275fac=function(t){return new(t||i)(X(VU,8),X(TT),X(Ft,8),X(Ha))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function FM(i){return i.cloneNode(!0)}function WU(i,e){return i+":"+e}function pJ(i){return!(!i.url||!i.options)}const mJ=$y(class{constructor(i){this._elementRef=i}}),gJ=new Se("MAT_ICON_DEFAULT_OPTIONS"),_J=new Se("mat-icon-location",{providedIn:"root",factory:function yJ(){const i=qn(Ft),e=i?i.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),$U=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],vJ=$U.map(i=>`[${i}]`).join(", "),bJ=/^url\(['"]?#(.*?)['"]?\)$/;let jU=(()=>{class i extends mJ{constructor(t,n,r,s,o,a){super(t),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=nn.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Xn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const n=this._cleanupFontValue(t);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const n=this._cleanupFontValue(t);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const n=t.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let n=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=t.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),n.forEach(r=>t.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const n=t.querySelectorAll(vJ),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)$U.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(bJ):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[n,r]=this._splitIconName(t);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(Di(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(LM),Va("aria-hidden"),R(_J),R(Ha),R(gJ,8))},i.\u0275cmp=St({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,n){2&t&&(Yt("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),fi("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ht],ngContentSelectors:uJ,decls:1,vars:0,template:function(t,n){1&t&&(ro(),ti(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),xJ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Dn,Dn]}),i})();function qU(i,e){return e?t=>xy(e.pipe(Di(1),function wJ(){return Fn((i,e)=>{i.subscribe(An(e,ss))})}()),t.pipe(qU(i))):Zi((t,n)=>ar(i(t,n)).pipe(Di(1),$N(t)))}function XU(i,e=Uy){const t=cM(i,e);return qU(()=>t)}const MJ=["mat-menu-item",""];function CJ(i,e){1&i&&(ks(),se(0,"svg",2),Qe(1,"polygon",3),ae())}const YU=["*"];function SJ(i,e){if(1&i){const t=Ei();se(0,"div",0),nt("keydown",function(r){return Qt(t),cn(Te()._handleKeydown(r))})("click",function(){return Qt(t),cn(Te().closed.emit("click"))})("@transformMenu.start",function(r){return Qt(t),cn(Te()._onAnimationStart(r))})("@transformMenu.done",function(r){return Qt(t),cn(Te()._onAnimationDone(r))}),se(1,"div",1),ti(2),ae()()}if(2&i){const t=Te();ee("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),Yt("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const NM={transformMenu:Ol("transformMenu",[vs("void",Zn({opacity:0,transform:"scale(0.8)"})),Vs("void => enter",co("120ms cubic-bezier(0, 0, 0.2, 1)",Zn({opacity:1,transform:"scale(1)"}))),Vs("* => void",co("100ms 25ms linear",Zn({opacity:0})))]),fadeInItems:Ol("fadeInItems",[vs("showing",Zn({opacity:1})),Vs("void => *",[Zn({opacity:0}),co("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},EJ=new Se("MatMenuContent"),oI=new Se("MAT_MENU_PANEL"),AJ=jy(pM(class{}));let BM=(()=>{class i extends AJ{constructor(t,n,r,s,o){super(),this._elementRef=t,this._document=n,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new Ge,this._focused=new Ge,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),n=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<n.length;r++)n[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(Ft),R(kc),R(oI,8),R(ni))},i.\u0275cmp=St({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,n){1&t&&nt("click",function(s){return n._checkDisabled(s)})("mouseenter",function(){return n._handleMouseEnter()}),2&t&&(Yt("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled.toString())("disabled",n.disabled||null),fi("mat-menu-item",!0)("mat-menu-item-highlighted",n._highlighted)("mat-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[ht],attrs:MJ,ngContentSelectors:YU,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,n){1&t&&(ro(),ti(0),Qe(1,"div",0),Pe(2,CJ,2,0,"svg",1)),2&t&&(J(1),ee("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),J(1),ee("ngIf",n._triggersSubmenu))},dependencies:[qi,Xy],encapsulation:2,changeDetection:0}),i})();const KU=new Se("mat-menu-default-options",{providedIn:"root",factory:function DJ(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let TJ=0,cv=(()=>{class i{constructor(t,n,r,s){this._elementRef=t,this._ngZone=n,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Pp,this._tabSubscription=nn.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Ge,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new st,this.close=this.closed,this.panelId="mat-menu-panel-"+TJ++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Xn(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Xn(t)}set panelClass(t){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new _3(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(ns(this._directDescendantItems),ys(t=>Ts(...t.map(n=>n._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const n=this._keyManager;if("enter"===this._panelAnimationState&&n.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,n.activeItemIndex||0));r[s]&&!r[s].disabled?n.setActiveItem(s):n.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(ns(this._directDescendantItems),ys(n=>Ts(...n.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const n=t.keyCode,r=this._keyManager;switch(n){case 27:ga(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===n||40===n)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(Di(1)).subscribe(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&n&&n.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const n=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${n}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,n=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===n,r["mat-menu-below"]="below"===n,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(ns(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(Dt),R(KU),R(ni))},i.\u0275dir=Ne({type:i,contentQueries:function(t,n,r){if(1&t&&(Ai(r,EJ,5),Ai(r,BM,5),Ai(r,BM,4)),2&t){let s;Kt(s=Zt())&&(n.lazyContent=s.first),Kt(s=Zt())&&(n._allItems=s),Kt(s=Zt())&&(n.items=s)}},viewQuery:function(t,n){if(1&t&&Qi(so,5),2&t){let r;Kt(r=Zt())&&(n.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),i})(),IJ=(()=>{class i extends cv{constructor(t,n,r,s){super(t,n,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(Dt),R(KU),R(ni))},i.\u0275cmp=St({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,n){2&t&&Yt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Hn([{provide:oI,useExisting:i}]),ht],ngContentSelectors:YU,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,n){1&t&&(ro(),Pe(0,SJ,3,6,"ng-template"))},dependencies:[_y],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[NM.transformMenu,NM.fadeInItems]},changeDetection:0}),i})();const ZU=new Se("mat-menu-scroll-strategy"),PJ={provide:ZU,deps:[lo],useFactory:function RJ(i){return()=>i.scrollStrategies.reposition()}},JU=qp({passive:!0});let kJ=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d){this._overlay=t,this._element=n,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=d,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=nn.EMPTY,this._hoverSubscription=nn.EMPTY,this._menuCloseSubscription=nn.EMPTY,this._handleTouchStart=h=>{y1(h)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new st,this.onMenuOpen=this.menuOpened,this.menuClosed=new st,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof cv?o:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,JU),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,JU),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const n=this._createOverlay(t),r=n.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=t.hasBackdrop??!this.triggersSubmenu(),n.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof cv&&(t._startAnimation(),t._directDescendantItems.changes.pipe(at(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof cv?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(Rn(r=>"void"===r.toState),Di(1),at(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let n=0,r=t.parentMenu;for(;r;)n++,r=r.parentMenu;t.setElevation(n)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_createOverlay(t){if(!this._overlayRef){const n=this._getOverlayConfig(t);this._subscribeToPositions(t,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new Gy({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,n){t.setPositionClasses&&n.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,o)):t.setPositionClasses(s,o)})}_setPosition(t,n){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[d,h]=[r,s],p=0;if(this.triggersSubmenu()){if(h=r="before"===t.xPosition?"start":"end",s=d="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}p="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");n.withPositions([{originX:r,originY:l,overlayX:d,overlayY:o,offsetY:p},{originX:s,originY:l,overlayX:h,overlayY:o,offsetY:p},{originX:r,originY:c,overlayX:d,overlayY:a,offsetY:-p},{originX:s,originY:c,overlayX:h,overlayY:a,offsetY:-p}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return Ts(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:ot(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Rn(o=>o!==this._menuItemInstance),Rn(()=>this._menuOpen)):ot(),n)}_handleMousedown(t){_1(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const n=t.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Rn(t=>t===this._menuItemInstance&&!t.disabled),XU(0,w1)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof cv&&this.menu._isAnimating?this.menu._animationDone.pipe(Di(1),XU(0,w1),at(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new em(t.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(t){return new(t||i)(R(lo),R($t),R(ts),R(ZU),R(oI,8),R(BM,10),R(Lu,8),R(kc),R(Dt))},i.\u0275dir=Ne({type:i,hostVars:3,hostBindings:function(t,n){1&t&&nt("click",function(s){return n._handleClick(s)})("mousedown",function(s){return n._handleMousedown(s)})("keydown",function(s){return n._handleKeydown(s)}),2&t&&Yt("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen||null)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i})(),OJ=(()=>{class i extends kJ{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Mi(i)))(n||i)}}(),i.\u0275dir=Ne({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[ht]}),i})(),LJ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[PJ],imports:[Ja,Dn,mM,im,Hy,Dn]}),i})(),QU=(()=>{class i{constructor(t){this.viewContainerRef=t}}return i.\u0275fac=function(t){return new(t||i)(R(ts))},i.\u0275dir=Ne({type:i,selectors:[["","dataBlockUI",""]]}),i})(),FJ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new st}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-fallback-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:2,vars:1,template:function(t,n){1&t&&(se(0,"p"),Ze(1),ae()),2&t&&(J(1),es("GUI component for block ",((null==n.resourceData?null:n.resourceData.block_class_mro)||"").split("__")[0]," not implemented :("))},changeDetection:0}),i})();function NJ(i,e){if(1&i&&Qe(0,"app-editor",3),2&i){const t=Te().$implicit,n=Te();ee("resourceData",null==n.resourceData?null:n.resourceData.value[t])("name",t)}}const BJ=function(){return[]};function UJ(i,e){if(1&i&&(Os(0),Pe(1,NJ,1,2,"app-editor",2),Et(2,"async"),Ls()),2&i){const t=e.$implicit,n=Te();J(1),ee("ngIf",!(Tt(2,1,n.main.unknownsHidden$)&&((null==n.resourceData?null:n.resourceData.block.unknown_fields)||Ns(3,BJ)).includes(t)))}}let UM=(()=>{class i{constructor(t){this.main=t,this.resourceData=null,this.name="",this.fieldWhitelist=null,this.fieldBlacklist=null,this.changed=new st}get fieldKeys(){let t=Object.keys(this.resourceData?.value||{});return this.fieldWhitelist?t=t.filter(n=>this.fieldWhitelist?.includes(n)):this.fieldBlacklist&&(t=t.filter(n=>!this.fieldBlacklist?.includes(n))),t}}return i.\u0275fac=function(t){return new(t||i)(R(am))},i.\u0275cmp=St({type:i,selectors:[["app-compound-block-ui"]],inputs:{resourceData:"resourceData",fieldWhitelist:"fieldWhitelist",fieldBlacklist:"fieldBlacklist"},outputs:{changed:"changed"},decls:4,vars:2,consts:[[1,"container"],[4,"ngFor","ngForOf"],[3,"resourceData","name",4,"ngIf"],[3,"resourceData","name"]],template:function(t,n){1&t&&(se(0,"h2"),Ze(1),ae(),se(2,"div",0),Pe(3,UJ,3,4,"ng-container",1),ae()),2&t&&(J(1),pi(n.name),J(2),ee("ngForOf",n.fieldKeys))},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;column-gap:1rem}"],changeDetection:0}),i})();function VJ(i,e){if(1&i){const t=Ei();se(0,"mat-form-field",1)(1,"mat-label"),Ze(2),ae(),se(3,"input",2),nt("ngModelChange",function(r){return Qt(t),cn(Te().resourceData.value=r)})("change",function(){return Qt(t),cn(Te().changed.emit())}),ae()()}if(2&i){const t=Te();J(2),pi(t.name),J(1),ee("max",t.resourceData.editor_validators.max_value)("min",t.resourceData.editor_validators.min_value)("step",t.resourceData.editor_validators.value_interval)("disabled",null!=(null==t.resourceData.block?null:t.resourceData.block.required_value))("ngModel",t.resourceData.value)}}let zJ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new st}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-integer-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill",4,"ngIf"],["appearance","fill"],["matInput","","type","number",3,"max","min","step","disabled","ngModel","ngModelChange","change"]],template:function(t,n){1&t&&Pe(0,VJ,4,6,"mat-form-field",0),2&t&&ee("ngIf",n.resourceData)},dependencies:[qi,Ll,rh,Lc,sv,rv,Fc,oh,Nc,ah],changeDetection:0}),i})();function HJ(i,e){if(1&i){const t=Ei();se(0,"mat-form-field",1)(1,"mat-label"),Ze(2),ae(),se(3,"input",2),nt("ngModelChange",function(r){return Qt(t),cn(Te().resourceData.value=r)})("change",function(){return Qt(t),cn(Te().changed.emit())}),ae()()}if(2&i){const t=Te();J(2),pi(t.name),J(1),ee("disabled",null!=(null==t.resourceData.block?null:t.resourceData.block.required_value))("ngModel",t.resourceData.value)}}let GJ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new st}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-string-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill",4,"ngIf"],["appearance","fill"],["matInput","","type","text",3,"disabled","ngModel","ngModelChange","change"]],template:function(t,n){1&t&&Pe(0,HJ,4,3,"mat-form-field",0),2&t&&ee("ngIf",n.resourceData)},dependencies:[qi,Ll,Lc,Fc,oh,Nc,ah],changeDetection:0}),i})();const Vu=function(){return[]};function WJ(i,e){if(1&i&&(se(0,"mat-panel-description"),Ze(1," Click to view items ("),se(2,"b"),Ze(3),ae(),Ze(4,") "),ae()),2&i){const t=Te(2);J(3),pi(((null==t.resourceData?null:t.resourceData.value)||Ns(1,Vu)).length)}}function $J(i,e){1&i&&(se(0,"mat-panel-description"),Ze(1," Empty array "),ae())}function jJ(i,e){}function qJ(i,e){if(1&i){const t=Ei();se(0,"mat-expansion-panel",4),nt("opened",function(){return Qt(t),cn(Te().onContentsTrigger(!0))})("closed",function(){return Qt(t),cn(Te().onContentsTrigger(!1))}),se(1,"mat-expansion-panel-header")(2,"mat-panel-title"),Ze(3),ae(),Pe(4,WJ,5,2,"mat-panel-description",1),Pe(5,$J,2,0,"mat-panel-description",1),ae(),Pe(6,jJ,0,0,"ng-template",5),ae()}if(2&i){const t=Te(),n=ja(3);J(3),es(" ",t.name," "),J(1),ee("ngIf",((null==t.resourceData?null:t.resourceData.value)||Ns(4,Vu)).length>0),J(1),ee("ngIf",0==((null==t.resourceData?null:t.resourceData.value)||Ns(5,Vu)).length),J(1),ee("ngTemplateOutlet",n)}}function XJ(i,e){}function YJ(i,e){if(1&i&&(Os(0),se(1,"h2"),Ze(2),ae(),se(3,"div",6),Pe(4,XJ,0,0,"ng-template",5),ae(),Ls()),2&i){const t=Te(),n=ja(3);J(2),pi(t.name),J(2),ee("ngTemplateOutlet",n)}}function KJ(i,e){}function ZJ(i,e){if(1&i&&(se(0,"div",10),Qe(1,"mat-divider",11),se(2,"span",12),Ze(3),ae(),Qe(4,"mat-divider",11),ae()),2&i){const t=Te(),n=t.$implicit,r=t.index;J(3),pi(n.block_id.split("__")[1]||r)}}function JJ(i,e){if(1&i&&(Os(0),Pe(1,ZJ,5,1,"div",8),Qe(2,"app-editor",9),Ls()),2&i){const t=e.$implicit,n=e.index;J(1),ee("ngIf",-1==(null==t||null==t.block_class_mro?null:t.block_class_mro.indexOf("Atomic"))),J(1),ee("resourceData",t)("name",n.toString())}}function QJ(i,e){}function eQ(i,e){1&i&&(se(0,"p"),Ze(1,"Empty array"),ae())}function tQ(i,e){if(1&i&&(Os(0),Pe(1,KJ,0,0,"ng-template",5),Pe(2,JJ,3,3,"ng-container",7),Pe(3,QJ,0,0,"ng-template",5),Pe(4,eQ,2,0,"p",1),Ls()),2&i){const t=Te(2),n=ja(5);J(1),ee("ngTemplateOutlet",n),J(1),ee("ngForOf",t.renderItems),J(1),ee("ngTemplateOutlet",n),J(1),ee("ngIf",0==((null==t.resourceData?null:t.resourceData.value)||Ns(4,Vu)).length)}}function nQ(i,e){if(1&i&&(Os(0),se(1,"p",13),Ze(2),ae(),Ls()),2&i){const t=Te(2);J(2),es("[",((null==t.resourceData?null:t.resourceData.value)||Ns(1,Vu)).join(", "),"]")}}function iQ(i,e){if(1&i&&(Pe(0,tQ,5,5,"ng-container",1),Pe(1,nQ,3,2,"ng-container",1)),2&i){const t=Te();ee("ngIf",(t.renderContents||!t.showAsCollapsable)&&!(null!=t.resourceData&&null!=t.resourceData.block&&null!=t.resourceData.block.child&&t.resourceData.block.child.simplified)),J(1),ee("ngIf",(t.renderContents||!t.showAsCollapsable)&&(null==t.resourceData||null==t.resourceData.block||null==t.resourceData.block.child?null:t.resourceData.block.child.simplified))}}function rQ(i,e){if(1&i&&(se(0,"mat-option",21),Ze(1),ae()),2&i){const t=e.$implicit,n=Te(3);ee("value",t),J(1),sy(" ",t*n.pageSize," - ",(t+1)*n.pageSize-1," ")}}const sQ=function(i){return{hidden:i}};function oQ(i,e){if(1&i){const t=Ei();se(0,"div",15)(1,"mat-paginator",16),nt("page",function(r){return Qt(t),cn(Te(2).renderPage(r.pageIndex,r.pageSize))}),ae(),se(2,"div",17)(3,"div",18),Ze(4,"Go To: "),ae(),se(5,"mat-form-field")(6,"mat-select",19),nt("ngModelChange",function(r){return Qt(t),cn(Te(2).goToIndex=r)})("selectionChange",function(){Qt(t);const r=Te(2);return cn(r.renderPage(r.goToIndex,r.pageSize))}),Pe(7,rQ,2,3,"mat-option",20),ae()()()()}if(2&i){const t=Te(2);ee("ngClass",$d(9,sQ,((null==t.resourceData?null:t.resourceData.value)||Ns(8,Vu)).length<=t.minPageSize)),J(1),ee("length",((null==t.resourceData?null:t.resourceData.value)||Ns(11,Vu)).length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",t.pageSizeOptions)("showFirstLastButtons",!0),J(5),ee("ngModel",t.goToIndex),J(1),ee("ngForOf",t.pageIndexes)}}function aQ(i,e){if(1&i&&Pe(0,oQ,8,12,"div",14),2&i){const t=Te();ee("ngIf",((null==t.resourceData?null:t.resourceData.value)||Ns(1,Vu)).length>0)}}let eV=(()=>{class i{constructor(t){this.cdr=t,this._resourceData=null,this.name="",this.changed=new st,this.showAsCollapsable=!1,this.renderContents=!1,this.minPageSize=10,this.pageIndex=0,this.pageSize=10,this.pageSizeOptions=[10,25,50,100],this.renderItems=[],this.goToIndex=0,this.pageIndexes=[]}get resourceData(){return this._resourceData}set resourceData(t){this._resourceData=t,this.showAsCollapsable=this._resourceData?.value?.length>5,this.updatePageIndexes(),this.renderPage(0,this.minPageSize)}onContentsTrigger(t){void 0!==this.contentsTimeout&&(clearTimeout(this.contentsTimeout),this.contentsTimeout=void 0),t?(this.renderContents=!0,this.cdr.markForCheck()):this.contentsTimeout=setTimeout(()=>{this.contentsTimeout=void 0,this.renderContents=!1,this.cdr.markForCheck()},2e3)}renderPage(t,n){this.goToIndex=this.pageIndex=t,this.pageSize=n,this.renderItems=(this.resourceData?.value||[]).slice(t*n,(t+1)*n).map(r=>r.block?r:{...r,block:this.resourceData?.block.child}),this.cdr.markForCheck()}updatePageIndexes(){this.goToIndex=this.pageIndex,this.pageIndexes=[];for(let t=0;t<Math.ceil((this.resourceData?.value||[]).length/this.pageSize);t++)this.pageIndexes.push(t)}}return i.\u0275fac=function(t){return new(t||i)(R(ni))},i.\u0275cmp=St({type:i,selectors:[["app-array-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:6,vars:2,consts:[[3,"opened","closed",4,"ngIf"],[4,"ngIf"],["contents",""],["paginator",""],[3,"opened","closed"],[3,"ngTemplateOutlet"],[1,"mat-expansion-panel-body"],[4,"ngFor","ngForOf"],["class","divider",4,"ngIf"],[3,"resourceData","name"],[1,"divider"],[2,"width","50%","display","inline-block"],[2,"padding","20px","font-weight","500"],[2,"word-break","break-word","max-width","100%"],["id","pagination-wrapper",3,"ngClass",4,"ngIf"],["id","pagination-wrapper",3,"ngClass"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(Pe(0,qJ,7,6,"mat-expansion-panel",0),Pe(1,YJ,5,2,"ng-container",1),Pe(2,iQ,2,2,"ng-template",null,2,sw),Pe(4,aQ,1,2,"ng-template",null,3,sw)),2&t&&(ee("ngIf",n.showAsCollapsable),J(1),ee("ngIf",!n.showAsCollapsable))},styles:["[_nghost-%COMP%]{width:100%;padding-bottom:1.34375em;margin:0 1rem}.divider[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center}  .mat-expansion-panel-body{display:flex;justify-content:space-evenly;column-gap:1rem;flex-wrap:wrap}#pagination-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-end}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:6rem;margin:6px 4px 0;font-size:12px}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,Helvetica Neue,sans-serif}"],changeDetection:0}),i})();function lQ(i,e){if(1&i){const t=Ei();Os(0),se(1,"input",5),nt("change",function(){return Qt(t),cn(Te(2).changed.emit())})("ngModelChange",function(r){const o=Qt(t).index,a=Te(2);return cn((null==a.resourceData?null:a.resourceData.value.unknowns.value[o]).value=r)}),ae(),Ls()}if(2&i){const t=e.index,n=Te(2);J(1),ee("ngModel",null==n.resourceData?null:n.resourceData.value.unknowns.value[t].value)}}const cQ=function(){return[]};function uQ(i,e){if(1&i&&(se(0,"div",3),Ze(1," Unknowns: "),Pe(2,lQ,2,1,"ng-container",4),Et(3,"async"),ae()),2&i){const t=Te();let n;J(2),ee("ngForOf",Ns(3,cQ).constructor(null==(n=Tt(3,1,t._resourceData$))?null:n.value.unknowns.value.length))}}function dQ(i,e){1&i&&(Qe(0,"img",6),Et(1,"async")),2&i&&ee("src",Tt(1,1,Te().imageUrl$),Zf)}function hQ(i,e){if(1&i&&(Qe(0,"app-editor",7),Et(1,"async")),2&i){let n;ee("resourceData",null==(n=Tt(1,1,Te()._resourceData$))||null==n.value?null:n.value.palette)}}let tV=(()=>{class i{constructor(t,n,r){this.eelDelegate=t,this.cdr=n,this.main=r,this._resourceData$=new Nt(null),this.imageUrl$=new Nt(null),this.name="",this.destroyed$=new Ge,this.changed=new st}set resourceData(t){this._resourceData$.next(t)}get resourceData(){return this._resourceData$.getValue()}ngAfterViewInit(){var t=this;return an(function*(){t._resourceData$.pipe(at(t.destroyed$)).subscribe(function(){var n=an(function*(r){if(r){const s=yield t.eelDelegate.serializeResource(r.block_id);t.imageUrl$.next(s.find(o=>o.endsWith(".png"))||null)}else t.imageUrl$.next(null)});return function(r){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R(lh),R(ni),R(am))},i.\u0275cmp=St({type:i,selectors:[["app-bitmap-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:8,vars:13,consts:[["class","number-matrix",4,"ngIf"],[3,"src",4,"ngIf"],[3,"resourceData",4,"ngIf"],[1,"number-matrix"],[4,"ngFor","ngForOf"],["matInput","","type","number",3,"ngModel","change","ngModelChange"],[3,"src"],[3,"resourceData"]],template:function(t,n){if(1&t&&(Pe(0,uQ,4,4,"div",0),Et(1,"async"),Et(2,"async"),Pe(3,dQ,2,3,"img",1),Et(4,"async"),Pe(5,hQ,2,3,"app-editor",2),Et(6,"async"),Et(7,"async")),2&t){let r;ee("ngIf",Tt(1,3,n._resourceData$)&&!Tt(2,5,n.main.unknownsHidden$)),J(3),ee("ngIf",Tt(4,7,n.imageUrl$)),J(2),ee("ngIf",(null==(r=Tt(6,9,n._resourceData$))||null==r.value?null:r.value.palette)&&124!=(null==(r=Tt(7,11,n._resourceData$))||null==r.value||null==r.value.palette||null==r.value.palette.value||null==r.value.palette.value.resource_id?null:r.value.palette.value.resource_id.value))}},styles:["[_nghost-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;align-items:center;row-gap:1rem}.number-matrix[_ngcontent-%COMP%]{display:flex;margin:0 0 16px}img[_ngcontent-%COMP%]{min-width:10rem;background-image:linear-gradient(45deg,#808080 25%,transparent 25%),linear-gradient(-45deg,#808080 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#808080 75%),linear-gradient(-45deg,transparent 75%,#808080 75%);background-size:16px 16px;background-color:#aaa}#actions[_ngcontent-%COMP%]{display:flex;column-gap:1rem}"],changeDetection:0}),i})();function fQ(i,e){if(1&i){const t=Ei();Os(0),se(1,"input",5),nt("change",function(){return Qt(t),cn(Te(2).changed.emit())})("ngModelChange",function(r){const o=Qt(t).index;return cn(Te(2).resourceData.value.unknowns.value[o]=r)}),ae(),Ls()}if(2&i){const t=e.index,n=Te(2);J(1),ee("ngModel",n.resourceData.value.unknowns.value[t])}}const pQ=function(){return[]};function mQ(i,e){if(1&i&&(se(0,"div",3),Ze(1," Unknowns: "),Pe(2,fQ,2,1,"ng-container",4),ae()),2&i){const t=Te();J(2),ee("ngForOf",Ns(1,pQ).constructor(t.resourceData.value.unknowns.value.length))}}const gQ=function(i){return{"background-color":i}};function _Q(i,e){if(1&i&&Qe(0,"div",6),2&i){const t=e.$implicit,n=e.index,r=Te();ee("ngStyle",$d(2,gQ,"#"+r.lpad(t.value.toString(16),"0",8)))("matTooltip",n+": #"+t.value.toString(16))}}let yQ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new st}lpad(t,n,r){for(;t.length<r;)t=n+t;return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-palette-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:5,vars:3,consts:[["class","number-matrix",4,"ngIf"],["id","colors-container"],["class","color-box",3,"ngStyle","matTooltip",4,"ngFor","ngForOf"],[1,"number-matrix"],[4,"ngFor","ngForOf"],["matInput","","type","number",3,"ngModel","change","ngModelChange"],[1,"color-box",3,"ngStyle","matTooltip"]],template:function(t,n){1&t&&(se(0,"h1"),Ze(1),ae(),Pe(2,mQ,3,2,"div",0),se(3,"div",1),Pe(4,_Q,1,4,"div",2),ae()),2&t&&(J(1),pi(((null==n.resourceData?null:n.resourceData.block_class_mro)||"").split("__")[0]),J(1),ee("ngIf",n.resourceData),J(2),ee("ngForOf",null==n.resourceData?null:n.resourceData.value.colors.value))},dependencies:[pa,qi,Ew,Ll,rh,Lc,Fc,ah,PM],styles:[".number-matrix[_ngcontent-%COMP%]{display:flex;margin:0 0 16px}#colors-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.color-box[_ngcontent-%COMP%]{border:solid .1rem;outline:solid .1rem;width:2rem;height:2rem}"],changeDetection:0}),i})();const vQ=["editor"];let nV=(()=>{class i{constructor(t){this.cdr=t,this._resourceData=null,this.name="",this.changed=new st,this.editorProps={}}get resourceData(){return this._resourceData}set resourceData(t){this._resourceData=t,this.editor&&(this.editorProps.data=t?new Uint8Array(t.value):void 0,this.editor.$set({props:{data:this.editorProps.data}}),this.cdr.markForCheck())}ngAfterViewInit(){this.resourceData&&(this.editorProps.data=new Uint8Array(this.resourceData.value)),this.editor=new HexEditor({target:this.editorDiv?.nativeElement,props:this.editorProps}),this.cdr.markForCheck()}ngOnDestroy(){this.editor&&this.editor.$destroy()}}return i.\u0275fac=function(t){return new(t||i)(R(ni))},i.\u0275cmp=St({type:i,selectors:[["app-binary-block-ui"]],viewQuery:function(t,n){if(1&t&&Qi(vQ,5),2&t){let r;Kt(r=Zt())&&(n.editorDiv=r.first)}},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:4,vars:1,consts:[["editor",""]],template:function(t,n){1&t&&(se(0,"p"),Ze(1),ae(),Qe(2,"div",null,0)),2&t&&(J(1),pi(n.name))},changeDetection:0}),i})();const bQ=["picker"],xQ=function(i){return{transform:i}};let wQ=(()=>{class i{constructor(t){this.cdr=t,this.resourceData=null,this.name="",this.changed=new st,this.pi=Math.PI,this.dragging=!1}mousedown(t){this.dragging=!0,this.updateRotation(t)}mousemove(t){this.dragging&&this.updateRotation(t)}mouseout(){this.dragging=!1}updateRotation(t){const n=this.picker.nativeElement.getBoundingClientRect();let r=Math.atan2(t.clientY-n.top-n.height/2,t.clientX-n.left-n.width/2);t.shiftKey&&(r=15*Math.round(180*r/Math.PI/15)*Math.PI/180),this.resourceData.value=r,this.changed.emit(),this.cdr.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(R(ni))},i.\u0275cmp=St({type:i,selectors:[["app-angle-block-ui"]],viewQuery:function(t,n){if(1&t&&Qi(bQ,5),2&t){let r;Kt(r=Zt())&&(n.picker=r.first)}},hostBindings:function(t,n){1&t&&nt("mousedown",function(s){return n.mousedown(s)})("mousemove",function(s){return n.mousemove(s)})("mouseup",function(){return n.mouseout()})("mouseleave",function(){return n.mouseout()})},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:14,vars:12,consts:[[1,"circle-container"],["picker",""],[1,"ui-anglepicker-pointer",3,"ngStyle"],[1,"ui-anglepicker-dot"],[1,"ui-anglepicker-line"],["id","labels"],["id","name-span"]],template:function(t,n){1&t&&(se(0,"div",0,1)(2,"div",2),Qe(3,"div",3)(4,"div",4),ae()(),se(5,"div",5)(6,"mat-label",6),Ze(7),ae(),se(8,"mat-label"),Ze(9),Et(10,"number"),ae(),se(11,"mat-label"),Ze(12),Et(13,"number"),ae()()),2&t&&(J(2),ee("ngStyle",$d(10,xQ,"rotate("+((null==n.resourceData?null:n.resourceData.value)||0)+"rad)")),J(5),pi(n.name),J(2),es("",FD(10,4,180*(null==n.resourceData?null:n.resourceData.value)/n.pi||0,"1.2-2")," deg"),J(3),es("",FD(13,7,(null==n.resourceData?null:n.resourceData.value)||0,"1.2-2")," rad"))},dependencies:[Ew,Nc,pN],styles:["[_nghost-%COMP%]{display:flex;padding-bottom:1.34375em}#name-span[_ngcontent-%COMP%]{font-weight:500}.circle-container[_ngcontent-%COMP%]{width:52px;height:52px;background:rgba(0,0,0,.04);border:1px solid rgba(0,0,0,.6);border-radius:50%;position:relative;display:inline-block}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:50%;margin:-2px 0 0 -2px;transform-origin:2px 2px}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-dot[_ngcontent-%COMP%]{height:4px;width:4px;position:absolute;background:#838383;border-radius:50%}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-line[_ngcontent-%COMP%]{margin-top:1.5px;margin-right:-2px;height:1px;background:#838383}#labels[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem;min-width:6rem}"],changeDetection:0}),i})(),iV=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new st}get resourcesMap(){const t={};for(let n=0;n<this.resourceData?.value.children_descriptions?.value.length;n++){const r=this.resourceData?.value.children_descriptions?.value[n].value.name.value;t[r]=this.resourceData?.value.children?.value[n]}return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-shpi-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:5,vars:3,consts:[["id","top-bar"],[1,"plain-editor",3,"resourceData","name"],[3,"resources"]],template:function(t,n){1&t&&(se(0,"div",0)(1,"h1"),Ze(2,"SHPI archive"),ae(),Qe(3,"app-editor",1),ae(),Qe(4,"app-sidenav-res-list",2)),2&t&&(J(3),ee("resourceData",null==n.resourceData||null==n.resourceData.value?null:n.resourceData.value.shpi_directory)("name","shpi_directory"),J(1),ee("resources",n.resourcesMap))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 16px}[_nghost-%COMP%]   app-sidenav-res-list[_ngcontent-%COMP%]{height:calc(100% - 4rem)}"],changeDetection:0}),i})();class rV{constructor(){}deepEquals(e,t){if(null===e&&null!==t)return!1;if(null===t&&null!==e)return!1;if(!0===Array.isArray(e)){if(!1===Array.isArray(t))return!1;if(e.length!==t.length)return!1;{const n=new Set,r=new Set,s=new Set,o=new Set;for(const h of e)!0===Array.isArray(h)?n.add(h):"object"==typeof h?r.add(h):"function"==typeof h?o.add(JSON.stringify(""+h)):s.add(h);const a=new Set,l=new Set,c=new Set,d=new Set;for(const h of t)!0===Array.isArray(h)?a.add(h):"object"==typeof h?l.add(h):"function"==typeof h?d.add(JSON.stringify(""+h)):c.add(h);if(s.size!==c.size)return!1;{let h=!0;for(const p of s)if(!1===c.has(p)){h=!1;break}if(!1===h)return!1;if(r.size===l.size){h=!0;for(const p of r){let m=!1;for(const _ of l)if(!0===this.deepEquals(p,_)){m=!0;break}if(!1===m){h=!1;break}}if(!1===h)return!1;if(n.size===a.size){h=!0;for(const p of n){let m=!1;for(const _ of a)if(!0===this.deepEquals(p,_)){m=!0;break}if(!1===m){h=!1;break}}if(!1===h)return!1;if(o.size===d.size){h=!0;for(const p of o)if(!1===d.has(p)){h=!1;break}return!1!==h}return!1}return!1}return!1}}}if("object"==typeof e&&null!==e){if("object"!=typeof t)return!1;{let n=!0;if(Object.keys(e).length===Object.keys(t).length){for(const[r,s]of Object.entries(e))if(n=this.deepEquals(s,t[r]),!1===n)break}else n=!1;return n}}return!0!==Array.isArray(t)&&("object"!=typeof t||null===t)&&("function"==typeof e?"function"==typeof t&&JSON.stringify(""+e)===JSON.stringify(""+t):JSON.stringify(e)===JSON.stringify(t))}}function MQ(i,e){if(1&i&&(se(0,"mat-list-option",3),Ze(1),ae()),2&i){const t=e.$implicit,n=Te();ee("value",t)("selected",n.selectedValue==t),J(1),es(" ",t," ")}}function CQ(i,e){if(1&i&&(se(0,"mat-card"),Qe(1,"app-editor",4),ae()),2&i){const t=Te();J(1),ee("name",t.selectedValue)("resourceData",t.resources[t.selectedValue])}}let aI=(()=>{class i{constructor(t){this.deep=t,this._resources={},this._selectedValue=null}get resources(){return this._resources}set resources(t){const n=!this._resources||!this.deep.deepEquals(Object.keys(this._resources),Object.keys(t));this._resources=t,n&&(this.selectedValue=Object.keys(t).length>0?Object.keys(t)[0]:null)}set selectedValue(t){this._selectedValue=t}get selectedValue(){return this._selectedValue}get keys(){return Object.keys(this.resources)}}return i.\u0275fac=function(t){return new(t||i)(R(rV))},i.\u0275cmp=St({type:i,selectors:[["app-sidenav-res-list"]],inputs:{resources:"resources"},decls:3,vars:3,consts:[[3,"multiple","selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","selected"],[3,"name","resourceData"]],template:function(t,n){1&t&&(se(0,"mat-selection-list",0),nt("selectionChange",function(s){return n.selectedValue=s.source.selectedOptions.selected[0].value}),Pe(1,MQ,2,3,"mat-list-option",1),ae(),Pe(2,CQ,2,2,"mat-card",2)),2&t&&(ee("multiple",!1),J(1),ee("ngForOf",n.keys),J(1),ee("ngIf",n.selectedValue))},styles:["[_nghost-%COMP%]{display:flex;align-items:flex-start;column-gap:1rem;height:inherit}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{height:100%;overflow-y:auto;width:12rem;max-width:33%;flex-shrink:0}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})(),SQ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new st}get resourcesMap(){const t={};for(let n=0;n<this.resourceData?.value.children?.value.length;n++)t[n.toString()]=this.resourceData?.value.children?.value[n];return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-wwww-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:4,vars:1,consts:[["id","top-bar"],[3,"resources"]],template:function(t,n){1&t&&(se(0,"div",0)(1,"h1"),Ze(2,"Wwww archive"),ae()(),Qe(3,"app-sidenav-res-list",1)),2&t&&(J(3),ee("resources",n.resourcesMap))},dependencies:[aI],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   app-sidenav-res-list[_ngcontent-%COMP%]{height:calc(100% - 4rem)}"],changeDetection:0}),i})();class lI{constructor(e=!1,t,n=!0,r){this._multiple=e,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Ge,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(n=>this._markSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(n=>this._unmarkSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,n=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!n.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let sV=(()=>{class i{constructor(){this._listeners=[]}notify(t,n){for(let r of this._listeners)r(t,n)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(n=>t!==n)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const EQ=["trigger"],AQ=["panel"];function DQ(i,e){if(1&i&&(se(0,"span",8),Ze(1),ae()),2&i){const t=Te();J(1),pi(t.placeholder)}}function TQ(i,e){if(1&i&&(se(0,"span",12),Ze(1),ae()),2&i){const t=Te(2);J(1),pi(t.triggerValue)}}function IQ(i,e){1&i&&ti(0,0,["*ngSwitchCase","true"])}function RQ(i,e){1&i&&(se(0,"span",9),Pe(1,TQ,2,1,"span",10),Pe(2,IQ,1,0,"ng-content",11),ae()),2&i&&(ee("ngSwitch",!!Te().customTrigger),J(2),ee("ngSwitchCase",!0))}function PQ(i,e){if(1&i){const t=Ei();se(0,"div",13)(1,"div",14,15),nt("@transformPanel.done",function(r){return Qt(t),cn(Te()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return Qt(t),cn(Te()._handleKeydown(r))}),ti(3,1),ae()()}if(2&i){const t=Te();ee("@transformPanelWrap",void 0),J(1),qO("mat-select-panel ",t._getPanelTheme(),""),wc("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),ee("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),Yt("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const kQ=[[["mat-select-trigger"]],"*"],OQ=["mat-select-trigger","*"],oV={transformPanelWrap:Ol("transformPanelWrap",[Vs("* => void",P1("@transformPanel",[R1()],{optional:!0}))]),transformPanel:Ol("transformPanel",[vs("void",Zn({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),vs("showing",Zn({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),vs("showing-multiple",Zn({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Vs("void => *",co("120ms cubic-bezier(0, 0, 0.2, 1)")),Vs("* => void",co("100ms 25ms linear",Zn({opacity:0})))])};let aV=0;const cV=new Se("mat-select-scroll-strategy"),BQ=new Se("MAT_SELECT_CONFIG"),UQ={provide:cV,deps:[lo],useFactory:function NQ(i){return()=>i.scrollStrategies.reposition()}};class VQ{constructor(e,t){this.source=e,this.value=t}}const zQ=jy(j3(pM(q3(class{constructor(i,e,t,n,r){this._elementRef=i,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=r,this.stateChanges=new Ge}})))),HQ=new Se("MatSelectTrigger");let GQ=(()=>{class i extends zQ{constructor(t,n,r,s,o,a,l,c,d,h,p,m,_,b){super(o,s,l,c,h),this._viewportRuler=t,this._changeDetectorRef=n,this._ngZone=r,this._dir=a,this._parentFormField=d,this._liveAnnouncer=_,this._defaultOptions=b,this._panelOpen=!1,this._compareWith=(v,y)=>v===y,this._uid="mat-select-"+aV++,this._triggerAriaLabelledBy=null,this._destroy=new Ge,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+aV++,this._panelDoneAnimatingStream=new Ge,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=wy(()=>{const v=this.options;return v?v.changes.pipe(ns(v),ys(()=>Ts(...v.map(y=>y.onSelectionChange)))):this._ngZone.onStable.pipe(Di(1),ys(()=>this.optionSelectionChanges))}),this.openedChange=new st,this._openedStream=this.openedChange.pipe(Rn(v=>v),Xe(()=>{})),this._closedStream=this.openedChange.pipe(Rn(v=>!v),Xe(()=>{})),this.selectionChange=new st,this.valueChange=new st,this.ngControl&&(this.ngControl.valueAccessor=this),null!=b?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=b.typeaheadDebounceInterval),this._scrollStrategyFactory=m,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(p)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(N1.required)??!1}set required(t){this._required=Xn(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Xn(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Xn(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=_a(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new lI(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(eh(),at(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(at(this._destroy)).subscribe(t=>{t.added.forEach(n=>n.select()),t.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(ns(null),at(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),n=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const n=t.keyCode,r=40===n||38===n||37===n||39===n,s=13===n||32===n,o=this._keyManager;if(!o.isTyping()&&s&&!ga(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(t);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){const n=this._keyManager,r=t.keyCode,s=40===r||38===r,o=n.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(o||13!==r&&32!==r||!n.activeItem||ga(t))if(!o&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=n.activeItemIndex;n.onKeydown(t),this._multiple&&s&&t.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}else t.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Di(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(t);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new tX(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(at(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(at(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=Ts(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(at(t)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Ts(...this.options.map(n=>n._stateChanges)).pipe(at(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,n){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),n&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),n&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,t):t.indexOf(n)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let n=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(t){return new(t||i)(R(uM),R(ni),R(Dt),R(D1),R($t),R(Lu,8),R(nv,8),R(om,8),R(nI,8),R(Fl,10),Va("tabindex"),R(cV),R(v1),R(BQ,8))},i.\u0275dir=Ne({type:i,viewQuery:function(t,n){if(1&t&&(Qi(EQ,5),Qi(AQ,5),Qi(V3,5)),2&t){let r;Kt(r=Zt())&&(n.trigger=r.first),Kt(r=Zt())&&(n.panel=r.first),Kt(r=Zt())&&(n._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[ht,ui]}),i})(),zM=(()=>{class i extends GQ{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,n,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-n+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(at(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Di(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const n=tB(t,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===n?0:function TY(i,e,t,n){return i<t?i:i+e>t+n?Math.max(0,i-n+e):t}((t+n)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new VQ(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let c=this._selectionModel.selected[0]||this.options.first;o=c&&c.group?32:16}r||(o*=-1);const a=0-(t.left+o-(r?s:0)),l=t.right+o-n.width+(r?0:s);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,n,r){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,a=Math.floor(256/s);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?t*s:this._scrollTop===r?(t-(this._getItemCount()-a))*s+(s-(this._getItemCount()*s-256)%s):n-s/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(t){const n=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=r.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),c=Math.min(this._getItemCount()*n,256)-a-this._triggerRect.height;c>o?this._adjustPanelUp(c,o):a>s?this._adjustPanelDown(a,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,n){const r=Math.round(t-n);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,n,r){const s=Math.round(t-n);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),n=this._getItemCount(),r=Math.min(n*t,256),o=n*t-r;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=tB(a,this.options,this.optionGroups);const l=r/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const t=this._getItemHeight(),n=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-n+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=Mi(i)))(n||i)}}(),i.\u0275cmp=St({type:i,selectors:[["mat-select"]],contentQueries:function(t,n,r){if(1&t&&(Ai(r,HQ,5),Ai(r,Yy,5),Ai(r,eB,5)),2&t){let s;Kt(s=Zt())&&(n.customTrigger=s.first),Kt(s=Zt())&&(n.options=s),Kt(s=Zt())&&(n.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(t,n){1&t&&nt("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&t&&(Yt("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-activedescendant",n._getAriaActiveDescendant()),fi("mat-select-disabled",n.disabled)("mat-select-invalid",n.errorState)("mat-select-required",n.required)("mat-select-empty",n.empty)("mat-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Hn([{provide:TM,useExisting:i},{provide:Q3,useExisting:i}]),ht],ngContentSelectors:OQ,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,n){if(1&t&&(ro(kQ),se(0,"div",0,1),nt("click",function(){return n.toggle()}),se(3,"div",2),Pe(4,DQ,2,1,"span",3),Pe(5,RQ,3,2,"span",4),ae(),se(6,"div",5),Qe(7,"div",6),ae()(),Pe(8,PQ,4,14,"ng-template",7),nt("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&t){const r=ja(1);Yt("aria-owns",n.panelOpen?n.id+"-panel":null),J(3),ee("ngSwitch",n.empty),Yt("id",n._valueId),J(1),ee("ngSwitchCase",!0),J(1),ee("ngSwitchCase",!1),J(3),ee("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayMinWidth",null==n._triggerRect?null:n._triggerRect.width)("cdkConnectedOverlayOffsetY",n._offsetY)}},dependencies:[_y,Bp,Sw,cN,V3,U3],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[oV.transformPanelWrap,oV.transformPanel]},changeDetection:0}),i})(),uV=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[UQ],imports:[Ja,im,nB,Dn,Hy,IM,nB,Dn]}),i})();function WQ(i,e){if(1&i&&(se(0,"mat-option",6),Ze(1),ae()),2&i){const t=e.$implicit;ee("value",t[1]),J(1),es(" ",t[1]," ")}}function $Q(i,e){if(1&i){const t=Ei();se(0,"mat-form-field",3)(1,"mat-label"),Ze(2),ae(),se(3,"mat-select",4),nt("valueChange",function(r){return Qt(t),cn(Te(2).resourceData.value=r)})("selectionChange",function(){return Qt(t),cn(Te(2).changed.emit())}),Pe(4,WQ,2,2,"mat-option",5),ae()()}if(2&i){const t=Te(2);J(2),pi(t.name),J(1),ee("value",t.resourceData.value),J(1),ee("ngForOf",t.resourceData.block.enum_names)}}function jQ(i,e){if(1&i){const t=Ei();se(0,"mat-form-field",3)(1,"mat-label"),Ze(2),ae(),se(3,"input",7),nt("ngModelChange",function(r){return Qt(t),cn(Te(2).resourceData.value=r)})("change",function(){return Qt(t),cn(Te(2).changed.emit())}),ae()()}if(2&i){const t=Te(2);J(2),pi(t.name),J(1),ee("min",0)("max",256*(t.resourceData.block.static_size||1)-1)("ngModel",t.resourceData.value)}}function qQ(i,e){if(1&i&&(Os(0),Pe(1,$Q,5,3,"mat-form-field",1),Pe(2,jQ,4,4,"ng-template",null,2,sw),Ls()),2&i){const t=ja(3),n=Te();J(1),ee("ngIf",n.isKnownEnumValue(n.resourceData.value))("ngIfElse",t)}}let XQ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new st}isKnownEnumValue(t){return!!this.resourceData?.block.enum_names.find(([n,r])=>r==t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-enum-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","fill",4,"ngIf","ngIfElse"],["unknownEnum",""],["appearance","fill"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange","change"]],template:function(t,n){1&t&&Pe(0,qQ,4,2,"ng-container",0),2&t&&ee("ngIf",n.resourceData)},dependencies:[pa,qi,Ll,rh,Lc,sv,rv,Fc,oh,Nc,ah,zM,Yy],changeDetection:0}),i})();const YQ=["*"],ZQ=["text"];function JQ(i,e){if(1&i&&Qe(0,"mat-pseudo-checkbox",5),2&i){const t=Te();ee("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}const QQ=["*",[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]]],eee=["*","[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]"];let tee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),i})(),nee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),i})();const iee=jy(class{}),ree=jy(class{}),see={provide:Qa,useExisting:Wn(()=>HM),multi:!0};class oee{constructor(e,t){this.source=e,this.options=t}}let cI=(()=>{class i extends ree{constructor(t,n,r){super(),this._element=t,this._changeDetector=n,this.selectionList=r,this._selected=!1,this._disabled=!1,this._hasFocus=!1,this.selectedChange=new st,this.checkboxPosition="after",this._inputsInitialized=!1}get color(){return this._color||this.selectionList.color}set color(t){this._color=t}get value(){return this._value}set value(t){this.selected&&!this.selectionList.compareWith(t,this.value)&&this._inputsInitialized&&(this.selected=!1),this._value=t}get disabled(){return this._disabled||this.selectionList&&this.selectionList.disabled}set disabled(t){const n=Xn(t);n!==this._disabled&&(this._disabled=n,this._changeDetector.markForCheck())}get selected(){return this.selectionList.selectedOptions.isSelected(this)}set selected(t){const n=Xn(t);n!==this._selected&&(this._setSelected(n),(n||this.selectionList.multiple)&&this.selectionList._reportValueChange())}ngOnInit(){const t=this.selectionList;t._value&&t._value.some(r=>t.compareWith(this._value,r))&&this._setSelected(!0);const n=this._selected;Promise.resolve().then(()=>{(this._selected||n)&&(this.selected=!0,this._changeDetector.markForCheck())}),this._inputsInitialized=!0}ngAfterContentInit(){!function bY(i,e,t="mat"){i.changes.pipe(ns(i)).subscribe(({length:n})=>{qy(e,`${t}-2-line`,!1),qy(e,`${t}-3-line`,!1),qy(e,`${t}-multi-line`,!1),2===n||3===n?qy(e,`${t}-${n}-line`,!0):n>3&&qy(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this.selected&&Promise.resolve().then(()=>{this.selected=!1});const t=this._hasFocus,n=this.selectionList._removeOptionFromList(this);t&&n&&n.focus()}toggle(){this.selected=!this.selected}focus(){this._element.nativeElement.focus()}getLabel(){return this._text&&this._text.nativeElement.textContent||""}_isRippleDisabled(){return this.disabled||this.disableRipple||this.selectionList.disableRipple}_handleClick(){!this.disabled&&(this.selectionList.multiple||!this.selected)&&(this.toggle(),this.selectionList._emitChangeEvent([this]))}_handleFocus(){this.selectionList._setFocusedOption(this),this._hasFocus=!0}_handleBlur(){this.selectionList._onTouched(),this._hasFocus=!1}_getHostElement(){return this._element.nativeElement}_setSelected(t){return t!==this._selected&&(this._selected=t,t?this.selectionList.selectedOptions.select(this):this.selectionList.selectedOptions.deselect(this),this.selectedChange.emit(t),this._changeDetector.markForCheck(),!0)}_markForCheck(){this._changeDetector.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(ni),R(Wn(()=>HM)))},i.\u0275cmp=St({type:i,selectors:[["mat-list-option"]],contentQueries:function(t,n,r){if(1&t&&(Ai(r,tee,5),Ai(r,nee,5),Ai(r,vY,5)),2&t){let s;Kt(s=Zt())&&(n._avatar=s.first),Kt(s=Zt())&&(n._icon=s.first),Kt(s=Zt())&&(n._lines=s)}},viewQuery:function(t,n){if(1&t&&Qi(ZQ,5),2&t){let r;Kt(r=Zt())&&(n._text=r.first)}},hostAttrs:["role","option",1,"mat-list-item","mat-list-option","mat-focus-indicator"],hostVars:15,hostBindings:function(t,n){1&t&&nt("focus",function(){return n._handleFocus()})("blur",function(){return n._handleBlur()})("click",function(){return n._handleClick()}),2&t&&(Yt("aria-selected",n.selected)("aria-disabled",n.disabled)("tabindex",-1),fi("mat-list-item-disabled",n.disabled)("mat-list-item-with-avatar",n._avatar||n._icon)("mat-primary","primary"===n.color)("mat-accent","primary"!==n.color&&"warn"!==n.color)("mat-warn","warn"===n.color)("mat-list-single-selected-option",n.selected&&!n.selectionList.multiple))},inputs:{disableRipple:"disableRipple",checkboxPosition:"checkboxPosition",color:"color",value:"value",disabled:"disabled",selected:"selected"},outputs:{selectedChange:"selectedChange"},exportAs:["matListOption"],features:[ht],ngContentSelectors:eee,decls:7,vars:5,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[3,"state","disabled",4,"ngIf"],[1,"mat-list-text"],["text",""],[3,"state","disabled"]],template:function(t,n){1&t&&(ro(QQ),se(0,"div",0),Qe(1,"div",1),Pe(2,JQ,1,2,"mat-pseudo-checkbox",2),se(3,"div",3,4),ti(5),ae(),ti(6,1),ae()),2&t&&(fi("mat-list-item-content-reverse","after"==n.checkboxPosition),J(1),ee("matRippleTrigger",n._getHostElement())("matRippleDisabled",n._isRippleDisabled()),J(1),ee("ngIf",n.selectionList.multiple))},dependencies:[Xy,J3,qi],encapsulation:2,changeDetection:0}),i})(),HM=(()=>{class i extends iee{constructor(t,n,r){super(),this._element=t,this._changeDetector=n,this._focusMonitor=r,this._multiple=!0,this._contentInitialized=!1,this.selectionChange=new st,this.color="accent",this.compareWith=(s,o)=>s===o,this._disabled=!1,this.selectedOptions=new lI(this._multiple),this._tabIndex=-1,this._onChange=s=>{},this._destroyed=new Ge,this._onTouched=()=>{}}get disabled(){return this._disabled}set disabled(t){this._disabled=Xn(t),this._markOptionsForCheck()}get multiple(){return this._multiple}set multiple(t){const n=Xn(t);n!==this._multiple&&(this._multiple=n,this.selectedOptions=new lI(this._multiple,this.selectedOptions.selected))}ngAfterContentInit(){this._contentInitialized=!0,this._keyManager=new _3(this.options).withWrap().withTypeAhead().withHomeAndEnd().skipPredicate(()=>!1).withAllowedModifierKeys(["shiftKey"]),this._value&&this._setOptionsFromValues(this._value),this._keyManager.tabOut.pipe(at(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.options.changes.pipe(ns(null),at(this._destroyed)).subscribe(()=>{this._updateTabIndex()}),this.selectedOptions.changed.pipe(at(this._destroyed)).subscribe(t=>{if(t.added)for(let n of t.added)n.selected=!0;if(t.removed)for(let n of t.removed)n.selected=!1}),this._focusMonitor.monitor(this._element).pipe(at(this._destroyed)).subscribe(t=>{if("keyboard"===t||"program"===t){let n=0;for(let r=0;r<this.options.length;r++)if(this.options.get(r)?.selected){n=r;break}this._keyManager.setActiveItem(n)}})}ngOnChanges(t){const n=t.disableRipple,r=t.color;(n&&!n.firstChange||r&&!r.firstChange)&&this._markOptionsForCheck()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._element),this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0}focus(t){this._element.nativeElement.focus(t)}selectAll(){return this._setAllOptionsSelected(!0)}deselectAll(){return this._setAllOptionsSelected(!1)}_setFocusedOption(t){this._keyManager.updateActiveItem(t)}_removeOptionFromList(t){const n=this._getOptionIndex(t);return n>-1&&this._keyManager.activeItemIndex===n&&(n>0?this._keyManager.updateActiveItem(n-1):0===n&&this.options.length>1&&this._keyManager.updateActiveItem(Math.min(n+1,this.options.length-1))),this._keyManager.activeItem}_keydown(t){const n=t.keyCode,r=this._keyManager,s=r.activeItemIndex,o=ga(t);switch(n){case 32:case 13:!o&&!r.isTyping()&&(this._toggleFocusedOption(),t.preventDefault());break;default:if(65===n&&this.multiple&&ga(t,"ctrlKey")&&!r.isTyping()){const a=this.options.some(l=>!l.disabled&&!l.selected);this._setAllOptionsSelected(a,!0,!0),t.preventDefault()}else r.onKeydown(t)}this.multiple&&(38===n||40===n)&&t.shiftKey&&r.activeItemIndex!==s&&this._toggleFocusedOption()}_reportValueChange(){if(this.options&&!this._isDestroyed){const t=this._getSelectedOptionValues();this._onChange(t),this._value=t}}_emitChangeEvent(t){this.selectionChange.emit(new oee(this,t))}writeValue(t){this._value=t,this.options&&this._setOptionsFromValues(t||[])}setDisabledState(t){this.disabled=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}_setOptionsFromValues(t){this.options.forEach(n=>n._setSelected(!1)),t.forEach(n=>{const r=this.options.find(s=>!s.selected&&this.compareWith(s.value,n));r&&r._setSelected(!0)})}_getSelectedOptionValues(){return this.options.filter(t=>t.selected).map(t=>t.value)}_toggleFocusedOption(){let t=this._keyManager.activeItemIndex;if(null!=t&&this._isValidIndex(t)){let n=this.options.toArray()[t];n&&!n.disabled&&(this._multiple||!n.selected)&&(n.toggle(),this._emitChangeEvent([n]))}}_setAllOptionsSelected(t,n,r){const s=[];return this.options.forEach(o=>{(!n||!o.disabled)&&o._setSelected(t)&&s.push(o)}),s.length&&(this._reportValueChange(),r&&this._emitChangeEvent(s)),s}_isValidIndex(t){return t>=0&&t<this.options.length}_getOptionIndex(t){return this.options.toArray().indexOf(t)}_markOptionsForCheck(){this.options&&this.options.forEach(t=>t._markForCheck())}_allowFocusEscape(){this._tabIndex=-1,setTimeout(()=>{this._tabIndex=0,this._changeDetector.markForCheck()})}_updateTabIndex(){this._tabIndex=0===this.options.length?-1:0}}return i.\u0275fac=function(t){return new(t||i)(R($t),R(ni),R(kc))},i.\u0275cmp=St({type:i,selectors:[["mat-selection-list"]],contentQueries:function(t,n,r){if(1&t&&Ai(r,cI,5),2&t){let s;Kt(s=Zt())&&(n.options=s)}},hostAttrs:["role","listbox",1,"mat-selection-list","mat-list-base"],hostVars:3,hostBindings:function(t,n){1&t&&nt("keydown",function(s){return n._keydown(s)}),2&t&&Yt("aria-multiselectable",n.multiple)("aria-disabled",n.disabled.toString())("tabindex",n._tabIndex)},inputs:{disableRipple:"disableRipple",color:"color",compareWith:"compareWith",disabled:"disabled",multiple:"multiple"},outputs:{selectionChange:"selectionChange"},exportAs:["matSelectionList"],features:[Hn([see]),ht,ui],ngContentSelectors:YQ,decls:1,vars:0,template:function(t,n){1&t&&(ro(),ti(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),i})(),aee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[X3,mM,Dn,I1,Ja,X3,Dn,I1,IU]}),i})();function lee(i,e){if(1&i&&(se(0,"mat-list-option",3),Ze(1),ae()),2&i){const t=e.$implicit,n=Te(2);ee("value",t.key)("selected",n.resourceData.value[t.key]),J(1),es(" ",t.key," ")}}function cee(i,e){if(1&i){const t=Ei();Os(0),se(1,"mat-label"),Ze(2),ae(),se(3,"mat-selection-list",1),nt("selectionChange",function(r){return Qt(t),cn(Te().onSelection(r))}),Pe(4,lee,2,3,"mat-list-option",2),Et(5,"keyvalue"),ae(),Ls()}if(2&i){const t=Te();J(2),pi(t.name),J(2),ee("ngForOf",Tt(5,2,t.resourceData.value))}}let uee=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new st}onSelection(t){for(const n of t.options)this.resourceData.value[n.value]=n.selected;this.changed.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-flags-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(t,n){1&t&&Pe(0,cee,6,4,"ng-container",0),2&t&&ee("ngIf",n.resourceData)},dependencies:[pa,qi,Nc,HM,cI,hN],styles:["[_nghost-%COMP%]{padding-bottom:1.34375em}"],changeDetection:0}),i})();var Nl=(()=>{return(i=Nl||(Nl={}))[i.INPUT_CONTROLLERS=0]="INPUT_CONTROLLERS",i[i.PHYSICS_SIMULATION=200]="PHYSICS_SIMULATION",i[i.OBJECTS_BINDING=400]="OBJECTS_BINDING",i[i.ANIMATION_MIXERS=600]="ANIMATION_MIXERS",i[i.CONTROLLERS=800]="CONTROLLERS",i[i.RENDERING=1e3]="RENDERING",i[i.POST_RENDERING=1200]="POST_RENDERING",Nl;var i})();let uh=(()=>{class i{constructor(){this.tick$=new Ge,this._world=null,this._name="0x"+(i.default_name_counter++).toString(16),this._active=!0,this.parent=null,this._children=[],this._onSpawned$=new Ge,this._onRemoved$=new Ge}get world(){return this._world}get name(){return this._name}set name(t){this._name=t}get active(){return this._active}set active(t){this._active=t}get children(){return[...this._children]}addChildren(...t){for(const n of t)n.parent&&n.parent.removeChildren([n]),n.parent=this;if(this._children.push(...t),this._world)for(const n of t)this._world.addEntity(n)}removeChildren(t,n=!1){this._children=this._children.filter(r=>!t.includes(r));for(const r of t)r.parent=null,this._world&&this._world.removeEntity(r,n)}onSpawned(t){this._world=t;for(const n of this._children)t.addEntity(n);this._onSpawned$.next()}onRemoved(){const t=this._world;this._world=null;for(const n of this._children)t.removeEntity(n);this._onRemoved$.next()}dispose(){this.world&&this.world.removeEntity(this,!1),this._onSpawned$.complete(),this._onRemoved$.complete(),this.tick$.complete();for(const t of this._children)t.dispose()}}return i.default_name_counter=0,i})();const dee={transparent:!1,background:0,size:"fullscreen",antialias:!0};class hee extends uh{constructor(e,t={}){super(),this.canvas=e,this.tickOrder=Nl.RENDERING,this._rendererSize$=new Nt(null),this.rendererOptions=Object.assign(Object.assign({},dee),t||{}),this.tick$.subscribe(()=>{this.render()})}get rendererSize$(){return this._rendererSize$.asObservable()}get rendererSize(){return this._rendererSize$.getValue()}onSpawned(e){super.onSpawned(e),this._rendererSize$.next(null),"fullscreen"==this.rendererOptions.size||"function"==typeof this.rendererOptions.size?(this.canvas&&(this.canvas.style.position="absolute"),Ts(ya(window,"resize").pipe(M1(100)),ya(window,"orientationchange")).pipe(at(this._onRemoved$),Xe(()=>({x:window.innerWidth,y:window.innerHeight})),ns({x:window.innerWidth,y:window.innerHeight})).subscribe(t=>{this._rendererSize$.next("function"==typeof this.rendererOptions.size?this.rendererOptions.size(t):t)})):this.rendererOptions.size instanceof Cn||void 0!==this.rendererOptions.size.subscribe&&void 0!==this.rendererOptions.size.pipe?this.rendererOptions.size.pipe(at(this._onRemoved$)).subscribe(t=>{this._rendererSize$.next(t)}):this._rendererSize$.next(this.rendererOptions.size),this._rendererSize$.pipe(at(this._onRemoved$),eh((t,n)=>t?.x==n?.x&&t?.y==n?.y)).subscribe(t=>{t&&this.resizeRenderer(t)})}dispose(){super.dispose(),this._rendererSize$.complete()}}class fee extends uh{constructor(e){super(),this.tickOrder=e}}function GM(i,e=Nl.CONTROLLERS){const t=new fee(e);return i.addEntity(t),t.tick$.pipe(ku(()=>{i.removeEntity(t,!0)}))}class uI{constructor(){this._running=!1,this.stop$=new Ge}get running(){return this._running}start(...e){this.running||(this.startInternal(...e),this._running=!0)}stop(...e){!this.running||(this.stop$.next(),this.stopInternal(...e),this._running=!1)}stopInternal(...e){}}const WM=new Cn(ss);class yr{static get O(){return{x:0,y:0}}static get X(){return{x:1,y:0}}static get Y(){return{x:0,y:1}}static clone(e){return{x:e.x,y:e.y}}static add(e,t){return{x:e.x+t.x,y:e.y+t.y}}static sub(e,t){return{x:e.x-t.x,y:e.y-t.y}}static avg(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}static lenSq(e){return e.x*e.x+e.y*e.y}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static dist(e,t){return yr.len(yr.sub(e,t))}static norm(e){const t=yr.len(e);return{x:e.x/t,y:e.y/t}}static scalarMult(e,t){return{x:e.x*t,y:e.y*t}}static lerp(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}static angle(e,t){const n=e.x*t.x+e.y*t.y,r=Math.sqrt(e.x**2+e.y**2)*Math.sqrt(t.x**2+t.y**2);return Math.acos(n/r)}}const mee={pointerLock:!1};var xs=(()=>{return(i=xs||(xs={}))[i.NONE=0]="NONE",i[i.DRAG=1]="DRAG",i[i.DRAG_MIDDLE_BUTTON=2]="DRAG_MIDDLE_BUTTON",i[i.DRAG_RIGHT_BUTTON=3]="DRAG_RIGHT_BUTTON",i[i.DRAG_TOUCH_TWO_FINGERS=4]="DRAG_TOUCH_TWO_FINGERS",xs;var i})();class cm extends uI{constructor(e={}){super(),this._wheel$=null,this._delta$=new Ge,this._position$=new Nt(yr.O),this._multiTouchPositions$=new Nt([]),this.stopped$=new Ge,this._state$=new Nt(xs.NONE),this.options=Object.assign(Object.assign({},mee),e),this.canvasClickListener=this.canvasClickListener.bind(this)}static isTouchDevice(){return"createTouch"in document||!!navigator.userAgent.match(/(iPhone|iPod|iPad)/)||!!navigator.userAgent.match(/Android/)}get delta$(){return this._delta$.asObservable()}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}get wheel$(){return this._wheel$||(this._wheel$=ya(this._element,"wheel",{passive:!1}).pipe(at(this.stopped$),ku(()=>this._wheel$=null),Ti(e=>e.preventDefault()),Xe(e=>e.deltaY),lf())),this._wheel$}get isPointerLocked(){return!!document.pointerLockElement}get state(){return this._state$.getValue()}get state$(){return this._state$.asObservable()}get multiTouchPositions$(){return this._multiTouchPositions$.asObservable()}get twoTouchGestureDelta$(){return this.state$.pipe(ys(e=>e==xs.DRAG_TOUCH_TWO_FINGERS?this.multiTouchPositions$:WM),Xe(e=>e.map(t=>({x:t.x,y:t.y}))),function pee(){return Fn((i,e)=>{let t,n=!1;i.subscribe(An(e,r=>{const s=t;t=r,n&&e.next([s,r]),n=!0}))})}(),Rn(([e,t])=>e.length>1&&t.length>1),Xe(([e,t])=>({centerPointDelta:yr.sub(yr.scalarMult(t.reduce((n,r)=>yr.add(n,r),yr.O),1/t.length),yr.scalarMult(e.reduce((n,r)=>yr.add(n,r),yr.O),1/t.length)),angleDelta:yr.angle(t[1],t[0])-yr.angle(e[1],e[0]),distanceDelta:yr.dist(t[1],t[0])-yr.dist(e[1],e[0])})))}get _element(){return this.options.canvas||window}startInternal(){this.options.canvas&&(this.options.canvas.style.touchAction="none"),this._state$.next(xs.NONE);const e=[xs.DRAG,xs.DRAG_MIDDLE_BUTTON,xs.DRAG_RIGHT_BUTTON],t=[xs.NONE,xs.DRAG,xs.DRAG_TOUCH_TWO_FINGERS],n=[],r={};ya(this._element,"mousemove").pipe(at(this.stopped$)).subscribe(o=>{this._delta$.next({x:o.movementX,y:o.movementY})}),ya(this._element,"pointermove").pipe(at(this.stopped$)).subscribe(o=>{o instanceof PointerEvent?("touch"===o.pointerType&&(r[o.pointerId]={x:o.pageX,y:o.pageY}),this._position$.next({x:o.pageX,y:o.pageY}),this._multiTouchPositions$.next(Object.values(r))):this._position$.next({x:o.clientX,y:o.clientY}),this._delta$.next({x:o.movementX,y:o.movementY})}),!cm.isTouchDevice()&&this.options.pointerLock&&this.options.canvas&&this.options.canvas.addEventListener("click",this.canvasClickListener);const s=o=>{delete r[o.pointerId];for(let a=0;a<n.length;a++)if(n[a].pointerId==o.pointerId){n.splice(a,1);break}0===n.length&&(this.options.canvas&&this.options.canvas.releasePointerCapture(o.pointerId),this._element.removeEventListener("pointerup",s),this._element.removeEventListener("pointercancel",s)),this._state$.next(t[Math.min(n.length,2)])};ya(this._element,"pointerdown").pipe(at(this.stopped$)).subscribe(o=>{0===n.length&&(this.options.canvas&&this.options.canvas.setPointerCapture(o.pointerId),this._element.addEventListener("pointerup",s),this._element.addEventListener("pointercancel",s)),n.push(o),"touch"===o.pointerType?(r[o.pointerId]={x:o.pageX,y:o.pageY},this._state$.next(t[Math.min(n.length,2)])):this._state$.next(e[o.button]||xs.NONE)}),ya(this._element,"contextmenu").pipe(at(this.stopped$)).subscribe(o=>{o.preventDefault()})}stopInternal(e=!0){this.stopped$.next(),e&&this.options.canvas&&(this.options.canvas.removeEventListener("click",this.canvasClickListener),document.exitPointerLock())}canvasClickListener(){this.options.canvas.requestPointerLock()}}class Dr{static get O(){return{x:0,y:0,z:0,w:1}}static clone(e){return{x:e.x,y:e.y,z:e.z,w:e.w}}static add(e,t){const n=e.w+t.w,r=e.x+t.x,s=e.y+t.y,o=e.z+t.z,a=Math.sqrt(n*n+r*r+s*s+o*o);return{w:n/a,x:r/a,y:s/a,z:o/a}}static mult(e,t){return{w:e.w*t.w-e.x*t.x-e.y*t.y-e.z*t.z,x:e.w*t.x+e.x*t.w+e.y*t.z-e.z*t.y,y:e.w*t.y-e.x*t.z+e.y*t.w+e.z*t.x,z:e.w*t.z+e.x*t.y-e.y*t.x+e.z*t.w}}static combineRotations(...e){let t={w:1,x:0,y:0,z:0};for(const n of e)t=this.mult(t,n);return t}static lerp(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y),z:e.z+n*(t.z-e.z),w:e.w+n*(t.w-e.w)}}static slerp(e,t,n){let s=Math.acos(e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w),o=Math.sin(s),a=e.x*Math.sin((1-n)*s)/o+t.x*Math.sin(n*s)/o,l=e.y*Math.sin((1-n)*s)/o+t.y*Math.sin(n*s)/o,c=e.z*Math.sin((1-n)*s)/o+t.z*Math.sin(n*s)/o,d=e.w*Math.sin((1-n)*s)/o+t.w*Math.sin(n*s)/o;return isNaN(a)||isNaN(l)||isNaN(c)||isNaN(d)?Dr.clone(e):{x:a,y:l,z:c,w:d}}static fromAngle(e,t){const n=t/2,r=Math.sin(n);return Object.assign(Object.assign({},yt.scalarMult(e,r)),{w:Math.cos(n)})}static fromMatrix4(e){const t=e[0],n=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],d=e[10],h=t+o+d;if(h>0){const p=.5/Math.sqrt(h+1);return{x:(c-a)*p,y:(r-l)*p,z:(s-n)*p,w:.25/p}}if(t>o&&t>d){const p=2*Math.sqrt(1+t-o-d);return{x:.25*p,y:(n+s)/p,z:(r+l)/p,w:(c-a)/p}}if(o>d){const p=2*Math.sqrt(1+o-t-d);return{x:(n+s)/p,y:.25*p,z:(a+c)/p,w:(r-l)/p}}{const p=2*Math.sqrt(1+d-t-o);return{x:(r+l)/p,y:(a+c)/p,z:.25*p,w:(s-n)/p}}}static fromEuler(e){const t=e.x,n=e.y,r=e.z,s=Math.cos(.5*r),o=Math.sin(.5*r),a=Math.cos(.5*n),l=Math.sin(.5*n),c=Math.cos(.5*t),d=Math.sin(.5*t);return{w:c*a*s+d*l*o,x:d*a*s-c*l*o,y:c*l*s+d*a*o,z:c*a*o-d*l*s}}static toEuler(e){const t=e.w,n=e.x,r=e.y,s=e.z,c=2*(t*r-s*n);return{x:Math.atan2(2*(t*n+r*s),1-2*(n*n+r*r)),y:Math.abs(c)>=1?Math.sign(c)*Math.PI/2:Math.asin(c),z:Math.atan2(2*(t*s+n*r),1-2*(r*r+s*s))}}static lookAt(e,t,n=yt.Z){return this.fromMatrix4(class gee{static lookAt(e,t,n){let r=yt.sub(e,t);r=0===yt.lenSq(r)?Object.assign(Object.assign({},r),{z:1}):yt.norm(r);let s=yt.cross(n,r);0===yt.lenSq(s)&&(r=1===Math.abs(n.z)?Object.assign(Object.assign({},r),{x:r.x+1e-4}):Object.assign(Object.assign({},r),{z:r.z+1e-4}),r=yt.norm(r),s=yt.cross(n,r)),s=yt.norm(s);let o=yt.cross(r,s);return[s.x,s.y,s.z,0,o.x,o.y,o.z,0,r.x,r.y,r.z,0]}}.lookAt(e,t,n))}static rotAround(e,t,n){const r=Math.sin(n/2),s={w:Math.cos(n/2),x:t.x*r,y:t.y*r,z:t.z*r};return this.mult(s,e)}}class yt{static get O(){return{x:0,y:0,z:0}}static get X(){return{x:1,y:0,z:0}}static get Y(){return{x:0,y:1,z:0}}static get Z(){return{x:0,y:0,z:1}}static clone(e){return{x:e.x,y:e.y,z:e.z}}static add(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}}static sub(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}}static avg(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2,z:(e.z+t.z)/2}}static lenSq(e){return e.x*e.x+e.y*e.y+e.z*e.z}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)}static dist(e,t){return yt.len(yt.sub(e,t))}static cross(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return{x:r*l-s*a,y:s*o-n*l,z:n*a-r*o}}static norm(e){const t=yt.len(e);return 0===t?e:{x:e.x/t,y:e.y/t,z:e.z/t}}static scalarMult(e,t){return{x:e.x*t,y:e.y*t,z:e.z*t}}static lerp(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y),z:e.z+n*(t.z-e.z)}}static angle(e,t){const n=e.x*t.x+e.y*t.y+e.z*t.z,r=Math.sqrt(e.x**2+e.y**2+e.z**2)*Math.sqrt(t.x**2+t.y**2+t.z**2);return Math.acos(n/r)}static rot(e,t){const{x:n,y:r,z:s}=e;return{x:t.w*t.w*n+2*t.y*t.w*s-2*t.z*t.w*r+t.x*t.x*n+2*t.y*t.x*r+2*t.z*t.x*s-t.y*t.y*n-t.z*t.z*n,y:2*t.x*t.y*n+t.y*t.y*r+2*t.z*t.y*s+2*t.w*t.z*n-t.z*t.z*r+t.w*t.w*r-2*t.x*t.w*s-t.x*t.x*r,z:2*t.x*t.z*n+2*t.y*t.z*r+t.z*t.z*s-2*t.w*t.y*n-t.y*t.y*s+2*t.w*t.x*r-t.x*t.x*s+t.w*t.w*s}}static rotAround(e,t,n){return this.rot(e,Dr.fromAngle(t,n))}static toSpherical(e){const t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);return{radius:t,theta:0==t?0:Math.atan2(e.y,e.x),phi:0==t?0:Math.atan2(Math.sqrt(e.x*e.x+e.y*e.y),e.z)}}static fromSpherical(e){return{x:e.radius*Math.sin(e.phi)*Math.cos(e.theta),y:e.radius*Math.sin(e.phi)*Math.sin(e.theta),z:e.radius*Math.cos(e.phi)}}}class dV extends uh{constructor(){super(),this._position$=new Nt(this.getDefaultPosition()),this._rotation$=new Nt(this.getDefaultRotation()),this._scale$=new Nt(this.getDefaultScale())}get world(){return super.world}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}set position(e){this._position$.next(e)}get rotation(){return this._rotation$.getValue()}get rotation$(){return this._rotation$.asObservable()}set rotation(e){this._rotation$.next(e)}get scale(){return this._scale$.getValue()}get scale$(){return this._scale$.asObservable()}set scale(e){this._scale$.next(e)}onSpawned(e){super.onSpawned(e)}}const hV=(i,e,t=[])=>{const n=Object.getOwnPropertyDescriptors(e);for(let r of t)delete n[r];Object.defineProperties(i,n)},dh=(i,e=[i])=>{const t=Object.getPrototypeOf(i);return null===t?e:dh(t,[...e,t])},fV=(i,e,t=[])=>{var n;const r=null!==(n=((...i)=>{if(0===i.length)return;let e;const t=i.map(n=>dh(n));for(;t.every(n=>n.length>0);){const n=t.map(s=>s.pop()),r=n[0];if(!n.every(s=>s===r))break;e=r}return e})(...i))&&void 0!==n?n:Object.prototype,s=Object.create(r),o=dh(r);for(let a of i){let l=dh(a);for(let c=l.length-1;c>=0;c--){let d=l[c];-1===o.indexOf(d)&&(hV(s,d,["constructor",...t]),o.push(d))}}return s.constructor=e,s},dI=i=>i.filter((e,t)=>i.indexOf(e)==t),hI=new Map,bee=i=>hI.get(i),mV=(i,e)=>{var t,n;const r=dI([...Object.getOwnPropertyNames(i),...Object.getOwnPropertyNames(e)]),s={};for(let o of r)s[o]=dI([...null!==(t=i?.[o])&&void 0!==t?t:[],...null!==(n=e?.[o])&&void 0!==n?n:[]]);return s},gV=(i,e)=>{var t,n,r,s;return{property:mV(null!==(t=i?.property)&&void 0!==t?t:{},null!==(n=e?.property)&&void 0!==n?n:{}),method:mV(null!==(r=i?.method)&&void 0!==r?r:{},null!==(s=e?.method)&&void 0!==s?s:{})}},_V=(i,e)=>{var t,n,r,s,o,a;return{class:dI([...null!==(t=i?.class)&&void 0!==t?t:[],...null!==(n=e?.class)&&void 0!==n?n:[]]),static:gV(null!==(r=i?.static)&&void 0!==r?r:{},null!==(s=e?.static)&&void 0!==s?s:{}),instance:gV(null!==(o=i?.instance)&&void 0!==o?o:{},null!==(a=e?.instance)&&void 0!==a?a:{})}},fI=new Map;function jM(...i){var e,t,n;const r=i.map(l=>l.prototype);function o(...l){for(const c of i)hV(this,new c(...l))}o.prototype=fV(r,o),Object.setPrototypeOf(o,fV(i,null,["prototype"]));let a=o;{const l=((...i)=>{const e=((...i)=>{var e;const t=new Set,n=new Set([...i]);for(;n.size>0;)for(let r of n){const l=[...dh(r.prototype).map(c=>c.constructor),...null!==(e=bee(r))&&void 0!==e?e:[]].filter(c=>!t.has(c));for(let c of l)n.add(c);t.add(r),n.delete(r)}return[...t]})(...i).map(t=>fI.get(t)).filter(t=>!!t);return 0==e.length?{}:1==e.length?e[0]:e.reduce((t,n)=>_V(t,n))})(...i);for(let c of null!==(e=l?.class)&&void 0!==e?e:[]){const d=c(a);d&&(a=d)}yV(null!==(t=l?.static)&&void 0!==t?t:{},a),yV(null!==(n=l?.instance)&&void 0!==n?n:{},a.prototype)}return((i,e)=>{hI.set(i,e)})(a,i),a}const yV=(i,e)=>{const t=i.property,n=i.method;if(t)for(let r in t)for(let s of t[r])s(e,r);if(n)for(let r in n)for(let s of n[r])s(e,r,Object.getOwnPropertyDescriptor(e,r))},mI=i=>{i.updateVisibility?i.updateVisibility():vV(i)},vV=i=>{for(const e of i.children)mI(e)};class gI extends uh{constructor(){super(...arguments),this._visible=!0}get visible(){return this._visible}get worldVisible(){let e=this;for(;;){if(!1===e.visible)return!1;if(!e.parent)break;e=e.parent}return!0}set visible(e){this._visible=e,this.updateVisibility()}updateVisibility(){vV(this)}addChildren(...e){super.addChildren(...e);for(const t of e)mI(t)}removeChildren(e,t=!1){if(super.removeChildren(e,t),!t)for(const n of e)mI(n)}}jM(gI,class _ee extends dV{getDefaultPosition(){return yr.O}getDefaultRotation(){return 0}getDefaultScale(){return{x:1,y:1}}});class va{constructor(){this.worlds=[],this.selectedWorld=null,window.gg=this}static get instance(){return va._instance||(va._instance=new va),va._instance}console(e){return function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){if(!this.selectedWorld)return"World not selected";const t=e.split("\n");let n=[];for(const r of t){const s=r.split(" ");n.push(yield this.selectedWorld.runConsoleCommand(s.splice(0,1)[0],s))}return n.join("\n")})}}class Dee extends uI{constructor(){super(),this.bindings={},this.skipKeyDownsOnExternalFocus=!0,this.externalFocusBlacklist=[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement,HTMLButtonElement],this.handleKeys=this.handleKeys.bind(this),this.resetAllKeys=this.resetAllKeys.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this)}startInternal(){window.addEventListener("keydown",this.handleKeys),window.addEventListener("keyup",this.handleKeys),window.addEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange)}stopInternal(){window.removeEventListener("keydown",this.handleKeys),window.removeEventListener("keyup",this.handleKeys),window.removeEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange),this.resetAllKeys()}bind(e){this.bindings[e]||(this.bindings[e]=[]);const t=new Nt(!1);return this.bindings[e].push(t),t.pipe(eh(),ku(()=>{this.bindings[e].splice(this.bindings[e].indexOf(t),1),t.complete()}))}bindMany(...e){if(0==e.length)return console.warn("[KeyboardController] bindMany called without any key code"),WM;if(1==e.length)return this.bind(e[0]);const t=[];for(const n of e){this.bindings[n]||(this.bindings[n]=[]);const r=new Nt(!1);this.bindings[n].push(r),t.push(r)}return Iu(t).pipe(ku(()=>{for(let n=0;n<e.length;n++)this.bindings[e[n]].splice(this.bindings[e[n]].indexOf(t[n]),1),t[n].complete()}),Xe(n=>n.includes(!0)),eh())}emulateKeyDown(e){if(this.running)for(const t of this.bindings[e]||[])t.next(!0)}emulateKeyUp(e){if(this.running)for(const t of this.bindings[e]||[])t.next(!1)}emulateKeyPress(e){this.emulateKeyDown(e),this.emulateKeyUp(e)}handleKeys(e){if("keydown"!=e.type&&"keyup"!=e.type)return;const t="keydown"==e.type;if(t&&this.skipKeyDownsOnExternalFocus&&document.activeElement)for(const n of this.externalFocusBlacklist)if(document.activeElement instanceof n)return;for(const n of this.bindings[e.code]||[])n.next(t)}onPointerLockChange(){document.pointerLockElement||this.resetAllKeys()}resetAllKeys(){for(const e in this.bindings)for(const t of this.bindings[e]||[])t.next(!1)}}class hv{constructor(){this.output="\n                  \u2584\u2588\u2588\u2588\u2588   \u2584\u2588\u2588\u2588\u2588     \u2588     \u2588\u2591\u2593\u2588\u2588\u2588\u2588\u2588  \u2584\u2584\u2584\u2584   \n                 \u2588\u2588\u2592 \u2580\u2588\u2592 \u2588\u2588\u2592 \u2580\u2588\u2592   \u2593\u2588\u2591 \u2588 \u2591\u2588\u2591\u2593\u2588   \u2580 \u2593\u2588\u2588\u2588\u2588\u2588\u2584 \n                \u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591\u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591   \u2592\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2588\u2588\u2588   \u2592\u2588\u2588\u2592 \u2584\u2588\u2588\n                \u2591\u2593\u2588  \u2588\u2588\u2593\u2591\u2593\u2588  \u2588\u2588\u2593   \u2591\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2593\u2588  \u2584 \u2592\u2588\u2588\u2591\u2588\u2580  \n                \u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592   \u2591\u2591\u2588\u2588\u2592\u2588\u2588\u2593 \u2591\u2592\u2588\u2588\u2588\u2588\u2592\u2591\u2593\u2588  \u2580\u2588\u2593\n                 \u2591\u2592   \u2592  \u2591\u2592   \u2592    \u2591 \u2593\u2591\u2592 \u2592  \u2591\u2591 \u2592\u2591 \u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\n                  \u2591   \u2591   \u2591   \u2591      \u2592 \u2591 \u2591   \u2591 \u2591  \u2591\u2592\u2591\u2592   \u2591 \n                \u2591 \u2591   \u2591 \u2591 \u2591   \u2591      \u2591   \u2591     \u2591    \u2591    \u2591 \n                      \u2591       \u2591        \u2591       \u2591  \u2591 \u2591      \n                                                         \u2591 \n             >>> https://github.com/AndyGura/gg-web-engine <<<\nWelcome to GG web engine UI console. \nEnter command in input below.\n\nList of available commands: commandslist \n",this.commandHistory=[],this.currentCommandIndex=0,this.elements=null}static get instance(){return this._instance||(this._instance=new hv),this._instance}get isUIShown(){return!!this.elements}createUI(){if(this.elements)return;const e=document.createElement("div");e.innerHTML='\n  <div id="gg-console-header" style="padding: 10px; cursor: move; z-index: 10; background-color: #054a81; border: 1px solid white; font-size: large;">GG web engine UI console</div>\n  <textarea id="gg-console-output" disabled style="resize: none; flex-grow: 1; background: #555555; border: 1px solid white; color: white; font-family: monospace;" ></textarea>\n  <input id="gg-console-input" style="background: #555555; border: 1px solid white; color: white; font-family: monospace;"/>',e.style.position="absolute",e.style.zIndex="1000",e.style.backgroundColor="#222222",e.style.border="1px solid white",e.style.width="640px",e.style.height="480px",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="stretch",e.style.padding="3px",e.style.rowGap="3px",e.style.fontFamily="monospace",e.style.color="white",document.body.append(e),this.elements={main:e,input:document.getElementById("gg-console-input"),output:document.getElementById("gg-console-output")},this.elements.input.onkeydown=t=>{13===t?.keyCode?(t.preventDefault(),this.onInput().then()):38===t?.keyCode?(t.preventDefault(),this.onUsePreviousCommand()):40===t?.keyCode&&(t.preventDefault(),this.onUseNextCommand())},this.stdout(),this.setupDragging(),setTimeout(()=>this.elements.input.focus(),20)}destroyUI(){!this.elements||(document.body.removeChild(this.elements.main),this.elements=null)}onUsePreviousCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex--,this.currentCommandIndex<0&&(this.currentCommandIndex+=this.commandHistory.length),this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onUseNextCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex++,this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onInput(){return i=this,e=void 0,n=function*(){const e=this.elements.input.value;this.elements.input.value="",this.stdout("\n> "+e),this.stdout("\n"+(yield va.instance.console(e))),this.commandHistory.push(e),this.currentCommandIndex=this.commandHistory.length},new((t=void 0)||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())});var i,e,t,n}stdout(e=""){this.output+=e,this.elements.output.value=this.output,this.elements.output.scrollTop=this.elements.output.scrollHeight}setupDragging(){let e=0,t=0;const r=o=>{o.preventDefault();const a=e-o.clientX,l=t-o.clientY;e=o.clientX,t=o.clientY,this.elements.main.style.left=this.elements.main.offsetLeft-a+"px",this.elements.main.style.top=this.elements.main.offsetTop-l+"px"},s=()=>{document.onmouseup=null,document.onmousemove=null};document.getElementById("gg-console-header").onmousedown=o=>{(o=o||window.event).preventDefault(),e=o.clientX,t=o.clientY,document.onmouseup=s,document.onmousemove=r}}}var Iee=Vr(738),Ree=Vr.n(Iee);class hh{constructor(){this.ui=null,this.removed$=new Ge}static get instance(){return this._instance||(this._instance=new hh),this._instance}get isUIShown(){return!!this.ui}createUI(){var e;const t=new(Ree());t.dom.style.left="unset",t.dom.style.right="0",t.showPanel(0),document.body.appendChild(t.dom),GM(va.instance.selectedWorld,-1).pipe(at(this.removed$)).subscribe(()=>{t?.begin()}),GM(va.instance.selectedWorld,1e4).pipe(at(this.removed$)).subscribe(()=>{t?.end()});const n=document.createElement("div");n.style.cssText="position:fixed;top:48px;right:0;opacity:0.9;z-index:9999;background-color:#333;color:white",n.innerHTML=`<input type="checkbox" name="checkbox" id="physics_debugger_checkbox_id" value="1"${null!==(e=va.instance.selectedWorld)&&void 0!==e&&e.physicsWorld.physicsDebugViewActive?" checked":""}>\n                                 <label for="physics_debugger_checkbox_id" style="user-select: none;">Show physics bodies in scene</label>`,document.body.appendChild(n),ya(document.getElementById("physics_debugger_checkbox_id"),"change").pipe(at(this.removed$)).subscribe(r=>{va.instance.console("dr_drawphysics "+r.target.checked).then()}),this.ui={stats:t,customContainer:n}}destroyUI(){this.ui&&(document.body.removeChild(this.ui.stats.dom),document.body.removeChild(this.ui.customContainer),this.ui.stats.end(),this.ui=null),this.removed$.next()}}class _I{constructor(e=!1,t=fh.instance){this.parentClock=t,this.tickSub=null,this._tick$=new Ge,this.startedAt=-1,this.oldRelativeTime=0,this.pausedAt=-1,e&&this.start()}get tick$(){return this._tick$.pipe(Xe(([e,t])=>[t,t-e]))}get isRunning(){return!!this.tickSub}get isPaused(){return-1!==this.pausedAt}get elapsedTime(){return this.isPaused?this.pausedAt-this.startedAt:this.parentClock.elapsedTime-this.startedAt}createChildClock(e){return new _I(e,this)}start(){this.isRunning||(this.oldRelativeTime=0,this.startedAt=this.parentClock.elapsedTime,this.startListeningTicks())}stop(){this.stopListeningTicks(),this.startedAt=this.pausedAt=-1}pause(){this.stopListeningTicks(),this.pausedAt=this.parentClock.elapsedTime}resume(){this.isRunning||-1==this.pausedAt||(this.startedAt+=this.parentClock.elapsedTime-this.pausedAt,this.pausedAt=-1,this.startListeningTicks())}startListeningTicks(){if(this.tickSub)throw new Error("Clock is already ticking!");this.tickSub=this.parentClock.tick$.pipe(Xe(([e,t])=>[this.oldRelativeTime,e-this.startedAt]),Ti(([e,t])=>this.oldRelativeTime=t)).subscribe(this._tick$)}stopListeningTicks(){var e;null===(e=this.tickSub)||void 0===e||e.unsubscribe(),this.tickSub=null}}class fh{constructor(){this._tick$=new Ge;let e=this.elapsedTime;ot(void 0,E3).pipe(function Pee(i){let t,e=1/0;return null!=i&&("object"==typeof i?({count:e=1/0,delay:t}=i):e=i),e<=0?()=>qs:Fn((n,r)=>{let o,s=0;const a=()=>{if(o?.unsubscribe(),o=null,null!=t){const c="number"==typeof t?cM(t):ar(t(s)),d=An(r,()=>{d.unsubscribe(),l()});c.subscribe(d)}else l()},l=()=>{let c=!1;o=n.subscribe(An(r,void 0,()=>{++s<e?o?a():c=!0:r.complete()})),c&&a()};l()})}()).pipe(Xe(()=>[e,this.elapsedTime]),Ti(([t,n])=>e=n)).subscribe(this._tick$)}static get instance(){return fh._instance||(fh._instance=new fh),fh._instance}get tick$(){return this._tick$.pipe(Xe(([e,t])=>[t,t-e]))}get elapsedTime(){return(typeof performance>"u"?Date:performance).now()}createChildClock(e){return new _I(e,this)}}var um=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Lee extends dV{getDefaultPosition(){return yt.O}getDefaultRotation(){return Dr.O}getDefaultScale(){return{x:1,y:1,z:1}}get euler$(){return this._rotation$.pipe(Xe(e=>Dr.toEuler(e)))}get euler(){return Dr.toEuler(this._rotation$.getValue())}set euler(e){this._rotation$.next(Dr.fromEuler(e))}}class ph extends(jM(gI,Lee)){constructor(e,t=null){if(super(),this.object3D=e,this.objectBody=t,this.tickOrder=Nl.OBJECTS_BINDING,t)t.entity=this,this.tick$.subscribe(()=>{this.runTransformBinding(t,e)}),this.runTransformBinding(t,e),this.name=t.name;else{if(!e)throw new Error("Cannot create entity without a mesh and a body");super.position=e.position,super.rotation=e.rotation,super.scale=e.scale,this.name=e.name}}get position(){return super.position}set position(e){this.object3D&&(this.object3D.position=e),this.objectBody&&(this.objectBody.position=e),super.position=e}get rotation(){return super.rotation}set rotation(e){this.object3D&&(this.object3D.rotation=e),this.objectBody&&(this.objectBody.rotation=e),super.rotation=e}get scale(){return super.scale}set scale(e){this.object3D&&(this.object3D.scale=e),this.objectBody&&(this.objectBody.scale=e),super.scale=e}updateVisibility(){this.object3D&&(this.object3D.visible=this.worldVisible),super.updateVisibility()}runTransformBinding(e,t){const n=e.position,r=e.rotation;t&&(t.position=n,t.rotation=r),this._position$.next(n),this._rotation$.next(r)}onSpawned(e){var t,n;super.onSpawned(e),null===(t=this.object3D)||void 0===t||t.addToWorld(e.visualScene),null===(n=this.objectBody)||void 0===n||n.addToWorld(e.physicsWorld)}onRemoved(){var e,t;null===(e=this.object3D)||void 0===e||e.removeFromWorld(this.world.visualScene),null===(t=this.objectBody)||void 0===t||t.removeFromWorld(this.world.physicsWorld),super.onRemoved()}dispose(){super.dispose(),this.object3D&&this.object3D.dispose(),this.objectBody&&this.objectBody.dispose()}}class Fee extends ph{constructor(e,t=null){super(e,t),this.object3D=e,this.objectBody=t}get fov(){return this.object3D.fov}set fov(e){this.object3D.fov=e}}const bV={leading:!0,trailing:!1};function xV(i,e=Uy,t=bV){const n=cM(i,e);return function Nee(i,e=bV){return Fn((t,n)=>{const{leading:r,trailing:s}=e;let o=!1,a=null,l=null,c=!1;const d=()=>{l?.unsubscribe(),l=null,s&&(m(),c&&n.complete())},h=()=>{l=null,c&&n.complete()},p=_=>l=ar(i(_)).subscribe(An(n,d,h)),m=()=>{if(o){o=!1;const _=a;a=null,n.next(_),!c&&p(_)}};t.subscribe(An(n,_=>{o=!0,a=_,(!l||l.closed)&&(r?m():p(_))},()=>{c=!0,(!(s&&o&&l)||l.closed)&&n.complete()}))})}(()=>n,t)}class fv{constructor(e){this.data=e,this.adjacent=new Set}static fromArray(e,t=!1){const n=new fv(e[0]);let r=n;for(let s=1;s<e.length;s++){const o=new fv(e[s]);r.addAdjacent(o),r=o}return t&&r.addAdjacent(n),n}static fromSquareGrid(e){const t=e.map(n=>n.map(r=>new fv(r)));for(let n=0;n<t.length;n++)for(let r=0;r<t.length;r++)r>0&&t[n][r].addAdjacent(t[n][r-1]),n>0&&t[n][r].addAdjacent(t[n-1][r]);return t[0][0]}addAdjacent(e){return!this.adjacent.has(e)&&(this.adjacent.add(e),e.adjacent.add(this),!0)}removeAdjacent(e){return!!this.adjacent.has(e)&&(this.adjacent.delete(e),e.adjacent.delete(this),!0)}addEdge(e,t){return!!this.removeAdjacent(t)&&(this.addAdjacent(e),e.addAdjacent(t),!0)}removeEdge(e,t){return!(!e.adjacent.has(this)||!e.adjacent.has(t))&&(e.removeAdjacent(this),e.removeAdjacent(t),this.addAdjacent(t))}walkRead(e){const t=new Set,n=[[this,e]];for(t.add(this);n.length;){const r=n.shift(),[s,o]=r;if(0!==o){const a=Array.from(s.adjacent).filter(l=>!t.has(l));for(const l of a)t.add(l),n.push([l,o-1])}}return t}walkReadPreserveDepth(e){const t=new Set,n=[],r=[[this,e]];for(t.add(this);r.length;){const s=r.shift(),[o,a]=s,l=e-a;if(n[l]||(n[l]=new Set),n[l].add(o),0!==a){const c=Array.from(o.adjacent).filter(d=>!t.has(d));for(const d of c)t.add(d),r.push([d,a-1])}}return n}nodes(){return Array.from(this.walkRead(-1))}}class pv extends fv{static fromMapArray(e,t=!1){const n=new pv(e[0]);let r=n;for(let s=1;s<e.length;s++){const o=new pv(e[s]);r.addAdjacent(o),r=o}return t&&r.addAdjacent(n),n}static fromMapSquareGrid(e){const t=e.map(n=>n.map(r=>new pv(r)));for(let n=0;n<t.length;n++)for(let r=0;r<t.length;r++)r>0&&t[n][r].addAdjacent(t[n][r-1]),n>0&&t[n][r].addAdjacent(t[n-1][r]);return t[0][0]}getNearestDummy(e,t){let n=1/0,r=this;return e.forEach(s=>{let o=Math.sqrt(Math.pow(t.x-s.data.position.x,2)+Math.pow(t.y-s.data.position.y,2)+Math.pow(t.z-s.data.position.z,2));o<n&&(n=o,r=s)}),r}nodes(){return Array.from(this.walkRead(-1))}}const Uee={loadDepth:5,inertia:0};class Vee extends(jM(gI,uh)){constructor(e,t={}){super(),this.mapGraph=e,this.tickOrder=Nl.POST_RENDERING,this.loaderCursorEntity$=new Nt(null),this.loaded=new Map,this._initialLoadComplete$=new Nt(!1),this._nearestDummy$=new Nt(null),this._chunkLoaded$=new Ge,this._world=null,this.options=Object.assign(Object.assign({},Uee),t),this.mapGraphNodes=e.nodes()}get initialLoadComplete$(){return this._initialLoadComplete$.asObservable()}get nearestDummy(){return this._nearestDummy$.getValue()}get chunkLoaded$(){return this._chunkLoaded$.asObservable()}get world(){return this._world}onSpawned(e){super.onSpawned(e),this.loaderCursorEntity$.pipe(ys(t=>t?this.tick$.pipe(ns(null),xV(1e3),Xe(()=>t.position)):WM),Xe(t=>this.mapGraph.getNearestDummy(this.mapGraphNodes,t)),Ti(t=>this._nearestDummy$.next(t)),eh()).subscribe(t=>{let r,n=new Set;if(this.options.inertia>0){r=new Set;const s=t.walkReadPreserveDepth(this.options.loadDepth+this.options.inertia);for(let o=0;o<s.length;o++)s[o].forEach(a=>r.add(a.data)),o<=this.options.loadDepth&&s[o].forEach(a=>n.add(a.data))}else t.walkRead(this.options.loadDepth).forEach(s=>n.add(s.data)),r=n;for(const s of this.loaded.keys())r.has(s)?n.delete(s):this.disposeChunk(s);Promise.all(Array.from(n.keys()).map(s=>this.loadChunk(s))).then(()=>this._initialLoadComplete$.next(!0))})}onRemoved(){super.onRemoved(),this.loaderCursorEntity$.next(null)}loadChunk(e){return function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){const t=yield this.world.loader.loadGgGlb(e.path,Object.assign({position:e.position,rotation:e.rotation||Dr.O},e.loadOptions)),n=[...t.entities,...(t.props||[]).map(r=>r.entities).reduce((r,s)=>(r.push(...s),r),[])];return this.loaded.set(e,n),this.addChildren(...n),this._chunkLoaded$.next([t,{position:e.position,rotation:e.rotation||Dr.O}]),[n,t]})}disposeChunk(e){!this.loaded.has(e)||(this.removeChildren(this.loaded.get(e),!0),this.loaded.delete(e))}}class Hee extends uI{constructor(e,t){super(),this.keyboard=e,this.keymap=t,this._output$=new Ge}get output$(){return this._output$.asObservable()}startInternal(){const e=[[],[],[],[]];this.keymap.includes("wasd")&&(e[0].push("KeyW"),e[1].push("KeyA"),e[2].push("KeyS"),e[3].push("KeyD")),this.keymap.includes("arrows")&&(e[0].push("ArrowUp"),e[1].push("ArrowLeft"),e[2].push("ArrowDown"),e[3].push("ArrowRight")),Iu(e.map(t=>this.keyboard.bindMany(...t))).pipe(at(this.stop$),Xe(t=>{const n={};if(t.includes(!0)){const[r,s,o,a]=t;r!=o&&(n.upDown=r),s!=a&&(n.leftRight=s)}return n})).subscribe(t=>this._output$.next(t))}}var MV=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Gee extends uh{constructor(e,t,n={keymap:"wasd",movementOptions:{speed:.5},mouseOptions:{},ignoreMouseUnlessPointerLocked:!1,ignoreKeyboardUnlessPointerLocked:!1}){super(),this.keyboard=e,this.camera=t,this.options=n,this.tickOrder=Nl.INPUT_CONTROLLERS,this.mouseInput=new cm(n.mouseOptions),this.directionsInput=new Hee(e,n.keymap)}onSpawned(e){const t=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return MV(this,void 0,void 0,function*(){yield t.onSpawned.call(this,e);let n={direction:{},rest:[]};const r=["KeyE","KeyQ"];this.camera.object3D.supportsFov&&r.push("KeyZ","KeyC"),r.push("ShiftLeft"),this.directionsInput.output$.pipe(at(this._onRemoved$)).subscribe(a=>{n.direction=a}),Iu(r.map(a=>this.keyboard.bind(a))).pipe(at(this._onRemoved$)).subscribe(a=>{n.rest=a});let s=yr.O,o=cm.isTouchDevice();this.mouseInput.delta$.pipe(at(this._onRemoved$),Rn(()=>o||!this.options.ignoreMouseUnlessPointerLocked||this.mouseInput.isPointerLocked)).subscribe(a=>{s=yr.add(s,a)}),this.camera.tick$.pipe(at(this._onRemoved$)).subscribe(()=>{let a=n;this.options.ignoreKeyboardUnlessPointerLocked&&!this.mouseInput.isPointerLocked&&(a={direction:{},rest:[!1,!1,!1,!1,!1]});let l=Object.assign({},yt.O);const[c,d,h,p,m]=a.rest;void 0!==a.direction.upDown&&(l.z=a.direction.upDown?-1:1),void 0!==a.direction.leftRight&&(l.x=a.direction.leftRight?-1:1),c!=d&&(l.y=d?-1:1),h!=p&&(this.camera.object3D.fov+=h?1:-1);let _=this.options.movementOptions.speed;if(m&&(_*=2.5),this.camera.position=yt.add(this.camera.position,yt.rot(yt.scalarMult(yt.norm(l),_),this.camera.rotation)),0!=s.x||0!=s.y){const b=yt.toSpherical(yt.rot({x:0,y:0,z:-1},this.camera.rotation));b.theta-=s.x/300,b.phi+=s.y/300,b.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,b.phi)),this.camera.rotation=Dr.lookAt(this.camera.position,yt.add(this.camera.position,yt.fromSpherical(b))),s=yr.O}}),yield this.mouseInput.start(),yield this.directionsInput.start()})}onRemoved(){const e=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return MV(this,void 0,void 0,function*(){yield e.onRemoved.call(this),yield this.mouseInput.stop(!0),yield this.directionsInput.stop()})}}var CV=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const Wee={mouseOptions:{},orbiting:{sensitivityX:1,sensitivityY:1},zooming:{sensitivity:1},panning:{sensitivityX:1,sensitivityY:1},dollying:{sensitivity:1}};class $ee extends uh{constructor(e,t={}){super(),this.camera=e,this.tickOrder=Nl.INPUT_CONTROLLERS,this.spherical={phi:0,radius:10,theta:0},this.target=yt.O,this.options=Object.assign(Object.assign({},Wee),t),this.mouseInput=new cm(this.options.mouseOptions)}get radius(){return this.spherical.radius}set radius(e){this.spherical.radius=e}get phi(){return this.spherical.phi}set phi(e){this.spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,e))}get theta(){return this.spherical.theta}set theta(e){this.spherical.theta=e}onSpawned(e){const t=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return CV(this,void 0,void 0,function*(){yield t.onSpawned.call(this,e),this.spherical=yt.toSpherical(yt.sub(this.camera.position,this.target)),this.options.orbiting&&this.mouseInput.delta$.pipe(at(this._onRemoved$),Rn(()=>this.mouseInput.state==xs.DRAG)).subscribe(r=>{this.spherical.theta-=r.x*this.options.orbiting.sensitivityX*Math.PI/900,this.spherical.phi-=r.y*this.options.orbiting.sensitivityY*Math.PI/900,this.spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.spherical.phi))}),this.options.zooming&&this.mouseInput.wheel$.pipe(at(this._onRemoved$)).subscribe(r=>{0!=r&&(this.spherical.radius*=Math.pow(.95,this.options.zooming.sensitivity*(r>0?-1:1)))});const n=r=>{const s=yt.fromSpherical(this.spherical),o=yt.rotAround(s,{x:-Math.sin(this.spherical.theta),y:Math.cos(this.spherical.theta),z:0},Math.PI/2),a=yt.rotAround(s,yt.norm(o),Math.PI/2);this.target=yt.add(this.target,yt.add(yt.scalarMult(o,-this.options.panning.sensitivityY*r.y/1e3),yt.scalarMult(a,this.options.panning.sensitivityX*r.x/1e3)))};this.options.panning&&this.mouseInput.delta$.pipe(at(this._onRemoved$),Rn(()=>this.mouseInput.state==xs.DRAG_RIGHT_BUTTON)).subscribe(r=>{n(r)}),this.options.dollying&&this.mouseInput.delta$.pipe(at(this._onRemoved$),Rn(()=>this.mouseInput.state==xs.DRAG_MIDDLE_BUTTON)).subscribe(r=>{this.spherical.radius*=Math.pow(.95,-this.options.dollying.sensitivity*r.y/10)}),cm.isTouchDevice()&&(this.options.dollying||this.options.panning)&&this.mouseInput.twoTouchGestureDelta$.pipe(at(this._onRemoved$)).subscribe(r=>{this.options.dollying&&(this.spherical.radius*=Math.pow(.95,this.options.dollying.sensitivity*r.distanceDelta/10)),this.options.panning&&n(r.centerPointDelta)}),this.camera.tick$.pipe(at(this._onRemoved$),Xe(()=>this.spherical)).subscribe(r=>{this.camera.position=yt.add(this.target,yt.fromSpherical(r)),this.camera.rotation=Dr.lookAt(this.camera.position,this.target)}),yield this.mouseInput.start()})}onRemoved(){const e=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return CV(this,void 0,void 0,function*(){yield e.onRemoved.call(this),yield this.mouseInput.stop(!0)})}}class qee extends hee{onSpawned(e){super.onSpawned(e),e.addEntity(this.camera)}onRemoved(){var e;super.onRemoved(),null===(e=this.world)||void 0===e||e.removeEntity(this.camera)}}var bI=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Bl=(()=>{return(i=Bl||(Bl={}))[i.Nothing=0]="Nothing",i[i.Files=1]="Files",i[i.Entities=2]="Entities",Bl;var i})();const SV={cachingStrategy:Bl.Nothing,position:yt.O,rotation:Dr.O,loadProps:!0},EV=i=>({meta:i.meta,resources:i.resources.map(({object3D:e,body:t})=>({object3D:e&&e.clone(),body:t&&t.clone()}))});class Yee{constructor(e){this.world=e,this.filesCache=new Map,this.loadResultCache=new Map}loadGgGlbFiles(e,t=!1){return bI(this,void 0,void 0,function*(){if(t&&this.filesCache.has(e))return this.filesCache.get(e);const n=Promise.all([fetch(`${e}.glb`).then(s=>s.arrayBuffer()),fetch(`${e}.meta`).then(s=>s.text()).then(s=>JSON.parse(s))]);t&&this.filesCache.set(e,n);const r=yield n;return t&&this.filesCache.set(e,r),r})}loadGgGlbResources(e,t=Bl.Nothing){return bI(this,void 0,void 0,function*(){if(t==Bl.Entities&&this.loadResultCache.has(e)){const l=this.loadResultCache.get(e),c=l instanceof Promise?yield l:l;return EV(c)}const[n,r]=yield this.loadGgGlbFiles(e,t==Bl.Files);if(!n)throw new Error("GLB not found");const[s,o]=yield Promise.all([this.world.visualScene.loader.loadFromGgGlb(n,r),this.world.physicsWorld.loader.loadFromGgGlb(n,r)]),a={resources:[],meta:r};if(!s)return a;if(0==o.length)a.resources.push({object3D:s,body:null});else if(1==o.length)a.resources.push({object3D:s,body:o[0]});else{for(const l of o)a.resources.push({object3D:s.popChild(l.name),body:l});s.isEmpty()||a.resources.push({object3D:s,body:null})}return t==Bl.Entities&&this.loadResultCache.set(e,EV(a)),a})}loadGgGlb(e,t=SV){return bI(this,void 0,void 0,function*(){const n=Object.assign(Object.assign({},SV),t),{resources:r,meta:s}=yield this.loadGgGlbResources(e,n.cachingStrategy),o={entities:r.map(({object3D:a,body:l})=>new ph(a,l)),meta:s};return n.loadProps&&(o.props=yield Promise.all(s.dummies.filter(a=>a.is_prop||a.is_scene).map(a=>this.loadGgGlb(a.is_prop?(n.propsPath||e.substring(0,e.lastIndexOf("/")+1))+a.prop_id:a.scene_id,{loadProps:!!a.is_scene,position:yt.add(yt.rot(a.position,n.rotation),n.position),rotation:Dr.combineRotations(a.rotation,n.rotation)})))),o.entities.forEach(a=>{a.position=yt.add(yt.rot(yt.clone(a.position),n.rotation),n.position),a.rotation=Dr.mult(Dr.clone(a.rotation),n.rotation)}),o})}}class AV extends class kee{constructor(e,t,n=!1){this.visualScene=e,this.physicsWorld=t,this.consoleEnabled=n,this.worldClock=fh.instance.createChildClock(!1),this.keyboardInput=new Dee,this.children=[],this.tickListeners=[],this.commands={},va.instance.worlds.push(this),va.instance.selectedWorld=this,this.keyboardInput.start(),n&&(this.keyboardInput.bind("Backquote").pipe(Rn(r=>r)).subscribe(()=>{hv.instance.isUIShown?hv.instance.destroyUI():hv.instance.createUI()}),this.registerConsoleCommand("commandslist",()=>um(this,void 0,void 0,function*(){return Object.entries(this.commands).map(([r,s])=>`${r}${s.doc?"\t// "+s.doc:""}`).sort().join("\n\n")}),"no args; print all available commands"),this.registerConsoleCommand("debugger",(...r)=>um(this,void 0,void 0,function*(){return["1","true","+"].includes(r[0])!=hh.instance.isUIShown&&(hh.instance.isUIShown?hh.instance.destroyUI():hh.instance.createUI()),""+hh.instance.isUIShown}),"args: [0 or 1]; turn on/off debug panel. Default value is 0"),this.registerConsoleCommand("ph_timescale",(...r)=>um(this,void 0,void 0,function*(){return this.physicsWorld.timeScale=+r[0],JSON.stringify(this.physicsWorld.timeScale)}),"args: [float]; change time scale of physics engine. Default value is 1.0"),this.registerConsoleCommand("dr_drawphysics",(...r)=>um(this,void 0,void 0,function*(){return["1","true","+"].includes(r[0])!=this.physicsWorld.physicsDebugViewActive&&this.triggerPhysicsDebugView(),""+this.physicsWorld.physicsDebugViewActive}),"args: [0 or 1]; turn on/off physics debug view. Default value is 0"))}init(){return um(this,void 0,void 0,function*(){yield Promise.all([this.physicsWorld.init(),this.visualScene.init()]),this.worldClock.tick$.subscribe(([e,t])=>{let n=0;for(;n<this.tickListeners.length&&!(this.tickListeners[n].tickOrder>=Nl.PHYSICS_SIMULATION);n++)this.tickListeners[n].active&&this.tickListeners[n].tick$.next([e,t]);for(this.physicsWorld.simulate(t);n<this.tickListeners.length;n++)this.tickListeners[n].active&&this.tickListeners[n].tick$.next([e,t])})})}start(){this.worldClock.start()}pauseWorld(){this.worldClock.pause()}resumeWorld(){this.worldClock.resume()}get isRunning(){return this.worldClock.isRunning}get isPaused(){return this.worldClock.isPaused}get worldTime(){return this.worldClock.elapsedTime}createClock(e){return this.worldClock.createChildClock(e)}dispose(){this.worldClock.stop(),this.keyboardInput.stop();for(let e=0;e<this.children.length;e++)this.children[e].onRemoved(),this.children[e].dispose();this.children.splice(0,this.children.length),this.tickListeners.splice(0,this.tickListeners.length),this.physicsWorld.dispose(),this.visualScene.dispose()}addEntity(e){e.world?console.warn("Trying to spawn entity, which is already spawned"):(this.children.push(e),this.tickListeners.push(e),this.tickListeners.sort((t,n)=>t.tickOrder-n.tickOrder),e.onSpawned(this))}removeEntity(e,t=!1){if(e.world){if(e.world!==this)throw new Error("Entity is not a part of this world");this.children.splice(this.children.findIndex(n=>n===e),1),this.tickListeners.splice(this.tickListeners.findIndex(n=>n===e),1),e.onRemoved()}t&&e.dispose()}registerConsoleCommand(e,t,n){if(!this.consoleEnabled)throw new Error("Console not enabled for this world");this.commands[e]={handler:t,doc:n}}runConsoleCommand(e,t){return um(this,void 0,void 0,function*(){if(!this.consoleEnabled)throw new Error("Console not enabled for this world");return this.commands[e]?this.commands[e].handler(...t):"Unrecognized command: "+e})}triggerPhysicsDebugView(){if(this.physicsWorld.physicsDebugViewActive)this.physicsWorld.stopDebugger(this);else{const e=this.visualScene.debugPhysicsDrawerClass;if(!e)throw new Error("Debug drawer is not available");this.physicsWorld.startDebugger(this,new e)}}}{constructor(e,t,n=!1){super(e,t,n),this.visualScene=e,this.physicsWorld=t,this.consoleEnabled=n,this.loader=new Yee(this),n&&this.registerConsoleCommand("ph_gravity",(...r)=>function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){return 1==r.length&&(r=["0","0",""+-+r[0]]),r.length>0&&(this.physicsWorld.gravity={x:+r[0],y:+r[1],z:+r[2]}),JSON.stringify(this.physicsWorld.gravity)}),'args: [float] or [float float float]; change 3D world gravity vector. 1 argument means {x: 0, y: 0, z: -value}, 3 arguments set the whole vector. Default value is "9.82" or "0 0 -9.82"')}addPrimitiveRigidBody(e,t=yt.O,n=Dr.O){const r=new ph(this.visualScene.factory.createPrimitive(e.shape),this.physicsWorld.factory.createRigidBody(e));return r.position=t,r.rotation=n,this.addEntity(r),r}}const Uc=1e3,tr=1001,Bi=1003,Xi=1006,Vc=1008,gh=1009,_h=1014,Gu=1015,vv=1016,fm=1020,ba=1023,yh=1026,pm=1027,bv=2300,mm=2301,vh=3e3,Pn=3001,Vl="srgb",xv="srgb-linear",uz="display-p3";class ym{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const ws=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const xh=Math.PI/180,vm=180/Math.PI;function Uo(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(ws[255&i]+ws[i>>8&255]+ws[i>>16&255]+ws[i>>24&255]+"-"+ws[255&e]+ws[e>>8&255]+"-"+ws[e>>16&15|64]+ws[e>>24&255]+"-"+ws[63&t|128]+ws[t>>8&255]+"-"+ws[t>>16&255]+ws[t>>24&255]+ws[255&n]+ws[n>>8&255]+ws[n>>16&255]+ws[n>>24&255]).toLowerCase()}function Yi(i,e,t){return Math.max(e,Math.min(t,i))}function LI(i,e){return(i%e+e)%e}function wv(i,e,t){return(1-t)*i+t*e}function FI(i){return 0==(i&i-1)&&0!==i}function fz(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function pz(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Vo(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function dn(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}const ane_radToDeg=function sne(i){return i*vm};class Me{constructor(e=0,t=0){Me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Yi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Sn{constructor(){Sn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=n,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],d=n[4],h=n[7],p=n[2],m=n[5],_=n[8],b=r[0],v=r[3],y=r[6],M=r[1],x=r[4],C=r[7],E=r[2],T=r[5],O=r[8];return s[0]=o*b+a*M+l*E,s[3]=o*v+a*x+l*T,s[6]=o*y+a*C+l*O,s[1]=c*b+d*M+h*E,s[4]=c*v+d*x+h*T,s[7]=c*y+d*C+h*O,s[2]=p*b+m*M+_*E,s[5]=p*v+m*x+_*T,s[8]=p*y+m*C+_*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-n*s*d+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],h=d*o-a*c,p=a*l-d*s,m=c*s-o*l,_=t*h+n*p+r*m;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const b=1/_;return e[0]=h*b,e[1]=(r*c-d*n)*b,e[2]=(a*n-r*o)*b,e[3]=p*b,e[4]=(d*t-r*l)*b,e[5]=(r*s-a*t)*b,e[6]=m*b,e[7]=(n*l-c*t)*b,e[8]=(o*t-n*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(NI.makeScale(e,t)),this}rotate(e){return this.premultiply(NI.makeRotation(-e)),this}translate(e,t){return this.premultiply(NI.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const NI=new Sn;function mz(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function Mv(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function xm(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function BI(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const cne=(new Sn).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),une=(new Sn).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),fne={[xv]:i=>i,[Vl]:i=>i.convertSRGBToLinear(),[uz]:function dne(i){return i.convertSRGBToLinear().applyMatrix3(une)}},pne={[xv]:i=>i,[Vl]:i=>i.convertLinearToSRGB(),[uz]:function hne(i){return i.applyMatrix3(cne).convertLinearToSRGB()}},zo={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return xv},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(!1===this.enabled||e===t||!e||!t)return i;const n=fne[e],r=pne[t];if(void 0===n||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let wm;class gz{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===wm&&(wm=Mv("canvas")),wm.width=e.width,wm.height=e.height;const n=wm.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=wm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Mv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*xm(s[o]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*xm(t[n]/255)):xm(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Mm{constructor(e=null){this.isSource=!0,this.uuid=Uo(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(UI(r[o].isDataTexture?r[o].image:r[o]))}else s=UI(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function UI(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?gz.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let mne=0,el=(()=>{class i extends ym{constructor(t=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=tr,s=tr,o=Xi,a=Vc,l=ba,c=gh,d=i.DEFAULT_ANISOTROPY,h=vh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:mne++}),this.uuid=Uo(),this.name="",this.source=new Mm(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Uc:t.x=t.x-Math.floor(t.x);break;case tr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Uc:t.y=t.y-Math.floor(t.y);break;case tr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i.DEFAULT_ANISOTROPY=1,i})();class oi{constructor(e=0,t=0,n=0,r=1){oi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],d=l[4],h=l[8],p=l[1],m=l[5],_=l[9],b=l[2],v=l[6],y=l[10];if(Math.abs(d-p)<.01&&Math.abs(h-b)<.01&&Math.abs(_-v)<.01){if(Math.abs(d+p)<.1&&Math.abs(h+b)<.1&&Math.abs(_+v)<.1&&Math.abs(c+m+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,C=(m+1)/2,E=(y+1)/2,T=(d+p)/4,O=(h+b)/4,L=(_+v)/4;return x>C&&x>E?x<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(x),r=T/n,s=O/n):C>E?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=T/r,s=L/r):E<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),n=O/s,r=L/s),this.set(n,r,s,t),this}let M=Math.sqrt((v-_)*(v-_)+(h-b)*(h-b)+(p-d)*(p-d));return Math.abs(M)<.001&&(M=1),this.x=(v-_)/M,this.y=(h-b)/M,this.z=(p-d)/M,this.w=Math.acos((c+m+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class wh extends ym{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new oi(0,0,e,t),this.scissorTest=!1,this.viewport=new oi(0,0,e,t),this.texture=new el({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Xi,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Mm(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class VI extends el{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Bi,this.minFilter=Bi,this.wrapR=tr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _z extends el{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Bi,this.minFilter=Bi,this.wrapR=tr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hs{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],d=n[r+2],h=n[r+3];const p=s[o+0],m=s[o+1],_=s[o+2],b=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=d,void(e[t+3]=h);if(1===a)return e[t+0]=p,e[t+1]=m,e[t+2]=_,void(e[t+3]=b);if(h!==b||l!==p||c!==m||d!==_){let v=1-a;const y=l*p+c*m+d*_+h*b,M=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const E=Math.sqrt(x),T=Math.atan2(E,y*M);v=Math.sin(v*T)/E,a=Math.sin(a*T)/E}const C=a*M;if(l=l*v+p*C,c=c*v+m*C,d=d*v+_*C,h=h*v+b*C,v===1-a){const E=1/Math.sqrt(l*l+c*c+d*d+h*h);l*=E,c*=E,d*=E,h*=E}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],d=n[r+3],h=s[o],p=s[o+1],m=s[o+2],_=s[o+3];return e[t]=a*_+d*h+l*m-c*p,e[t+1]=l*_+d*p+c*h-a*m,e[t+2]=c*_+d*m+a*p-l*h,e[t+3]=d*_-a*h-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(r/2),h=a(s/2),p=l(n/2),m=l(r/2),_=l(s/2);switch(o){case"XYZ":this._x=p*d*h+c*m*_,this._y=c*m*h-p*d*_,this._z=c*d*_+p*m*h,this._w=c*d*h-p*m*_;break;case"YXZ":this._x=p*d*h+c*m*_,this._y=c*m*h-p*d*_,this._z=c*d*_-p*m*h,this._w=c*d*h+p*m*_;break;case"ZXY":this._x=p*d*h-c*m*_,this._y=c*m*h+p*d*_,this._z=c*d*_+p*m*h,this._w=c*d*h-p*m*_;break;case"ZYX":this._x=p*d*h-c*m*_,this._y=c*m*h+p*d*_,this._z=c*d*_-p*m*h,this._w=c*d*h+p*m*_;break;case"YZX":this._x=p*d*h+c*m*_,this._y=c*m*h+p*d*_,this._z=c*d*_-p*m*h,this._w=c*d*h-p*m*_;break;case"XZY":this._x=p*d*h-c*m*_,this._y=c*m*h-p*d*_,this._z=c*d*_+p*m*h,this._w=c*d*h+p*m*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],h=t[10],p=n+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(n>a&&n>h){const m=2*Math.sqrt(1+n-a-h);this._w=(d-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>h){const m=2*Math.sqrt(1+a-n-h);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+h-n-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=n*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-n*c,this._z=s*d+o*c+n*l-r*a,this._w=o*d-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*n+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),h=Math.sin((1-t)*d)/c,p=Math.sin(t*d)/c;return this._w=o*h+this._w*p,this._x=n*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,t=0,n=0){F.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(yz.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(yz.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*n,d=l*n+a*t-s*r,h=l*r+s*n-o*t,p=-s*t-o*n-a*r;return this.x=c*l+p*-s+d*-a-h*-o,this.y=d*l+p*-o+h*-s-c*-a,this.z=h*l+p*-a+c*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return zI.copy(this).projectOnVector(e),this.sub(zI)}reflect(e){return this.sub(zI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Yi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const zI=new F,yz=new Hs;class tl{constructor(e=new F(1/0,1/0,1/0),t=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Hc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Hc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Hc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Cm.copy(e.boundingBox),Cm.applyMatrix4(e.matrixWorld),this.union(Cm);else{const r=e.geometry;if(void 0!==r)if(t&&void 0!==r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Hc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Hc)}else null===r.boundingBox&&r.computeBoundingBox(),Cm.copy(r.boundingBox),Cm.applyMatrix4(e.matrixWorld),this.union(Cm)}const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Hc),Hc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Cv),eC.subVectors(this.max,Cv),Sm.subVectors(e.a,Cv),Em.subVectors(e.b,Cv),Am.subVectors(e.c,Cv),Wu.subVectors(Em,Sm),$u.subVectors(Am,Em),Mh.subVectors(Sm,Am);let t=[0,-Wu.z,Wu.y,0,-$u.z,$u.y,0,-Mh.z,Mh.y,Wu.z,0,-Wu.x,$u.z,0,-$u.x,Mh.z,0,-Mh.x,-Wu.y,Wu.x,0,-$u.y,$u.x,0,-Mh.y,Mh.x,0];return!(!HI(t,Sm,Em,Am,eC)||(t=[1,0,0,0,1,0,0,0,1],!HI(t,Sm,Em,Am,eC)))&&(tC.crossVectors(Wu,$u),t=[tC.x,tC.y,tC.z],HI(t,Sm,Em,Am,eC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Hc).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(zc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),zc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),zc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),zc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),zc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),zc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),zc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),zc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(zc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const zc=[new F,new F,new F,new F,new F,new F,new F,new F],Hc=new F,Cm=new tl,Sm=new F,Em=new F,Am=new F,Wu=new F,$u=new F,Mh=new F,Cv=new F,eC=new F,tC=new F,Ch=new F;function HI(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Ch.fromArray(i,s);const a=r.x*Math.abs(Ch.x)+r.y*Math.abs(Ch.y)+r.z*Math.abs(Ch.z),l=e.dot(Ch),c=t.dot(Ch),d=n.dot(Ch);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const gne=new tl,Sv=new F,GI=new F;class zl{constructor(e=new F,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):gne.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Sv.subVectors(e,this.center);const t=Sv.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(Sv,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(GI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Sv.copy(e.center).add(GI)),this.expandByPoint(Sv.copy(e.center).sub(GI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Gc=new F,WI=new F,nC=new F,ju=new F,$I=new F,iC=new F,jI=new F;class rC{constructor(e=new F,t=new F(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Gc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Gc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Gc.copy(this.origin).addScaledVector(this.direction,t),Gc.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){WI.copy(e).add(t).multiplyScalar(.5),nC.copy(t).sub(e).normalize(),ju.copy(this.origin).sub(WI);const s=.5*e.distanceTo(t),o=-this.direction.dot(nC),a=ju.dot(this.direction),l=-ju.dot(nC),c=ju.lengthSq(),d=Math.abs(1-o*o);let h,p,m,_;if(d>0)if(h=o*l-a,p=o*a-l,_=s*d,h>=0)if(p>=-_)if(p<=_){const b=1/d;h*=b,p*=b,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+c}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p<=-_?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c):p<=_?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(WI).addScaledVector(nC,p),m}intersectSphere(e,t){Gc.subVectors(e.center,this.origin);const n=Gc.dot(this.direction),r=Gc.dot(Gc)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,p=this.origin;return c>=0?(n=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(n=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Gc)}intersectTriangle(e,t,n,r,s){$I.subVectors(t,e),iC.subVectors(n,e),jI.crossVectors($I,iC);let a,o=this.direction.dot(jI);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}ju.subVectors(this.origin,e);const l=a*this.direction.dot(iC.crossVectors(ju,iC));if(l<0)return null;const c=a*this.direction.dot($I.cross(ju));if(c<0||l+c>o)return null;const d=-a*ju.dot(jI);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class jt{constructor(){jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,s,o,a,l,c,d,h,p,m,_,b,v){const y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=d,y[10]=h,y[14]=p,y[3]=m,y[7]=_,y[11]=b,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new jt).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Dm.setFromMatrixColumn(e,0).length(),s=1/Dm.setFromMatrixColumn(e,1).length(),o=1/Dm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),h=Math.sin(s);if("XYZ"===e.order){const p=o*d,m=o*h,_=a*d,b=a*h;t[0]=l*d,t[4]=-l*h,t[8]=c,t[1]=m+_*c,t[5]=p-b*c,t[9]=-a*l,t[2]=b-p*c,t[6]=_+m*c,t[10]=o*l}else if("YXZ"===e.order){const p=l*d,m=l*h,_=c*d,b=c*h;t[0]=p+b*a,t[4]=_*a-m,t[8]=o*c,t[1]=o*h,t[5]=o*d,t[9]=-a,t[2]=m*a-_,t[6]=b+p*a,t[10]=o*l}else if("ZXY"===e.order){const p=l*d,m=l*h,_=c*d,b=c*h;t[0]=p-b*a,t[4]=-o*h,t[8]=_+m*a,t[1]=m+_*a,t[5]=o*d,t[9]=b-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const p=o*d,m=o*h,_=a*d,b=a*h;t[0]=l*d,t[4]=_*c-m,t[8]=p*c+b,t[1]=l*h,t[5]=b*c+p,t[9]=m*c-_,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const p=o*l,m=o*c,_=a*l,b=a*c;t[0]=l*d,t[4]=b-p*h,t[8]=_*h+m,t[1]=h,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=m*h+_,t[10]=p-b*h}else if("XZY"===e.order){const p=o*l,m=o*c,_=a*l,b=a*c;t[0]=l*d,t[4]=-h,t[8]=c*d,t[1]=p*h+b,t[5]=o*d,t[9]=m*h-_,t[2]=_*h-m,t[6]=a*d,t[10]=b*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_ne,e,yne)}lookAt(e,t,n){const r=this.elements;return Ho.subVectors(e,t),0===Ho.lengthSq()&&(Ho.z=1),Ho.normalize(),qu.crossVectors(n,Ho),0===qu.lengthSq()&&(1===Math.abs(n.z)?Ho.x+=1e-4:Ho.z+=1e-4,Ho.normalize(),qu.crossVectors(n,Ho)),qu.normalize(),sC.crossVectors(Ho,qu),r[0]=qu.x,r[4]=sC.x,r[8]=Ho.x,r[1]=qu.y,r[5]=sC.y,r[9]=Ho.y,r[2]=qu.z,r[6]=sC.z,r[10]=Ho.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],d=n[1],h=n[5],p=n[9],m=n[13],_=n[2],b=n[6],v=n[10],y=n[14],M=n[3],x=n[7],C=n[11],E=n[15],T=r[0],O=r[4],L=r[8],A=r[12],P=r[1],Y=r[5],ie=r[9],H=r[13],$=r[2],te=r[6],q=r[10],ne=r[14],K=r[3],ce=r[7],xe=r[11],$e=r[15];return s[0]=o*T+a*P+l*$+c*K,s[4]=o*O+a*Y+l*te+c*ce,s[8]=o*L+a*ie+l*q+c*xe,s[12]=o*A+a*H+l*ne+c*$e,s[1]=d*T+h*P+p*$+m*K,s[5]=d*O+h*Y+p*te+m*ce,s[9]=d*L+h*ie+p*q+m*xe,s[13]=d*A+h*H+p*ne+m*$e,s[2]=_*T+b*P+v*$+y*K,s[6]=_*O+b*Y+v*te+y*ce,s[10]=_*L+b*ie+v*q+y*xe,s[14]=_*A+b*H+v*ne+y*$e,s[3]=M*T+x*P+C*$+E*K,s[7]=M*O+x*Y+C*te+E*ce,s[11]=M*L+x*ie+C*q+E*xe,s[15]=M*A+x*H+C*ne+E*$e,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],h=e[6],p=e[10],m=e[14];return e[3]*(+s*l*h-r*c*h-s*a*p+n*c*p+r*a*m-n*l*m)+e[7]*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*d-s*l*d)+e[11]*(+t*c*h-t*a*m-s*o*h+n*o*m+s*a*d-n*c*d)+e[15]*(-r*a*d-t*l*h+t*a*p+r*o*h-n*o*p+n*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],h=e[9],p=e[10],m=e[11],_=e[12],b=e[13],v=e[14],y=e[15],M=h*v*c-b*p*c+b*l*m-a*v*m-h*l*y+a*p*y,x=_*p*c-d*v*c-_*l*m+o*v*m+d*l*y-o*p*y,C=d*b*c-_*h*c+_*a*m-o*b*m-d*a*y+o*h*y,E=_*h*l-d*b*l-_*a*p+o*b*p+d*a*v-o*h*v,T=t*M+n*x+r*C+s*E;if(0===T)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/T;return e[0]=M*O,e[1]=(b*p*s-h*v*s-b*r*m+n*v*m+h*r*y-n*p*y)*O,e[2]=(a*v*s-b*l*s+b*r*c-n*v*c-a*r*y+n*l*y)*O,e[3]=(h*l*s-a*p*s-h*r*c+n*p*c+a*r*m-n*l*m)*O,e[4]=x*O,e[5]=(d*v*s-_*p*s+_*r*m-t*v*m-d*r*y+t*p*y)*O,e[6]=(_*l*s-o*v*s-_*r*c+t*v*c+o*r*y-t*l*y)*O,e[7]=(o*p*s-d*l*s+d*r*c-t*p*c-o*r*m+t*l*m)*O,e[8]=C*O,e[9]=(_*h*s-d*b*s-_*n*m+t*b*m+d*n*y-t*h*y)*O,e[10]=(o*b*s-_*a*s+_*n*c-t*b*c-o*n*y+t*a*y)*O,e[11]=(d*a*s-o*h*s-d*n*c+t*h*c+o*n*m-t*a*m)*O,e[12]=E*O,e[13]=(d*b*r-_*h*r+_*n*p-t*b*p-d*n*v+t*h*v)*O,e[14]=(_*a*r-o*b*r-_*n*l+t*b*l+o*n*v-t*a*v)*O,e[15]=(o*h*r-d*a*r+d*n*l-t*h*l-o*n*p+t*a*p)*O,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+n,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,d=o+o,h=a+a,p=s*c,m=s*d,_=s*h,b=o*d,v=o*h,y=a*h,M=l*c,x=l*d,C=l*h,E=n.x,T=n.y,O=n.z;return r[0]=(1-(b+y))*E,r[1]=(m+C)*E,r[2]=(_-x)*E,r[3]=0,r[4]=(m-C)*T,r[5]=(1-(p+y))*T,r[6]=(v+M)*T,r[7]=0,r[8]=(_+x)*O,r[9]=(v-M)*O,r[10]=(1-(p+b))*O,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Dm.set(r[0],r[1],r[2]).length();const o=Dm.set(r[4],r[5],r[6]).length(),a=Dm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],nl.copy(this);const c=1/s,d=1/o,h=1/a;return nl.elements[0]*=c,nl.elements[1]*=c,nl.elements[2]*=c,nl.elements[4]*=d,nl.elements[5]*=d,nl.elements[6]*=d,nl.elements[8]*=h,nl.elements[9]*=h,nl.elements[10]*=h,t.setFromRotationMatrix(nl),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o){const a=this.elements,c=2*s/(n-r),d=(t+e)/(t-e),h=(n+r)/(n-r),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,s,o){const a=this.elements,l=1/(t-e),c=1/(n-r),d=1/(o-s),h=(t+e)*l,p=(n+r)*c,m=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Dm=new F,nl=new jt,_ne=new F(0,0,0),yne=new F(1,1,1),qu=new F,sC=new F,Ho=new F,vz=new jt,bz=new Hs;let vne=(()=>{class i{constructor(t=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],h=s[9],p=s[2],m=s[6],_=s[10];switch(n){case"XYZ":this._y=Math.asin(Yi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,_),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Yi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Yi(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Yi(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,_),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Yi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,d),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-Yi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,d),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return vz.makeRotationFromQuaternion(t),this.setFromRotationMatrix(vz,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return bz.setFromEuler(this),this.setFromQuaternion(bz,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class qI{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let bne=0;const xz=new F,Tm=new Hs,Wc=new jt,oC=new F,Ev=new F,xne=new F,wne=new Hs,wz=new F(1,0,0),Mz=new F(0,1,0),Cz=new F(0,0,1),Mne={type:"added"},Sz={type:"removed"};let Fr=(()=>{class i extends ym{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:bne++}),this.uuid=Uo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const t=new F,n=new vne,r=new Hs,s=new F(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new jt},normalMatrix:{value:new Sn}}),this.matrix=new jt,this.matrixWorld=new jt,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new qI,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Tm.setFromAxisAngle(t,n),this.quaternion.multiply(Tm),this}rotateOnWorldAxis(t,n){return Tm.setFromAxisAngle(t,n),this.quaternion.premultiply(Tm),this}rotateX(t){return this.rotateOnAxis(wz,t)}rotateY(t){return this.rotateOnAxis(Mz,t)}rotateZ(t){return this.rotateOnAxis(Cz,t)}translateOnAxis(t,n){return xz.copy(t).applyQuaternion(this.quaternion),this.position.add(xz.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(wz,t)}translateY(t){return this.translateOnAxis(Mz,t)}translateZ(t){return this.translateOnAxis(Cz,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Wc.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?oC.copy(t):oC.set(t,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Ev.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wc.lookAt(Ev,oC,this.up):Wc.lookAt(oC,Ev,this.up),this.quaternion.setFromRotationMatrix(Wc),s&&(Wc.extractRotation(s.matrixWorld),Tm.setFromRotationMatrix(Wc),this.quaternion.premultiply(Tm.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Mne)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Sz)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const n=this.children[t];n.parent=null,n.dispatchEvent(Sz)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Wc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Wc.multiply(t.parent.matrixWorld)),t.applyMatrix4(Wc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,n);if(void 0!==a)return a}}getObjectsByProperty(t,n){let r=[];this[t]===n&&r.push(this);for(let s=0,o=this.children.length;s<o;s++){const a=this.children[s].getObjectsByProperty(t,n);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ev,t,xne),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ev,wne,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let d=0,h=c.length;d<h;d++)o(t.shapes,c[d]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(n){const l=a(t.geometries),c=a(t.materials),d=a(t.textures),h=a(t.images),p=a(t.shapes),m=a(t.skeletons),_=a(t.animations),b=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),m.length>0&&(r.skeletons=m),_.length>0&&(r.animations=_),b.length>0&&(r.nodes=b)}return r.object=s,r;function a(l){const c=[];for(const d in l){const h=l[d];delete h.metadata,c.push(h)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return i.DEFAULT_UP=new F(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const il=new F,$c=new F,XI=new F,jc=new F,Im=new F,Rm=new F,Ez=new F,YI=new F,KI=new F,ZI=new F;let aC=!1;class Go{constructor(e=new F,t=new F,n=new F){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),il.subVectors(e,t),r.cross(il);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){il.subVectors(r,t),$c.subVectors(n,t),XI.subVectors(e,t);const o=il.dot(il),a=il.dot($c),l=il.dot(XI),c=$c.dot($c),d=$c.dot(XI),h=o*c-a*a;if(0===h)return s.set(-2,-1,-1);const p=1/h,m=(c*l-a*d)*p,_=(o*d-a*l)*p;return s.set(1-m-_,_,m)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,jc),jc.x>=0&&jc.y>=0&&jc.x+jc.y<=1}static getUV(e,t,n,r,s,o,a,l){return!1===aC&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),aC=!0),this.getInterpolation(e,t,n,r,s,o,a,l)}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,jc),l.setScalar(0),l.addScaledVector(s,jc.x),l.addScaledVector(o,jc.y),l.addScaledVector(a,jc.z),l}static isFrontFacing(e,t,n,r){return il.subVectors(n,t),$c.subVectors(e,t),il.cross($c).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return il.subVectors(this.c,this.b),$c.subVectors(this.a,this.b),.5*il.cross($c).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Go.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Go.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return!1===aC&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),aC=!0),Go.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return Go.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Go.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Go.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;Im.subVectors(r,n),Rm.subVectors(s,n),YI.subVectors(e,n);const l=Im.dot(YI),c=Rm.dot(YI);if(l<=0&&c<=0)return t.copy(n);KI.subVectors(e,r);const d=Im.dot(KI),h=Rm.dot(KI);if(d>=0&&h<=d)return t.copy(r);const p=l*h-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(n).addScaledVector(Im,o);ZI.subVectors(e,s);const m=Im.dot(ZI),_=Rm.dot(ZI);if(_>=0&&m<=_)return t.copy(s);const b=m*c-l*_;if(b<=0&&c>=0&&_<=0)return a=c/(c-_),t.copy(n).addScaledVector(Rm,a);const v=d*_-m*h;if(v<=0&&h-d>=0&&m-_>=0)return Ez.subVectors(s,r),a=(h-d)/(h-d+(m-_)),t.copy(r).addScaledVector(Ez,a);const y=1/(v+b+p);return o=b*y,a=p*y,t.copy(n).addScaledVector(Im,o).addScaledVector(Rm,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Cne=0;class ho extends ym{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Cne++}),this.uuid=Uo(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const Az={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},rl={h:0,s:0,l:0},lC={h:0,s:0,l:0};function JI(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}class Ue{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vl){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,zo.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=zo.workingColorSpace){return this.r=e,this.g=t,this.b=n,zo.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=zo.workingColorSpace){if(e=LI(e,1),t=Yi(t,0,1),n=Yi(n,0,1),0===t)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=JI(o,s,e+1/3),this.g=JI(o,s,e),this.b=JI(o,s,e-1/3)}return zo.toWorkingColorSpace(this,r),this}setStyle(e,t=Vl){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,zo.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,zo.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return n(s[4]),this.setHSL(l,c,d,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Vl){const n=Az[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xm(e.r),this.g=xm(e.g),this.b=xm(e.b),this}copyLinearToSRGB(e){return this.r=BI(e.r),this.g=BI(e.g),this.b=BI(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vl){return zo.fromWorkingColorSpace(Ms.copy(this),e),Yi(255*Ms.r,0,255)<<16^Yi(255*Ms.g,0,255)<<8^Yi(255*Ms.b,0,255)<<0}getHexString(e=Vl){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zo.workingColorSpace){zo.fromWorkingColorSpace(Ms.copy(this),t);const n=Ms.r,r=Ms.g,s=Ms.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=d<=.5?h/(o+a):h/(2-o-a),o){case n:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-n)/h+2;break;case s:l=(n-r)/h+4}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=zo.workingColorSpace){return zo.fromWorkingColorSpace(Ms.copy(this),t),e.r=Ms.r,e.g=Ms.g,e.b=Ms.b,e}getStyle(e=Vl){zo.fromWorkingColorSpace(Ms.copy(this),e);const t=Ms.r,n=Ms.g,r=Ms.b;return e!==Vl?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${255*t|0},${255*n|0},${255*r|0})`}offsetHSL(e,t,n){return this.getHSL(rl),rl.h+=e,rl.s+=t,rl.l+=n,this.setHSL(rl.h,rl.s,rl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(rl),e.getHSL(lC);const n=wv(rl.h,lC.h,t),r=wv(rl.s,lC.s,t),s=wv(rl.l,lC.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ms=new Ue;Ue.NAMES=Az;class nr extends ho{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const vr=new F,cC=new Me;class Ii{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)cC.fromBufferAttribute(this,t),cC.applyMatrix3(e),this.setXY(t,cC.x,cC.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)vr.fromBufferAttribute(this,t),vr.applyMatrix3(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)vr.fromBufferAttribute(this,t),vr.applyMatrix4(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)vr.fromBufferAttribute(this,t),vr.applyNormalMatrix(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)vr.fromBufferAttribute(this,t),vr.transformDirection(e),this.setXYZ(t,vr.x,vr.y,vr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Vo(t,this.array)),t}setX(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Vo(t,this.array)),t}setY(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Vo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Vo(t,this.array)),t}setW(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=dn(t,this.array),n=dn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=dn(t,this.array),n=dn(n,this.array),r=dn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=dn(t,this.array),n=dn(n,this.array),r=dn(r,this.array),s=dn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Dz extends Ii{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Tz extends Ii{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class et extends Ii{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Ene=0;const xa=new jt,QI=new Fr,Pm=new F,Wo=new tl,Dv=new tl,Nr=new F;class ln extends ym{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ene++}),this.uuid=Uo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(mz(e)?Tz:Dz)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Sn).getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return xa.makeRotationFromQuaternion(e),this.applyMatrix4(xa),this}rotateX(e){return xa.makeRotationX(e),this.applyMatrix4(xa),this}rotateY(e){return xa.makeRotationY(e),this.applyMatrix4(xa),this}rotateZ(e){return xa.makeRotationZ(e),this.applyMatrix4(xa),this}translate(e,t,n){return xa.makeTranslation(e,t,n),this.applyMatrix4(xa),this}scale(e,t,n){return xa.makeScale(e,t,n),this.applyMatrix4(xa),this}lookAt(e){return QI.lookAt(e),QI.updateMatrix(),this.applyMatrix4(QI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pm).negate(),this.translate(Pm.x,Pm.y,Pm.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new et(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new tl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++)Wo.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(Nr.addVectors(this.boundingBox.min,Wo.min),this.boundingBox.expandByPoint(Nr),Nr.addVectors(this.boundingBox.max,Wo.max),this.boundingBox.expandByPoint(Nr)):(this.boundingBox.expandByPoint(Wo.min),this.boundingBox.expandByPoint(Wo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new F,1/0);if(e){const n=this.boundingSphere.center;if(Wo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Dv.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Nr.addVectors(Wo.min,Dv.min),Wo.expandByPoint(Nr),Nr.addVectors(Wo.max,Dv.max),Wo.expandByPoint(Nr)):(Wo.expandByPoint(Dv.min),Wo.expandByPoint(Dv.max));Wo.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Nr.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Nr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Nr.fromBufferAttribute(a,c),l&&(Pm.fromBufferAttribute(e,c),Nr.add(Pm)),r=Math.max(r,n.distanceToSquared(Nr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ii(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let P=0;P<a;P++)c[P]=new F,d[P]=new F;const h=new F,p=new F,m=new F,_=new Me,b=new Me,v=new Me,y=new F,M=new F;function x(P,Y,ie){h.fromArray(r,3*P),p.fromArray(r,3*Y),m.fromArray(r,3*ie),_.fromArray(o,2*P),b.fromArray(o,2*Y),v.fromArray(o,2*ie),p.sub(h),m.sub(h),b.sub(_),v.sub(_);const H=1/(b.x*v.y-v.x*b.y);!isFinite(H)||(y.copy(p).multiplyScalar(v.y).addScaledVector(m,-b.y).multiplyScalar(H),M.copy(m).multiplyScalar(b.x).addScaledVector(p,-v.x).multiplyScalar(H),c[P].add(y),c[Y].add(y),c[ie].add(y),d[P].add(M),d[Y].add(M),d[ie].add(M))}let C=this.groups;0===C.length&&(C=[{start:0,count:n.length}]);for(let P=0,Y=C.length;P<Y;++P){const ie=C[P],H=ie.start;for(let te=H,q=H+ie.count;te<q;te+=3)x(n[te+0],n[te+1],n[te+2])}const E=new F,T=new F,O=new F,L=new F;function A(P){O.fromArray(s,3*P),L.copy(O);const Y=c[P];E.copy(Y),E.sub(O.multiplyScalar(O.dot(Y))).normalize(),T.crossVectors(L,Y);const H=T.dot(d[P])<0?-1:1;l[4*P]=E.x,l[4*P+1]=E.y,l[4*P+2]=E.z,l[4*P+3]=H}for(let P=0,Y=C.length;P<Y;++P){const ie=C[P],H=ie.start;for(let te=H,q=H+ie.count;te<q;te+=3)A(n[te+0]),A(n[te+1]),A(n[te+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ii(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let p=0,m=n.count;p<m;p++)n.setXYZ(p,0,0,0);const r=new F,s=new F,o=new F,a=new F,l=new F,c=new F,d=new F,h=new F;if(e)for(let p=0,m=e.count;p<m;p+=3){const _=e.getX(p+0),b=e.getX(p+1),v=e.getX(p+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,v),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),a.fromBufferAttribute(n,_),l.fromBufferAttribute(n,b),c.fromBufferAttribute(n,v),a.add(d),l.add(d),c.add(d),n.setXYZ(_,a.x,a.y,a.z),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(v,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),n.setXYZ(p+0,d.x,d.y,d.z),n.setXYZ(p+1,d.x,d.y,d.z),n.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Nr.fromBufferAttribute(e,t),Nr.normalize(),e.setXYZ(t,Nr.x,Nr.y,Nr.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,h=a.normalized,p=new c.constructor(l.length*d);let m=0,_=0;for(let b=0,v=l.length;b<v;b++){m=a.isInterleavedBufferAttribute?l[b]*a.data.stride+a.offset:l[b]*d;for(let y=0;y<d;y++)p[_++]=c[m++]}return new Ii(p,d,h)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ln,n=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,h=c.length;d<h;d++){const m=e(c[d],n);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n)e.data.attributes[l]=n[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let h=0,p=c.length;h<p;h++)d.push(c[h].toJSON(e.data));d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const d=[],h=s[c];for(let p=0,m=h.length;p<m;p++)d.push(h[p].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Iz=new jt,Hl=new rC,uC=new zl,Rz=new F,km=new F,Om=new F,Lm=new F,eR=new F,dC=new F,hC=new Me,fC=new Me,pC=new Me,Pz=new F,kz=new F,Oz=new F,mC=new F,gC=new F;class Yn extends Fr{constructor(e=new ln,t=new nr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){dC.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l],h=s[l];0!==d&&(eR.fromBufferAttribute(h,e),dC.addScaledVector(o?eR:eR.sub(t),d))}t.add(dC)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),uC.copy(n.boundingSphere),uC.applyMatrix4(s),Hl.copy(e.ray).recast(e.near),!1===uC.containsPoint(Hl.origin)&&(null===Hl.intersectSphere(uC,Rz)||Hl.origin.distanceToSquared(Rz)>(e.far-e.near)**2))||(Iz.copy(s).invert(),Hl.copy(e.ray).applyMatrix4(Iz),null!==n.boundingBox&&!1===Hl.intersectsBox(n.boundingBox)))return;let o;const a=n.index,l=n.attributes.position,c=n.attributes.uv,d=n.attributes.uv2,h=n.attributes.normal,p=n.groups,m=n.drawRange;if(null!==a)if(Array.isArray(r))for(let _=0,b=p.length;_<b;_++){const v=p[_],y=r[v.materialIndex];for(let C=Math.max(v.start,m.start),E=Math.min(a.count,Math.min(v.start+v.count,m.start+m.count));C<E;C+=3){const T=a.getX(C),O=a.getX(C+1),L=a.getX(C+2);o=_C(this,y,e,Hl,c,d,h,T,O,L),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else for(let v=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);v<y;v+=3){const M=a.getX(v),x=a.getX(v+1),C=a.getX(v+2);o=_C(this,r,e,Hl,c,d,h,M,x,C),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let _=0,b=p.length;_<b;_++){const v=p[_],y=r[v.materialIndex];for(let C=Math.max(v.start,m.start),E=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));C<E;C+=3)o=_C(this,y,e,Hl,c,d,h,C,C+1,C+2),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=v.materialIndex,t.push(o))}else for(let v=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);v<y;v+=3)o=_C(this,r,e,Hl,c,d,h,v,v+1,v+2),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}function _C(i,e,t,n,r,s,o,a,l,c){i.getVertexPosition(a,km),i.getVertexPosition(l,Om),i.getVertexPosition(c,Lm);const d=function Ane(i,e,t,n,r,s,o,a){let l;if(l=1===e.side?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,0===e.side,a),null===l)return null;gC.copy(a),gC.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(gC);return c<t.near||c>t.far?null:{distance:c,point:gC.clone(),object:i}}(i,e,t,n,km,Om,Lm,mC);if(d){r&&(hC.fromBufferAttribute(r,a),fC.fromBufferAttribute(r,l),pC.fromBufferAttribute(r,c),d.uv=Go.getInterpolation(mC,km,Om,Lm,hC,fC,pC,new Me)),s&&(hC.fromBufferAttribute(s,a),fC.fromBufferAttribute(s,l),pC.fromBufferAttribute(s,c),d.uv2=Go.getInterpolation(mC,km,Om,Lm,hC,fC,pC,new Me)),o&&(Pz.fromBufferAttribute(o,a),kz.fromBufferAttribute(o,l),Oz.fromBufferAttribute(o,c),d.normal=Go.getInterpolation(mC,km,Om,Lm,Pz,kz,Oz,new F),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new F,materialIndex:0};Go.getNormal(km,Om,Lm,h.normal),d.face=h}return d}class Sh extends ln{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],h=[];let p=0,m=0;function _(b,v,y,M,x,C,E,T,O,L,A){const P=C/O,Y=E/L,ie=C/2,H=E/2,$=T/2,te=O+1,q=L+1;let ne=0,K=0;const ce=new F;for(let xe=0;xe<q;xe++){const $e=xe*Y-H;for(let Le=0;Le<te;Le++)ce[b]=(Le*P-ie)*M,ce[v]=$e*x,ce[y]=$,c.push(ce.x,ce.y,ce.z),ce[b]=0,ce[v]=0,ce[y]=T>0?1:-1,d.push(ce.x,ce.y,ce.z),h.push(Le/O),h.push(1-xe/L),ne+=1}for(let xe=0;xe<L;xe++)for(let $e=0;$e<O;$e++){const le=p+$e+te*(xe+1),ue=p+($e+1)+te*(xe+1),Fe=p+($e+1)+te*xe;l.push(p+$e+te*xe,le,Fe),l.push(le,ue,Fe),K+=6}a.addGroup(m,K,A),m+=K,p+=ne}_("z","y","x",-1,-1,n,t,e,o,s,0),_("z","y","x",1,-1,n,t,-e,o,s,1),_("x","z","y",1,1,e,n,t,r,o,2),_("x","z","y",1,-1,e,n,-t,r,o,3),_("x","y","z",1,-1,e,t,n,r,s,4),_("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new et(c,3)),this.setAttribute("normal",new et(d,3)),this.setAttribute("uv",new et(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Fm(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():e[t][n]=Array.isArray(r)?r.slice():r}}return e}function Gs(i){const e={};for(let t=0;t<i.length;t++){const n=Fm(i[t]);for(const r in n)e[r]=n[r]}return e}function Lz(i){return null===i.getRenderTarget()&&i.outputEncoding===Pn?Vl:xv}const Tne={clone:Fm,merge:Gs};class Xu extends ho{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fm(e.uniforms),this.uniformsGroups=function Dne(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class tR extends Fr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new jt,this.projectionMatrix=new jt,this.projectionMatrixInverse=new jt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class br extends tR{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*vm*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*xh*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*vm*Math.atan(Math.tan(.5*xh*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*xh*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class Pne extends Fr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new br(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new br(-90,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new br(-90,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new br(-90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new br(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new br(-90,1,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,a,l,c]=this.children,d=e.getRenderTarget(),h=e.toneMapping,p=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=m,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(d),e.toneMapping=h,e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class yC extends el{constructor(e,t,n,r,s,o,a,l,c,d){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class kne extends wh{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new yC([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Xi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Sh(5,5,5),s=new Xu({name:"CubemapFromEquirect",uniforms:Fm(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Yn(r,s),a=t.minFilter;return t.minFilter===Vc&&(t.minFilter=Xi),new Pne(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}const nR=new F,One=new F,Lne=new Sn;class Eh{constructor(e=new F(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=nR.subVectors(n,t).cross(One.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(nR),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Lne.getNormalMatrix(e),r=this.coplanarPoint(nR).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ah=new zl,vC=new F;class iR{constructor(e=new Eh,t=new Eh,n=new Eh,r=new Eh,s=new Eh,o=new Eh){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],d=n[6],h=n[7],p=n[8],m=n[9],_=n[10],b=n[11],v=n[12],y=n[13],M=n[14],x=n[15];return t[0].setComponents(a-r,h-l,b-p,x-v).normalize(),t[1].setComponents(a+r,h+l,b+p,x+v).normalize(),t[2].setComponents(a+s,h+c,b+m,x+y).normalize(),t[3].setComponents(a-s,h-c,b-m,x-y).normalize(),t[4].setComponents(a-o,h-d,b-_,x-M).normalize(),t[5].setComponents(a+o,h+d,b+_,x+M).normalize(),this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Ah.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Ah.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ah)}intersectsSprite(e){return Ah.center.set(0,0,0),Ah.radius=.7071067811865476,Ah.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ah)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(vC.x=r.normal.x>0?e.max.x:e.min.x,vC.y=r.normal.y>0?e.max.y:e.min.y,vC.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(vC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Fz(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function Fne(i,e){const t=e.isWebGL2,n=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=n.get(c);d&&(i.deleteBuffer(d.buffer),n.delete(c))},update:function l(c,d){if(c.isGLBufferAttribute){const p=n.get(c);return void((!p||p.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const h=n.get(c);void 0===h?n.set(c,function r(c,d){const h=c.array,p=c.usage,m=i.createBuffer();let _;if(i.bindBuffer(d,m),i.bufferData(d,h,p),c.onUploadCallback(),h instanceof Float32Array)_=5126;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");_=5131}else _=5123;else if(h instanceof Int16Array)_=5122;else if(h instanceof Uint32Array)_=5125;else if(h instanceof Int32Array)_=5124;else if(h instanceof Int8Array)_=5120;else if(h instanceof Uint8Array)_=5121;else{if(!(h instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);_=5121}return{buffer:m,type:_,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}(c,d)):h.version<c.version&&(function s(c,d,h){const p=d.array,m=d.updateRange;i.bindBuffer(h,c),-1===m.count?i.bufferSubData(h,0,p):(t?i.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):i.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}(h.buffer,c,d),h.version=c.version)}}}class Tv extends ln{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,d=l+1,h=e/a,p=t/l,m=[],_=[],b=[],v=[];for(let y=0;y<d;y++){const M=y*p-o;for(let x=0;x<c;x++)_.push(x*h-s,-M,0),b.push(0,0,1),v.push(x/a),v.push(1-y/l)}for(let y=0;y<l;y++)for(let M=0;M<a;M++){const C=M+c*(y+1),E=M+1+c*(y+1),T=M+1+c*y;m.push(M+c*y,C,T),m.push(C,E,T)}this.setIndex(m),this.setAttribute("position",new et(_,3)),this.setAttribute("normal",new et(b,3)),this.setAttribute("uv",new et(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tv(e.width,e.height,e.widthSegments,e.heightSegments)}}const pn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ve={common:{diffuse:{value:new Ue(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Sn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Sn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Sn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Sn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Sn},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Sn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Sn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Sn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Sn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ue(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ue(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Sn}},sprite:{diffuse:{value:new Ue(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaTest:{value:0}}},Gl={basic:{uniforms:Gs([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.fog]),vertexShader:pn.meshbasic_vert,fragmentShader:pn.meshbasic_frag},lambert:{uniforms:Gs([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new Ue(0)}}]),vertexShader:pn.meshlambert_vert,fragmentShader:pn.meshlambert_frag},phong:{uniforms:Gs([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new Ue(0)},specular:{value:new Ue(1118481)},shininess:{value:30}}]),vertexShader:pn.meshphong_vert,fragmentShader:pn.meshphong_frag},standard:{uniforms:Gs([Ve.common,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.roughnessmap,Ve.metalnessmap,Ve.fog,Ve.lights,{emissive:{value:new Ue(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag},toon:{uniforms:Gs([Ve.common,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.gradientmap,Ve.fog,Ve.lights,{emissive:{value:new Ue(0)}}]),vertexShader:pn.meshtoon_vert,fragmentShader:pn.meshtoon_frag},matcap:{uniforms:Gs([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,{matcap:{value:null}}]),vertexShader:pn.meshmatcap_vert,fragmentShader:pn.meshmatcap_frag},points:{uniforms:Gs([Ve.points,Ve.fog]),vertexShader:pn.points_vert,fragmentShader:pn.points_frag},dashed:{uniforms:Gs([Ve.common,Ve.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pn.linedashed_vert,fragmentShader:pn.linedashed_frag},depth:{uniforms:Gs([Ve.common,Ve.displacementmap]),vertexShader:pn.depth_vert,fragmentShader:pn.depth_frag},normal:{uniforms:Gs([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,{opacity:{value:1}}]),vertexShader:pn.meshnormal_vert,fragmentShader:pn.meshnormal_frag},sprite:{uniforms:Gs([Ve.sprite,Ve.fog]),vertexShader:pn.sprite_vert,fragmentShader:pn.sprite_frag},background:{uniforms:{uvTransform:{value:new Sn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:pn.background_vert,fragmentShader:pn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:pn.backgroundCube_vert,fragmentShader:pn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pn.cube_vert,fragmentShader:pn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pn.equirect_vert,fragmentShader:pn.equirect_frag},distanceRGBA:{uniforms:Gs([Ve.common,Ve.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pn.distanceRGBA_vert,fragmentShader:pn.distanceRGBA_frag},shadow:{uniforms:Gs([Ve.lights,Ve.fog,{color:{value:new Ue(0)},opacity:{value:1}}]),vertexShader:pn.shadow_vert,fragmentShader:pn.shadow_frag}};Gl.physical={uniforms:Gs([Gl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Sn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Sn},clearcoatNormalScale:{value:new Me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Sn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Sn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Sn},sheen:{value:0},sheenColor:{value:new Ue(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Sn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Sn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Sn},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Sn},attenuationDistance:{value:0},attenuationColor:{value:new Ue(0)},specularColor:{value:new Ue(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Sn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Sn}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag};const bC={r:0,b:0,g:0};function Pre(i,e,t,n,r,s,o){const a=new Ue(0);let c,d,l=!0===s?0:1,h=null,p=0,m=null;function b(v,y){v.getRGB(bC,Lz(i)),n.buffers.color.setClear(bC.r,bC.g,bC.b,y,o)}return{getClearColor:function(){return a},setClearColor:function(v,y=1){a.set(v),l=y,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,b(a,l)},render:function _(v,y){let M=!1,x=!0===y.isScene?y.background:null;x&&x.isTexture&&(x=(y.backgroundBlurriness>0?t:e).get(x));const C=i.xr,E=C.getSession&&C.getSession();E&&"additive"===E.environmentBlendMode&&(x=null),null===x?b(a,l):x&&x.isColor&&(b(x,1),M=!0),(i.autoClear||M)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),x&&(x.isCubeTexture||306===x.mapping)?(void 0===d&&(d=new Yn(new Sh(1,1,1),new Xu({name:"BackgroundCubeMaterial",uniforms:Fm(Gl.backgroundCube.uniforms),vertexShader:Gl.backgroundCube.vertexShader,fragmentShader:Gl.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(T,O,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=x,d.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,d.material.toneMapped=x.encoding!==Pn,(h!==x||p!==x.version||m!==i.toneMapping)&&(d.material.needsUpdate=!0,h=x,p=x.version,m=i.toneMapping),d.layers.enableAll(),v.unshift(d,d.geometry,d.material,0,0,null)):x&&x.isTexture&&(void 0===c&&(c=new Yn(new Tv(2,2),new Xu({name:"BackgroundMaterial",uniforms:Fm(Gl.background.uniforms),vertexShader:Gl.background.vertexShader,fragmentShader:Gl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=x.encoding!==Pn,!0===x.matrixAutoUpdate&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||p!==x.version||m!==i.toneMapping)&&(c.material.needsUpdate=!0,h=x,p=x.version,m=i.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}}}function kre(i,e,t,n){const r=i.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,a={},l=v(null);let c=l,d=!1;function m($){return n.isWebGL2?i.bindVertexArray($):s.bindVertexArrayOES($)}function _($){return n.isWebGL2?i.deleteVertexArray($):s.deleteVertexArrayOES($)}function v($){const te=[],q=[],ne=[];for(let K=0;K<r;K++)te[K]=0,q[K]=0,ne[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:te,enabledAttributes:q,attributeDivisors:ne,object:$,attributes:{},index:null}}function x(){const $=c.newAttributes;for(let te=0,q=$.length;te<q;te++)$[te]=0}function C($){E($,0)}function E($,te){const ne=c.enabledAttributes,K=c.attributeDivisors;c.newAttributes[$]=1,0===ne[$]&&(i.enableVertexAttribArray($),ne[$]=1),K[$]!==te&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($,te),K[$]=te)}function T(){const $=c.newAttributes,te=c.enabledAttributes;for(let q=0,ne=te.length;q<ne;q++)te[q]!==$[q]&&(i.disableVertexAttribArray(q),te[q]=0)}function O($,te,q,ne,K,ce){!0!==n.isWebGL2||5124!==q&&5125!==q?i.vertexAttribPointer($,te,q,ne,K,ce):i.vertexAttribIPointer($,te,q,K,ce)}function ie(){H(),d=!0,c!==l&&(c=l,m(c.object))}function H(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function h($,te,q,ne,K){let ce=!1;if(o){const xe=function b($,te,q){const ne=!0===q.wireframe;let K=a[$.id];void 0===K&&(K={},a[$.id]=K);let ce=K[te.id];void 0===ce&&(ce={},K[te.id]=ce);let xe=ce[ne];return void 0===xe&&(xe=v(function p(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),ce[ne]=xe),xe}(ne,q,te);c!==xe&&(c=xe,m(c.object)),ce=function y($,te,q,ne){const K=c.attributes,ce=te.attributes;let xe=0;const $e=q.getAttributes();for(const Le in $e)if($e[Le].location>=0){const ue=K[Le];let Fe=ce[Le];if(void 0===Fe&&("instanceMatrix"===Le&&$.instanceMatrix&&(Fe=$.instanceMatrix),"instanceColor"===Le&&$.instanceColor&&(Fe=$.instanceColor)),void 0===ue||ue.attribute!==Fe||Fe&&ue.data!==Fe.data)return!0;xe++}return c.attributesNum!==xe||c.index!==ne}($,ne,q,K),ce&&function M($,te,q,ne){const K={},ce=te.attributes;let xe=0;const $e=q.getAttributes();for(const Le in $e)if($e[Le].location>=0){let ue=ce[Le];void 0===ue&&("instanceMatrix"===Le&&$.instanceMatrix&&(ue=$.instanceMatrix),"instanceColor"===Le&&$.instanceColor&&(ue=$.instanceColor));const Fe={};Fe.attribute=ue,ue&&ue.data&&(Fe.data=ue.data),K[Le]=Fe,xe++}c.attributes=K,c.attributesNum=xe,c.index=ne}($,ne,q,K)}else{const xe=!0===te.wireframe;(c.geometry!==ne.id||c.program!==q.id||c.wireframe!==xe)&&(c.geometry=ne.id,c.program=q.id,c.wireframe=xe,ce=!0)}null!==K&&t.update(K,34963),(ce||d)&&(d=!1,function L($,te,q,ne){if(!1===n.isWebGL2&&($.isInstancedMesh||ne.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;x();const K=ne.attributes,ce=q.getAttributes(),xe=te.defaultAttributeValues;for(const $e in ce){const Le=ce[$e];if(Le.location>=0){let le=K[$e];if(void 0===le&&("instanceMatrix"===$e&&$.instanceMatrix&&(le=$.instanceMatrix),"instanceColor"===$e&&$.instanceColor&&(le=$.instanceColor)),void 0!==le){const ue=le.normalized,Fe=le.itemSize,Be=t.get(le);if(void 0===Be)continue;const Z=Be.buffer,ut=Be.type,it=Be.bytesPerElement;if(le.isInterleavedBufferAttribute){const De=le.data,tt=De.stride,Ee=le.offset;if(De.isInstancedInterleavedBuffer){for(let ge=0;ge<Le.locationSize;ge++)E(Le.location+ge,De.meshPerAttribute);!0!==$.isInstancedMesh&&void 0===ne._maxInstanceCount&&(ne._maxInstanceCount=De.meshPerAttribute*De.count)}else for(let ge=0;ge<Le.locationSize;ge++)C(Le.location+ge);i.bindBuffer(34962,Z);for(let ge=0;ge<Le.locationSize;ge++)O(Le.location+ge,Fe/Le.locationSize,ut,ue,tt*it,(Ee+Fe/Le.locationSize*ge)*it)}else{if(le.isInstancedBufferAttribute){for(let De=0;De<Le.locationSize;De++)E(Le.location+De,le.meshPerAttribute);!0!==$.isInstancedMesh&&void 0===ne._maxInstanceCount&&(ne._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let De=0;De<Le.locationSize;De++)C(Le.location+De);i.bindBuffer(34962,Z);for(let De=0;De<Le.locationSize;De++)O(Le.location+De,Fe/Le.locationSize,ut,ue,Fe*it,Fe/Le.locationSize*De*it)}}else if(void 0!==xe){const ue=xe[$e];if(void 0!==ue)switch(ue.length){case 2:i.vertexAttrib2fv(Le.location,ue);break;case 3:i.vertexAttrib3fv(Le.location,ue);break;case 4:i.vertexAttrib4fv(Le.location,ue);break;default:i.vertexAttrib1fv(Le.location,ue)}}}}T()}($,te,q,ne),null!==K&&i.bindBuffer(34963,t.get(K).buffer))},reset:ie,resetDefaultState:H,dispose:function A(){ie();for(const $ in a){const te=a[$];for(const q in te){const ne=te[q];for(const K in ne)_(ne[K].object),delete ne[K];delete te[q]}delete a[$]}},releaseStatesOfGeometry:function P($){if(void 0===a[$.id])return;const te=a[$.id];for(const q in te){const ne=te[q];for(const K in ne)_(ne[K].object),delete ne[K];delete te[q]}delete a[$.id]},releaseStatesOfProgram:function Y($){for(const te in a){const q=a[te];if(void 0===q[$.id])continue;const ne=q[$.id];for(const K in ne)_(ne[K].object),delete ne[K];delete q[$.id]}},initAttributes:x,enableAttribute:C,disableUnusedAttributes:T}}function Ore(i,e,t,n){const r=n.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,d){i.drawArrays(s,c,d),t.update(d,s,1)},this.renderInstances=function l(c,d,h){if(0===h)return;let p,m;if(r)p=i,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[m](s,c,d,h),t.update(d,s,h)}}function Lre(i,e,t){let n;function s(O){if("highp"===O){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";O="mediump"}return"mediump"===O&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===i.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=!0===t.logarithmicDepthBuffer,h=i.getParameter(34930),p=i.getParameter(35660),m=i.getParameter(3379),_=i.getParameter(34076),b=i.getParameter(34921),v=i.getParameter(36347),y=i.getParameter(36348),M=i.getParameter(36349),x=p>0,C=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const O=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:_,maxAttributes:b,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:M,vertexTextures:x,floatFragmentTextures:C,floatVertexTextures:x&&C,maxSamples:o?i.getParameter(36183):0}}function Fre(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new Eh,a=new Sn,l={value:null,needsUpdate:!1};function d(h,p,m,_){const b=null!==h?h.length:0;let v=null;if(0!==b){if(v=l.value,!0!==_||null===v){const y=m+4*b,M=p.matrixWorldInverse;a.getNormalMatrix(M),(null===v||v.length<y)&&(v=new Float32Array(y));for(let x=0,C=m;x!==b;++x,C+=4)o.copy(h[x]).applyMatrix4(M,a),o.normal.toArray(v,C),v[C+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,v}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=0!==h.length||p||0!==n||r;return r=p,n=h.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){t=d(h,p,0)},this.setState=function(h,p,m){const _=h.clippingPlanes,b=h.clipIntersection,v=h.clipShadows,y=i.get(h);if(!r||null===_||0===_.length||s&&!v)s?d(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}();else{const M=s?0:n,x=4*M;let C=y.clippingState||null;l.value=C,C=d(_,p,x,m);for(let E=0;E!==x;++E)C[E]=t[E];y.clippingState=C,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=M}}}function Nre(i){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new kne(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class xC extends tR{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Nz=[.125,.215,.35,.446,.526,.582],rR=new xC,Bz=new Ue;let sR=null;const Th=(1+Math.sqrt(5))/2,Vm=1/Th,Uz=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,Th,Vm),new F(0,Th,-Vm),new F(Vm,0,Th),new F(-Vm,0,Th),new F(Th,Vm,0),new F(-Th,Vm,0)];class Vz{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){sR=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Gz(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Hz(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sR),e.scissorTest=!1,wC(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),sR=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Xi,minFilter:Xi,generateMipmaps:!1,type:vv,format:ba,encoding:vh,depthBuffer:!1},r=zz(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=zz(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Bre(i){const e=[],t=[],n=[];let r=i;const s=i-4+1+Nz.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-4?l=Nz[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),d=-c,h=1+c,p=[d,d,h,d,h,h,d,d,h,h,d,h],m=6,_=6,b=3,v=2,y=1,M=new Float32Array(b*_*m),x=new Float32Array(v*_*m),C=new Float32Array(y*_*m);for(let T=0;T<m;T++){const O=T%3*2/3-1,L=T>2?0:-1;M.set([O,L,0,O+2/3,L,0,O+2/3,L+1,0,O,L,0,O+2/3,L+1,0,O,L+1,0],b*_*T),x.set(p,v*_*T),C.set([T,T,T,T,T,T],y*_*T)}const E=new ln;E.setAttribute("position",new Ii(M,b)),E.setAttribute("uv",new Ii(x,v)),E.setAttribute("faceIndex",new Ii(C,y)),e.push(E),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(s)),this._blurMaterial=function Ure(i,e,t){const n=new Float32Array(20),r=new F(0,1,0);return new Xu({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Yn(this._lodPlanes[0],e);this._renderer.compile(t,rR)}_sceneToCubeUV(e,t,n,r){const a=new br(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(Bz),d.toneMapping=0,d.autoClear=!1;const m=new nr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),_=new Yn(new Sh,m);let b=!1;const v=e.background;v?v.isColor&&(m.color.copy(v),e.background=null,b=!0):(m.color.copy(Bz),b=!0);for(let y=0;y<6;y++){const M=y%3;0===M?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):1===M?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const x=this._cubeSize;wC(r,M*x,y>2?x:0,x,x),d.setRenderTarget(r),b&&d.render(_,a),d.render(e,a)}_.geometry.dispose(),_.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=v}_textureToCubeUV(e,t){const n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Gz()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Hz());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Yn(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;wC(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,rR)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,Uz[(r-1)%Uz.length])}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new Yn(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[n]-1,_=isFinite(s)?Math.PI/(2*m):2*Math.PI/39,b=s/_,v=isFinite(s)?1+Math.floor(3*b):20;v>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to 20`);const y=[];let M=0;for(let O=0;O<20;++O){const L=O/b,A=Math.exp(-L*L/2);y.push(A),0===O?M+=A:O<v&&(M+=2*A)}for(let O=0;O<y.length;O++)y[O]=y[O]/M;p.envMap.value=e.texture,p.samples.value=v,p.weights.value=y,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:x}=this;p.dTheta.value=_,p.mipInt.value=x-n;const C=this._sizeLods[r];wC(t,3*C*(r>x-4?r-x+4:0),4*(this._cubeSize-C),3*C,2*C),l.setRenderTarget(t),l.render(h,rR)}}function zz(i,e,t){const n=new wh(i,e,t);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function wC(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function Hz(){return new Xu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Gz(){return new Xu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Vre(i){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,d=301===l||302===l;if(c||d){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let h=e.get(a);return null===t&&(t=new Vz(i)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||d&&h&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(h)){null===t&&(t=new Vz(i));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function zre(i){const e={};function t(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return null!==t(n)},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Hre(i,e,t,n){const r={},s=new WeakMap;function o(h){const p=h.target;null!==p.index&&e.remove(p.index);for(const _ in p.attributes)e.remove(p.attributes[_]);p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),n.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function c(h){const p=[],m=h.index,_=h.attributes.position;let b=0;if(null!==m){const M=m.array;b=m.version;for(let x=0,C=M.length;x<C;x+=3){const E=M[x+0],T=M[x+1],O=M[x+2];p.push(E,T,T,O,O,E)}}else{b=_.version;for(let x=0,C=_.array.length/3-1;x<C;x+=3){const E=x+0,T=x+1,O=x+2;p.push(E,T,T,O,O,E)}}const v=new(mz(p)?Tz:Dz)(p,1);v.version=b;const y=s.get(h);y&&e.remove(y),s.set(h,v)}return{get:function a(h,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p},update:function l(h){const p=h.attributes;for(const _ in p)e.update(p[_],34962);const m=h.morphAttributes;for(const _ in m){const b=m[_];for(let v=0,y=b.length;v<y;v++)e.update(b[v],34962)}},getWireframeAttribute:function d(h){const p=s.get(h);if(p){const m=h.index;null!==m&&p.version<m.version&&c(h)}else c(h);return s.get(h)}}}function Gre(i,e,t,n){const r=n.isWebGL2;let s,a,l;this.setMode=function o(p){s=p},this.setIndex=function c(p){a=p.type,l=p.bytesPerElement},this.render=function d(p,m){i.drawElements(s,m,a,p*l),t.update(m,s,1)},this.renderInstances=function h(p,m,_){if(0===_)return;let b,v;if(r)b=i,v="drawElementsInstanced";else if(b=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",null===b)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");b[v](s,m,a,p*l,_),t.update(m,s,_)}}function Wre(i){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function $re(i,e){return i[0]-e[0]}function jre(i,e){return Math.abs(e[1])-Math.abs(i[1])}function qre(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,o=new oi,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,d,h){const p=c.morphTargetInfluences;if(!0===e.isWebGL2){const m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,_=void 0!==m?m.length:0;let b=s.get(d);if(void 0===b||b.count!==_){let $=function(){ie.dispose(),s.delete(d),d.removeEventListener("dispose",$)};void 0!==b&&b.texture.dispose();const M=void 0!==d.morphAttributes.position,x=void 0!==d.morphAttributes.normal,C=void 0!==d.morphAttributes.color,E=d.morphAttributes.position||[],T=d.morphAttributes.normal||[],O=d.morphAttributes.color||[];let L=0;!0===M&&(L=1),!0===x&&(L=2),!0===C&&(L=3);let A=d.attributes.position.count*L,P=1;A>e.maxTextureSize&&(P=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const Y=new Float32Array(A*P*4*_),ie=new VI(Y,A,P,_);ie.type=Gu,ie.needsUpdate=!0;const H=4*L;for(let te=0;te<_;te++){const q=E[te],ne=T[te],K=O[te],ce=A*P*4*te;for(let xe=0;xe<q.count;xe++){const $e=xe*H;!0===M&&(o.fromBufferAttribute(q,xe),Y[ce+$e+0]=o.x,Y[ce+$e+1]=o.y,Y[ce+$e+2]=o.z,Y[ce+$e+3]=0),!0===x&&(o.fromBufferAttribute(ne,xe),Y[ce+$e+4]=o.x,Y[ce+$e+5]=o.y,Y[ce+$e+6]=o.z,Y[ce+$e+7]=0),!0===C&&(o.fromBufferAttribute(K,xe),Y[ce+$e+8]=o.x,Y[ce+$e+9]=o.y,Y[ce+$e+10]=o.z,Y[ce+$e+11]=4===K.itemSize?o.w:1)}}b={count:_,texture:ie,size:new Me(A,P)},s.set(d,b),d.addEventListener("dispose",$)}let v=0;for(let M=0;M<p.length;M++)v+=p[M];const y=d.morphTargetsRelative?1:1-v;h.getUniforms().setValue(i,"morphTargetBaseInfluence",y),h.getUniforms().setValue(i,"morphTargetInfluences",p),h.getUniforms().setValue(i,"morphTargetsTexture",b.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",b.size)}else{const m=void 0===p?0:p.length;let _=n[d.id];if(void 0===_||_.length!==m){_=[];for(let x=0;x<m;x++)_[x]=[x,0];n[d.id]=_}for(let x=0;x<m;x++){const C=_[x];C[0]=x,C[1]=p[x]}_.sort(jre);for(let x=0;x<8;x++)x<m&&_[x][1]?(a[x][0]=_[x][0],a[x][1]=_[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort($re);const b=d.morphAttributes.position,v=d.morphAttributes.normal;let y=0;for(let x=0;x<8;x++){const C=a[x],E=C[0],T=C[1];E!==Number.MAX_SAFE_INTEGER&&T?(b&&d.getAttribute("morphTarget"+x)!==b[E]&&d.setAttribute("morphTarget"+x,b[E]),v&&d.getAttribute("morphNormal"+x)!==v[E]&&d.setAttribute("morphNormal"+x,v[E]),r[x]=T,y+=T):(b&&!0===d.hasAttribute("morphTarget"+x)&&d.deleteAttribute("morphTarget"+x),v&&!0===d.hasAttribute("morphNormal"+x)&&d.deleteAttribute("morphNormal"+x),r[x]=0)}const M=d.morphTargetsRelative?1:1-y;h.getUniforms().setValue(i,"morphTargetBaseInfluence",M),h.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function Xre(i,e,t,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,h=e.get(l,l.geometry);return r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),h},dispose:function o(){r=new WeakMap}}}const Wz=new el,$z=new VI,jz=new _z,qz=new yC,Xz=[],Yz=[],Kz=new Float32Array(16),Zz=new Float32Array(9),Jz=new Float32Array(4);function zm(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=Xz[r];if(void 0===s&&(s=new Float32Array(r),Xz[r]=s),0!==e){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function Tr(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Ir(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function MC(i,e){let t=Yz[e];void 0===t&&(t=new Int32Array(e),Yz[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Yre(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Kre(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Tr(t,e))return;i.uniform2fv(this.addr,e),Ir(t,e)}}function Zre(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Tr(t,e))return;i.uniform3fv(this.addr,e),Ir(t,e)}}function Jre(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Tr(t,e))return;i.uniform4fv(this.addr,e),Ir(t,e)}}function Qre(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Tr(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ir(t,e)}else{if(Tr(t,n))return;Jz.set(n),i.uniformMatrix2fv(this.addr,!1,Jz),Ir(t,n)}}function ese(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Tr(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ir(t,e)}else{if(Tr(t,n))return;Zz.set(n),i.uniformMatrix3fv(this.addr,!1,Zz),Ir(t,n)}}function tse(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Tr(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ir(t,e)}else{if(Tr(t,n))return;Kz.set(n),i.uniformMatrix4fv(this.addr,!1,Kz),Ir(t,n)}}function nse(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function ise(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Tr(t,e))return;i.uniform2iv(this.addr,e),Ir(t,e)}}function rse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Tr(t,e))return;i.uniform3iv(this.addr,e),Ir(t,e)}}function sse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Tr(t,e))return;i.uniform4iv(this.addr,e),Ir(t,e)}}function ose(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function ase(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Tr(t,e))return;i.uniform2uiv(this.addr,e),Ir(t,e)}}function lse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Tr(t,e))return;i.uniform3uiv(this.addr,e),Ir(t,e)}}function cse(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Tr(t,e))return;i.uniform4uiv(this.addr,e),Ir(t,e)}}function use(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||Wz,r)}function dse(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||jz,r)}function hse(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||qz,r)}function fse(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||$z,r)}function mse(i,e){i.uniform1fv(this.addr,e)}function gse(i,e){const t=zm(e,this.size,2);i.uniform2fv(this.addr,t)}function _se(i,e){const t=zm(e,this.size,3);i.uniform3fv(this.addr,t)}function yse(i,e){const t=zm(e,this.size,4);i.uniform4fv(this.addr,t)}function vse(i,e){const t=zm(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function bse(i,e){const t=zm(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function xse(i,e){const t=zm(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function wse(i,e){i.uniform1iv(this.addr,e)}function Mse(i,e){i.uniform2iv(this.addr,e)}function Cse(i,e){i.uniform3iv(this.addr,e)}function Sse(i,e){i.uniform4iv(this.addr,e)}function Ese(i,e){i.uniform1uiv(this.addr,e)}function Ase(i,e){i.uniform2uiv(this.addr,e)}function Dse(i,e){i.uniform3uiv(this.addr,e)}function Tse(i,e){i.uniform4uiv(this.addr,e)}function Ise(i,e,t){const n=this.cache,r=e.length,s=MC(t,r);Tr(n,s)||(i.uniform1iv(this.addr,s),Ir(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||Wz,s[o])}function Rse(i,e,t){const n=this.cache,r=e.length,s=MC(t,r);Tr(n,s)||(i.uniform1iv(this.addr,s),Ir(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||jz,s[o])}function Pse(i,e,t){const n=this.cache,r=e.length,s=MC(t,r);Tr(n,s)||(i.uniform1iv(this.addr,s),Ir(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||qz,s[o])}function kse(i,e,t){const n=this.cache,r=e.length,s=MC(t,r);Tr(n,s)||(i.uniform1iv(this.addr,s),Ir(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||$z,s[o])}class Lse{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function pse(i){switch(i){case 5126:return Yre;case 35664:return Kre;case 35665:return Zre;case 35666:return Jre;case 35674:return Qre;case 35675:return ese;case 35676:return tse;case 5124:case 35670:return nse;case 35667:case 35671:return ise;case 35668:case 35672:return rse;case 35669:case 35673:return sse;case 5125:return ose;case 36294:return ase;case 36295:return lse;case 36296:return cse;case 35678:case 36198:case 36298:case 36306:case 35682:return use;case 35679:case 36299:case 36307:return dse;case 35680:case 36300:case 36308:case 36293:return hse;case 36289:case 36303:case 36311:case 36292:return fse}}(t.type)}}class Fse{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function Ose(i){switch(i){case 5126:return mse;case 35664:return gse;case 35665:return _se;case 35666:return yse;case 35674:return vse;case 35675:return bse;case 35676:return xse;case 5124:case 35670:return wse;case 35667:case 35671:return Mse;case 35668:case 35672:return Cse;case 35669:case 35673:return Sse;case 5125:return Ese;case 36294:return Ase;case 36295:return Dse;case 36296:return Tse;case 35678:case 36198:case 36298:case 36306:case 35682:return Ise;case 35679:case 36299:case 36307:return Rse;case 35680:case 36300:case 36308:case 36293:return Pse;case 36289:case 36303:case 36311:case 36292:return kse}}(t.type)}}class Nse{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const aR=/(\w+)(\])?(\[|\.)?/g;function Qz(i,e){i.seq.push(e),i.map[e.id]=e}function Bse(i,e,t){const n=i.name,r=n.length;for(aR.lastIndex=0;;){const s=aR.exec(n),o=aR.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){Qz(t,void 0===c?new Lse(a,i,e):new Fse(a,i,e));break}{let h=t.map[a];void 0===h&&(h=new Nse(a),Qz(t,h)),t=h}}}class CC{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r);Bse(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function eH(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let Use=0;function tH(i,e,t){const n=i.getShaderParameter(e,35713),r=i.getShaderInfoLog(e).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Vse(i,e){const t=i.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join("\n")}(i.getShaderSource(e),o)}return r}function Hse(i,e){const t=function zse(i){switch(i){case vh:return["Linear","( value )"];case Pn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Gse(i,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Iv(i){return""!==i}function nH(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function iH(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const qse=/^[ \t]*#include +<([\w\d./]+)>/gm;function lR(i){return i.replace(qse,Xse)}function Xse(i,e){const t=pn[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return lR(t)}const Yse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rH(i){return i.replace(Yse,Kse)}function Kse(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function sH(i){let e="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?e+="\n#define HIGH_PRECISION":"mediump"===i.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(e+="\n#define LOW_PRECISION"),e}function noe(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function Zse(i){let e="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function Jse(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),d=function Qse(i){let e="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),h=function eoe(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function toe(i){const e=i.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),m=t.isWebGL2?"":function Wse(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Iv).join("\n")}(t),_=function $se(i){const e=[];for(const t in i){const n=i[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(s),b=r.createProgram();let v,y,M=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(v=[_].filter(Iv).join("\n"),v.length>0&&(v+="\n"),y=[m,_].filter(Iv).join("\n"),y.length>0&&(y+="\n")):(v=[sH(t),"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Iv).join("\n"),y=[m,sH(t),"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?pn.tonemapping_pars_fragment:"",0!==t.toneMapping?Gse("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",pn.encodings_pars_fragment,Hse("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Iv).join("\n")),o=lR(o),o=nH(o,t),o=iH(o,t),a=lR(a),a=nH(a,t),a=iH(a,t),o=rH(o),a=rH(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(M="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,y=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const C=M+y+a,E=eH(r,35633,M+v+o),T=eH(r,35632,C);if(r.attachShader(b,E),r.attachShader(b,T),void 0!==t.index0AttributeName?r.bindAttribLocation(b,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b),i.debug.checkShaderErrors){const A=r.getProgramInfoLog(b).trim(),P=r.getShaderInfoLog(E).trim(),Y=r.getShaderInfoLog(T).trim();let ie=!0,H=!0;if(!1===r.getProgramParameter(b,35714))if(ie=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,b,E,T);else{const $=tH(r,E,"vertex"),te=tH(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+A+"\n"+$+"\n"+te)}else""!==A?console.warn("THREE.WebGLProgram: Program Info Log:",A):(""===P||""===Y)&&(H=!1);H&&(this.diagnostics={runnable:ie,programLog:A,vertexShader:{log:P,prefix:v},fragmentShader:{log:Y,prefix:y}})}let O,L;return r.deleteShader(E),r.deleteShader(T),this.getUniforms=function(){return void 0===O&&(O=new CC(r,b)),O},this.getAttributes=function(){return void 0===L&&(L=function jse(i,e){const t={},n=i.getProgramParameter(e,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}(r,b)),L},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.name=t.shaderName,this.id=Use++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=E,this.fragmentShader=T,this}let ioe=0;class roe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new soe(e),t.set(e,n)),n}}class soe{constructor(e){this.id=ioe++,this.code=e,this.usedTimes=0}}function ooe(i,e,t,n,r,s,o){const a=new qI,l=new roe,c=[],d=r.isWebGL2,h=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(A){return 1===A?"uv2":"uv"}return{getParameters:function v(A,P,Y,ie,H){const $=ie.fog,te=H.geometry,ne=(A.isMeshStandardMaterial?t:e).get(A.envMap||(A.isMeshStandardMaterial?ie.environment:null)),K=ne&&306===ne.mapping?ne.image.height:null,ce=_[A.type];null!==A.precision&&(m=r.getMaxPrecision(A.precision),m!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",m,"instead."));const xe=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,$e=void 0!==xe?xe.length:0;let le,ue,Fe,Be,Le=0;if(void 0!==te.morphAttributes.position&&(Le=1),void 0!==te.morphAttributes.normal&&(Le=2),void 0!==te.morphAttributes.color&&(Le=3),ce){const Je=Gl[ce];le=Je.vertexShader,ue=Je.fragmentShader}else le=A.vertexShader,ue=A.fragmentShader,l.update(A),Fe=l.getVertexShaderID(A),Be=l.getFragmentShaderID(A);const Z=i.getRenderTarget(),ut=!0===H.isInstancedMesh,it=!!A.map,tt=!!ne,Ee=!!A.aoMap,ge=!!A.lightMap,Ae=!!A.bumpMap,lt=!!A.normalMap,We=!!A.displacementMap,Rt=!!A.emissiveMap,Pt=!!A.metalnessMap,wt=!!A.roughnessMap,yn=A.clearcoat>0,Gn=A.iridescence>0,B=A.sheen>0,k=A.transmission>0,de=yn&&!!A.clearcoatMap,Ie=yn&&!!A.clearcoatNormalMap,ke=yn&&!!A.clearcoatRoughnessMap,je=Gn&&!!A.iridescenceMap,Ot=Gn&&!!A.iridescenceThicknessMap,rt=B&&!!A.sheenColorMap,me=B&&!!A.sheenRoughnessMap,dt=!!A.specularMap,Mt=!!A.specularColorMap,kt=!!A.specularIntensityMap,ct=k&&!!A.transmissionMap,ft=k&&!!A.thicknessMap,ai=!!A.alphaMap,G=!!A.extensions,pe=!!te.attributes.uv2;return{isWebGL2:d,shaderID:ce,shaderName:A.type,vertexShader:le,fragmentShader:ue,defines:A.defines,customVertexShaderID:Fe,customFragmentShaderID:Be,isRawShaderMaterial:!0===A.isRawShaderMaterial,glslVersion:A.glslVersion,precision:m,instancing:ut,instancingColor:ut&&null!==H.instanceColor,supportsVertexTextures:p,outputEncoding:null===Z?i.outputEncoding:!0===Z.isXRRenderTarget?Z.texture.encoding:vh,map:it,matcap:!!A.matcap,envMap:tt,envMapMode:tt&&ne.mapping,envMapCubeUVHeight:K,aoMap:Ee,lightMap:ge,bumpMap:Ae,normalMap:lt,displacementMap:p&&We,emissiveMap:Rt,normalMapObjectSpace:lt&&1===A.normalMapType,normalMapTangentSpace:lt&&0===A.normalMapType,decodeVideoTexture:it&&!0===A.map.isVideoTexture&&A.map.encoding===Pn,metalnessMap:Pt,roughnessMap:wt,clearcoat:yn,clearcoatMap:de,clearcoatNormalMap:Ie,clearcoatRoughnessMap:ke,iridescence:Gn,iridescenceMap:je,iridescenceThicknessMap:Ot,sheen:B,sheenColorMap:rt,sheenRoughnessMap:me,specularMap:dt,specularColorMap:Mt,specularIntensityMap:kt,transmission:k,transmissionMap:ct,thicknessMap:ft,gradientMap:!!A.gradientMap,opaque:!1===A.transparent&&1===A.blending,alphaMap:ai,alphaTest:A.alphaTest>0,combine:A.combine,mapUv:it&&b(A.map.channel),aoMapUv:Ee&&b(A.aoMap.channel),lightMapUv:ge&&b(A.lightMap.channel),bumpMapUv:Ae&&b(A.bumpMap.channel),normalMapUv:lt&&b(A.normalMap.channel),displacementMapUv:We&&b(A.displacementMap.channel),emissiveMapUv:Rt&&b(A.emissiveMap.channel),metalnessMapUv:Pt&&b(A.metalnessMap.channel),roughnessMapUv:wt&&b(A.roughnessMap.channel),clearcoatMapUv:de&&b(A.clearcoatMap.channel),clearcoatNormalMapUv:Ie&&b(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ke&&b(A.clearcoatRoughnessMap.channel),iridescenceMapUv:je&&b(A.iridescenceMap.channel),iridescenceThicknessMapUv:Ot&&b(A.iridescenceThicknessMap.channel),sheenColorMapUv:rt&&b(A.sheenColorMap.channel),sheenRoughnessMapUv:me&&b(A.sheenRoughnessMap.channel),specularMapUv:dt&&b(A.specularMap.channel),specularColorMapUv:Mt&&b(A.specularColorMap.channel),specularIntensityMapUv:kt&&b(A.specularIntensityMap.channel),transmissionMapUv:ct&&b(A.transmissionMap.channel),thicknessMapUv:ft&&b(A.thicknessMap.channel),alphaMapUv:ai&&b(A.alphaMap.channel),vertexTangents:lt&&!!te.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:!0===A.vertexColors&&!!te.attributes.color&&4===te.attributes.color.itemSize,vertexUvs2:pe,pointsUvs:!0===H.isPoints&&!!te.attributes.uv&&(it||ai),fog:!!$,useFog:!0===A.fog,fogExp2:$&&$.isFogExp2,flatShading:!0===A.flatShading,sizeAttenuation:!0===A.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===H.isSkinnedMesh,morphTargets:void 0!==te.morphAttributes.position,morphNormals:void 0!==te.morphAttributes.normal,morphColors:void 0!==te.morphAttributes.color,morphTargetsCount:$e,morphTextureStride:Le,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:i.shadowMap.enabled&&Y.length>0,shadowMapType:i.shadowMap.type,toneMapping:A.toneMapped?i.toneMapping:0,useLegacyLights:i.useLegacyLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:2===A.side,flipSided:1===A.side,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:G&&!0===A.extensions.derivatives,extensionFragDepth:G&&!0===A.extensions.fragDepth,extensionDrawBuffers:G&&!0===A.extensions.drawBuffers,extensionShaderTextureLOD:G&&!0===A.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}},getProgramCacheKey:function y(A){const P=[];if(A.shaderID?P.push(A.shaderID):(P.push(A.customVertexShaderID),P.push(A.customFragmentShaderID)),void 0!==A.defines)for(const Y in A.defines)P.push(Y),P.push(A.defines[Y]);return!1===A.isRawShaderMaterial&&(function M(A,P){A.push(P.precision),A.push(P.outputEncoding),A.push(P.envMapMode),A.push(P.envMapCubeUVHeight),A.push(P.mapUv),A.push(P.alphaMapUv),A.push(P.lightMapUv),A.push(P.aoMapUv),A.push(P.bumpMapUv),A.push(P.normalMapUv),A.push(P.displacementMapUv),A.push(P.emissiveMapUv),A.push(P.metalnessMapUv),A.push(P.roughnessMapUv),A.push(P.clearcoatMapUv),A.push(P.clearcoatNormalMapUv),A.push(P.clearcoatRoughnessMapUv),A.push(P.iridescenceMapUv),A.push(P.iridescenceThicknessMapUv),A.push(P.sheenColorMapUv),A.push(P.sheenRoughnessMapUv),A.push(P.specularMapUv),A.push(P.specularColorMapUv),A.push(P.specularIntensityMapUv),A.push(P.transmissionMapUv),A.push(P.thicknessMapUv),A.push(P.combine),A.push(P.fogExp2),A.push(P.sizeAttenuation),A.push(P.morphTargetsCount),A.push(P.morphAttributeCount),A.push(P.numDirLights),A.push(P.numPointLights),A.push(P.numSpotLights),A.push(P.numSpotLightMaps),A.push(P.numHemiLights),A.push(P.numRectAreaLights),A.push(P.numDirLightShadows),A.push(P.numPointLightShadows),A.push(P.numSpotLightShadows),A.push(P.numSpotLightShadowsWithMaps),A.push(P.shadowMapType),A.push(P.toneMapping),A.push(P.numClippingPlanes),A.push(P.numClipIntersection),A.push(P.depthPacking)}(P,A),function x(A,P){a.disableAll(),P.isWebGL2&&a.enable(0),P.supportsVertexTextures&&a.enable(1),P.instancing&&a.enable(2),P.instancingColor&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUvs2&&a.enable(13),P.vertexTangents&&a.enable(14),A.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.skinning&&a.enable(4),P.morphTargets&&a.enable(5),P.morphNormals&&a.enable(6),P.morphColors&&a.enable(7),P.premultipliedAlpha&&a.enable(8),P.shadowMapEnabled&&a.enable(9),P.useLegacyLights&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.decodeVideoTexture&&a.enable(17),P.opaque&&a.enable(18),P.pointsUvs&&a.enable(19),A.push(a.mask)}(P,A),P.push(i.outputEncoding)),P.push(A.customProgramCacheKey),P.join()},getUniforms:function C(A){const P=_[A.type];let Y;return Y=P?Tne.clone(Gl[P].uniforms):A.uniforms,Y},acquireProgram:function E(A,P){let Y;for(let ie=0,H=c.length;ie<H;ie++){const $=c[ie];if($.cacheKey===P){Y=$,++Y.usedTimes;break}}return void 0===Y&&(Y=new noe(i,P,A,s),c.push(Y)),Y},releaseProgram:function T(A){if(0==--A.usedTimes){const P=c.indexOf(A);c[P]=c[c.length-1],c.pop(),A.destroy()}},releaseShaderCache:function O(A){l.remove(A)},programs:c,dispose:function L(){l.dispose()}}}function aoe(){let i=new WeakMap;return{get:function e(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function t(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function loe(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function oH(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function aH(){const i=[];let e=0;const t=[],n=[],r=[];function o(h,p,m,_,b,v){let y=i[e];return void 0===y?(y={id:h.id,object:h,geometry:p,material:m,groupOrder:_,renderOrder:h.renderOrder,z:b,group:v},i[e]=y):(y.id=h.id,y.object=h,y.geometry=p,y.material=m,y.groupOrder=_,y.renderOrder=h.renderOrder,y.z=b,y.group=v),e++,y}return{opaque:t,transmissive:n,transparent:r,init:function s(){e=0,t.length=0,n.length=0,r.length=0},push:function a(h,p,m,_,b,v){const y=o(h,p,m,_,b,v);m.transmission>0?n.push(y):!0===m.transparent?r.push(y):t.push(y)},unshift:function l(h,p,m,_,b,v){const y=o(h,p,m,_,b,v);m.transmission>0?n.unshift(y):!0===m.transparent?r.unshift(y):t.unshift(y)},finish:function d(){for(let h=e,p=i.length;h<p;h++){const m=i[h];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}},sort:function c(h,p){t.length>1&&t.sort(h||loe),n.length>1&&n.sort(p||oH),r.length>1&&r.sort(p||oH)}}}function coe(){let i=new WeakMap;return{get:function e(n,r){const s=i.get(n);let o;return void 0===s?(o=new aH,i.set(n,[o])):r>=s.length?(o=new aH,s.push(o)):o=s[r],o},dispose:function t(){i=new WeakMap}}}function uoe(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new F,color:new Ue};break;case"SpotLight":t={position:new F,direction:new F,color:new Ue,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new F,color:new Ue,distance:0,decay:0};break;case"HemisphereLight":t={direction:new F,skyColor:new Ue,groundColor:new Ue};break;case"RectAreaLight":t={color:new Ue,position:new F,halfWidth:new F,halfHeight:new F}}return i[e.id]=t,t}}}let hoe=0;function foe(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function poe(i,e){const t=new uoe,n=function doe(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new F);const s=new F,o=new jt,a=new jt;return{setup:function l(d,h){let p=0,m=0,_=0;for(let Y=0;Y<9;Y++)r.probe[Y].set(0,0,0);let b=0,v=0,y=0,M=0,x=0,C=0,E=0,T=0,O=0,L=0;d.sort(foe);const A=!0===h?Math.PI:1;for(let Y=0,ie=d.length;Y<ie;Y++){const H=d[Y],$=H.color,te=H.intensity,q=H.distance,ne=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)p+=$.r*te*A,m+=$.g*te*A,_+=$.b*te*A;else if(H.isLightProbe)for(let K=0;K<9;K++)r.probe[K].addScaledVector(H.sh.coefficients[K],te);else if(H.isDirectionalLight){const K=t.get(H);if(K.color.copy(H.color).multiplyScalar(H.intensity*A),H.castShadow){const ce=H.shadow,xe=n.get(H);xe.shadowBias=ce.bias,xe.shadowNormalBias=ce.normalBias,xe.shadowRadius=ce.radius,xe.shadowMapSize=ce.mapSize,r.directionalShadow[b]=xe,r.directionalShadowMap[b]=ne,r.directionalShadowMatrix[b]=H.shadow.matrix,C++}r.directional[b]=K,b++}else if(H.isSpotLight){const K=t.get(H);K.position.setFromMatrixPosition(H.matrixWorld),K.color.copy($).multiplyScalar(te*A),K.distance=q,K.coneCos=Math.cos(H.angle),K.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),K.decay=H.decay,r.spot[y]=K;const ce=H.shadow;if(H.map&&(r.spotLightMap[O]=H.map,O++,ce.updateMatrices(H),H.castShadow&&L++),r.spotLightMatrix[y]=ce.matrix,H.castShadow){const xe=n.get(H);xe.shadowBias=ce.bias,xe.shadowNormalBias=ce.normalBias,xe.shadowRadius=ce.radius,xe.shadowMapSize=ce.mapSize,r.spotShadow[y]=xe,r.spotShadowMap[y]=ne,T++}y++}else if(H.isRectAreaLight){const K=t.get(H);K.color.copy($).multiplyScalar(te),K.halfWidth.set(.5*H.width,0,0),K.halfHeight.set(0,.5*H.height,0),r.rectArea[M]=K,M++}else if(H.isPointLight){const K=t.get(H);if(K.color.copy(H.color).multiplyScalar(H.intensity*A),K.distance=H.distance,K.decay=H.decay,H.castShadow){const ce=H.shadow,xe=n.get(H);xe.shadowBias=ce.bias,xe.shadowNormalBias=ce.normalBias,xe.shadowRadius=ce.radius,xe.shadowMapSize=ce.mapSize,xe.shadowCameraNear=ce.camera.near,xe.shadowCameraFar=ce.camera.far,r.pointShadow[v]=xe,r.pointShadowMap[v]=ne,r.pointShadowMatrix[v]=H.shadow.matrix,E++}r.point[v]=K,v++}else if(H.isHemisphereLight){const K=t.get(H);K.skyColor.copy(H.color).multiplyScalar(te*A),K.groundColor.copy(H.groundColor).multiplyScalar(te*A),r.hemi[x]=K,x++}}M>0&&(e.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ve.LTC_FLOAT_1,r.rectAreaLTC2=Ve.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Ve.LTC_HALF_1,r.rectAreaLTC2=Ve.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=_;const P=r.hash;(P.directionalLength!==b||P.pointLength!==v||P.spotLength!==y||P.rectAreaLength!==M||P.hemiLength!==x||P.numDirectionalShadows!==C||P.numPointShadows!==E||P.numSpotShadows!==T||P.numSpotMaps!==O)&&(r.directional.length=b,r.spot.length=y,r.rectArea.length=M,r.point.length=v,r.hemi.length=x,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=T+O-L,r.spotLightMap.length=O,r.numSpotLightShadowsWithMaps=L,P.directionalLength=b,P.pointLength=v,P.spotLength=y,P.rectAreaLength=M,P.hemiLength=x,P.numDirectionalShadows=C,P.numPointShadows=E,P.numSpotShadows=T,P.numSpotMaps=O,r.version=hoe++)},setupView:function c(d,h){let p=0,m=0,_=0,b=0,v=0;const y=h.matrixWorldInverse;for(let M=0,x=d.length;M<x;M++){const C=d[M];if(C.isDirectionalLight){const E=r.directional[p];E.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),p++}else if(C.isSpotLight){const E=r.spot[_];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(y),E.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),_++}else if(C.isRectAreaLight){const E=r.rectArea[b];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(y),a.identity(),o.copy(C.matrixWorld),o.premultiply(y),a.extractRotation(o),E.halfWidth.set(.5*C.width,0,0),E.halfHeight.set(0,.5*C.height,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),b++}else if(C.isPointLight){const E=r.point[m];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(y),m++}else if(C.isHemisphereLight){const E=r.hemi[v];E.direction.setFromMatrixPosition(C.matrixWorld),E.direction.transformDirection(y),v++}}},state:r}}function lH(i,e){const t=new poe(i,e),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:function l(h){t.setup(n,h)},setupLightsView:function c(h){t.setupView(n,h)},pushLight:function o(h){n.push(h)},pushShadow:function a(h){r.push(h)}}}function moe(i,e){let t=new WeakMap;return{get:function n(s,o=0){const a=t.get(s);let l;return void 0===a?(l=new lH(i,e),t.set(s,[l])):o>=a.length?(l=new lH(i,e),a.push(l)):l=a[o],l},dispose:function r(){t=new WeakMap}}}class cH extends ho{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uH extends ho{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function yoe(i,e,t){let n=new iR;const r=new Me,s=new Me,o=new oi,a=new cH({depthPacking:3201}),l=new uH,c={},d=t.maxTextureSize,h={0:1,1:0,2:2},p=new Xu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const _=new ln;_.setAttribute("position",new Ii(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Yn(_,p),v=this;function y(C,E){const T=e.update(b);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===C.mapPass&&(C.mapPass=new wh(r.x,r.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,i.setRenderTarget(C.mapPass),i.clear(),i.renderBufferDirect(E,null,T,p,b,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,i.setRenderTarget(C.map),i.clear(),i.renderBufferDirect(E,null,T,m,b,null)}function M(C,E,T,O){let L=null;const A=!0===T.isPointLight?C.customDistanceMaterial:C.customDepthMaterial;if(void 0!==A)L=A;else if(L=!0===T.isPointLight?l:a,i.localClippingEnabled&&!0===E.clipShadows&&Array.isArray(E.clippingPlanes)&&0!==E.clippingPlanes.length||E.displacementMap&&0!==E.displacementScale||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const P=L.uuid,Y=E.uuid;let ie=c[P];void 0===ie&&(ie={},c[P]=ie);let H=ie[Y];void 0===H&&(H=L.clone(),ie[Y]=H),L=H}return L.visible=E.visible,L.wireframe=E.wireframe,L.side=3===O?null!==E.shadowSide?E.shadowSide:E.side:null!==E.shadowSide?E.shadowSide:h[E.side],L.alphaMap=E.alphaMap,L.alphaTest=E.alphaTest,L.map=E.map,L.clipShadows=E.clipShadows,L.clippingPlanes=E.clippingPlanes,L.clipIntersection=E.clipIntersection,L.displacementMap=E.displacementMap,L.displacementScale=E.displacementScale,L.displacementBias=E.displacementBias,L.wireframeLinewidth=E.wireframeLinewidth,L.linewidth=E.linewidth,!0===T.isPointLight&&!0===L.isMeshDistanceMaterial&&(i.properties.get(L).light=T),L}function x(C,E,T,O,L){if(!1===C.visible)return;if(C.layers.test(E.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&3===L)&&(!C.frustumCulled||n.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,C.matrixWorld);const Y=e.update(C),ie=C.material;if(Array.isArray(ie)){const H=Y.groups;for(let $=0,te=H.length;$<te;$++){const q=H[$],ne=ie[q.materialIndex];if(ne&&ne.visible){const K=M(C,ne,O,L);i.renderBufferDirect(T,null,Y,K,C,q)}}}else if(ie.visible){const H=M(C,ie,O,L);i.renderBufferDirect(T,null,Y,H,C,null)}}const P=C.children;for(let Y=0,ie=P.length;Y<ie;Y++)x(P[Y],E,T,O,L)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(C,E,T){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===C.length)return;const O=i.getRenderTarget(),L=i.getActiveCubeFace(),A=i.getActiveMipmapLevel(),P=i.state;P.setBlending(0),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);for(let Y=0,ie=C.length;Y<ie;Y++){const H=C[Y],$=H.shadow;if(void 0===$){console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");continue}if(!1===$.autoUpdate&&!1===$.needsUpdate)continue;r.copy($.mapSize);const te=$.getFrameExtents();r.multiply(te),s.copy($.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/te.x),r.x=s.x*te.x,$.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/te.y),r.y=s.y*te.y,$.mapSize.y=s.y)),null===$.map&&($.map=new wh(r.x,r.y,3!==this.type?{minFilter:Bi,magFilter:Bi}:{}),$.map.texture.name=H.name+".shadowMap",$.camera.updateProjectionMatrix()),i.setRenderTarget($.map),i.clear();const q=$.getViewportCount();for(let ne=0;ne<q;ne++){const K=$.getViewport(ne);o.set(s.x*K.x,s.y*K.y,s.x*K.z,s.y*K.w),P.viewport(o),$.updateMatrices(H,ne),n=$.getFrustum(),x(E,T,$.camera,H,this.type)}!0!==$.isPointLightShadow&&3===this.type&&y($,T),$.needsUpdate=!1}v.needsUpdate=!1,i.setRenderTarget(O,L,A)}}function voe(i,e,t){const n=t.isWebGL2,a=new function r(){let G=!1;const pe=new oi;let Re=null;const Je=new oi(0,0,0,0);return{setMask:function(pt){Re!==pt&&!G&&(i.colorMask(pt,pt,pt,pt),Re=pt)},setLocked:function(pt){G=pt},setClear:function(pt,xi,Vi,Cs,nd){!0===nd&&(pt*=Cs,xi*=Cs,Vi*=Cs),pe.set(pt,xi,Vi,Cs),!1===Je.equals(pe)&&(i.clearColor(pt,xi,Vi,Cs),Je.copy(pe))},reset:function(){G=!1,Re=null,Je.set(-1,0,0,0)}}},l=new function s(){let G=!1,pe=null,Re=null,Je=null;return{setTest:function(pt){pt?Z(2929):ut(2929)},setMask:function(pt){pe!==pt&&!G&&(i.depthMask(pt),pe=pt)},setFunc:function(pt){if(Re!==pt){switch(pt){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}Re=pt}},setLocked:function(pt){G=pt},setClear:function(pt){Je!==pt&&(i.clearDepth(pt),Je=pt)},reset:function(){G=!1,pe=null,Re=null,Je=null}}},c=new function o(){let G=!1,pe=null,Re=null,Je=null,pt=null,xi=null,Vi=null,Cs=null,nd=null;return{setTest:function(sr){G||(sr?Z(2960):ut(2960))},setMask:function(sr){pe!==sr&&!G&&(i.stencilMask(sr),pe=sr)},setFunc:function(sr,Ta,ql){(Re!==sr||Je!==Ta||pt!==ql)&&(i.stencilFunc(sr,Ta,ql),Re=sr,Je=Ta,pt=ql)},setOp:function(sr,Ta,ql){(xi!==sr||Vi!==Ta||Cs!==ql)&&(i.stencilOp(sr,Ta,ql),xi=sr,Vi=Ta,Cs=ql)},setLocked:function(sr){G=sr},setClear:function(sr){nd!==sr&&(i.clearStencil(sr),nd=sr)},reset:function(){G=!1,pe=null,Re=null,Je=null,pt=null,xi=null,Vi=null,Cs=null,nd=null}}},d=new WeakMap,h=new WeakMap;let p={},m={},_=new WeakMap,b=[],v=null,y=!1,M=null,x=null,C=null,E=null,T=null,O=null,L=null,A=!1,P=null,Y=null,ie=null,H=null,$=null;const te=i.getParameter(35661);let q=!1,ne=0;const K=i.getParameter(7938);-1!==K.indexOf("WebGL")?(ne=parseFloat(/^WebGL (\d)/.exec(K)[1]),q=ne>=1):-1!==K.indexOf("OpenGL ES")&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),q=ne>=2);let ce=null,xe={};const $e=i.getParameter(3088),Le=i.getParameter(2978),le=(new oi).fromArray($e),ue=(new oi).fromArray(Le);function Fe(G,pe,Re){const Je=new Uint8Array(4),pt=i.createTexture();i.bindTexture(G,pt),i.texParameteri(G,10241,9728),i.texParameteri(G,10240,9728);for(let xi=0;xi<Re;xi++)i.texImage2D(pe+xi,0,6408,1,1,0,6408,5121,Je);return pt}const Be={};function Z(G){!0!==p[G]&&(i.enable(G),p[G]=!0)}function ut(G){!1!==p[G]&&(i.disable(G),p[G]=!1)}Be[3553]=Fe(3553,3553,1),Be[34067]=Fe(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Z(2929),l.setFunc(3),We(!1),Rt(1),Z(2884),Ae(0);const Ee={100:32774,101:32778,102:32779};if(n)Ee[103]=32775,Ee[104]=32776;else{const G=e.get("EXT_blend_minmax");null!==G&&(Ee[103]=G.MIN_EXT,Ee[104]=G.MAX_EXT)}const ge={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Ae(G,pe,Re,Je,pt,xi,Vi,Cs){if(0!==G){if(!1===y&&(Z(3042),y=!0),5===G)pt=pt||pe,xi=xi||Re,Vi=Vi||Je,(pe!==x||pt!==T)&&(i.blendEquationSeparate(Ee[pe],Ee[pt]),x=pe,T=pt),(Re!==C||Je!==E||xi!==O||Vi!==L)&&(i.blendFuncSeparate(ge[Re],ge[Je],ge[xi],ge[Vi]),C=Re,E=Je,O=xi,L=Vi),M=G,A=!1;else if(G!==M||Cs!==A){if((100!==x||100!==T)&&(i.blendEquation(32774),x=100,T=100),Cs)switch(G){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",G)}else switch(G){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",G)}C=null,E=null,O=null,L=null,M=G,A=Cs}}else!0===y&&(ut(3042),y=!1)}function We(G){P!==G&&(i.frontFace(G?2304:2305),P=G)}function Rt(G){0!==G?(Z(2884),G!==Y&&i.cullFace(1===G?1029:2===G?1028:1032)):ut(2884),Y=G}function wt(G,pe,Re){G?(Z(32823),(H!==pe||$!==Re)&&(i.polygonOffset(pe,Re),H=pe,$=Re)):ut(32823)}return{buffers:{color:a,depth:l,stencil:c},enable:Z,disable:ut,bindFramebuffer:function it(G,pe){return m[G]!==pe&&(i.bindFramebuffer(G,pe),m[G]=pe,n&&(36009===G&&(m[36160]=pe),36160===G&&(m[36009]=pe)),!0)},drawBuffers:function De(G,pe){let Re=b,Je=!1;if(G)if(Re=_.get(pe),void 0===Re&&(Re=[],_.set(pe,Re)),G.isWebGLMultipleRenderTargets){const pt=G.texture;if(Re.length!==pt.length||36064!==Re[0]){for(let xi=0,Vi=pt.length;xi<Vi;xi++)Re[xi]=36064+xi;Re.length=pt.length,Je=!0}}else 36064!==Re[0]&&(Re[0]=36064,Je=!0);else 1029!==Re[0]&&(Re[0]=1029,Je=!0);Je&&(t.isWebGL2?i.drawBuffers(Re):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Re))},useProgram:function tt(G){return v!==G&&(i.useProgram(G),v=G,!0)},setBlending:Ae,setMaterial:function lt(G,pe){2===G.side?ut(2884):Z(2884);let Re=1===G.side;pe&&(Re=!Re),We(Re),1===G.blending&&!1===G.transparent?Ae(0):Ae(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha),l.setFunc(G.depthFunc),l.setTest(G.depthTest),l.setMask(G.depthWrite),a.setMask(G.colorWrite);const Je=G.stencilWrite;c.setTest(Je),Je&&(c.setMask(G.stencilWriteMask),c.setFunc(G.stencilFunc,G.stencilRef,G.stencilFuncMask),c.setOp(G.stencilFail,G.stencilZFail,G.stencilZPass)),wt(G.polygonOffset,G.polygonOffsetFactor,G.polygonOffsetUnits),!0===G.alphaToCoverage?Z(32926):ut(32926)},setFlipSided:We,setCullFace:Rt,setLineWidth:function Pt(G){G!==ie&&(q&&i.lineWidth(G),ie=G)},setPolygonOffset:wt,setScissorTest:function yn(G){G?Z(3089):ut(3089)},activeTexture:function Gn(G){void 0===G&&(G=33984+te-1),ce!==G&&(i.activeTexture(G),ce=G)},bindTexture:function B(G,pe,Re){void 0===Re&&(Re=null===ce?33984+te-1:ce);let Je=xe[Re];void 0===Je&&(Je={type:void 0,texture:void 0},xe[Re]=Je),(Je.type!==G||Je.texture!==pe)&&(ce!==Re&&(i.activeTexture(Re),ce=Re),i.bindTexture(G,pe||Be[G]),Je.type=G,Je.texture=pe)},unbindTexture:function k(){const G=xe[ce];void 0!==G&&void 0!==G.type&&(i.bindTexture(G.type,null),G.type=void 0,G.texture=void 0)},compressedTexImage2D:function de(){try{i.compressedTexImage2D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},compressedTexImage3D:function Ie(){try{i.compressedTexImage3D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},texImage2D:function Mt(){try{i.texImage2D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},texImage3D:function kt(){try{i.texImage3D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},updateUBOMapping:function On(G,pe){let Re=h.get(pe);void 0===Re&&(Re=new WeakMap,h.set(pe,Re));let Je=Re.get(G);void 0===Je&&(Je=i.getUniformBlockIndex(pe,G.name),Re.set(G,Je))},uniformBlockBinding:function ai(G,pe){const Je=h.get(pe).get(G);d.get(pe)!==Je&&(i.uniformBlockBinding(pe,Je,G.__bindingPointIndex),d.set(pe,Je))},texStorage2D:function me(){try{i.texStorage2D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},texStorage3D:function dt(){try{i.texStorage3D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},texSubImage2D:function ke(){try{i.texSubImage2D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},texSubImage3D:function je(){try{i.texSubImage3D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},compressedTexSubImage2D:function Ot(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},compressedTexSubImage3D:function rt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(G){console.error("THREE.WebGLState:",G)}},scissor:function ct(G){!1===le.equals(G)&&(i.scissor(G.x,G.y,G.z,G.w),le.copy(G))},viewport:function ft(G){!1===ue.equals(G)&&(i.viewport(G.x,G.y,G.z,G.w),ue.copy(G))},reset:function rr(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),p={},ce=null,xe={},m={},_=new WeakMap,b=[],v=null,y=!1,M=null,x=null,C=null,E=null,T=null,O=null,L=null,A=!1,P=null,Y=null,ie=null,H=null,$=null,le.set(0,0,i.canvas.width,i.canvas.height),ue.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}}}function boe(i,e,t,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,h=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let b;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function M(B,k){return y?new OffscreenCanvas(B,k):Mv("canvas")}function x(B,k,de,Ie){let ke=1;if((B.width>Ie||B.height>Ie)&&(ke=Ie/Math.max(B.width,B.height)),ke<1||!0===k){if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap){const je=k?pz:Math.floor,Ot=je(ke*B.width),rt=je(ke*B.height);void 0===b&&(b=M(Ot,rt));const me=de?M(Ot,rt):b;return me.width=Ot,me.height=rt,me.getContext("2d").drawImage(B,0,0,Ot,rt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+B.width+"x"+B.height+") to ("+Ot+"x"+rt+")."),me}return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+B.width+"x"+B.height+")."),B}return B}function C(B){return FI(B.width)&&FI(B.height)}function T(B,k){return B.generateMipmaps&&k&&B.minFilter!==Bi&&B.minFilter!==Xi}function O(B){i.generateMipmap(B)}function L(B,k,de,Ie,ke=!1){if(!1===a)return k;if(null!==B){if(void 0!==i[B])return i[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let je=k;return 6403===k&&(5126===de&&(je=33326),5131===de&&(je=33325),5121===de&&(je=33321)),33319===k&&(5126===de&&(je=33328),5131===de&&(je=33327),5121===de&&(je=33323)),6408===k&&(5126===de&&(je=34836),5131===de&&(je=34842),5121===de&&(je=Ie===Pn&&!1===ke?35907:32856),32819===de&&(je=32854),32820===de&&(je=32855)),(33325===je||33326===je||33327===je||33328===je||34842===je||34836===je)&&e.get("EXT_color_buffer_float"),je}function A(B,k,de){return!0===T(B,de)||B.isFramebufferTexture&&B.minFilter!==Bi&&B.minFilter!==Xi?Math.log2(Math.max(k.width,k.height))+1:void 0!==B.mipmaps&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?k.mipmaps.length:1}function P(B){return B===Bi||1004===B||1005===B?9728:9729}function Y(B){const k=B.target;k.removeEventListener("dispose",Y),function H(B){const k=n.get(B);if(void 0===k.__webglInit)return;const de=B.source,Ie=v.get(de);if(Ie){const ke=Ie[k.__cacheKey];ke.usedTimes--,0===ke.usedTimes&&$(B),0===Object.keys(Ie).length&&v.delete(de)}n.remove(B)}(k),k.isVideoTexture&&_.delete(k)}function ie(B){const k=B.target;k.removeEventListener("dispose",ie),function te(B){const k=B.texture,de=n.get(B),Ie=n.get(k);if(void 0!==Ie.__webglTexture&&(i.deleteTexture(Ie.__webglTexture),o.memory.textures--),B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let ke=0;ke<6;ke++)i.deleteFramebuffer(de.__webglFramebuffer[ke]),de.__webglDepthbuffer&&i.deleteRenderbuffer(de.__webglDepthbuffer[ke]);else{if(i.deleteFramebuffer(de.__webglFramebuffer),de.__webglDepthbuffer&&i.deleteRenderbuffer(de.__webglDepthbuffer),de.__webglMultisampledFramebuffer&&i.deleteFramebuffer(de.__webglMultisampledFramebuffer),de.__webglColorRenderbuffer)for(let ke=0;ke<de.__webglColorRenderbuffer.length;ke++)de.__webglColorRenderbuffer[ke]&&i.deleteRenderbuffer(de.__webglColorRenderbuffer[ke]);de.__webglDepthRenderbuffer&&i.deleteRenderbuffer(de.__webglDepthRenderbuffer)}if(B.isWebGLMultipleRenderTargets)for(let ke=0,je=k.length;ke<je;ke++){const Ot=n.get(k[ke]);Ot.__webglTexture&&(i.deleteTexture(Ot.__webglTexture),o.memory.textures--),n.remove(k[ke])}n.remove(k),n.remove(B)}(k)}function $(B){const k=n.get(B);i.deleteTexture(k.__webglTexture),delete v.get(B.source)[k.__cacheKey],o.memory.textures--}let q=0;function xe(B,k){const de=n.get(B);if(B.isVideoTexture&&function yn(B){const k=o.render.frame;_.get(B)!==k&&(_.set(B,k),B.update())}(B),!1===B.isRenderTargetTexture&&B.version>0&&de.__version!==B.version){const Ie=B.image;if(null===Ie)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ie.complete)return void ut(de,B,k);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,de.__webglTexture,33984+k)}const ue={[Uc]:10497,[tr]:33071,1002:33648},Fe={[Bi]:9728,1004:9984,1005:9986,[Xi]:9729,1007:9985,[Vc]:9987};function Be(B,k,de){if(de?(i.texParameteri(B,10242,ue[k.wrapS]),i.texParameteri(B,10243,ue[k.wrapT]),(32879===B||35866===B)&&i.texParameteri(B,32882,ue[k.wrapR]),i.texParameteri(B,10240,Fe[k.magFilter]),i.texParameteri(B,10241,Fe[k.minFilter])):(i.texParameteri(B,10242,33071),i.texParameteri(B,10243,33071),(32879===B||35866===B)&&i.texParameteri(B,32882,33071),(k.wrapS!==tr||k.wrapT!==tr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(B,10240,P(k.magFilter)),i.texParameteri(B,10241,P(k.minFilter)),k.minFilter!==Bi&&k.minFilter!==Xi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Ie=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===Bi||1005!==k.minFilter&&k.minFilter!==Vc||k.type===Gu&&!1===e.has("OES_texture_float_linear")||!1===a&&k.type===vv&&!1===e.has("OES_texture_half_float_linear"))return;(k.anisotropy>1||n.get(k).__currentAnisotropy)&&(i.texParameterf(B,Ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),n.get(k).__currentAnisotropy=k.anisotropy)}}function Z(B,k){let de=!1;void 0===B.__webglInit&&(B.__webglInit=!0,k.addEventListener("dispose",Y));const Ie=k.source;let ke=v.get(Ie);void 0===ke&&(ke={},v.set(Ie,ke));const je=function ce(B){const k=[];return k.push(B.wrapS),k.push(B.wrapT),k.push(B.wrapR||0),k.push(B.magFilter),k.push(B.minFilter),k.push(B.anisotropy),k.push(B.internalFormat),k.push(B.format),k.push(B.type),k.push(B.generateMipmaps),k.push(B.premultiplyAlpha),k.push(B.flipY),k.push(B.unpackAlignment),k.push(B.encoding),k.join()}(k);if(je!==B.__cacheKey){void 0===ke[je]&&(ke[je]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,de=!0),ke[je].usedTimes++;const Ot=ke[B.__cacheKey];void 0!==Ot&&(ke[B.__cacheKey].usedTimes--,0===Ot.usedTimes&&$(k)),B.__cacheKey=je,B.__webglTexture=ke[je].texture}return de}function ut(B,k,de){let Ie=3553;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(Ie=35866),k.isData3DTexture&&(Ie=32879);const ke=Z(B,k),je=k.source;t.bindTexture(Ie,B.__webglTexture,33984+de);const Ot=n.get(je);if(je.version!==Ot.__version||!0===ke){t.activeTexture(33984+de),i.pixelStorei(37440,k.flipY),i.pixelStorei(37441,k.premultiplyAlpha),i.pixelStorei(3317,k.unpackAlignment),i.pixelStorei(37443,0);const rt=function E(B){return!a&&(B.wrapS!==tr||B.wrapT!==tr||B.minFilter!==Bi&&B.minFilter!==Xi)}(k)&&!1===C(k.image);let me=x(k.image,rt,!1,d);me=Gn(k,me);const dt=C(me)||a,Mt=s.convert(k.format,k.encoding);let ft,kt=s.convert(k.type),ct=L(k.internalFormat,Mt,kt,k.encoding,k.isVideoTexture);Be(Ie,k,dt);const On=k.mipmaps,ai=a&&!0!==k.isVideoTexture,rr=void 0===Ot.__version||!0===ke,G=A(k,me,dt);if(k.isDepthTexture)ct=6402,a?ct=k.type===Gu?36012:k.type===_h?33190:k.type===fm?35056:33189:k.type===Gu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===yh&&6402===ct&&1012!==k.type&&k.type!==_h&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=_h,kt=s.convert(k.type)),k.format===pm&&6402===ct&&(ct=34041,k.type!==fm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=fm,kt=s.convert(k.type))),rr&&(ai?t.texStorage2D(3553,1,ct,me.width,me.height):t.texImage2D(3553,0,ct,me.width,me.height,0,Mt,kt,null));else if(k.isDataTexture)if(On.length>0&&dt){ai&&rr&&t.texStorage2D(3553,G,ct,On[0].width,On[0].height);for(let pe=0,Re=On.length;pe<Re;pe++)ft=On[pe],ai?t.texSubImage2D(3553,pe,0,0,ft.width,ft.height,Mt,kt,ft.data):t.texImage2D(3553,pe,ct,ft.width,ft.height,0,Mt,kt,ft.data);k.generateMipmaps=!1}else ai?(rr&&t.texStorage2D(3553,G,ct,me.width,me.height),t.texSubImage2D(3553,0,0,0,me.width,me.height,Mt,kt,me.data)):t.texImage2D(3553,0,ct,me.width,me.height,0,Mt,kt,me.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){ai&&rr&&t.texStorage3D(35866,G,ct,On[0].width,On[0].height,me.depth);for(let pe=0,Re=On.length;pe<Re;pe++)ft=On[pe],k.format!==ba?null!==Mt?ai?t.compressedTexSubImage3D(35866,pe,0,0,0,ft.width,ft.height,me.depth,Mt,ft.data,0,0):t.compressedTexImage3D(35866,pe,ct,ft.width,ft.height,me.depth,0,ft.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ai?t.texSubImage3D(35866,pe,0,0,0,ft.width,ft.height,me.depth,Mt,kt,ft.data):t.texImage3D(35866,pe,ct,ft.width,ft.height,me.depth,0,Mt,kt,ft.data)}else{ai&&rr&&t.texStorage2D(3553,G,ct,On[0].width,On[0].height);for(let pe=0,Re=On.length;pe<Re;pe++)ft=On[pe],k.format!==ba?null!==Mt?ai?t.compressedTexSubImage2D(3553,pe,0,0,ft.width,ft.height,Mt,ft.data):t.compressedTexImage2D(3553,pe,ct,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ai?t.texSubImage2D(3553,pe,0,0,ft.width,ft.height,Mt,kt,ft.data):t.texImage2D(3553,pe,ct,ft.width,ft.height,0,Mt,kt,ft.data)}else if(k.isDataArrayTexture)ai?(rr&&t.texStorage3D(35866,G,ct,me.width,me.height,me.depth),t.texSubImage3D(35866,0,0,0,0,me.width,me.height,me.depth,Mt,kt,me.data)):t.texImage3D(35866,0,ct,me.width,me.height,me.depth,0,Mt,kt,me.data);else if(k.isData3DTexture)ai?(rr&&t.texStorage3D(32879,G,ct,me.width,me.height,me.depth),t.texSubImage3D(32879,0,0,0,0,me.width,me.height,me.depth,Mt,kt,me.data)):t.texImage3D(32879,0,ct,me.width,me.height,me.depth,0,Mt,kt,me.data);else if(k.isFramebufferTexture){if(rr)if(ai)t.texStorage2D(3553,G,ct,me.width,me.height);else{let pe=me.width,Re=me.height;for(let Je=0;Je<G;Je++)t.texImage2D(3553,Je,ct,pe,Re,0,Mt,kt,null),pe>>=1,Re>>=1}}else if(On.length>0&&dt){ai&&rr&&t.texStorage2D(3553,G,ct,On[0].width,On[0].height);for(let pe=0,Re=On.length;pe<Re;pe++)ft=On[pe],ai?t.texSubImage2D(3553,pe,0,0,Mt,kt,ft):t.texImage2D(3553,pe,ct,Mt,kt,ft);k.generateMipmaps=!1}else ai?(rr&&t.texStorage2D(3553,G,ct,me.width,me.height),t.texSubImage2D(3553,0,0,0,Mt,kt,me)):t.texImage2D(3553,0,ct,Mt,kt,me);T(k,dt)&&O(Ie),Ot.__version=je.version,k.onUpdate&&k.onUpdate(k)}B.__version=k.version}function De(B,k,de,Ie,ke){const je=s.convert(de.format,de.encoding),Ot=s.convert(de.type),rt=L(de.internalFormat,je,Ot,de.encoding);n.get(k).__hasExternalTextures||(32879===ke||35866===ke?t.texImage3D(ke,0,rt,k.width,k.height,k.depth,0,je,Ot,null):t.texImage2D(ke,0,rt,k.width,k.height,0,je,Ot,null)),t.bindFramebuffer(36160,B),wt(k)?p.framebufferTexture2DMultisampleEXT(36160,Ie,ke,n.get(de).__webglTexture,0,Pt(k)):(3553===ke||ke>=34069&&ke<=34074)&&i.framebufferTexture2D(36160,Ie,ke,n.get(de).__webglTexture,0),t.bindFramebuffer(36160,null)}function tt(B,k,de){if(i.bindRenderbuffer(36161,B),k.depthBuffer&&!k.stencilBuffer){let Ie=33189;if(de||wt(k)){const ke=k.depthTexture;ke&&ke.isDepthTexture&&(ke.type===Gu?Ie=36012:ke.type===_h&&(Ie=33190));const je=Pt(k);wt(k)?p.renderbufferStorageMultisampleEXT(36161,je,Ie,k.width,k.height):i.renderbufferStorageMultisample(36161,je,Ie,k.width,k.height)}else i.renderbufferStorage(36161,Ie,k.width,k.height);i.framebufferRenderbuffer(36160,36096,36161,B)}else if(k.depthBuffer&&k.stencilBuffer){const Ie=Pt(k);de&&!1===wt(k)?i.renderbufferStorageMultisample(36161,Ie,35056,k.width,k.height):wt(k)?p.renderbufferStorageMultisampleEXT(36161,Ie,35056,k.width,k.height):i.renderbufferStorage(36161,34041,k.width,k.height),i.framebufferRenderbuffer(36160,33306,36161,B)}else{const Ie=!0===k.isWebGLMultipleRenderTargets?k.texture:[k.texture];for(let ke=0;ke<Ie.length;ke++){const je=Ie[ke],Ot=s.convert(je.format,je.encoding),rt=s.convert(je.type),me=L(je.internalFormat,Ot,rt,je.encoding),dt=Pt(k);de&&!1===wt(k)?i.renderbufferStorageMultisample(36161,dt,me,k.width,k.height):wt(k)?p.renderbufferStorageMultisampleEXT(36161,dt,me,k.width,k.height):i.renderbufferStorage(36161,me,k.width,k.height)}}i.bindRenderbuffer(36161,null)}function ge(B){const k=n.get(B),de=!0===B.isWebGLCubeRenderTarget;if(B.depthTexture&&!k.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");!function Ee(B,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,B),!k.depthTexture||!k.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),xe(k.depthTexture,0);const Ie=n.get(k.depthTexture).__webglTexture,ke=Pt(k);if(k.depthTexture.format===yh)wt(k)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ie,0,ke):i.framebufferTexture2D(36160,36096,3553,Ie,0);else{if(k.depthTexture.format!==pm)throw new Error("Unknown depthTexture format");wt(k)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ie,0,ke):i.framebufferTexture2D(36160,33306,3553,Ie,0)}}(k.__webglFramebuffer,B)}else if(de){k.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)t.bindFramebuffer(36160,k.__webglFramebuffer[Ie]),k.__webglDepthbuffer[Ie]=i.createRenderbuffer(),tt(k.__webglDepthbuffer[Ie],B,!1)}else t.bindFramebuffer(36160,k.__webglFramebuffer),k.__webglDepthbuffer=i.createRenderbuffer(),tt(k.__webglDepthbuffer,B,!1);t.bindFramebuffer(36160,null)}function Pt(B){return Math.min(h,B.samples)}function wt(B){const k=n.get(B);return a&&B.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==k.__useRenderToTexture}function Gn(B,k){const de=B.encoding,Ie=B.format,ke=B.type;return!0===B.isCompressedTexture||!0===B.isVideoTexture||1035===B.format||de!==vh&&(de===Pn?!1===a?!0===e.has("EXT_sRGB")&&Ie===ba?(B.format=1035,B.minFilter=Xi,B.generateMipmaps=!1):k=gz.sRGBToLinear(k):(Ie!==ba||ke!==gh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",de)),k}this.allocateTextureUnit=function K(){const B=q;return B>=l&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+l),q+=1,B},this.resetTextureUnits=function ne(){q=0},this.setTexture2D=xe,this.setTexture2DArray=function $e(B,k){const de=n.get(B);B.version>0&&de.__version!==B.version?ut(de,B,k):t.bindTexture(35866,de.__webglTexture,33984+k)},this.setTexture3D=function Le(B,k){const de=n.get(B);B.version>0&&de.__version!==B.version?ut(de,B,k):t.bindTexture(32879,de.__webglTexture,33984+k)},this.setTextureCube=function le(B,k){const de=n.get(B);B.version>0&&de.__version!==B.version?function it(B,k,de){if(6!==k.image.length)return;const Ie=Z(B,k),ke=k.source;t.bindTexture(34067,B.__webglTexture,33984+de);const je=n.get(ke);if(ke.version!==je.__version||!0===Ie){t.activeTexture(33984+de),i.pixelStorei(37440,k.flipY),i.pixelStorei(37441,k.premultiplyAlpha),i.pixelStorei(3317,k.unpackAlignment),i.pixelStorei(37443,0);const Ot=k.isCompressedTexture||k.image[0].isCompressedTexture,rt=k.image[0]&&k.image[0].isDataTexture,me=[];for(let pe=0;pe<6;pe++)me[pe]=Ot||rt?rt?k.image[pe].image:k.image[pe]:x(k.image[pe],!1,!0,c),me[pe]=Gn(k,me[pe]);const dt=me[0],Mt=C(dt)||a,kt=s.convert(k.format,k.encoding),ct=s.convert(k.type),ft=L(k.internalFormat,kt,ct,k.encoding),On=a&&!0!==k.isVideoTexture,ai=void 0===je.__version||!0===Ie;let G,rr=A(k,dt,Mt);if(Be(34067,k,Mt),Ot){On&&ai&&t.texStorage2D(34067,rr,ft,dt.width,dt.height);for(let pe=0;pe<6;pe++){G=me[pe].mipmaps;for(let Re=0;Re<G.length;Re++){const Je=G[Re];k.format!==ba?null!==kt?On?t.compressedTexSubImage2D(34069+pe,Re,0,0,Je.width,Je.height,kt,Je.data):t.compressedTexImage2D(34069+pe,Re,ft,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):On?t.texSubImage2D(34069+pe,Re,0,0,Je.width,Je.height,kt,ct,Je.data):t.texImage2D(34069+pe,Re,ft,Je.width,Je.height,0,kt,ct,Je.data)}}}else{G=k.mipmaps,On&&ai&&(G.length>0&&rr++,t.texStorage2D(34067,rr,ft,me[0].width,me[0].height));for(let pe=0;pe<6;pe++)if(rt){On?t.texSubImage2D(34069+pe,0,0,0,me[pe].width,me[pe].height,kt,ct,me[pe].data):t.texImage2D(34069+pe,0,ft,me[pe].width,me[pe].height,0,kt,ct,me[pe].data);for(let Re=0;Re<G.length;Re++){const pt=G[Re].image[pe].image;On?t.texSubImage2D(34069+pe,Re+1,0,0,pt.width,pt.height,kt,ct,pt.data):t.texImage2D(34069+pe,Re+1,ft,pt.width,pt.height,0,kt,ct,pt.data)}}else{On?t.texSubImage2D(34069+pe,0,0,0,kt,ct,me[pe]):t.texImage2D(34069+pe,0,ft,kt,ct,me[pe]);for(let Re=0;Re<G.length;Re++){const Je=G[Re];On?t.texSubImage2D(34069+pe,Re+1,0,0,kt,ct,Je.image[pe]):t.texImage2D(34069+pe,Re+1,ft,kt,ct,Je.image[pe])}}}T(k,Mt)&&O(34067),je.__version=ke.version,k.onUpdate&&k.onUpdate(k)}B.__version=k.version}(de,B,k):t.bindTexture(34067,de.__webglTexture,33984+k)},this.rebindTextures=function Ae(B,k,de){const Ie=n.get(B);void 0!==k&&De(Ie.__webglFramebuffer,B,B.texture,36064,3553),void 0!==de&&ge(B)},this.setupRenderTarget=function lt(B){const k=B.texture,de=n.get(B),Ie=n.get(k);B.addEventListener("dispose",ie),!0!==B.isWebGLMultipleRenderTargets&&(void 0===Ie.__webglTexture&&(Ie.__webglTexture=i.createTexture()),Ie.__version=k.version,o.memory.textures++);const ke=!0===B.isWebGLCubeRenderTarget,je=!0===B.isWebGLMultipleRenderTargets,Ot=C(B)||a;if(ke){de.__webglFramebuffer=[];for(let rt=0;rt<6;rt++)de.__webglFramebuffer[rt]=i.createFramebuffer()}else{if(de.__webglFramebuffer=i.createFramebuffer(),je)if(r.drawBuffers){const rt=B.texture;for(let me=0,dt=rt.length;me<dt;me++){const Mt=n.get(rt[me]);void 0===Mt.__webglTexture&&(Mt.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&B.samples>0&&!1===wt(B)){const rt=je?k:[k];de.__webglMultisampledFramebuffer=i.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,de.__webglMultisampledFramebuffer);for(let me=0;me<rt.length;me++){const dt=rt[me];de.__webglColorRenderbuffer[me]=i.createRenderbuffer(),i.bindRenderbuffer(36161,de.__webglColorRenderbuffer[me]);const Mt=s.convert(dt.format,dt.encoding),kt=s.convert(dt.type),ct=L(dt.internalFormat,Mt,kt,dt.encoding,!0===B.isXRRenderTarget),ft=Pt(B);i.renderbufferStorageMultisample(36161,ft,ct,B.width,B.height),i.framebufferRenderbuffer(36160,36064+me,36161,de.__webglColorRenderbuffer[me])}i.bindRenderbuffer(36161,null),B.depthBuffer&&(de.__webglDepthRenderbuffer=i.createRenderbuffer(),tt(de.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(36160,null)}}if(ke){t.bindTexture(34067,Ie.__webglTexture),Be(34067,k,Ot);for(let rt=0;rt<6;rt++)De(de.__webglFramebuffer[rt],B,k,36064,34069+rt);T(k,Ot)&&O(34067),t.unbindTexture()}else if(je){const rt=B.texture;for(let me=0,dt=rt.length;me<dt;me++){const Mt=rt[me],kt=n.get(Mt);t.bindTexture(3553,kt.__webglTexture),Be(3553,Mt,Ot),De(de.__webglFramebuffer,B,Mt,36064+me,3553),T(Mt,Ot)&&O(3553)}t.unbindTexture()}else{let rt=3553;(B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(a?rt=B.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(rt,Ie.__webglTexture),Be(rt,k,Ot),De(de.__webglFramebuffer,B,k,36064,rt),T(k,Ot)&&O(rt),t.unbindTexture()}B.depthBuffer&&ge(B)},this.updateRenderTargetMipmap=function We(B){const k=C(B)||a,de=!0===B.isWebGLMultipleRenderTargets?B.texture:[B.texture];for(let Ie=0,ke=de.length;Ie<ke;Ie++){const je=de[Ie];if(T(je,k)){const Ot=B.isWebGLCubeRenderTarget?34067:3553,rt=n.get(je).__webglTexture;t.bindTexture(Ot,rt),O(Ot),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Rt(B){if(a&&B.samples>0&&!1===wt(B)){const k=B.isWebGLMultipleRenderTargets?B.texture:[B.texture],de=B.width,Ie=B.height;let ke=16384;const je=[],Ot=B.stencilBuffer?33306:36096,rt=n.get(B),me=!0===B.isWebGLMultipleRenderTargets;if(me)for(let dt=0;dt<k.length;dt++)t.bindFramebuffer(36160,rt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+dt,36161,null),t.bindFramebuffer(36160,rt.__webglFramebuffer),i.framebufferTexture2D(36009,36064+dt,3553,null,0);t.bindFramebuffer(36008,rt.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,rt.__webglFramebuffer);for(let dt=0;dt<k.length;dt++){je.push(36064+dt),B.depthBuffer&&je.push(Ot);const Mt=void 0!==rt.__ignoreDepthValues&&rt.__ignoreDepthValues;if(!1===Mt&&(B.depthBuffer&&(ke|=256),B.stencilBuffer&&(ke|=1024)),me&&i.framebufferRenderbuffer(36008,36064,36161,rt.__webglColorRenderbuffer[dt]),!0===Mt&&(i.invalidateFramebuffer(36008,[Ot]),i.invalidateFramebuffer(36009,[Ot])),me){const kt=n.get(k[dt]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,kt,0)}i.blitFramebuffer(0,0,de,Ie,0,0,de,Ie,ke,9728),m&&i.invalidateFramebuffer(36008,je)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),me)for(let dt=0;dt<k.length;dt++){t.bindFramebuffer(36160,rt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+dt,36161,rt.__webglColorRenderbuffer[dt]);const Mt=n.get(k[dt]).__webglTexture;t.bindFramebuffer(36160,rt.__webglFramebuffer),i.framebufferTexture2D(36009,36064+dt,3553,Mt,0)}t.bindFramebuffer(36009,rt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ge,this.setupFrameBufferTexture=De,this.useMultisampledRTT=wt}function xoe(i,e,t){const n=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===gh)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===_h)return 5125;if(s===Gu)return 5126;if(s===vv)return n?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===ba)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===yh)return 6402;if(s===pm)return 34041;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===s)return 6403;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Pn){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===Pn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Pn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===Pn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===s||36284===s||36285===s||36286===s){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===s)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===s)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===s)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===s)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===fm?n?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class woe extends br{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class wa extends Fr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Moe={type:"move"};class cR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new wa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new wa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new wa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const b of e.hand.values()){const v=t.getJointPose(b,n),y=this._getHandJoint(c,b);null!==v&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=v.radius),y.visible=null!==v}const p=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),m=.02,_=.005;c.inputState.pinching&&p>m+_?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-_&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Moe)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new wa;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Coe extends el{constructor(e,t,n,r,s,o,a,l,c,d){if((d=void 0!==d?d:yh)!==yh&&d!==pm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&d===yh&&(n=_h),void 0===n&&d===pm&&(n=fm),super(null,r,s,o,a,l,d,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Bi,this.minFilter=void 0!==l?l:Bi,this.flipY=!1,this.generateMipmaps=!1}}class Soe extends ym{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,h=null,p=null,m=null,_=null;const b=t.getContextAttributes();let v=null,y=null;const M=[],x=[],C=new Set,E=new Map,T=new br;T.layers.enable(1),T.viewport=new oi;const O=new br;O.layers.enable(2),O.viewport=new oi;const L=[T,O],A=new woe;A.layers.enable(1),A.layers.enable(2);let P=null,Y=null;function ie(le){const ue=x.indexOf(le.inputSource);if(-1===ue)return;const Fe=M[ue];void 0!==Fe&&Fe.dispatchEvent({type:le.type,data:le.inputSource})}function H(){r.removeEventListener("select",ie),r.removeEventListener("selectstart",ie),r.removeEventListener("selectend",ie),r.removeEventListener("squeeze",ie),r.removeEventListener("squeezestart",ie),r.removeEventListener("squeezeend",ie),r.removeEventListener("end",H),r.removeEventListener("inputsourceschange",$);for(let le=0;le<M.length;le++){const ue=x[le];null!==ue&&(x[le]=null,M[le].disconnect(ue))}P=null,Y=null,e.setRenderTarget(v),m=null,p=null,h=null,r=null,y=null,Le.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function $(le){for(let ue=0;ue<le.removed.length;ue++){const Fe=le.removed[ue],Be=x.indexOf(Fe);Be>=0&&(x[Be]=null,M[Be].disconnect(Fe))}for(let ue=0;ue<le.added.length;ue++){const Fe=le.added[ue];let Be=x.indexOf(Fe);if(-1===Be){for(let ut=0;ut<M.length;ut++){if(ut>=x.length){x.push(Fe),Be=ut;break}if(null===x[ut]){x[ut]=Fe,Be=ut;break}}if(-1===Be)break}const Z=M[Be];Z&&Z.connect(Fe)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let ue=M[le];return void 0===ue&&(ue=new cR,M[le]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(le){let ue=M[le];return void 0===ue&&(ue=new cR,M[le]=ue),ue.getGripSpace()},this.getHand=function(le){let ue=M[le];return void 0===ue&&(ue=new cR,M[le]=ue),ue.getHandSpace()},this.setFramebufferScaleFactor=function(le){s=le,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){a=le,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(le){c=le},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return h},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=function(){var le=an(function*(ue){if(r=ue,null!==r){if(v=e.getRenderTarget(),r.addEventListener("select",ie),r.addEventListener("selectstart",ie),r.addEventListener("selectend",ie),r.addEventListener("squeeze",ie),r.addEventListener("squeezestart",ie),r.addEventListener("squeezeend",ie),r.addEventListener("end",H),r.addEventListener("inputsourceschange",$),!0!==b.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)m=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||b.antialias,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:m}),y=new wh(m.framebufferWidth,m.framebufferHeight,{format:ba,type:gh,encoding:e.outputEncoding,stencilBuffer:b.stencil});else{let Fe=null,Be=null,Z=null;b.depth&&(Z=b.stencil?35056:33190,Fe=b.stencil?pm:yh,Be=b.stencil?fm:_h);const ut={colorFormat:32856,depthFormat:Z,scaleFactor:s};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer(ut),r.updateRenderState({layers:[p]}),y=new wh(p.textureWidth,p.textureHeight,{format:ba,type:gh,depthTexture:new Coe(p.textureWidth,p.textureHeight,Be,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:b.stencil,encoding:e.outputEncoding,samples:b.antialias?4:0}),e.properties.get(y).__ignoreDepthValues=p.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),Le.setContext(r),Le.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(ue){return le.apply(this,arguments)}}();const te=new F,q=new F;function K(le,ue){null===ue?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(ue.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(null===r)return;A.near=O.near=T.near=le.near,A.far=O.far=T.far=le.far,(P!==A.near||Y!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),P=A.near,Y=A.far);const ue=le.parent,Fe=A.cameras;K(A,ue);for(let Be=0;Be<Fe.length;Be++)K(Fe[Be],ue);2===Fe.length?function ne(le,ue,Fe){te.setFromMatrixPosition(ue.matrixWorld),q.setFromMatrixPosition(Fe.matrixWorld);const Be=te.distanceTo(q),Z=ue.projectionMatrix.elements,ut=Fe.projectionMatrix.elements,it=Z[14]/(Z[10]-1),De=Z[14]/(Z[10]+1),tt=(Z[9]+1)/Z[5],Ee=(Z[9]-1)/Z[5],ge=(Z[8]-1)/Z[0],Ae=(ut[8]+1)/ut[0],lt=it*ge,We=it*Ae,Rt=Be/(-ge+Ae),Pt=Rt*-ge;ue.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(Pt),le.translateZ(Rt),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert();const wt=it+Rt,yn=De+Rt;le.projectionMatrix.makePerspective(lt-Pt,We+(Be-Pt),tt*De/yn*wt,Ee*De/yn*wt,wt,yn),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}(A,T,O):A.projectionMatrix.copy(T.projectionMatrix),function ce(le,ue,Fe){null===Fe?le.matrix.copy(ue.matrixWorld):(le.matrix.copy(Fe.matrixWorld),le.matrix.invert(),le.matrix.multiply(ue.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0);const Be=le.children;for(let Z=0,ut=Be.length;Z<ut;Z++)Be[Z].updateMatrixWorld(!0);le.projectionMatrix.copy(ue.projectionMatrix),le.projectionMatrixInverse.copy(ue.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=2*vm*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}(le,A,ue)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==p||null!==m)return l},this.setFoveation=function(le){l=le,null!==p&&(p.fixedFoveation=le),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=le)},this.getPlanes=function(){return C};let xe=null;const Le=new Fz;Le.setAnimationLoop(function $e(le,ue){if(d=ue.getViewerPose(c||o),_=ue,null!==d){const Fe=d.views;null!==m&&(e.setRenderTargetFramebuffer(y,m.framebuffer),e.setRenderTarget(y));let Be=!1;Fe.length!==A.cameras.length&&(A.cameras.length=0,Be=!0);for(let Z=0;Z<Fe.length;Z++){const ut=Fe[Z];let it=null;if(null!==m)it=m.getViewport(ut);else{const tt=h.getViewSubImage(p,ut);it=tt.viewport,0===Z&&(e.setRenderTargetTextures(y,tt.colorTexture,p.ignoreDepthValues?void 0:tt.depthStencilTexture),e.setRenderTarget(y))}let De=L[Z];void 0===De&&(De=new br,De.layers.enable(Z),De.viewport=new oi,L[Z]=De),De.matrix.fromArray(ut.transform.matrix),De.matrix.decompose(De.position,De.quaternion,De.scale),De.projectionMatrix.fromArray(ut.projectionMatrix),De.projectionMatrixInverse.copy(De.projectionMatrix).invert(),De.viewport.set(it.x,it.y,it.width,it.height),0===Z&&(A.matrix.copy(De.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===Be&&A.cameras.push(De)}}for(let Fe=0;Fe<M.length;Fe++){const Be=x[Fe],Z=M[Fe];null!==Be&&void 0!==Z&&Z.update(Be,ue,c||o)}if(xe&&xe(le,ue),ue.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:ue.detectedPlanes});let Fe=null;for(const Be of C)ue.detectedPlanes.has(Be)||(null===Fe&&(Fe=[]),Fe.push(Be));if(null!==Fe)for(const Be of Fe)C.delete(Be),E.delete(Be),n.dispatchEvent({type:"planeremoved",data:Be});for(const Be of ue.detectedPlanes)if(C.has(Be)){const Z=E.get(Be);Be.lastChangedTime>Z&&(E.set(Be,Be.lastChangedTime),n.dispatchEvent({type:"planechanged",data:Be}))}else C.add(Be),E.set(Be,ue.lastChangedTime),n.dispatchEvent({type:"planeadded",data:Be})}_=null}),this.setAnimationLoop=function(le){xe=le},this.dispose=function(){}}}function Eoe(i,e){function t(v,y){!0===v.matrixAutoUpdate&&v.updateMatrix(),y.value.copy(v.matrix)}function s(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map,t(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.bumpMap&&(v.bumpMap.value=y.bumpMap,t(y.bumpMap,v.bumpMapTransform),v.bumpScale.value=y.bumpScale,1===y.side&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,t(y.normalMap,v.normalMapTransform),v.normalScale.value.copy(y.normalScale),1===y.side&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,t(y.displacementMap,v.displacementMapTransform),v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,v.emissiveMapTransform)),y.specularMap&&(v.specularMap.value=y.specularMap,t(y.specularMap,v.specularMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const M=e.get(y).envMap;if(M&&(v.envMap.value=M,v.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap){v.lightMap.value=y.lightMap;const x=!0===i.useLegacyLights?Math.PI:1;v.lightMapIntensity.value=y.lightMapIntensity*x,t(y.lightMap,v.lightMapTransform)}y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,v.aoMapTransform))}return{refreshFogUniforms:function n(v,y){y.color.getRGB(v.fogColor.value,Lz(i)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)},refreshMaterialUniforms:function r(v,y,M,x,C){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(v,y):y.isMeshToonMaterial?(s(v,y),function h(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}(v,y)):y.isMeshPhongMaterial?(s(v,y),function d(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}(v,y)):y.isMeshStandardMaterial?(s(v,y),function p(v,y){v.metalness.value=y.metalness,y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,v.metalnessMapTransform)),v.roughness.value=y.roughness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,v.roughnessMapTransform)),e.get(y).envMap&&(v.envMapIntensity.value=y.envMapIntensity)}(v,y),y.isMeshPhysicalMaterial&&function m(v,y,M){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,v.sheenColorMapTransform)),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,v.sheenRoughnessMapTransform))),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,v.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(v.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),1===y.side&&v.clearcoatNormalScale.value.negate())),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,v.iridescenceMapTransform)),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=M.texture,v.transmissionSamplerSize.value.set(M.width,M.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,v.transmissionMapTransform)),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,v.specularColorMapTransform)),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,v.specularIntensityMapTransform))}(v,y,C)):y.isMeshMatcapMaterial?(s(v,y),function _(v,y){y.matcap&&(v.matcap.value=y.matcap)}(v,y)):y.isMeshDepthMaterial?s(v,y):y.isMeshDistanceMaterial?(s(v,y),function b(v,y){const M=e.get(y).light;v.referencePosition.value.setFromMatrixPosition(M.matrixWorld),v.nearDistance.value=M.shadow.camera.near,v.farDistance.value=M.shadow.camera.far}(v,y)):y.isMeshNormalMaterial?s(v,y):y.isLineBasicMaterial?(function o(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,y.map&&(v.map.value=y.map,t(y.map,v.mapTransform))}(v,y),y.isLineDashedMaterial&&function a(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}(v,y)):y.isPointsMaterial?function l(v,y,M,x){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*M,v.scale.value=.5*x,y.map&&(v.map.value=y.map,t(y.map,v.uvTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}(v,y,M,x):y.isSpriteMaterial?function c(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map,t(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}}}function Aoe(i,e,t,n){let r={},s={},o=[];const a=t.isWebGL2?i.getParameter(35375):0;function m(M,x,C){const E=M.value;if(void 0===C[x]){if("number"==typeof E)C[x]=E;else{const T=Array.isArray(E)?E:[E],O=[];for(let L=0;L<T.length;L++)O.push(T[L].clone());C[x]=O}return!0}if("number"==typeof E){if(C[x]!==E)return C[x]=E,!0}else{const T=Array.isArray(C[x])?C[x]:[C[x]],O=Array.isArray(E)?E:[E];for(let L=0;L<T.length;L++){const A=T[L];if(!1===A.equals(O[L]))return A.copy(O[L]),!0}}return!1}function b(M){const x={boundary:0,storage:0};return"number"==typeof M?(x.boundary=4,x.storage=4):M.isVector2?(x.boundary=8,x.storage=8):M.isVector3||M.isColor?(x.boundary=16,x.storage=12):M.isVector4?(x.boundary=16,x.storage=16):M.isMatrix3?(x.boundary=48,x.storage=48):M.isMatrix4?(x.boundary=64,x.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),x}function v(M){const x=M.target;x.removeEventListener("dispose",v);const C=o.indexOf(x.__bindingPointIndex);o.splice(C,1),i.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}return{bind:function l(M,x){n.uniformBlockBinding(M,x.program)},update:function c(M,x){let C=r[M.id];void 0===C&&(function _(M){const x=M.uniforms;let C=0;let T=0;for(let O=0,L=x.length;O<L;O++){const A=x[O],P={boundary:0,storage:0},Y=Array.isArray(A.value)?A.value:[A.value];for(let ie=0,H=Y.length;ie<H;ie++){const te=b(Y[ie]);P.boundary+=te.boundary,P.storage+=te.storage}if(A.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=C,O>0){T=C%16;const ie=16-T;0!==T&&ie-P.boundary<0&&(C+=16-T,A.__offset=C)}C+=P.storage}T=C%16,T>0&&(C+=16-T),M.__size=C,M.__cache={}}(M),C=function d(M){const x=function h(){for(let M=0;M<a;M++)if(-1===o.indexOf(M))return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();M.__bindingPointIndex=x;const C=i.createBuffer(),E=M.__size,T=M.usage;return i.bindBuffer(35345,C),i.bufferData(35345,E,T),i.bindBuffer(35345,null),i.bindBufferBase(35345,x,C),C}(M),r[M.id]=C,M.addEventListener("dispose",v)),n.updateUBOMapping(M,x.program);const T=e.render.frame;s[M.id]!==T&&(function p(M){const C=M.uniforms,E=M.__cache;i.bindBuffer(35345,r[M.id]);for(let T=0,O=C.length;T<O;T++){const L=C[T];if(!0===m(L,T,E)){const A=L.__offset,P=Array.isArray(L.value)?L.value:[L.value];let Y=0;for(let ie=0;ie<P.length;ie++){const H=P[ie],$=b(H);"number"==typeof H?(L.__data[0]=H,i.bufferSubData(35345,A+Y,L.__data)):H.isMatrix3?(L.__data[0]=H.elements[0],L.__data[1]=H.elements[1],L.__data[2]=H.elements[2],L.__data[3]=H.elements[0],L.__data[4]=H.elements[3],L.__data[5]=H.elements[4],L.__data[6]=H.elements[5],L.__data[7]=H.elements[0],L.__data[8]=H.elements[6],L.__data[9]=H.elements[7],L.__data[10]=H.elements[8],L.__data[11]=H.elements[0]):(H.toArray(L.__data,Y),Y+=$.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(35345,A,L.__data)}}i.bindBuffer(35345,null)}(M),s[M.id]=T)},dispose:function y(){for(const M in r)i.deleteBuffer(r[M]);o=[],r={},s={}}}}function Doe(){const i=Mv("canvas");return i.style.display="block",i}class dH{constructor(e={}){const{canvas:t=Doe(),context:n=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1}=e;let p;this.isWebGLRenderer=!0,p=null!==n?n.getContextAttributes().alpha:o;let m=null,_=null;const b=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=vh,this.useLegacyLights=!0,this.toneMapping=0,this.toneMappingExposure=1;const y=this;let M=!1,x=0,C=0,E=null,T=-1,O=null;const L=new oi,A=new oi;let P=null,Y=t.width,ie=t.height,H=1,$=null,te=null;const q=new oi(0,0,Y,ie),ne=new oi(0,0,Y,ie);let K=!1;const ce=new iR;let xe=!1,$e=!1,Le=null;const le=new jt,ue=new F,Fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Be(){return null===E?H:1}let it,De,tt,Ee,ge,Ae,lt,We,Rt,Pt,wt,yn,Gn,B,k,de,Ie,ke,je,Ot,rt,me,dt,Mt,Z=n;function ut(N,re){for(let fe=0;fe<N.length;fe++){const ve=t.getContext(N[fe],re);if(null!==ve)return ve}return null}try{const N={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r151"),t.addEventListener("webglcontextlost",ft,!1),t.addEventListener("webglcontextrestored",On,!1),t.addEventListener("webglcontextcreationerror",ai,!1),null===Z){const re=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&re.shift(),Z=ut(re,N),null===Z)throw ut(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Z.getShaderPrecisionFormat&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}function kt(){it=new zre(Z),De=new Lre(Z,it,e),it.init(De),me=new xoe(Z,it,De),tt=new voe(Z,it,De),Ee=new Wre,ge=new aoe,Ae=new boe(Z,it,tt,ge,De,me,Ee),lt=new Nre(y),We=new Vre(y),Rt=new Fne(Z,De),dt=new kre(Z,it,Rt,De),Pt=new Hre(Z,Rt,Ee,dt),wt=new Xre(Z,Pt,Rt,Ee),je=new qre(Z,De,Ae),de=new Fre(ge),yn=new ooe(y,lt,We,it,De,dt,de),Gn=new Eoe(y,ge),B=new coe,k=new moe(it,De),ke=new Pre(y,lt,We,tt,wt,p,l),Ie=new yoe(y,wt,De),Mt=new Aoe(Z,Ee,De,tt),Ot=new Ore(Z,it,Ee,De),rt=new Gre(Z,it,Ee,De),Ee.programs=yn.programs,y.capabilities=De,y.extensions=it,y.properties=ge,y.renderLists=B,y.shadowMap=Ie,y.state=tt,y.info=Ee}kt();const ct=new Soe(y,Z);function ft(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function On(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const N=Ee.autoReset,re=Ie.enabled,fe=Ie.autoUpdate,Q=Ie.needsUpdate,ve=Ie.type;kt(),Ee.autoReset=N,Ie.enabled=re,Ie.autoUpdate=fe,Ie.needsUpdate=Q,Ie.type=ve}function ai(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function rr(N){const re=N.target;re.removeEventListener("dispose",rr),function G(N){(function pe(N){const re=ge.get(N).programs;void 0!==re&&(re.forEach(function(fe){yn.releaseProgram(fe)}),N.isShaderMaterial&&yn.releaseShaderCache(N))})(N),ge.remove(N)}(re)}this.xr=ct,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const N=it.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=it.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(N){void 0!==N&&(H=N,this.setSize(Y,ie,!1))},this.getSize=function(N){return N.set(Y,ie)},this.setSize=function(N,re,fe=!0){ct.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Y=N,ie=re,t.width=Math.floor(N*H),t.height=Math.floor(re*H),!0===fe&&(t.style.width=N+"px",t.style.height=re+"px"),this.setViewport(0,0,N,re))},this.getDrawingBufferSize=function(N){return N.set(Y*H,ie*H).floor()},this.setDrawingBufferSize=function(N,re,fe){Y=N,ie=re,H=fe,t.width=Math.floor(N*fe),t.height=Math.floor(re*fe),this.setViewport(0,0,N,re)},this.getCurrentViewport=function(N){return N.copy(L)},this.getViewport=function(N){return N.copy(q)},this.setViewport=function(N,re,fe,Q){N.isVector4?q.set(N.x,N.y,N.z,N.w):q.set(N,re,fe,Q),tt.viewport(L.copy(q).multiplyScalar(H).floor())},this.getScissor=function(N){return N.copy(ne)},this.setScissor=function(N,re,fe,Q){N.isVector4?ne.set(N.x,N.y,N.z,N.w):ne.set(N,re,fe,Q),tt.scissor(A.copy(ne).multiplyScalar(H).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(N){tt.setScissorTest(K=N)},this.setOpaqueSort=function(N){$=N},this.setTransparentSort=function(N){te=N},this.getClearColor=function(N){return N.copy(ke.getClearColor())},this.setClearColor=function(){ke.setClearColor.apply(ke,arguments)},this.getClearAlpha=function(){return ke.getClearAlpha()},this.setClearAlpha=function(){ke.setClearAlpha.apply(ke,arguments)},this.clear=function(N=!0,re=!0,fe=!0){let Q=0;N&&(Q|=16384),re&&(Q|=256),fe&&(Q|=1024),Z.clear(Q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ft,!1),t.removeEventListener("webglcontextrestored",On,!1),t.removeEventListener("webglcontextcreationerror",ai,!1),B.dispose(),k.dispose(),ge.dispose(),lt.dispose(),We.dispose(),wt.dispose(),dt.dispose(),Mt.dispose(),yn.dispose(),ct.dispose(),ct.removeEventListener("sessionstart",pt),ct.removeEventListener("sessionend",xi),Le&&(Le.dispose(),Le=null),Vi.stop()},this.renderBufferDirect=function(N,re,fe,Q,ve,Ct){null===re&&(re=Fe);const Ht=ve.isMesh&&ve.matrixWorld.determinant()<0,Jt=function bhe(N,re,fe,Q,ve){!0!==re.isScene&&(re=Fe),Ae.resetTextureUnits();const Ct=re.fog,Jt=null===E?y.outputEncoding:!0===E.isXRRenderTarget?E.texture.encoding:vh,mn=(Q.isMeshStandardMaterial?We:lt).get(Q.envMap||(Q.isMeshStandardMaterial?re.environment:null)),xn=!0===Q.vertexColors&&!!fe.attributes.color&&4===fe.attributes.color.itemSize,wn=!!Q.normalMap&&!!fe.attributes.tangent,En=!!fe.morphAttributes.position,li=!!fe.morphAttributes.normal,$s=!!fe.morphAttributes.color,al=Q.toneMapped?y.toneMapping:0,Xh=fe.morphAttributes.position||fe.morphAttributes.normal||fe.morphAttributes.color,xr=void 0!==Xh?Xh.length:0,Ln=ge.get(Q),RP=_.state.lights;!0!==xe||!0!==$e&&N===O||de.setState(Q,N,N===O&&Q.id===T);let Ur=!1;Q.version===Ln.__version?(Ln.needsLights&&Ln.lightsStateVersion!==RP.state.version||Ln.outputEncoding!==Jt||ve.isInstancedMesh&&!1===Ln.instancing||!ve.isInstancedMesh&&!0===Ln.instancing||ve.isSkinnedMesh&&!1===Ln.skinning||!ve.isSkinnedMesh&&!0===Ln.skinning||Ln.envMap!==mn||!0===Q.fog&&Ln.fog!==Ct||void 0!==Ln.numClippingPlanes&&(Ln.numClippingPlanes!==de.numPlanes||Ln.numIntersection!==de.numIntersection)||Ln.vertexAlphas!==xn||Ln.vertexTangents!==wn||Ln.morphTargets!==En||Ln.morphNormals!==li||Ln.morphColors!==$s||Ln.toneMapping!==al||!0===De.isWebGL2&&Ln.morphTargetsCount!==xr)&&(Ur=!0):(Ur=!0,Ln.__version=Q.version);let Yh=Ln.currentProgram;!0===Ur&&(Yh=MS(Q,re,ve));let D5=!1,t0=!1,PP=!1;const js=Yh.getUniforms(),Kh=Ln.uniforms;if(tt.useProgram(Yh.program)&&(D5=!0,t0=!0,PP=!0),Q.id!==T&&(T=Q.id,t0=!0),D5||O!==N){if(js.setValue(Z,"projectionMatrix",N.projectionMatrix),De.logarithmicDepthBuffer&&js.setValue(Z,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),O!==N&&(O=N,t0=!0,PP=!0),Q.isShaderMaterial||Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshStandardMaterial||Q.envMap){const qo=js.map.cameraPosition;void 0!==qo&&qo.setValue(Z,ue.setFromMatrixPosition(N.matrixWorld))}(Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshLambertMaterial||Q.isMeshBasicMaterial||Q.isMeshStandardMaterial||Q.isShaderMaterial)&&js.setValue(Z,"isOrthographic",!0===N.isOrthographicCamera),(Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshLambertMaterial||Q.isMeshBasicMaterial||Q.isMeshStandardMaterial||Q.isShaderMaterial||Q.isShadowMaterial||ve.isSkinnedMesh)&&js.setValue(Z,"viewMatrix",N.matrixWorldInverse)}if(ve.isSkinnedMesh){js.setOptional(Z,ve,"bindMatrix"),js.setOptional(Z,ve,"bindMatrixInverse");const qo=ve.skeleton;qo&&(De.floatVertexTextures?(null===qo.boneTexture&&qo.computeBoneTexture(),js.setValue(Z,"boneTexture",qo.boneTexture,Ae),js.setValue(Z,"boneTextureSize",qo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const kP=fe.morphAttributes;if((void 0!==kP.position||void 0!==kP.normal||void 0!==kP.color&&!0===De.isWebGL2)&&je.update(ve,fe,Yh),(t0||Ln.receiveShadow!==ve.receiveShadow)&&(Ln.receiveShadow=ve.receiveShadow,js.setValue(Z,"receiveShadow",ve.receiveShadow)),Q.isMeshGouraudMaterial&&null!==Q.envMap&&(Kh.envMap.value=mn,Kh.flipEnvMap.value=mn.isCubeTexture&&!1===mn.isRenderTargetTexture?-1:1),t0&&(js.setValue(Z,"toneMappingExposure",y.toneMappingExposure),Ln.needsLights&&function xhe(N,re){N.ambientLightColor.needsUpdate=re,N.lightProbe.needsUpdate=re,N.directionalLights.needsUpdate=re,N.directionalLightShadows.needsUpdate=re,N.pointLights.needsUpdate=re,N.pointLightShadows.needsUpdate=re,N.spotLights.needsUpdate=re,N.spotLightShadows.needsUpdate=re,N.rectAreaLights.needsUpdate=re,N.hemisphereLights.needsUpdate=re}(Kh,PP),Ct&&!0===Q.fog&&Gn.refreshFogUniforms(Kh,Ct),Gn.refreshMaterialUniforms(Kh,Q,H,ie,Le),CC.upload(Z,Ln.uniformsList,Kh,Ae)),Q.isShaderMaterial&&!0===Q.uniformsNeedUpdate&&(CC.upload(Z,Ln.uniformsList,Kh,Ae),Q.uniformsNeedUpdate=!1),Q.isSpriteMaterial&&js.setValue(Z,"center",ve.center),js.setValue(Z,"modelViewMatrix",ve.modelViewMatrix),js.setValue(Z,"normalMatrix",ve.normalMatrix),js.setValue(Z,"modelMatrix",ve.matrixWorld),Q.isShaderMaterial||Q.isRawShaderMaterial){const qo=Q.uniformsGroups;for(let OP=0,Mhe=qo.length;OP<Mhe;OP++)if(De.isWebGL2){const T5=qo[OP];Mt.update(T5,Yh),Mt.bind(T5,Yh)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Yh}(N,re,fe,Q,ve);tt.setMaterial(Q,Ht);let mn=fe.index,xn=1;!0===Q.wireframe&&(mn=Pt.getWireframeAttribute(fe),xn=2);const wn=fe.drawRange,En=fe.attributes.position;let li=wn.start*xn,$s=(wn.start+wn.count)*xn;null!==Ct&&(li=Math.max(li,Ct.start*xn),$s=Math.min($s,(Ct.start+Ct.count)*xn)),null!==mn?(li=Math.max(li,0),$s=Math.min($s,mn.count)):null!=En&&(li=Math.max(li,0),$s=Math.min($s,En.count));const al=$s-li;if(al<0||al===1/0)return;dt.setup(ve,Q,Jt,fe,mn);let Xh,xr=Ot;if(null!==mn&&(Xh=Rt.get(mn),xr=rt,xr.setIndex(Xh)),ve.isMesh)!0===Q.wireframe?(tt.setLineWidth(Q.wireframeLinewidth*Be()),xr.setMode(1)):xr.setMode(4);else if(ve.isLine){let Ln=Q.linewidth;void 0===Ln&&(Ln=1),tt.setLineWidth(Ln*Be()),xr.setMode(ve.isLineSegments?1:ve.isLineLoop?2:3)}else ve.isPoints?xr.setMode(0):ve.isSprite&&xr.setMode(4);if(ve.isInstancedMesh)xr.renderInstances(li,al,ve.count);else if(fe.isInstancedBufferGeometry){const RP=Math.min(fe.instanceCount,void 0!==fe._maxInstanceCount?fe._maxInstanceCount:1/0);xr.renderInstances(li,al,RP)}else xr.render(li,al)},this.compile=function(N,re){function fe(Q,ve,Ct){!0===Q.transparent&&2===Q.side&&!1===Q.forceSinglePass?(Q.side=1,Q.needsUpdate=!0,MS(Q,ve,Ct),Q.side=0,Q.needsUpdate=!0,MS(Q,ve,Ct),Q.side=2):MS(Q,ve,Ct)}_=k.get(N),_.init(),v.push(_),N.traverseVisible(function(Q){Q.isLight&&Q.layers.test(re.layers)&&(_.pushLight(Q),Q.castShadow&&_.pushShadow(Q))}),_.setupLights(y.useLegacyLights),N.traverse(function(Q){const ve=Q.material;if(ve)if(Array.isArray(ve))for(let Ct=0;Ct<ve.length;Ct++)fe(ve[Ct],N,Q);else fe(ve,N,Q)}),v.pop(),_=null};let Re=null;function pt(){Vi.stop()}function xi(){Vi.start()}const Vi=new Fz;function Cs(N,re,fe,Q){if(!1===N.visible)return;if(N.layers.test(re.layers))if(N.isGroup)fe=N.renderOrder;else if(N.isLOD)!0===N.autoUpdate&&N.update(re);else if(N.isLight)_.pushLight(N),N.castShadow&&_.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||ce.intersectsSprite(N)){Q&&ue.setFromMatrixPosition(N.matrixWorld).applyMatrix4(le);const Ht=wt.update(N),Jt=N.material;Jt.visible&&m.push(N,Ht,Jt,fe,ue.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(N.isSkinnedMesh&&N.skeleton.frame!==Ee.render.frame&&(N.skeleton.update(),N.skeleton.frame=Ee.render.frame),!N.frustumCulled||ce.intersectsObject(N))){Q&&ue.setFromMatrixPosition(N.matrixWorld).applyMatrix4(le);const Ht=wt.update(N),Jt=N.material;if(Array.isArray(Jt)){const mn=Ht.groups;for(let xn=0,wn=mn.length;xn<wn;xn++){const En=mn[xn],li=Jt[En.materialIndex];li&&li.visible&&m.push(N,Ht,li,fe,ue.z,En)}}else Jt.visible&&m.push(N,Ht,Jt,fe,ue.z,null)}const Ct=N.children;for(let Ht=0,Jt=Ct.length;Ht<Jt;Ht++)Cs(Ct[Ht],re,fe,Q)}function nd(N,re,fe,Q){const ve=N.opaque,Ct=N.transmissive,Ht=N.transparent;_.setupLightsView(fe),!0===xe&&de.setGlobalState(y.clippingPlanes,fe),Ct.length>0&&function sr(N,re,fe,Q){if(null===Le){const Jt=De.isWebGL2;Le=new wh(1024,1024,{generateMipmaps:!0,type:it.has("EXT_color_buffer_half_float")?vv:gh,minFilter:Vc,samples:Jt&&!0===a?4:0})}const ve=y.getRenderTarget();y.setRenderTarget(Le),y.clear();const Ct=y.toneMapping;y.toneMapping=0,Ta(N,fe,Q),Ae.updateMultisampleRenderTarget(Le),Ae.updateRenderTargetMipmap(Le);let Ht=!1;for(let Jt=0,mn=re.length;Jt<mn;Jt++){const xn=re[Jt],wn=xn.object,En=xn.geometry,li=xn.material,$s=xn.group;if(2===li.side&&wn.layers.test(Q.layers)){const al=li.side;li.side=1,li.needsUpdate=!0,ql(wn,fe,Q,En,li,$s),li.side=al,li.needsUpdate=!0,Ht=!0}}!0===Ht&&(Ae.updateMultisampleRenderTarget(Le),Ae.updateRenderTargetMipmap(Le)),y.setRenderTarget(ve),y.toneMapping=Ct}(ve,Ct,re,fe),Q&&tt.viewport(L.copy(Q)),ve.length>0&&Ta(ve,re,fe),Ct.length>0&&Ta(Ct,re,fe),Ht.length>0&&Ta(Ht,re,fe),tt.buffers.depth.setTest(!0),tt.buffers.depth.setMask(!0),tt.buffers.color.setMask(!0),tt.setPolygonOffset(!1)}function Ta(N,re,fe){const Q=!0===re.isScene?re.overrideMaterial:null;for(let ve=0,Ct=N.length;ve<Ct;ve++){const Ht=N[ve],Jt=Ht.object,mn=Ht.geometry,xn=null===Q?Ht.material:Q,wn=Ht.group;Jt.layers.test(fe.layers)&&ql(Jt,re,fe,mn,xn,wn)}}function ql(N,re,fe,Q,ve,Ct){N.onBeforeRender(y,re,fe,Q,ve,Ct),N.modelViewMatrix.multiplyMatrices(fe.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),ve.onBeforeRender(y,re,fe,Q,N,Ct),!0===ve.transparent&&2===ve.side&&!1===ve.forceSinglePass?(ve.side=1,ve.needsUpdate=!0,y.renderBufferDirect(fe,re,Q,ve,N,Ct),ve.side=0,ve.needsUpdate=!0,y.renderBufferDirect(fe,re,Q,ve,N,Ct),ve.side=2):y.renderBufferDirect(fe,re,Q,ve,N,Ct),N.onAfterRender(y,re,fe,Q,ve,Ct)}function MS(N,re,fe){!0!==re.isScene&&(re=Fe);const Q=ge.get(N),ve=_.state.lights,Ht=ve.state.version,Jt=yn.getParameters(N,ve.state,_.state.shadowsArray,re,fe),mn=yn.getProgramCacheKey(Jt);let xn=Q.programs;Q.environment=N.isMeshStandardMaterial?re.environment:null,Q.fog=re.fog,Q.envMap=(N.isMeshStandardMaterial?We:lt).get(N.envMap||Q.environment),void 0===xn&&(N.addEventListener("dispose",rr),xn=new Map,Q.programs=xn);let wn=xn.get(mn);if(void 0!==wn){if(Q.currentProgram===wn&&Q.lightsStateVersion===Ht)return A5(N,Jt),wn}else Jt.uniforms=yn.getUniforms(N),N.onBuild(fe,Jt,y),N.onBeforeCompile(Jt,y),wn=yn.acquireProgram(Jt,mn),xn.set(mn,wn),Q.uniforms=Jt.uniforms;const En=Q.uniforms;(!N.isShaderMaterial&&!N.isRawShaderMaterial||!0===N.clipping)&&(En.clippingPlanes=de.uniform),A5(N,Jt),Q.needsLights=function whe(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&!0===N.lights}(N),Q.lightsStateVersion=Ht,Q.needsLights&&(En.ambientLightColor.value=ve.state.ambient,En.lightProbe.value=ve.state.probe,En.directionalLights.value=ve.state.directional,En.directionalLightShadows.value=ve.state.directionalShadow,En.spotLights.value=ve.state.spot,En.spotLightShadows.value=ve.state.spotShadow,En.rectAreaLights.value=ve.state.rectArea,En.ltc_1.value=ve.state.rectAreaLTC1,En.ltc_2.value=ve.state.rectAreaLTC2,En.pointLights.value=ve.state.point,En.pointLightShadows.value=ve.state.pointShadow,En.hemisphereLights.value=ve.state.hemi,En.directionalShadowMap.value=ve.state.directionalShadowMap,En.directionalShadowMatrix.value=ve.state.directionalShadowMatrix,En.spotShadowMap.value=ve.state.spotShadowMap,En.spotLightMatrix.value=ve.state.spotLightMatrix,En.spotLightMap.value=ve.state.spotLightMap,En.pointShadowMap.value=ve.state.pointShadowMap,En.pointShadowMatrix.value=ve.state.pointShadowMatrix);const li=wn.getUniforms(),$s=CC.seqWithValue(li.seq,En);return Q.currentProgram=wn,Q.uniformsList=$s,wn}function A5(N,re){const fe=ge.get(N);fe.outputEncoding=re.outputEncoding,fe.instancing=re.instancing,fe.skinning=re.skinning,fe.morphTargets=re.morphTargets,fe.morphNormals=re.morphNormals,fe.morphColors=re.morphColors,fe.morphTargetsCount=re.morphTargetsCount,fe.numClippingPlanes=re.numClippingPlanes,fe.numIntersection=re.numClipIntersection,fe.vertexAlphas=re.vertexAlphas,fe.vertexTangents=re.vertexTangents,fe.toneMapping=re.toneMapping}Vi.setAnimationLoop(function Je(N){Re&&Re(N)}),typeof self<"u"&&Vi.setContext(self),this.setAnimationLoop=function(N){Re=N,ct.setAnimationLoop(N),null===N?Vi.stop():Vi.start()},ct.addEventListener("sessionstart",pt),ct.addEventListener("sessionend",xi),this.render=function(N,re){if(void 0===re||!0===re.isCamera){if(!0!==M){if(!0===N.matrixWorldAutoUpdate&&N.updateMatrixWorld(),null===re.parent&&!0===re.matrixWorldAutoUpdate&&re.updateMatrixWorld(),!0===ct.enabled&&!0===ct.isPresenting&&(!0===ct.cameraAutoUpdate&&ct.updateCamera(re),re=ct.getCamera()),!0===N.isScene&&N.onBeforeRender(y,N,re,E),_=k.get(N,v.length),_.init(),v.push(_),le.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),ce.setFromProjectionMatrix(le),$e=this.localClippingEnabled,xe=de.init(this.clippingPlanes,$e),m=B.get(N,b.length),m.init(),b.push(m),Cs(N,re,0,y.sortObjects),m.finish(),!0===y.sortObjects&&m.sort($,te),!0===xe&&de.beginShadows(),Ie.render(_.state.shadowsArray,N,re),!0===xe&&de.endShadows(),!0===this.info.autoReset&&this.info.reset(),ke.render(m,N),_.setupLights(y.useLegacyLights),re.isArrayCamera){const Q=re.cameras;for(let ve=0,Ct=Q.length;ve<Ct;ve++){const Ht=Q[ve];nd(m,N,Ht,Ht.viewport)}}else nd(m,N,re);null!==E&&(Ae.updateMultisampleRenderTarget(E),Ae.updateRenderTargetMipmap(E)),!0===N.isScene&&N.onAfterRender(y,N,re),dt.resetDefaultState(),T=-1,O=null,v.pop(),_=v.length>0?v[v.length-1]:null,b.pop(),m=b.length>0?b[b.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(N,re,fe){ge.get(N.texture).__webglTexture=re,ge.get(N.depthTexture).__webglTexture=fe;const Q=ge.get(N);Q.__hasExternalTextures=!0,Q.__hasExternalTextures&&(Q.__autoAllocateDepthBuffer=void 0===fe,Q.__autoAllocateDepthBuffer||!0===it.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Q.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(N,re){const fe=ge.get(N);fe.__webglFramebuffer=re,fe.__useDefaultFramebuffer=void 0===re},this.setRenderTarget=function(N,re=0,fe=0){E=N,x=re,C=fe;let Q=!0,ve=null,Ct=!1,Ht=!1;if(N){const mn=ge.get(N);void 0!==mn.__useDefaultFramebuffer?(tt.bindFramebuffer(36160,null),Q=!1):void 0===mn.__webglFramebuffer?Ae.setupRenderTarget(N):mn.__hasExternalTextures&&Ae.rebindTextures(N,ge.get(N.texture).__webglTexture,ge.get(N.depthTexture).__webglTexture);const xn=N.texture;(xn.isData3DTexture||xn.isDataArrayTexture||xn.isCompressedArrayTexture)&&(Ht=!0);const wn=ge.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(ve=wn[re],Ct=!0):ve=De.isWebGL2&&N.samples>0&&!1===Ae.useMultisampledRTT(N)?ge.get(N).__webglMultisampledFramebuffer:wn,L.copy(N.viewport),A.copy(N.scissor),P=N.scissorTest}else L.copy(q).multiplyScalar(H).floor(),A.copy(ne).multiplyScalar(H).floor(),P=K;if(tt.bindFramebuffer(36160,ve)&&De.drawBuffers&&Q&&tt.drawBuffers(N,ve),tt.viewport(L),tt.scissor(A),tt.setScissorTest(P),Ct){const mn=ge.get(N.texture);Z.framebufferTexture2D(36160,36064,34069+re,mn.__webglTexture,fe)}else if(Ht){const mn=ge.get(N.texture);Z.framebufferTextureLayer(36160,36064,mn.__webglTexture,fe||0,re||0)}T=-1},this.readRenderTargetPixels=function(N,re,fe,Q,ve,Ct,Ht){if(!N||!N.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Jt=ge.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&void 0!==Ht&&(Jt=Jt[Ht]),Jt){tt.bindFramebuffer(36160,Jt);try{const mn=N.texture,xn=mn.format,wn=mn.type;if(xn!==ba&&me.convert(xn)!==Z.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const En=wn===vv&&(it.has("EXT_color_buffer_half_float")||De.isWebGL2&&it.has("EXT_color_buffer_float"));if(!(wn===gh||me.convert(wn)===Z.getParameter(35738)||wn===Gu&&(De.isWebGL2||it.has("OES_texture_float")||it.has("WEBGL_color_buffer_float"))||En))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");re>=0&&re<=N.width-Q&&fe>=0&&fe<=N.height-ve&&Z.readPixels(re,fe,Q,ve,me.convert(xn),me.convert(wn),Ct)}finally{const mn=null!==E?ge.get(E).__webglFramebuffer:null;tt.bindFramebuffer(36160,mn)}}},this.copyFramebufferToTexture=function(N,re,fe=0){const Q=Math.pow(2,-fe),ve=Math.floor(re.image.width*Q),Ct=Math.floor(re.image.height*Q);Ae.setTexture2D(re,0),Z.copyTexSubImage2D(3553,fe,0,0,N.x,N.y,ve,Ct),tt.unbindTexture()},this.copyTextureToTexture=function(N,re,fe,Q=0){const ve=re.image.width,Ct=re.image.height,Ht=me.convert(fe.format),Jt=me.convert(fe.type);Ae.setTexture2D(fe,0),Z.pixelStorei(37440,fe.flipY),Z.pixelStorei(37441,fe.premultiplyAlpha),Z.pixelStorei(3317,fe.unpackAlignment),re.isDataTexture?Z.texSubImage2D(3553,Q,N.x,N.y,ve,Ct,Ht,Jt,re.image.data):re.isCompressedTexture?Z.compressedTexSubImage2D(3553,Q,N.x,N.y,re.mipmaps[0].width,re.mipmaps[0].height,Ht,re.mipmaps[0].data):Z.texSubImage2D(3553,Q,N.x,N.y,Ht,Jt,re.image),0===Q&&fe.generateMipmaps&&Z.generateMipmap(3553),tt.unbindTexture()},this.copyTextureToTexture3D=function(N,re,fe,Q,ve=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ct=N.max.x-N.min.x+1,Ht=N.max.y-N.min.y+1,Jt=N.max.z-N.min.z+1,mn=me.convert(Q.format),xn=me.convert(Q.type);let wn;if(Q.isData3DTexture)Ae.setTexture3D(Q,0),wn=32879;else{if(!Q.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ae.setTexture2DArray(Q,0),wn=35866}Z.pixelStorei(37440,Q.flipY),Z.pixelStorei(37441,Q.premultiplyAlpha),Z.pixelStorei(3317,Q.unpackAlignment);const En=Z.getParameter(3314),li=Z.getParameter(32878),$s=Z.getParameter(3316),al=Z.getParameter(3315),Xh=Z.getParameter(32877),xr=fe.isCompressedTexture?fe.mipmaps[0]:fe.image;Z.pixelStorei(3314,xr.width),Z.pixelStorei(32878,xr.height),Z.pixelStorei(3316,N.min.x),Z.pixelStorei(3315,N.min.y),Z.pixelStorei(32877,N.min.z),fe.isDataTexture||fe.isData3DTexture?Z.texSubImage3D(wn,ve,re.x,re.y,re.z,Ct,Ht,Jt,mn,xn,xr.data):fe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(wn,ve,re.x,re.y,re.z,Ct,Ht,Jt,mn,xr.data)):Z.texSubImage3D(wn,ve,re.x,re.y,re.z,Ct,Ht,Jt,mn,xn,xr),Z.pixelStorei(3314,En),Z.pixelStorei(32878,li),Z.pixelStorei(3316,$s),Z.pixelStorei(3315,al),Z.pixelStorei(32877,Xh),0===ve&&Q.generateMipmaps&&Z.generateMipmap(wn),tt.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?Ae.setTextureCube(N,0):N.isData3DTexture?Ae.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?Ae.setTexture2DArray(N,0):Ae.setTexture2D(N,0),tt.unbindTexture()},this.resetState=function(){x=0,C=0,E=null,tt.reset(),dt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}(class Toe extends dH{}).prototype.isWebGL1Renderer=!0;class SC extends Fr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class hR{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Uo()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Uo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Uo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ws=new F;class Ih{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.applyMatrix4(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.applyNormalMatrix(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.transformDirection(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}setX(e,t){return this.normalized&&(t=dn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Vo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Vo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Vo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Vo(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=dn(t,this.array),n=dn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=dn(t,this.array),n=dn(n,this.array),r=dn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=dn(t,this.array),n=dn(n,this.array),r=dn(r,this.array),s=dn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ii(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ih(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const _H=new F,yH=new oi,vH=new oi,Poe=new F,bH=new jt,jm=new F;class xH extends Yn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new jt,this.bindMatrixInverse=new jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new tl),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)jm.fromBufferAttribute(t,n),this.applyBoneTransform(n,jm),this.boundingBox.expandByPoint(jm)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new zl),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)jm.fromBufferAttribute(t,n),this.applyBoneTransform(n,jm),this.boundingSphere.expandByPoint(jm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new oi,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;yH.fromBufferAttribute(r.attributes.skinIndex,e),vH.fromBufferAttribute(r.attributes.skinWeight,e),_H.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=vH.getComponent(s);if(0!==o){const a=yH.getComponent(s);bH.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(Poe.copy(_H).applyMatrix4(bH),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class pR extends Fr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ov extends el{constructor(e=null,t=1,n=1,r,s,o,a,l,c=Bi,d=Bi,h,p){super(null,o,a,l,c,d,r,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const wH=new jt,koe=new jt;class IC{constructor(e=[],t=[]){this.uuid=Uo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new jt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)wH.multiplyMatrices(e[s]?e[s].matrixWorld:koe,t[s]),wH.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new IC(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=fz(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ov(t,e,e,ba,Gu);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new pR),this.bones.push(o),this.boneInverses.push((new jt).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(n[r].toArray());return e}}class Lv extends Ii{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const qm=new jt,MH=new jt,RC=[],CH=new tl,Ooe=new jt,Fv=new Yn,Nv=new zl;class SH extends Yn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Lv(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Ooe)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new tl),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,qm),CH.copy(e.boundingBox).applyMatrix4(qm),this.boundingBox.union(CH)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new zl),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,qm),Nv.copy(e.boundingSphere).applyMatrix4(qm),this.boundingSphere.union(Nv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Fv.geometry=this.geometry,Fv.material=this.material,void 0!==Fv.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Nv.copy(this.boundingSphere),Nv.applyMatrix4(n),!1!==e.ray.intersectsSphere(Nv)))for(let s=0;s<r;s++){this.getMatrixAt(s,qm),MH.multiplyMatrices(n,qm),Fv.matrixWorld=MH,Fv.raycast(e,RC);for(let o=0,a=RC.length;o<a;o++){const l=RC[o];l.instanceId=s,l.object=this,t.push(l)}RC.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Lv(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Br extends ho{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ue(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const EH=new F,AH=new F,DH=new jt,mR=new rC,PC=new zl;class Rh extends Fr{constructor(e=new ln,t=new Br){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)EH.fromBufferAttribute(t,r-1),AH.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=EH.distanceTo(AH);e.setAttribute("lineDistance",new et(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),PC.copy(n.boundingSphere),PC.applyMatrix4(r),PC.radius+=s,!1===e.ray.intersectsSphere(PC))return;DH.copy(r).invert(),mR.copy(e.ray).applyMatrix4(DH);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new F,d=new F,h=new F,p=new F,m=this.isLineSegments?2:1,_=n.index,v=n.attributes.position;if(null!==_)for(let x=Math.max(0,o.start),C=Math.min(_.count,o.start+o.count)-1;x<C;x+=m){const E=_.getX(x),T=_.getX(x+1);if(c.fromBufferAttribute(v,E),d.fromBufferAttribute(v,T),mR.distanceSqToSegment(c,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(p);L<e.near||L>e.far||t.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}else for(let x=Math.max(0,o.start),C=Math.min(v.count,o.start+o.count)-1;x<C;x+=m){if(c.fromBufferAttribute(v,x),d.fromBufferAttribute(v,x+1),mR.distanceSqToSegment(c,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||t.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const TH=new F,IH=new F;class Xm extends Rh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)TH.fromBufferAttribute(t,r),IH.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+TH.distanceTo(IH);e.setAttribute("lineDistance",new et(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class RH extends Rh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Ph extends ho{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const PH=new jt,gR=new rC,kC=new zl,OC=new F;class Bv extends Fr{constructor(e=new ln,t=new Ph){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),kC.copy(n.boundingSphere),kC.applyMatrix4(r),kC.radius+=s,!1===e.ray.intersectsSphere(kC))return;PH.copy(r).invert(),gR.copy(e.ray).applyMatrix4(PH);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,h=n.attributes.position;if(null!==c)for(let _=Math.max(0,o.start),b=Math.min(c.count,o.start+o.count);_<b;_++){const v=c.getX(_);OC.fromBufferAttribute(h,v),kH(OC,v,l,r,e,t,this)}else for(let _=Math.max(0,o.start),b=Math.min(h.count,o.start+o.count);_<b;_++)OC.fromBufferAttribute(h,_),kH(OC,_,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function kH(i,e,t,n,r,s,o){const a=gR.distanceSqToPoint(i);if(a<t){const l=new F;gR.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Wl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;o=t||e*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const d=n[r];return(r+(o-d)/(n[r+1]-d))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Me:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new F,r=[],s=[],o=[],a=new F,l=new jt;for(let m=0;m<=e;m++)r[m]=this.getTangentAt(m/e,new F);s[0]=new F,o[0]=new F;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),p<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(Yi(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,_))}o[m].crossVectors(r[m],s[m])}if(!0===t){let m=Math.acos(Yi(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let _=1;_<=e;_++)s[_].applyMatrix4(l.makeRotationAxis(r[_],m*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class _R extends Wl{constructor(e=0,t=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new Me,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*h+this.aX,c=p*h+m*d+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function yR(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,h){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+h)+(l-a)/h;p*=d,m*=d,r(o,a,p,m)},calc:function(s){const o=s*s;return i+e*s+t*o+n*(o*s)}}}const LC=new F,vR=new yR,bR=new yR,xR=new yR;function OH(i,e,t,n,r){const s=.5*(n-e),o=.5*(r-t),a=i*i;return(2*t-2*n+s+o)*(i*a)+(-3*t+3*n-2*s-o)*a+s*i+t}function Uv(i,e,t,n){return function Boe(i,e){const t=1-i;return t*t*e}(i,e)+function Uoe(i,e){return 2*(1-i)*i*e}(i,t)+function Voe(i,e){return i*i*e}(i,n)}function Vv(i,e,t,n,r){return function zoe(i,e){const t=1-i;return t*t*t*e}(i,e)+function Hoe(i,e){const t=1-i;return 3*t*t*i*e}(i,t)+function Goe(i,e){return 3*(1-i)*i*i*e}(i,n)+function Woe(i,e){return i*i*i*e}(i,r)}class LH extends Wl{constructor(e=new Me,t=new Me,n=new Me,r=new Me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Me){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Vv(e,r.x,s.x,o.x,a.x),Vv(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class wR extends Wl{constructor(e=new Me,t=new Me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Me){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FH extends Wl{constructor(e=new Me,t=new Me,n=new Me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Me){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Uv(e,r.x,s.x,o.x),Uv(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BH extends Wl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Me){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return n.set(OH(a,l.x,c.x,d.x,h.x),OH(a,l.y,c.y,d.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new Me).fromArray(r))}return this}}var MR=Object.freeze({__proto__:null,ArcCurve:class Foe extends _R{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class Noe extends Wl{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new F){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,d,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(LC.subVectors(r[0],r[1]).add(r[0]),c=LC);const h=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(LC.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=LC),"centripetal"===this.curveType||"chordal"===this.curveType){const m="chordal"===this.curveType?.5:.25;let _=Math.pow(c.distanceToSquared(h),m),b=Math.pow(h.distanceToSquared(p),m),v=Math.pow(p.distanceToSquared(d),m);b<1e-4&&(b=1),_<1e-4&&(_=b),v<1e-4&&(v=b),vR.initNonuniformCatmullRom(c.x,h.x,p.x,d.x,_,b,v),bR.initNonuniformCatmullRom(c.y,h.y,p.y,d.y,_,b,v),xR.initNonuniformCatmullRom(c.z,h.z,p.z,d.z,_,b,v)}else"catmullrom"===this.curveType&&(vR.initCatmullRom(c.x,h.x,p.x,d.x,this.tension),bR.initCatmullRom(c.y,h.y,p.y,d.y,this.tension),xR.initCatmullRom(c.z,h.z,p.z,d.z,this.tension));return n.set(vR.calc(l),bR.calc(l),xR.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new F).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:LH,CubicBezierCurve3:class $oe extends Wl{constructor(e=new F,t=new F,n=new F,r=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new F){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Vv(e,r.x,s.x,o.x,a.x),Vv(e,r.y,s.y,o.y,a.y),Vv(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:_R,LineCurve:wR,LineCurve3:class joe extends Wl{constructor(e=new F,t=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new F){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new F){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:FH,QuadraticBezierCurve3:class NH extends Wl{constructor(e=new F,t=new F,n=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new F){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Uv(e,r.x,s.x,o.x),Uv(e,r.y,s.y,o.y),Uv(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:BH});class qoe extends Wl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wR(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push((new MR[r.type]).fromJSON(r))}return this}}class FC extends qoe{constructor(e){super(),this.type="Path",this.currentPoint=new Me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new wR(this.currentPoint.clone(),new Me(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new FH(this.currentPoint.clone(),new Me(e,t),new Me(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new LH(this.currentPoint.clone(),new Me(e,t),new Me(n,r),new Me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new BH(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const c=new _R(e,t,n,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class NC extends ln{constructor(e=[new Me(0,-.5),new Me(.5,0),new Me(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Yi(r,0,2*Math.PI);const s=[],o=[],a=[],l=[],c=[],d=1/t,h=new F,p=new Me,m=new F,_=new F,b=new F;let v=0,y=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:v=e[M+1].x-e[M].x,y=e[M+1].y-e[M].y,m.x=1*y,m.y=-v,m.z=0*y,b.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:v=e[M+1].x-e[M].x,y=e[M+1].y-e[M].y,m.x=1*y,m.y=-v,m.z=0*y,_.copy(m),m.x+=b.x,m.y+=b.y,m.z+=b.z,m.normalize(),l.push(m.x,m.y,m.z),b.copy(_)}for(let M=0;M<=t;M++){const x=n+M*d*r,C=Math.sin(x),E=Math.cos(x);for(let T=0;T<=e.length-1;T++)h.x=e[T].x*C,h.y=e[T].y,h.z=e[T].x*E,o.push(h.x,h.y,h.z),p.x=M/t,p.y=T/(e.length-1),a.push(p.x,p.y),c.push(l[3*T+0]*C,l[3*T+1],l[3*T+0]*E)}for(let M=0;M<t;M++)for(let x=0;x<e.length-1;x++){const C=x+M*e.length,T=C+e.length,O=C+e.length+1,L=C+1;s.push(C,T,L),s.push(O,L,T)}this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("uv",new et(a,2)),this.setAttribute("normal",new et(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new NC(e.points,e.segments,e.phiStart,e.phiLength)}}class BC extends NC{constructor(e=1,t=1,n=4,r=8){const s=new FC;s.absarc(0,-t/2,e,1.5*Math.PI,0),s.absarc(0,t/2,e,0,.5*Math.PI),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new BC(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ym extends ln{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],h=[],p=[],m=[];let _=0;const b=[],v=n/2;let y=0;function x(C){const E=_,T=new Me,O=new F;let L=0;const A=!0===C?e:t,P=!0===C?1:-1;for(let ie=1;ie<=r;ie++)h.push(0,v*P,0),p.push(0,P,0),m.push(.5,.5),_++;const Y=_;for(let ie=0;ie<=r;ie++){const $=ie/r*l+a,te=Math.cos($),q=Math.sin($);O.x=A*q,O.y=v*P,O.z=A*te,h.push(O.x,O.y,O.z),p.push(0,P,0),T.x=.5*te+.5,T.y=.5*q*P+.5,m.push(T.x,T.y),_++}for(let ie=0;ie<r;ie++){const H=E+ie,$=Y+ie;!0===C?d.push($,$+1,H):d.push($+1,$,H),L+=3}c.addGroup(y,L,!0===C?1:2),y+=L}(function M(){const C=new F,E=new F;let T=0;const O=(t-e)/n;for(let L=0;L<=s;L++){const A=[],P=L/s,Y=P*(t-e)+e;for(let ie=0;ie<=r;ie++){const H=ie/r,$=H*l+a,te=Math.sin($),q=Math.cos($);E.x=Y*te,E.y=-P*n+v,E.z=Y*q,h.push(E.x,E.y,E.z),C.set(te,O,q).normalize(),p.push(C.x,C.y,C.z),m.push(H,1-P),A.push(_++)}b.push(A)}for(let L=0;L<r;L++)for(let A=0;A<s;A++){const Y=b[A+1][L],ie=b[A+1][L+1],H=b[A][L+1];d.push(b[A][L],Y,H),d.push(Y,ie,H),T+=6}c.addGroup(y,T,0),y+=T})(),!1===o&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(d),this.setAttribute("position",new et(h,3)),this.setAttribute("normal",new et(p,3)),this.setAttribute("uv",new et(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ym(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class UC extends Ym{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new UC(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Lh extends ln{constructor(e=1,t=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const d=[],h=new F,p=new F,m=[],_=[],b=[],v=[];for(let y=0;y<=n;y++){const M=[],x=y/n;let C=0;0===y&&0===o?C=.5/t:y===n&&l===Math.PI&&(C=-.5/t);for(let E=0;E<=t;E++){const T=E/t;h.x=-e*Math.cos(r+T*s)*Math.sin(o+x*a),h.y=e*Math.cos(o+x*a),h.z=e*Math.sin(r+T*s)*Math.sin(o+x*a),_.push(h.x,h.y,h.z),p.copy(h).normalize(),b.push(p.x,p.y,p.z),v.push(T+C,1-x),M.push(c++)}d.push(M)}for(let y=0;y<n;y++)for(let M=0;M<t;M++){const x=d[y][M+1],C=d[y][M],E=d[y+1][M],T=d[y+1][M+1];(0!==y||o>0)&&m.push(x,C,T),(y!==n-1||l<Math.PI)&&m.push(C,E,T)}this.setIndex(m),this.setAttribute("position",new et(_,3)),this.setAttribute("normal",new et(b,3)),this.setAttribute("uv",new et(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Wv extends ho{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ue(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Yu extends Wv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ue(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ue(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ue(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class NR extends ho{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ue(16777215),this.specular=new Ue(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Ma(i,e,t){return BR(i)?new i.constructor(i.subarray(e,void 0!==t?t:i.length)):i.slice(e,t)}function Fh(i,e,t){return!i||!t&&i.constructor===e?i:"number"==typeof e.BYTES_PER_ELEMENT?new e(i):Array.prototype.slice.call(i)}function BR(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function qH(i){const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(function e(r,s){return i[r]-i[s]}),n}function UR(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function VR(i,e,t,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(e.push(s.time),t.push(o)),s=i[r++]}while(void 0!==s)}class $v{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Sae extends $v{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-n;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*n-t;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(n-t),d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,_=(n-t)/(r-t),b=_*_,v=b*_,y=-p*v+2*p*b-p*_,M=(1+p)*v+(-1.5-2*p)*b+(-.5+p)*_+1,x=(-1-m)*v+(1.5+m)*b+.5*_,C=m*v-m*b;for(let E=0;E!==a;++E)s[E]=y*o[d+E]+M*o[c+E]+x*o[l+E]+C*o[h+E];return s}}class XH extends $v{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(n-t)/(r-t),h=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*h+o[l+p]*d;return s}}class Eae extends $v{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class $l{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Fh(t,this.TimeBufferType),this.values=Fh(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Fh(e.times,Array),values:Fh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Eae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new XH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Sae(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case bv:t=this.InterpolantFactoryMethodDiscrete;break;case mm:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bv;case this.InterpolantFactoryMethodLinear:return mm;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Ma(n,s,o),this.values=Ma(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&BR(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Ma(this.times),t=Ma(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const h=a*n,p=h-n,m=h+n;for(let _=0;_!==n;++_){const b=t[h+_];if(b!==t[p+_]||b!==t[m+_]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*n,p=o*n;for(let m=0;m!==n;++m)t[p+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Ma(e,0,o),this.values=Ma(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=Ma(this.times,0),t=Ma(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}$l.prototype.TimeBufferType=Float32Array,$l.prototype.ValueBufferType=Float32Array,$l.prototype.DefaultInterpolation=mm;class Jm extends $l{}Jm.prototype.ValueTypeName="bool",Jm.prototype.ValueBufferType=Array,Jm.prototype.DefaultInterpolation=bv,Jm.prototype.InterpolantFactoryMethodLinear=void 0,Jm.prototype.InterpolantFactoryMethodSmooth=void 0;class YH extends $l{}YH.prototype.ValueTypeName="color";class jv extends $l{}jv.prototype.ValueTypeName="number";class Aae extends $v{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let d=c+a;c!==d;c+=4)Hs.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Nh extends $l{InterpolantFactoryMethodLinear(e){return new Aae(this.times,this.values,this.getValueSize(),e)}}Nh.prototype.ValueTypeName="quaternion",Nh.prototype.DefaultInterpolation=mm,Nh.prototype.InterpolantFactoryMethodSmooth=void 0;class Qm extends $l{}Qm.prototype.ValueTypeName="string",Qm.prototype.ValueBufferType=Array,Qm.prototype.DefaultInterpolation=bv,Qm.prototype.InterpolantFactoryMethodLinear=void 0,Qm.prototype.InterpolantFactoryMethodSmooth=void 0;class qv extends $l{}qv.prototype.ValueTypeName="vector";class Xv{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Uo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(Tae(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push($l.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=qH(l);l=UR(l,1,d),c=UR(c,1,d),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new jv(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const h=d[1];let p=r[h];p||(r[h]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,p,m,_,b){if(0!==m.length){const v=[],y=[];VR(m,v,y,_),0!==v.length&&b.push(new h(p,v,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const p=c[h].keys;if(p&&0!==p.length)if(p[0].morphTargets){const m={};let _;for(_=0;_<p.length;_++)if(p[_].morphTargets)for(let b=0;b<p[_].morphTargets.length;b++)m[p[_].morphTargets[b]]=-1;for(const b in m){const v=[],y=[];for(let M=0;M!==p[_].morphTargets.length;++M){const x=p[_];v.push(x.time),y.push(x.morphTarget===b?1:0)}r.push(new jv(".morphTargetInfluence["+b+"]",v,y))}l=m.length*o}else{const m=".bones["+t[h].name+"]";n(qv,m+".position",p,"pos",r),n(Nh,m+".quaternion",p,"rot",r),n(qv,m+".scale",p,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Tae(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Dae(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return jv;case"vector":case"vector2":case"vector3":case"vector4":return qv;case"color":return YH;case"quaternion":return Nh;case"bool":case"boolean":return Jm;case"string":return Qm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const t=[],n=[];VR(i.keys,t,n,"value"),i.times=t,i.values=n}return void 0!==e.parse?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const eg={enabled:!1,files:{},add:function(i,e){!1!==this.enabled&&(this.files[i]=e)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class KH{constructor(e,t,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(d){a++,!1===s&&void 0!==r.onStart&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,void 0!==r.onProgress&&r.onProgress(d,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(d){void 0!==r.onError&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return c.push(d,h),this},this.removeHandler=function(d){const h=c.indexOf(d);return-1!==h&&c.splice(h,2),this},this.getHandler=function(d){for(let h=0,p=c.length;h<p;h+=2){const m=c[h],_=c[h+1];if(m.global&&(m.lastIndex=0),m.test(d))return _}return null}}}const ZH=new KH;class Bh{constructor(e){this.manager=void 0!==e?e:ZH,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Yc={};class Iae extends Error{constructor(e,t){super(e),this.response=t}}class Ca extends Bh{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=eg.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Yc[e])return void Yc[e].push({onLoad:t,onProgress:n,onError:r});Yc[e]=[],Yc[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const d=Yc[e],h=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,_=0!==m;let b=0;const v=new ReadableStream({start(y){!function M(){h.read().then(({done:x,value:C})=>{if(x)y.close();else{b+=C.byteLength;const E=new ProgressEvent("progress",{lengthComputable:_,loaded:b,total:m});for(let T=0,O=d.length;T<O;T++){const L=d[T];L.onProgress&&L.onProgress(E)}y.enqueue(C),M()}})}()}});return new Response(v)}throw new Iae(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(_=>m.decode(_))}}}).then(c=>{eg.add(e,c);const d=Yc[e];delete Yc[e];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=Yc[e];if(void 0===d)throw this.manager.itemError(e),c;delete Yc[e];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class qC extends Bh{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=eg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Mv("img");function l(){d(),eg.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){d(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class XC extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=new el,o=new qC(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},n,r),s}}class YC extends Fr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ue(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const zR=new jt,JH=new F,QH=new F;class HR{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Me(512,512),this.map=null,this.mapPass=null,this.matrix=new jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new iR,this._frameExtents=new Me(1,1),this._viewportCount=1,this._viewports=[new oi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;JH.setFromMatrixPosition(e.matrixWorld),t.position.copy(JH),QH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(QH),t.updateMatrixWorld(),zR.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zR),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(zR)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Pae extends HR{constructor(){super(new br(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*vm*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class e4 extends YC{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Fr.DEFAULT_UP),this.updateMatrix(),this.target=new Fr,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Pae}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const t4=new jt,Yv=new F,GR=new F;class kae extends HR{constructor(){super(new br(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Me(4,2),this._viewportCount=6,this._viewports=[new oi(2,1,1,1),new oi(0,1,1,1),new oi(3,1,1,1),new oi(1,1,1,1),new oi(3,0,1,1),new oi(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Yv.setFromMatrixPosition(e.matrixWorld),n.position.copy(Yv),GR.copy(n.position),GR.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(GR),n.updateMatrixWorld(),r.makeTranslation(-Yv.x,-Yv.y,-Yv.z),t4.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(t4)}}class n4 extends YC{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new kae}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Oae extends HR{constructor(){super(new xC(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class i4 extends YC{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Fr.DEFAULT_UP),this.updateMatrix(),this.target=new Fr,this.shadow=new Oae}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class WR extends YC{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tg{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class zae extends Bh{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=eg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){eg.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}const jR="\\[\\]\\.:\\/",jae=new RegExp("["+jR+"]","g"),qR="[^"+jR+"]",qae="[^"+jR.replace("\\.","")+"]",Jae=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",qR)+/(WCOD+)?/.source.replace("WCOD",qae)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qR)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qR)+"$"),Qae=["material","materials","bones","map"];class ele{constructor(e,t,n){const r=n||gi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let gi=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(jae,"")}static parseTrackName(t){const n=Jae.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Qae.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let d=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===d){d=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==d){if(void 0===t[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[d]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=ele,i})();gi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},gi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},gi.prototype.GetterByBindingType=[gi.prototype._getValue_direct,gi.prototype._getValue_array,gi.prototype._getValue_arrayElement,gi.prototype._getValue_toArray],gi.prototype.SetterByBindingTypeAndVersioning=[[gi.prototype._setValue_direct,gi.prototype._setValue_direct_setNeedsUpdate,gi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_array,gi.prototype._setValue_array_setNeedsUpdate,gi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_arrayElement,gi.prototype._setValue_arrayElement_setNeedsUpdate,gi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_fromArray,gi.prototype._setValue_fromArray_setNeedsUpdate,gi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"151"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="151");class sl{constructor(e){this.nativeMesh=e,this.name=""}get position(){return this.nativeMesh.position}set position(e){this.nativeMesh.position.set(e.x,e.y,e.z)}get rotation(){return this.nativeMesh.quaternion}set rotation(e){this.nativeMesh.quaternion.set(e.x,e.y,e.z,e.w)}get scale(){return this.nativeMesh.scale}set scale(e){this.nativeMesh.scale.set(e.x,e.y,e.z)}get visible(){return this.nativeMesh.visible}set visible(e){this.nativeMesh.visible=e}isEmpty(){return(this.nativeMesh instanceof SC||this.nativeMesh instanceof wa)&&0==this.nativeMesh.children.length}popChild(e){const t=this.nativeMesh.children.find(n=>n.name===e||n.userData.name===e);return t?(t.removeFromParent(),new sl(t)):null}getBoundings(){return(new tl).setFromObject(this.nativeMesh)}clone(){return new sl(this.nativeMesh.clone())}addToWorld(e){var t;null===(t=e.nativeScene)||void 0===t||t.add(this.nativeMesh)}removeFromWorld(e){var t;null===(t=e.nativeScene)||void 0===t||t.remove(this.nativeMesh)}dispose(){this.nativeMesh.traverse(e=>{e instanceof Yn&&this.disposeMesh(e)}),this.nativeMesh instanceof Yn&&this.disposeMesh(this.nativeMesh)}disposeMesh(e){e.geometry.dispose();const t=e.material instanceof Array?e.material:[e.material];for(const n of t)n.dispose()}}class sle extends class Xee{createBox(e,t){return this.createPrimitive({shape:"BOX",dimensions:e},t)}createCapsule(e,t,n){return this.createPrimitive({shape:"CAPSULE",radius:e,centersDistance:t},n)}createCylinder(e,t,n){return this.createPrimitive({shape:"CYLINDER",radius:e,height:t},n)}createCone(e,t,n){return this.createPrimitive({shape:"CONE",radius:e,height:t},n)}createSphere(e){return this.createPrimitive({shape:"SPHERE",radius:e})}}{getRandomMaterial(){return new nr({color:Math.floor(256*Math.random())<<16|Math.floor(256*Math.random())<<8|Math.floor(256*Math.random())})}transformPrimitiveZUp(e){e.rotateX(Math.PI/2);const t=new wa;return t.add(e),t}createPrimitive(e,t=this.getRandomMaterial()){let n=null;switch(e.shape){case"BOX":n=new Yn(new Sh(e.dimensions.x,e.dimensions.y,e.dimensions.z),t);break;case"CAPSULE":n=this.transformPrimitiveZUp(new Yn(new BC(e.radius,e.centersDistance),t));break;case"CYLINDER":n=this.transformPrimitiveZUp(new Yn(new Ym(e.radius,e.radius,e.height),t));break;case"CONE":n=this.transformPrimitiveZUp(new Yn(new UC(e.radius,e.height),t));break;case"SPHERE":n=new Yn(new Lh(e.radius),t)}if(!n)throw new Error(`Primitive with shape "${e.shape}" not implemented`);return new sl(n)}}class ale{constructor(){this.gltfLoader=null}registerGltfLoaderAddon(e){this.gltfLoader=e}loadFromGgGlb(e,t){return function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){if(!this.gltfLoader)throw new Error("Three GLTF loader addon not registered! Use loader.registerGltfLoaderAddon(new GLTFLoader()) before trying to load something");const n=yield this.gltfLoader.parseAsync(e,"");return n.scene.traverse(r=>{r.type.endsWith("Light")&&(console.warn("WORKAROUND: light intensity from GLB divided by 200."),r.intensity*=.005)}),new sl(n.scene)})}}class lle extends sl{constructor(){super(new Xm(new ln,new Br({color:16711680,linewidth:.5}))),this.debugBufferSize=3e6,this.index=0,this.lastMaxIndex=0,this.debugVertices=new Float32Array(this.debugBufferSize),this.debugColors=new Float32Array(this.debugBufferSize),this.nativeMesh.geometry.setAttribute("position",new Ii(this.debugVertices,3)),this.nativeMesh.geometry.setAttribute("color",new Ii(this.debugColors,3)),this.nativeMesh.frustumCulled=!1}drawContactPoint(e,t,n){this.setXYZ(this.debugVertices,this.index,e.x,e.y,e.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0),this.setXYZ(this.debugVertices,this.index,e.x+t.x,e.y+t.y,e.z+t.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0)}drawLine(e,t,n){this.setXYZ(this.debugVertices,this.index,e.x,e.y,e.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0),this.setXYZ(this.debugVertices,this.index,t.x,t.y,t.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0)}update(){this.index<this.lastMaxIndex&&(this.debugVertices.fill(0,this.index,this.lastMaxIndex),this.debugColors.fill(0,this.index,this.lastMaxIndex)),this.lastMaxIndex=this.index,this.index=0,this.nativeMesh.geometry.attributes.position.needsUpdate=!0,this.nativeMesh.geometry.attributes.color.needsUpdate=!0}setXYZ(e,t,n,r,s){e[t*=3]=n,e[t+1]=r,e[t+2]=s}}class M4{constructor(){this._nativeScene=null,this.factory=new sle,this.loader=new ale,this.debugPhysicsDrawerClass=lle}get nativeScene(){return this._nativeScene}init(){return i=this,e=void 0,n=function*(){this._nativeScene=new SC},new((t=void 0)||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())});var i,e,t,n}dispose(){this._nativeScene=new SC}}class ule extends Fee{}class dle extends sl{constructor(e){super(e),this.nativeCamera=e}get supportsFov(){return this.nativeCamera instanceof br||"PerspectiveCamera"==this.nativeCamera.type}get fov(){return this.nativeCamera.fov||NaN}set fov(e){this.supportsFov&&(this.nativeCamera.fov=e,this.nativeCamera.updateProjectionMatrix())}}class C4 extends qee{constructor(e,t={},n=new ule(new dle(new br(75,1,1,1e4)))){super(e,t),this.canvas=e,this.camera=n,this.renderer=new dH({canvas:e,antialias:this.rendererOptions.antialias,preserveDrawingBuffer:!0,alpha:this.rendererOptions.transparent}),this.renderer.useLegacyLights=!1,this.renderer.outputEncoding=Pn,this.renderer.toneMappingExposure=2,this.renderer.shadowMap.enabled=!0,this.renderer.setClearColor(this.rendererOptions.background),this.renderer.shadowMap.type=2,this.renderer.setPixelRatio(this.rendererOptions.forceResolution||devicePixelRatio)}resizeRenderer(e){this.renderer.setSize(e.x,e.y),(this.camera.object3D.nativeCamera instanceof br||"PerspectiveCamera"==this.camera.object3D.nativeCamera.type)&&Math.abs(this.camera.object3D.nativeCamera.aspect-e.x/e.y)>.01&&(this.camera.object3D.nativeCamera.aspect=e.x/e.y,this.camera.object3D.nativeCamera.updateProjectionMatrix())}render(){this.renderer.render(this.world.visualScene.nativeScene,this.camera.object3D.nativeCamera)}dispose(){super.dispose(),this.renderer.clear(),this.renderer.dispose(),this.renderer.domElement=null}}function S4(i,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(2===e||1===e){let t=i.getIndex();if(null===t){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}const n=t.count-2,r=[];if(2===e)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class fle extends Bh{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new yle(t)}),this.register(function(t){return new Sle(t)}),this.register(function(t){return new Ele(t)}),this.register(function(t){return new Ale(t)}),this.register(function(t){return new ble(t)}),this.register(function(t){return new xle(t)}),this.register(function(t){return new wle(t)}),this.register(function(t){return new Mle(t)}),this.register(function(t){return new _le(t)}),this.register(function(t){return new Cle(t)}),this.register(function(t){return new vle(t)}),this.register(function(t){return new mle(t)}),this.register(function(t){return new Dle(t)}),this.register(function(t){return new Tle(t)})}load(e,t,n,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:tg.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ca(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(d){t(d),s.manager.itemEnd(e)},a)}catch(d){a(d)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===E4){try{o[kn.KHR_BINARY_GLTF]=new Ile(e)}catch(h){return void(r&&r(h))}s=JSON.parse(o[kn.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new Gle(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const h=this.pluginCallbacks[d](c);a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const h=s.extensionsUsed[d],p=s.extensionsRequired||[];switch(h){case kn.KHR_MATERIALS_UNLIT:o[h]=new gle;break;case kn.KHR_DRACO_MESH_COMPRESSION:o[h]=new Rle(s,this.dracoLoader);break;case kn.KHR_TEXTURE_TRANSFORM:o[h]=new Ple;break;case kn.KHR_MESH_QUANTIZATION:o[h]=new kle;break;default:p.indexOf(h)>=0&&void 0===a[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function ple(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const kn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class mle{constructor(e){this.parser=e,this.name=kn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const d=new Ue(16777215);void 0!==l.color&&d.fromArray(l.color);const h=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new i4(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new n4(d),c.distance=h;break;case"spot":c=new e4(d),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Ju(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class gle{constructor(){this.name=kn.KHR_MATERIALS_UNLIT}getMaterialType(){return nr}extendParams(e,t,n){const r=[];e.color=new Ue(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(e,"map",s.baseColorTexture,Pn))}return Promise.all(r)}}class _le{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class yle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Yu:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Me(a,a)}return Promise.all(s)}}class vle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Yu:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class ble{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Yu:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ue(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Pn)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class xle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Yu:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class wle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Yu:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ue(a[0],a[1],a[2]),Promise.all(s)}}class Mle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Yu:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Cle{constructor(e){this.parser=e,this.name=kn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?Yu:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ue(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Pn)),Promise.all(s)}}class Sle{constructor(e){this.parser=e,this.name=kn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Ele{constructor(e){this.parser=e,this.name=kn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Ale{constructor(e){this.parser=e,this.name=kn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Dle{constructor(e){this.name=kn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const d=r.count,h=r.byteStride,p=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,h,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(d*h);return o.decodeGltfBuffer(new Uint8Array(m),d,h,p,r.mode,r.filter),m})})}return null}}class Tle{constructor(e){this.name=kn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==Sa.TRIANGLES&&c.mode!==Sa.TRIANGLE_STRIP&&c.mode!==Sa.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const d=c.pop(),h=d.isGroup?d.children:[d],p=c[0].count,m=[];for(const _ of h){const b=new jt,v=new F,y=new Hs,M=new F(1,1,1),x=new SH(_.geometry,_.material,p);for(let C=0;C<p;C++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&y.fromBufferAttribute(l.ROTATION,C),l.SCALE&&M.fromBufferAttribute(l.SCALE,C),x.setMatrixAt(C,b.compose(v,y,M));for(const C in l)"TRANSLATION"!==C&&"ROTATION"!==C&&"SCALE"!==C&&_.geometry.setAttribute(C,l[C]);Fr.prototype.copy.call(x,_),this.parser.assignFinalMaterial(x),m.push(x)}return d.isGroup?(d.clear(),d.add(...m),d):m[0]}))}}const E4="glTF";class Ile{constructor(e){this.name=kn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==E4)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(e,12+o,a);this.content=n.decode(c)}else if(5130562===l){const c=12+o;this.body=e.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Rle{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const h=eP[d]||d.toLowerCase();a[h]=o[d]}for(const d in e.attributes){const h=eP[d]||d.toLowerCase();if(void 0!==o[d]){const p=n.accessors[e.attributes[d]];c[h]=ng[p.componentType].name,l[h]=!0===p.normalized}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(h){r.decodeDracoFile(d,function(p){for(const m in p.attributes){const _=p.attributes[m],b=l[m];void 0!==b&&(_.normalized=b)}h(p)},a,c)})})}}class Ple{constructor(){this.name=kn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class kle{constructor(){this.name=kn.KHR_MESH_QUANTIZATION}}class D4 extends $v{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,d=r-t,h=(n-t)/d,p=h*h,m=p*h,_=e*c,b=_-c,v=-2*m+3*p,y=m-p,M=1-v,x=y-p+h;for(let C=0;C!==a;C++)s[C]=M*o[b+C+a]+x*(o[b+C+l]*d)+v*o[_+C+a]+y*(o[_+C]*d);return s}}const Ole=new Hs;class Lle extends D4{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return Ole.fromArray(s).normalize().toArray(s),s}}const Sa={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ng={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},T4={9728:Bi,9729:Xi,9984:1004,9985:1007,9986:1005,9987:Vc},I4={33071:tr,33648:1002,10497:Uc},QR={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},eP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Fle={CUBICSPLINE:void 0,LINEAR:mm,STEP:bv};function Zv(i,e,t){for(const n in t.extensions)void 0===i[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Ju(i,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Ule(i,e){if(i.updateMorphTargets(),void 0!==e.weights)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Vle(i){const e=i.extensions&&i.extensions[kn.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+R4(e.attributes):i.indices+":"+R4(i.attributes)+":"+i.mode,t}function R4(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function nP(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Hle=new jt;class Gle{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ple,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||n||r&&s<98?new XC(this.options.manager):new zae(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ca(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};Zv(s,a,r),Ju(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[kn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(tg.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteOffset||0;return n.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=QR[r.type],l=!0===r.normalized,c=new(0,ng[r.componentType])(r.count*o);return Promise.resolve(new Ii(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=QR[r.type],c=ng[r.componentType],d=c.BYTES_PER_ELEMENT,p=r.byteOffset||0,m=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,_=!0===r.normalized;let b,v;if(m&&m!==d*l){const y=Math.floor(p/m),M="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+y+":"+r.count;let x=t.cache.get(M);x||(b=new c(a,y*m,r.count*m/d),x=new hR(b,m/d),t.cache.add(M,x)),v=new Ih(x,l,p%m/d,_)}else b=null===a?new c(r.count*l):new c(a,p,r.count*l),v=new Ii(b,l,_);if(void 0!==r.sparse){const C=r.sparse.values.byteOffset||0,E=new(0,ng[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*QR.SCALAR),T=new c(o[2],C,r.sparse.count*l);null!==a&&(v=new Ii(v.array.slice(),v.itemSize,v.normalized));for(let O=0,L=E.length;O<L;O++){const A=E[O];if(v.setX(A,T[O*l]),l>=2&&v.setY(A,T[O*l+1]),l>=3&&v.setZ(A,T[O*l+2]),l>=4&&v.setW(A,T[O*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",""===d.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(d.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return d.magFilter=T4[p.magFilter]||Xi,d.minFilter=T4[p.minFilter]||Vc,d.wrapS=I4[p.wrapS]||Uc,d.wrapT=I4[p.wrapT]||Uc,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(h=>h.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(h){return new Promise(function(p,m){let _=p;!0===t.isImageBitmapLoader&&(_=function(b){const v=new el(b);v.needsUpdate=!0,p(v)}),t.load(tg.resolveURL(h,s.path),_,void 0,m)})}).then(function(h){return!0===c&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||function zle(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=d,d}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),s.extensions[kn.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[kn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[kn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Ph,ho.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Br,ho.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return Wv}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=[];if((s.extensions||{})[kn.KHR_MATERIALS_UNLIT]){const h=r[kn.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new Ue(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}void 0!==h.baseColorTexture&&c.push(t.assignTexture(a,"map",h.baseColorTexture,Pn)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const d=s.alphaMode||"OPAQUE";if("BLEND"===d?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===d&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==nr&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Me(1,1),void 0!==s.normalTexture.scale)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}return void 0!==s.occlusionTexture&&o!==nr&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==nr&&(a.emissive=(new Ue).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==nr&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Pn)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),Ju(h,s),t.associations.set(h,{materials:e}),s.extensions&&Zv(r,h,s),h})}createUniqueName(e){const t=gi.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[kn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return P4(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],d=Vle(c),h=r[d];if(h)o.push(h.promise);else{let p;p=c.extensions&&c.extensions[kn.KHR_DRACO_MESH_COMPRESSION]?s(c):P4(new ln,c,t),r[d]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=void 0===o[l].material?(void 0===(i=this.cache).DefaultMaterial&&(i.DefaultMaterial=new Wv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),i.DefaultMaterial):this.getDependency("material",o[l].material);a.push(d)}var i;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],h=[];for(let m=0,_=d.length;m<_;m++){const b=d[m],v=o[m];let y;const M=c[m];if(v.mode===Sa.TRIANGLES||v.mode===Sa.TRIANGLE_STRIP||v.mode===Sa.TRIANGLE_FAN||void 0===v.mode)y=!0===s.isSkinnedMesh?new xH(b,M):new Yn(b,M),!0===y.isSkinnedMesh&&y.normalizeSkinWeights(),v.mode===Sa.TRIANGLE_STRIP?y.geometry=S4(y.geometry,1):v.mode===Sa.TRIANGLE_FAN&&(y.geometry=S4(y.geometry,2));else if(v.mode===Sa.LINES)y=new Xm(b,M);else if(v.mode===Sa.LINE_STRIP)y=new Rh(b,M);else if(v.mode===Sa.LINE_LOOP)y=new RH(b,M);else{if(v.mode!==Sa.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);y=new Bv(b,M)}Object.keys(y.geometry.morphAttributes).length>0&&Ule(y,s),y.name=t.createUniqueName(s.name||"mesh_"+e),Ju(y,s),v.extensions&&Zv(r,y,v),t.assignFinalMaterial(y),h.push(y)}for(let m=0,_=h.length;m<_;m++)t.associations.set(h[m],{meshes:e,primitives:m});if(1===h.length)return h[0];const p=new wa;t.associations.set(p,{meshes:e});for(let m=0,_=h.length;m<_;m++)p.add(h[m]);return p})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new br(ane_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new xC(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Ju(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return n.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const h=o[c];if(h){a.push(h);const p=new jt;null!==s&&p.fromArray(s.array,16*c),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new IC(a,l)})}loadAnimation(e){const n=this.json.animations[e],r=n.name?n.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let d=0,h=n.channels.length;d<h;d++){const p=n.channels[d],m=n.samplers[p.sampler],_=p.target,b=_.node,v=void 0!==n.parameters?n.parameters[m.input]:m.input,y=void 0!==n.parameters?n.parameters[m.output]:m.output;void 0!==_.node&&(s.push(this.getDependency("node",b)),o.push(this.getDependency("accessor",v)),a.push(this.getDependency("accessor",y)),l.push(m),c.push(_))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(d){const h=d[0],p=d[1],m=d[2],_=d[3],b=d[4],v=[];for(let y=0,M=h.length;y<M;y++){const x=h[y],C=p[y],E=m[y],T=_[y],O=b[y];if(void 0===x)continue;let L;switch(x.updateMatrix(),Zu[O.path]){case Zu.weights:L=jv;break;case Zu.rotation:L=Nh;break;default:L=qv}const A=x.name?x.name:x.uuid,P=void 0!==T.interpolation?Fle[T.interpolation]:mm,Y=[];Zu[O.path]===Zu.weights?x.traverse(function(H){H.morphTargetInfluences&&Y.push(H.name?H.name:H.uuid)}):Y.push(A);let ie=E.array;if(E.normalized){const H=nP(ie.constructor),$=new Float32Array(ie.length);for(let te=0,q=ie.length;te<q;te++)$[te]=ie[te]*H;ie=$}for(let H=0,$=Y.length;H<$;H++){const te=new L(Y[H]+"."+Zu[O.path],C.array,ie,P);"CUBICSPLINE"===T.interpolation&&(te.createInterpolant=function(ne){return new(this instanceof Nh?Lle:D4)(this.times,this.values,this.getValueSize()/3,ne)},te.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),v.push(te)}}return new Xv(r,void 0,v)})}createNodeMesh(e){const n=this,r=this.json.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this,r=this.json.nodes[e],s=n._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,d=a.length;c<d;c++)o.push(n.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const d=c[0],h=c[1],p=c[2];null!==p&&d.traverse(function(m){!m.isSkinnedMesh||m.bind(p,Hle)});for(let m=0,_=h.length;m<_;m++)d.add(h[m]);return d})}_loadNodeShallow(e){const n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let d;if(d=!0===s.isBone?new pR:c.length>1?new wa:1===c.length?c[0]:new Fr,d!==c[0])for(let h=0,p=c.length;h<p;h++)d.add(c[h]);if(s.name&&(d.userData.name=s.name,d.name=o),Ju(d,s),s.extensions&&Zv(n,d,s),void 0!==s.matrix){const h=new jt;h.fromArray(s.matrix),d.applyMatrix4(h)}else void 0!==s.translation&&d.position.fromArray(s.translation),void 0!==s.rotation&&d.quaternion.fromArray(s.rotation),void 0!==s.scale&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new wa;n.name&&(s.name=r.createUniqueName(n.name)),Ju(s,n),n.extensions&&Zv(t,s,n);const o=n.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,h=l.length;d<h;d++)s.add(l[d]);return r.associations=(d=>{const h=new Map;for(const[p,m]of r.associations)(p instanceof ho||p instanceof el)&&h.set(p,m);return d.traverse(p=>{const m=r.associations.get(p);null!=m&&h.set(p,m)}),h})(s),s})}}function P4(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=eP[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==e.indices&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return Ju(i,e),function Wle(i,e,t){const n=e.attributes,r=new tl;if(void 0===n.POSITION)return;{const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new F(l[0],l[1],l[2]),new F(c[0],c[1],c[2])),a.normalized){const d=nP(ng[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}const s=e.targets;if(void 0!==s){const a=new F,l=new F;for(let c=0,d=s.length;c<d;c++){const h=s[c];if(void 0!==h.POSITION){const p=t.json.accessors[h.POSITION],m=p.min,_=p.max;if(void 0!==m&&void 0!==_){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(_[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(_[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(_[2]))),p.normalized){const b=nP(ng[p.componentType]);l.multiplyScalar(b)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new zl;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function Ble(i,e,t){let n=!1,r=!1,s=!1;for(let c=0,d=e.length;c<d;c++){const h=e[c];if(void 0!==h.POSITION&&(n=!0),void 0!==h.NORMAL&&(r=!0),void 0!==h.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){const h=e[c];if(n){const p=void 0!==h.POSITION?t.getDependency("accessor",h.POSITION):i.attributes.position;o.push(p)}if(r){const p=void 0!==h.NORMAL?t.getDependency("accessor",h.NORMAL):i.attributes.normal;a.push(p)}if(s){const p=void 0!==h.COLOR_0?t.getDependency("accessor",h.COLOR_0):i.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[1],p=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=h),s&&(i.morphAttributes.color=p),i.morphTargetsRelative=!0,i})}(i,e.targets,t):i})}const $le=/^[og]\s*(.+)?/,jle=/^mtllib /,qle=/^usemtl /,Xle=/^usemap /,k4=/\s+/,O4=new F,iP=new F,L4=new F,F4=new F,Ea=new F,iS=new Ue;function Yle(){const i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&"function"==typeof n.clone){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,s=this.object.geometry.normals;O4.fromArray(r,e),iP.fromArray(r,t),L4.fromArray(r,n),Ea.subVectors(L4,iP),F4.subVectors(O4,iP),Ea.cross(F4),Ea.normalize(),s.push(Ea.x,Ea.y,Ea.z),s.push(Ea.x,Ea.y,Ea.z),s.push(Ea.x,Ea.y,Ea.z)},addColor:function(e,t,n){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&s.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,s,o,a,l,c){const d=this.vertices.length;let h=this.parseVertexIndex(e,d),p=this.parseVertexIndex(t,d),m=this.parseVertexIndex(n,d);if(this.addVertex(h,p,m),this.addColor(h,p,m),void 0!==a&&""!==a){const _=this.normals.length;h=this.parseNormalIndex(a,_),p=this.parseNormalIndex(l,_),m=this.parseNormalIndex(c,_),this.addNormal(h,p,m)}else this.addFaceNormal(h,p,m);if(void 0!==r&&""!==r){const _=this.uvs.length;h=this.parseUVIndex(r,_),p=this.parseUVIndex(s,_),m=this.parseUVIndex(o,_),this.addUV(h,p,m),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const s=this.parseVertexIndex(e[n],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],n));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return i.startObject("",!1),i}class Kle extends Bh{constructor(e){super(e),this.materials=null}load(e,t,n,r){const s=this,o=new Ca(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new Yle;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a].trimStart();if(0===c.length)continue;const d=c.charAt(0);if("#"!==d)if("v"===d){const h=c.split(k4);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(iS.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),t.colors.push(iS.r,iS.g,iS.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===d){const p=c.slice(1).trim().split(k4),m=[];for(let b=0,v=p.length;b<v;b++){const y=p[b];if(y.length>0){const M=y.split("/");m.push(M)}}const _=m[0];for(let b=1,v=m.length-1;b<v;b++){const y=m[b],M=m[b+1];t.addFace(_[0],y[0],M[0],_[1],y[1],M[1],_[2],y[2],M[2])}}else if("l"===d){const h=c.substring(1).trim().split(" ");let p=[];const m=[];if(-1===c.indexOf("/"))p=h;else for(let _=0,b=h.length;_<b;_++){const v=h[_].split("/");""!==v[0]&&p.push(v[0]),""!==v[1]&&m.push(v[1])}t.addLineGeometry(p,m)}else if("p"===d){const p=c.slice(1).trim().split(" ");t.addPointGeometry(p)}else if(null!==(r=$le.exec(c))){const h=(" "+r[0].slice(1).trim()).slice(1);t.startObject(h)}else if(qle.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(jle.test(c))t.materialLibraries.push(c.substring(7).trim());else if(Xle.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===d){if(r=c.split(" "),r.length>1){const p=r[1].trim().toLowerCase();t.object.smooth="0"!==p&&"off"!==p}else t.object.smooth=!0;const h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if("\0"===c)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new wa;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,l=t.objects.length;a<l;a++){const c=t.objects[a],d=c.geometry,h=c.materials,p="Line"===d.type,m="Points"===d.type;let _=!1;if(0===d.vertices.length)continue;const b=new ln;b.setAttribute("position",new et(d.vertices,3)),d.normals.length>0&&b.setAttribute("normal",new et(d.normals,3)),d.colors.length>0&&(_=!0,b.setAttribute("color",new et(d.colors,3))),!0===d.hasUVIndices&&b.setAttribute("uv",new et(d.uvs,2));const v=[];for(let M=0,x=h.length;M<x;M++){const C=h[M],E=C.name+"_"+C.smooth+"_"+_;let T=t.materials[E];if(null!==this.materials)if(T=this.materials.create(C.name),!p||!T||T instanceof Br){if(m&&T&&!(T instanceof Ph)){const O=new Ph({size:10,sizeAttenuation:!1});ho.prototype.copy.call(O,T),O.color.copy(T.color),O.map=T.map,T=O}}else{const O=new Br;ho.prototype.copy.call(O,T),O.color.copy(T.color),T=O}void 0===T&&(T=p?new Br:m?new Ph({size:1,sizeAttenuation:!1}):new NR,T.name=C.name,T.flatShading=!C.smooth,T.vertexColors=_,t.materials[E]=T),v.push(T)}let y;if(v.length>1){for(let M=0,x=h.length;M<x;M++){const C=h[M];b.addGroup(C.groupStart,C.groupCount,M)}y=p?new Xm(b,v):m?new Bv(b,v):new Yn(b,v)}else y=p?new Xm(b,v[0]):m?new Bv(b,v[0]):new Yn(b,v[0]);y.name=c.name,s.add(y)}else if(t.vertices.length>0){const a=new Ph({size:1,sizeAttenuation:!1}),l=new ln;l.setAttribute("position",new et(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(l.setAttribute("color",new et(t.colors,3)),a.vertexColors=!0);const c=new Bv(l,a);s.add(c)}return s}}class Zle extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=this,o=""===this.path?tg.extractUrlBase(e):this.path,a=new Ca(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const n=e.split("\n");let r={};const s=/\s+/,o={};for(let l=0;l<n.length;l++){let c=n[l];if(c=c.trim(),0===c.length||"#"===c.charAt(0))continue;const d=c.indexOf(" ");let h=d>=0?c.substring(0,d):c;h=h.toLowerCase();let p=d>=0?c.substring(d+1):"";if(p=p.trim(),"newmtl"===h)r={name:p},o[p]=r;else if("ka"===h||"kd"===h||"ks"===h||"ke"===h){const m=p.split(s,3);r[h]=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])]}else r[h]=p}const a=new Jle(this.resourcePath||t,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class Jle{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:0,this.wrap=void 0!==this.options.wrap?this.options.wrap:Uc}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const n in e){const r=e[n],s={};t[n]=s;for(const o in r){let a=!0,l=r[o];const c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===l[0]&&0===l[1]&&0===l[2]&&(a=!1)}a&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,n=this.materialsInfo[e],r={name:e,side:this.side};function o(a,l){if(r[a])return;const c=t.getTextureParams(l,r),d=t.loadTexture(function s(a,l){return"string"!=typeof l||""===l?"":/^https?:\/\//i.test(l)?l:a+l}(t.baseUrl,c.url));d.repeat.copy(c.scale),d.offset.copy(c.offset),d.wrapS=t.wrap,d.wrapT=t.wrap,("map"===a||"emissiveMap"===a)&&(d.encoding=Pn),r[a]=d}for(const a in n){const l=n[a];let c;if(""!==l)switch(a.toLowerCase()){case"kd":r.color=(new Ue).fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=(new Ue).fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=(new Ue).fromArray(l).convertSRGBToLinear();break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0)}}return this.materials[e]=new NR(r),this.materials[e]}getTextureParams(e,t){const n={scale:new Me(1,1),offset:new Me(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(n.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(n.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),n.url=r.join(" ").trim(),n}loadTexture(e,t,n,r,s){const o=void 0!==this.manager?this.manager:ZH;let a=o.getHandler(e);null===a&&(a=new XC(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(e,n,r,s);return void 0!==t&&(l.mapping=t),l}}function Qle(i,e){if(1&i&&(ks(),Qe(0,"circle",4)),2&i){const t=Te(),n=ja(1);wc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(n)),Yt("r",t._getCircleRadius())}}function ece(i,e){if(1&i&&(ks(),Qe(0,"circle",4)),2&i){const t=Te(),n=ja(1);wc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(n)),Yt("r",t._getCircleRadius())}}const nce=$y(class{constructor(i){this._elementRef=i}},"primary"),ice=new Se("mat-progress-spinner-default-options",{providedIn:"root",factory:function rce(){return{diameter:100}}});class ol extends nce{constructor(e,t,n,r,s,o,a,l){super(e),this._document=n,this._diameter=100,this._value=0,this._resizeSubscription=nn.EMPTY,this.mode="determinate";const c=ol._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(n.head)||c.set(n.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=_a(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=_a(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,_a(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=s3(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,n=ol._diameters;let r=n.get(e);if(!r||!r.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),r||(r=new Set,n.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}ol._diameters=new WeakMap,ol.\u0275fac=function(e){return new(e||ol)(R($t),R(Ar),R(Ft,8),R(oo,8),R(ice),R(ni),R(uM),R(Dt))},ol.\u0275cmp=St({type:ol,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(Yt("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),wc("width",t.diameter,"px")("height",t.diameter,"px"),fi("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[ht],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(ks(),se(0,"svg",0,1),Pe(2,Qle,1,11,"circle",2),Pe(3,ece,1,9,"circle",3),ae()),2&e&&(wc("width",t.diameter,"px")("height",t.diameter,"px"),ee("ngSwitch","indeterminate"===t.mode),Yt("viewBox",t._getViewBox()),J(2),ee("ngSwitchCase",!0),J(1),ee("ngSwitchCase",!1))},dependencies:[Bp,Sw],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let oce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Dn,Ja,Dn]}),i})();const ace=["previewCanvasContainer"],lce=["previewCanvas"];function cce(i,e){1&i&&Qe(0,"mat-spinner",6)}const rS=i=>{i.encoding=Pn,i.anisotropy=8,i.magFilter=Bi,i.minFilter=Bi};let uce=(()=>{class i{constructor(t,n,r){this.eelDelegate=t,this.cdr=n,this.mainService=r,this._resourceData$=new Nt(null),this.name="",this.changed=new st,this.destroyed$=new Ge,this.entity=null}get resourceData(){return this._resourceData$.getValue()}set resourceData(t){this._resourceData$.next(t)}ngAfterViewInit(){var t=this;return an(function*(){var s;t.world=new AV(new M4,{init:(s=an(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{}}),yield t.world.init(),t.world.visualScene.nativeScene.add(new WR(16777215,2));let n=new Nt({x:1,y:1});t.renderer=new C4(t.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),t.world.addEntity(t.renderer),t.controller=new $ee(t.renderer.camera,{mouseOptions:{canvas:t.previewCanvas.nativeElement}}),t.world.addEntity(t.controller);const r=()=>{n.next({x:t.previewCanvasContainer.nativeElement.clientWidth,y:t.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(t.previewCanvasContainer.nativeElement),r(),t.world.start(),t._resourceData$.pipe(at(t.destroyed$)).subscribe(function(){var s=an(function*(o){const a=yield t.loadPreviewFilePaths(o?.block_id);a&&(yield t.loadPreview(a))});return function(o){return s.apply(this,arguments)}}()),t.mainService.dataBlockChange$.pipe(at(t.destroyed$),Rn(([s,o])=>!!t.resourceData&&s.startsWith(t.resourceData.block_id)),Kp(1500)).subscribe(an(function*(){t.unloadPreview();const s=yield t.postTmpUpdates(t.resourceData?.block_id);s&&(yield t.loadPreview(s))}))})()}postTmpUpdates(t){var n=this;return an(function*(){if(t){const r=yield n.eelDelegate.serializeResourceTmp(t,Object.entries(n.mainService.changedDataBlocks).filter(([a,l])=>"__has_external_changes__"!=a&&a.startsWith(t)).map(([a,l])=>({id:a,value:l})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,geometry__replace_car_wheel_with_dummies:!1});return[r.find(a=>a.endsWith(".obj")),r.find(a=>a.endsWith(".mtl"))]}})()}loadPreviewFilePaths(t){var n=this;return an(function*(){if(t){const r=yield n.eelDelegate.serializeResource(t,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,geometry__replace_car_wheel_with_dummies:!1});return[r.find(a=>a.endsWith(".obj")),r.find(a=>a.endsWith(".mtl"))]}})()}loadPreview([t,n]){var r=this;return an(function*(){r.unloadPreview();const s=new Kle,a=yield(new Zle).loadAsync(n);a.preload(),s.setMaterials(a);const l=yield s.loadAsync(t);l.traverse(d=>{if(d instanceof Yn){const h=d.material instanceof Array?d.material:[d.material];for(const p of h)p.transparent=!0,p.alphaTest=.5,p instanceof nr&&p.map&&(p.map.wrapS=tr,p.map.wrapT=tr,rS(p.map),p.map.needsUpdate=!0)}}),r.entity=new ph(new sl(l),null),r.world.addEntity(r.entity);const c=r.entity.object3D.getBoundings();r.controller.target=yt.scalarMult(yt.add(c.min,c.max),.5),r.controller.radius=yt.dist(c.min,c.max),r.controller.theta=-1.32,r.controller.phi=1.22,r.cdr.markForCheck()})()}unloadPreview(){this.entity&&(this.world.removeEntity(this.entity),this.entity.dispose(),this.entity=null,this.cdr.markForCheck())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R(lh),R(ni),R(am))},i.\u0275cmp=St({type:i,selectors:[["app-orip-geometry-block-ui"]],viewQuery:function(t,n){if(1&t&&(Qi(ace,5),Qi(lce,5)),2&t){let r;Kt(r=Zt())&&(n.previewCanvasContainer=r.first),Kt(r=Zt())&&(n.previewCanvas=r.first)}},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:7,vars:4,consts:[[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[3,"resourceData"],["mode","indeterminate"]],template:function(t,n){1&t&&(se(0,"div",0,1),Qe(2,"canvas",2,3),Pe(4,cce,1,0,"mat-spinner",4),ae(),Qe(5,"app-compound-block-ui",5),Et(6,"async")),2&t&&(J(4),ee("ngIf",!n.entity),J(1),ee("resourceData",Tt(6,2,n._resourceData$)))},dependencies:[qi,ol,UM,Ac],styles:[".previewCanvasContainer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),i})();function dce(i,e){if(1&i&&(ks(),Qe(0,"circle",3),Et(1,"async"),Et(2,"async")),2&i){const t=Te();let n,r;Yt("cx",(null==(n=Tt(1,3,t.mapPointer$))?null:n.x)||0)("cy",(null==(r=Tt(2,5,t.mapPointer$))?null:r.y)||0)("r",10)}}const hce=function(){return{"stroke-width":3}};let fce=(()=>{class i{constructor(t){this.ref=t,this._roadSpline$=new Nt([]),this._pointer$=new Nt(null),this.splineClosed=!1,this.svgSize$=new Nt({x:100,y:100}),this.scalingSquare$=new Nt({x:0,y:0,width:100,height:100}),this.mapPolyline$=new Nt(""),this.mapPointer$=new Nt(null),this.destroyed$=new Ge}set roadSpline(t){this._roadSpline$.next(t)}set pointer(t){this._pointer$.next(t)}ngAfterViewInit(){this._roadSpline$.pipe(at(this.destroyed$),Xe(n=>{let r={x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},s={x:Number.MIN_SAFE_INTEGER,y:Number.MIN_SAFE_INTEGER};n.forEach(a=>{r={x:Math.min(r.x,a.x),y:Math.min(r.y,a.z)},s={x:Math.max(s.x,a.x),y:Math.max(s.y,a.z)}});const o_x=s.x-r.x,o_y=s.y-r.y;return{x:r.x-.1*o_x,y:r.y-.1*o_y,width:1.2*o_x,height:1.2*o_y}})).subscribe(this.scalingSquare$),Iu([this._roadSpline$,this.scalingSquare$,this.svgSize$]).pipe(at(this.destroyed$),Xe(([n,r,s])=>{const o=n.map(a=>({x:(a.x-r.x)*s.x/r.width,y:(r.y-a.z)*s.y/r.height+s.y}));return this.splineClosed&&o.length&&o.push(o[0]),o.map(a=>Math.round(a.x)+","+Math.round(a.y)).join(" ")})).subscribe(this.mapPolyline$),Iu([this._pointer$,this.scalingSquare$.asObservable(),this.svgSize$]).pipe(at(this.destroyed$),Xe(([n,r,s])=>n?{x:(n.x-r.x)*s.x/r.width,y:(r.y-n.y)*s.y/r.height+s.y}:null)).subscribe(this.mapPointer$);const t=()=>{this.svgSize$.next({x:this.ref.nativeElement.clientWidth,y:this.ref.nativeElement.clientHeight})};new ResizeObserver(t).observe(this.ref.nativeElement),t()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R($t))},i.\u0275cmp=St({type:i,selectors:[["app-tri-minimap"]],inputs:{roadSpline:"roadSpline",pointer:"pointer",splineClosed:"splineClosed"},decls:8,vars:13,consts:[["shape-rendering","geometricPrecision"],[2,"fill","none","stroke","#333333",3,"ngStyle"],["fill","#e30","stroke","black","stroke-width","3",4,"ngIf"],["fill","#e30","stroke","black","stroke-width","3"]],template:function(t,n){if(1&t&&(ks(),se(0,"svg",0),Et(1,"async"),Et(2,"async"),Qe(3,"polyline",1),Et(4,"async"),Ze(5," cars "),Pe(6,dce,3,7,"circle",2),Et(7,"async"),ae()),2&t){let r;Yt("viewBox","0 0 "+(null==(r=Tt(1,4,n.svgSize$))?null:r.x)+" "+(null==(r=Tt(2,6,n.svgSize$))?null:r.y)),J(3),ee("ngStyle",Ns(12,hce)),Yt("points",Tt(4,8,n.mapPolyline$)),J(3),ee("ngIf",Tt(7,10,n.mapPointer$))}},dependencies:[qi,Ew,Ac],styles:["[_nghost-%COMP%]{overflow:auto}svg[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0}),i})();const pce=["previewCanvasContainer"],mce=["previewCanvas"];function gce(i,e){if(1&i&&(se(0,"mat-option",19),Ze(1),ae()),2&i){const t=e.$implicit;ee("value",t),J(1),es(" ",t," ")}}function _ce(i,e){if(1&i){const t=Ei();Os(0),se(1,"mat-form-field",1)(2,"mat-label"),Ze(3,"Custom FAM path"),ae(),Qe(4,"input",20,21),Et(6,"async"),ae(),se(7,"button",22),nt("click",function(){Qt(t);const r=ja(5);return cn(Te().onFamSelected(r.value))}),Ze(8,"LOAD"),ae(),Ls()}if(2&i){const t=Te();J(4),ee("value",Tt(6,1,t.previewFamLocation$))}}function yce(i,e){1&i&&Qe(0,"mat-spinner",23),2&i&&ee("diameter",40)}function vce(i,e){1&i&&Qe(0,"mat-spinner",24)}const sP=function(i){return{block:i}},bce=function(){return["num_segments","terrain_length","unk0","unk1","position","unknowns0","terrain_block_size","railing_texture_id","proxy_objects_count","proxy_object_instances_count","unk2","unk3","proxy_objects","proxy_object_instances"]};var Wh=(()=>{return(i=Wh||(Wh={})).ThreeModel="model",i.Bitmap="bitmap",i.TwoSidedBitmap="two_sided_bitmap",Wh;var i})();class wce extends Vee{constructor(e,t){super(e,{loadDepth:50,inertia:2}),this.mapGraph=e,this.famPath=t,this.textureLoader=new XC,this.terrainMaterials={}}loadChunk(e){var t=()=>super.loadChunk,n=this;return an(function*(){const[r,s]=yield t().call(n,e);for(const l of r)l.object3D&&l.object3D.nativeMesh.traverse(c=>{c instanceof Yn&&(c.material=n.getTerrainMaterial((c.userData.name||c.name).substr((c.userData.name||c.name).lastIndexOf("_")+1).split(".")[0]))});const o=(yield Promise.all(s.meta.dummies.filter(l=>l.is_prop).map(l=>n.loadPropInternal(l)))).filter(l=>!!l);for(const l of o)l.position=yt.add(l.position,e.position);const a=[...r,...o];return n.loaded.set(e,a),n.addChildren(...o),[a,s]})()}getTerrainMaterial(e){return this.terrainMaterials[e]||(this.terrainMaterials[e]=new nr({side:2,transparent:!0,visible:!1}),this.textureLoader.loadAsync(`${this.famPath}/background/${e}.png`).then(t=>{t.wrapS=Uc,t.wrapT=tr,rS(t),t.flipY=!1,this.terrainMaterials[e].map=t,this.terrainMaterials[e].needsUpdate=!0,this.terrainMaterials[e].visible=!0}).catch(t=>{console.warn(`Problem with loading terrain material ${e}`)})),this.terrainMaterials[e]}loadPropInternal(e){var t=this;return an(function*(){if(e.type==Wh.ThreeModel){const{entities:[n]}=yield t.world.loader.loadGgGlb(`${t.famPath}/props/${e.model_ref_id}/0/body`,{loadProps:!1,cachingStrategy:Bl.Entities});return n.object3D.nativeMesh.traverse(r=>{r instanceof Yn&&((i,e)=>{let t=i.material instanceof Array?i.material:[i.material];t=t.map(n=>(n instanceof nr||(n=new nr({map:n instanceof Wv?n.map:null,side:n.side,transparent:!0,alphaTest:.5})),n instanceof nr&&n.map&&(n.map.wrapS=tr,n.map.wrapT=tr,rS(n.map),n.map.needsUpdate=!0),n)),i.material=t.length>1?t:t[0]})(r)}),n.position=e.position,n.rotation=e.rotation,n}if(e.type==Wh.Bitmap||e.type==Wh.TwoSidedBitmap){const n=new wa,r=yield t.loadTexturePlaneProp(e.texture,{x:e.width,y:e.height},e.animation_interval);if(n.add(r),e.type==Wh.TwoSidedBitmap){const o=yield t.loadTexturePlaneProp(e.back_texture,{x:e.width,y:e.height},e.animation_interval);o.rotateY(Math.PI/2),o.position.x=o.position.y=e.width/2,n.add(o)}const s=new ph(new sl(n),null);return s.position=e.position,s.rotation=e.rotation,s}return null})()}loadTexturePlaneProp(e,t,n){var r=this;return an(function*(){const s=e.split(";"),a=(yield Promise.all(s.map(c=>r.textureLoader.loadAsync(`${r.famPath}/foreground/${c}.png`)))).map(c=>(rS(c),new nr({map:c,alphaTest:.5,transparent:!0,side:2}))),l=new Yn(new Tv(t.x,t.y),a[0]);if(l.rotateX(Math.PI/2),l.position.set(0,0,t.y/2),a.length>1){let c=-1;GM(r.world).pipe(xV(n&&!isNaN(+n)?+n:250)).subscribe(()=>{c=(c+1)%a.length,l.material=a[c]})}return l})()}}let Mce=(()=>{class i{constructor(t,n,r){this.eelDelegate=t,this.cdr=n,this.mainService=r,this._resourceData$=new Nt(null),this.changed=new st,this.previewLoading$=new Nt(!0),this.previewFamLocation$=new Nt(null),this.previewFamLoading$=new Nt(!1),this.selectedSplineIndex$=new Nt(0),this.pointer$=new Nt(null),this.famPath="",this.name="",this.renderer=null,this.map=null,this.roadPath=null,this.skySphere=new ph(new sl(new Yn(new Lh(1e3),new nr({side:2,color:16777215})))),this.selectionSphere=new ph(new sl(new Yn(new Lh(.5),new nr({opacity:.5,transparent:!0,color:16711680})))),this.destroyed$=new Ge,this.Math=Math,this.Object=Object}get resourceData(){return this._resourceData$.getValue()}set resourceData(t){this._resourceData$.next(t)}get previewFamPossibleLocations(){const t=this.resourceData?.block_id;return t?[t.substring(0,t.indexOf("MISC"))+"ETRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_001.FAM",t.substring(0,t.indexOf("MISC"))+"GTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_001.FAM",t.substring(0,t.indexOf("MISC"))+"NTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_M01.FAM",t.substring(0,t.indexOf("MISC"))+"NTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_R01.FAM",t.substring(0,t.indexOf("MISC"))+"NTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_T01.FAM"]:[]}get roadSpline(){return(this.resourceData?.value.road_spline.value||[]).filter((t,n)=>n<(4*this.resourceData?.value.terrain_length.value||0)).map(t=>({x:t.value.position.value.x.value,y:t.value.position.value.y.value,z:t.value.position.value.z.value}))||[]}ngAfterViewInit(){var t=this;return an(function*(){var s;t.world=new AV(new M4,{init:(s=an(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{},loader:{loadFromGgGlb:function(){var s=an(function*(...o){return[]});return function(){return s.apply(this,arguments)}}()}}),t.world.visualScene.loader.registerGltfLoaderAddon(new fle),yield t.world.init(),t.skySphere.rotation=Dr.fromEuler({x:Math.PI/2,y:0,z:0}),t.world.addEntity(t.skySphere),t.world.addEntity(t.selectionSphere),t.world.visualScene.nativeScene.add(new WR(16777215,2));let n=new Nt({x:1,y:1});t.renderer=new C4(t.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),t.renderer.camera.position={x:0,y:0,z:2.5},t.renderer.camera.rotation=Dr.lookAt(t.renderer.camera.position,yt.add(t.renderer.camera.position,{x:0,y:1,z:0}),{x:0,y:0,z:1}),t.world.addEntity(t.renderer),GM(t.world).pipe(at(t.destroyed$)).subscribe(()=>{t.renderer&&(t.skySphere.position=t.renderer.camera.position,t.pointer$.next(t.renderer.camera.position))}),t.controller=new Gee(t.world.keyboardInput,t.renderer.camera,{mouseOptions:{canvas:t.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",movementOptions:{speed:1},ignoreMouseUnlessPointerLocked:!0,ignoreKeyboardUnlessPointerLocked:!0}),t.world.addEntity(t.controller);const r=()=>{n.next({x:t.previewCanvasContainer.nativeElement.clientWidth,y:t.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(t.previewCanvasContainer.nativeElement),r(),t.world.start(),t._resourceData$.pipe(at(t.destroyed$)).subscribe(function(){var s=an(function*(o){t.previewLoading$.next(!0),t.previewFamPossibleLocations[0]&&(t.previewFamLocation$.next(t.previewFamPossibleLocations[0]),yield t.onFamSelected(t.previewFamPossibleLocations[0])),yield t.loadPreviewGlbPath(o?.block_id),yield t.loadPreview(),t.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),t.mainService.dataBlockChange$.pipe(at(t.destroyed$),Rn(([s,o])=>!!t.resourceData&&s.startsWith(t.resourceData.block_id)),Kp(3e3)).subscribe(an(function*(){t.previewLoading$.next(!0),yield t.postTmpUpdates(t.resourceData?.block_id),yield t.loadPreview(),t.previewLoading$.next(!1)})),t.selectedSplineIndex$.pipe(at(t.destroyed$),Kp(250)).subscribe(s=>{if(t.roadPath){const o=t.roadPath.points[s];if(!o)return;t.selectionSphere.position=o;const a=t.resourceData.value.road_spline.value[s].value.orientation.value;t.renderer&&(t.renderer.camera.position=yt.add(o,yt.rotAround({x:10,y:-12,z:5},{x:0,y:0,z:1},-a)),t.renderer.camera.rotation=Dr.lookAt(t.renderer.camera.position,o,{x:0,y:0,z:1}))}})})()}onFamSelected(t){var n=this;return an(function*(){if("custom"!=t&&n.famPath!=t){n.famPath=t,n.previewFamLoading$.next(!0);try{const r=yield n.eelDelegate.serializeResource(t,{geometry__save_obj:!1,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!0}),s=new XC,o=r.find(a=>a.endsWith("spherical.png"));if(o){const a=yield s.loadAsync(o);a.encoding=Pn,a.mapping=301,n.skySphere.object3D.nativeMesh.material.map=a}else n.skySphere.object3D.nativeMesh.material.map=null;n.skySphere.object3D.nativeMesh.material.needsUpdate=!0}finally{n.previewFamLoading$.next(!1)}yield n.loadPreview()}})()}loadPreviewGlbPath(t){var n=this;return an(function*(){if(t){const r=yield n.eelDelegate.serializeResource(t,{geometry__save_obj:!1,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!0,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0});n.previewGlbPath=r.find(s=>s.endsWith("map.glb"))}else n.previewGlbPath=void 0})()}loadPreview(){var t=this;return an(function*(){if(!t.previewGlbPath)return;const{meta:n}=yield t.world.loader.loadGgGlb(t.previewGlbPath.substring(0,t.previewGlbPath.length-4),{loadProps:!1});t.roadPath=n.curves.find(s=>"road_path"===s.name);const r=pv.fromMapArray(t.roadPath.points.filter((s,o)=>o%4==0).map((s,o)=>({path:`${t.previewGlbPath.substring(0,t.previewGlbPath.lastIndexOf("/"))}/terrain_chunk_${o}`,position:s,loadOptions:{cachingStrategy:Bl.Nothing,loadProps:!1}}))||[],t.roadPath.cyclic);t.unloadPreview(),t.map=new wce(r,"resources/"+t.famPath),t.map.loaderCursorEntity$.next(t.renderer.camera),t.world.addEntity(t.map),t.cdr.markForCheck()})()}unloadPreview(){this.map&&(this.world.removeEntity(this.map),this.map.dispose(),this.map=null,this.cdr.markForCheck())}postTmpUpdates(t){var n=this;return an(function*(){if(t){const r=yield n.eelDelegate.serializeResourceTmp(t,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(t)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!1,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!0,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0});n.previewGlbPath=r.find(s=>s.endsWith("map.glb"))}else n.previewGlbPath=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R(lh),R(ni),R(am))},i.\u0275cmp=St({type:i,selectors:[["app-tri-map-block-ui"]],viewQuery:function(t,n){if(1&t&&(Qi(pce,5),Qi(mce,5)),2&t){let r;Kt(r=Zt())&&(n.previewCanvasContainer=r.first),Kt(r=Zt())&&(n.previewCanvas=r.first)}},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:55,vars:56,consts:[[1,"famSelector"],["appearance","fill"],[3,"value","valueChange"],["famSelect",""],[3,"value",4,"ngFor","ngForOf"],["value","custom"],[4,"ngIf"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"preview"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[1,"previewNavigationContainer"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange"],[3,"roadSpline","pointer"],[3,"resourceData"],[3,"resourceData","fieldWhitelist"],[3,"value"],["matInput","","type","text",3,"value"],["customFamInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(t,n){if(1&t&&(se(0,"div",0)(1,"h4"),Ze(2,"Preview *.FAM file"),ae(),se(3,"mat-form-field",1)(4,"mat-label"),Ze(5,"Current preview FAM"),ae(),se(6,"mat-select",2,3),nt("valueChange",function(s){return n.onFamSelected(s)}),Et(8,"async"),Et(9,"async"),Pe(10,gce,2,2,"mat-option",4),se(11,"mat-option",5),Ze(12,"custom"),ae()()(),Pe(13,_ce,9,3,"ng-container",6),Pe(14,yce,1,1,"mat-spinner",7),Et(15,"async"),ae(),se(16,"div",8)(17,"div",9,10),Qe(19,"canvas",11,12),Pe(21,vce,1,0,"mat-spinner",13),Et(22,"async"),ae(),se(23,"div",14,10)(25,"mat-form-field",1)(26,"mat-label"),Ze(27,"Spline item"),ae(),se(28,"input",15),nt("ngModelChange",function(s){return n.selectedSplineIndex$.next(s)}),Et(29,"async"),Et(30,"async"),ae()(),Qe(31,"app-tri-minimap",16),Et(32,"async"),ae()(),se(33,"h4"),Ze(34,"Road spline item"),ae(),Qe(35,"app-compound-block-ui",17),Et(36,"async"),Et(37,"async"),Et(38,"async"),se(39,"h4"),Ze(40,"AI info (block for 4 spline items)"),ae(),Qe(41,"app-compound-block-ui",17),Et(42,"async"),Et(43,"async"),Et(44,"async"),se(45,"h4"),Ze(46,"Terrain (block for 4 spline items)"),ae(),Qe(47,"app-compound-block-ui",17),Et(48,"async"),Et(49,"async"),Et(50,"async"),se(51,"h4"),Ze(52,"Common"),ae(),Qe(53,"app-compound-block-ui",18),Et(54,"async")),2&t){const r=ja(7);let s,o,a,l;J(6),ee("value",n.previewFamPossibleLocations.includes(Tt(8,15,n.previewFamLocation$))?Tt(9,17,n.previewFamLocation$):"custom"),J(4),ee("ngForOf",n.previewFamPossibleLocations),J(3),ee("ngIf","custom"==r.value),J(1),ee("ngIf",Tt(15,19,n.previewFamLoading$)),J(7),ee("ngIf",Tt(22,21,n.previewLoading$)),J(7),ee("min",0)("max",4*(null==(s=Tt(29,23,n._resourceData$))?null:s.value.terrain_length.value)-1)("ngModel",Tt(30,25,n.selectedSplineIndex$)),J(3),ee("roadSpline",n.roadSpline)("pointer",Tt(32,27,n.pointer$)),J(4),ee("resourceData",n.Object.assign($d(49,sP,null==(o=Tt(36,29,n._resourceData$))?null:o.value.road_spline.block),null==(o=Tt(37,31,n._resourceData$))?null:o.value.road_spline.value[Tt(38,33,n.selectedSplineIndex$)])),J(6),ee("resourceData",n.Object.assign($d(51,sP,null==(a=Tt(42,35,n._resourceData$))?null:a.value.ai_info.block),null==(a=Tt(43,37,n._resourceData$))?null:a.value.ai_info.value[n.Math.floor(Tt(44,39,n.selectedSplineIndex$)/4)])),J(6),ee("resourceData",n.Object.assign($d(53,sP,null==(l=Tt(48,41,n._resourceData$))?null:l.value.terrain.block),null==(l=Tt(49,43,n._resourceData$))?null:l.value.terrain.value[n.Math.floor(Tt(50,45,n.selectedSplineIndex$)/4)])),J(6),ee("resourceData",Tt(54,47,n._resourceData$))("fieldWhitelist",Ns(55,bce))}},dependencies:[pa,qi,Ll,rh,Lc,sv,rv,Fc,oh,Nc,ah,nh,zM,Yy,ol,UM,fce,Ac],styles:[".preview[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);display:flex;column-gap:1rem}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]{flex-grow:1;position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]{width:20rem;flex-shrink:0;display:flex;flex-direction:column}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]   app-tri-minimap[_ngcontent-%COMP%]{flex-grow:1;display:flex}.famSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.famSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.famSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.famSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .famSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0}),i})();function Cce(i,e){if(1&i&&(se(0,"mat-error"),Ze(1),ae()),2&i){const t=Te(2);J(1),sy(" ",t.error.error_class,": ",t.error.error_text," ")}}function Sce(i,e){1&i&&Qe(0,"mat-spinner",6)}function Ece(i,e){if(1&i&&(se(0,"div",3),Pe(1,Cce,2,2,"mat-error",4),Pe(2,Sce,1,0,"mat-spinner",5),ae()),2&i){const t=Te();J(1),ee("ngIf",t.error),J(1),ee("ngIf",!t.resourceData)}}function Ace(i,e){if(1&i){const t=Ei();se(0,"button",11),nt("click",function(){return Qt(t),cn(Te(2).deserialize())}),Qe(1,"mat-icon",12),ae()}}function Dce(i,e){if(1&i){const t=Ei();se(0,"div",7),Pe(1,Ace,2,0,"button",8),se(2,"button",9),nt("click",function(){return Qt(t),cn(Te().serializeBlockReversible())}),Qe(3,"mat-icon",10),ae()()}if(2&i){const t=Te();J(1),ee("ngIf",t.isInReversibleSerializationState),J(1),ee("disabled",t.isInReversibleSerializationState)}}function Tce(i,e){}let ig=(()=>{class i{constructor(t,n,r){this.mainService=t,this.eelDelegate=n,this.cdr=r,this._component=null,this._componentChangedSub=null,this.isInReversibleSerializationState=!1,this.destroyed$=new Ge,this._name="",this._resourceData=null}get name(){return this._name}set name(t){this._name=t,this._component?.instance&&(this._component.instance.name=t)}get resourceData(){return this._resourceData}get error(){return this._resourceData?.error_class?this._resourceData:null}get data(){return this._resourceData?.error_class?null:this._resourceData}set resourceData(t){if(this._resourceData=t,this.dataBlockUiHost.viewContainerRef.clear(),this._resourceData&&this._resourceData.block_class_mro){const n=this._resourceData;let r;for(const s of n.block_class_mro.split("__"))if(r=i.DATA_BLOCK_COMPONENTS_MAP[s],r)break;if(!r)throw new Error("Cannot find GUI component for block MRO "+n.block_class_mro);this._component&&this._componentChangedSub&&this._componentChangedSub.unsubscribe(),this._component=this.dataBlockUiHost.viewContainerRef.createComponent(r),this._component.instance.resourceData=n,this._component.instance.name=this._name,this._componentChangedSub=this._component.instance.changed.pipe(at(this.destroyed$)).subscribe(()=>{this.mainService.dataBlockChange$.next([n.block_id,n.value])})}}serializeBlockReversible(){var t=this;return an(function*(){const[n,r]=yield t.eelDelegate.serializeReversible(t.data.block_id,[]),s=n.reduce((o,a)=>{let l=0;for(;l<o.length&&l<a.length&&o[l]===a[l];)l++;return o.substring(0,l)});yield t.eelDelegate.openFileWithSystemApp(s),t.isInReversibleSerializationState=r,t.cdr.markForCheck()})()}deserialize(){var t=this;return an(function*(){yield t.mainService.deserializeResource(t.data.block_id),t.isInReversibleSerializationState=!1,t.cdr.markForCheck()})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.DATA_BLOCK_COMPONENTS_MAP={AngleBlock:wQ,ArrayBlock:eV,AtomicDataBlock:nV,BitFlagsBlock:uee,ByteArray:nV,CompoundBlock:UM,DataBlock:FJ,EnumByteBlock:XQ,IntegerBlock:zJ,Utf8Block:GJ,AnyBitmapBlock:tV,BasePalette:yQ,OripGeometry:uce,ShpiBlock:iV,TriMap:Mce,WwwwBlock:SQ},i.\u0275fac=function(t){return new(t||i)(R(am),R(lh),R(ni))},i.\u0275cmp=St({type:i,selectors:[["app-editor"]],viewQuery:function(t,n){if(1&t&&Qi(QU,7),2&t){let r;Kt(r=Zt())&&(n.dataBlockUiHost=r.first)}},inputs:{name:"name",resourceData:"resourceData"},decls:4,vars:4,consts:[["id","error-spinner-wrapper",4,"ngIf"],["id","actionsOverlay",4,"ngIf"],["dataBlockUI",""],["id","error-spinner-wrapper"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"],["id","actionsOverlay"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Serialize to common format",3,"disabled","click"],["fontIcon","download"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click"],["fontIcon","upload"]],template:function(t,n){if(1&t&&(Pe(0,Ece,3,2,"div",0),Pe(1,Dce,4,2,"div",1),Et(2,"async"),Pe(3,Tce,0,0,"ng-template",2)),2&t){let r;ee("ngIf",!n.resourceData||n.error),J(1),ee("ngIf",(null==n.data||null==n.data.block?null:n.data.block.is_serializable_to_disk)&&(null==n.data?null:n.data.block_id)!=(null==(r=Tt(2,2,n.mainService.resourceData$))?null:r.block_id))}},dependencies:[qi,uZ,PM,nh,jU,ol,QU,Ac],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]    >*{flex-grow:1;max-width:100%}[_nghost-%COMP%]   #actionsOverlay[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}[_nghost-%COMP%]   #error-spinner-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:space-around}"],changeDetection:0}),i})();function Ice(i,e){1&i&&Qe(0,"mat-icon",20)}function Rce(i,e){1&i&&Qe(0,"mat-icon",21)}function Pce(i,e){if(1&i){const t=Ei();se(0,"button",22),nt("click",function(){return Qt(t),cn(Te().deserialize())}),Qe(1,"mat-icon",23),ae()}}function kce(i,e){if(1&i){const t=Ei();se(0,"button",24),nt("click",function(){return Qt(t),cn(Te().serializeBlockReversible())}),Qe(1,"mat-icon",25),ae()}2&i&&ee("disabled",Te().isInReversibleSerializationState)}function Oce(i,e){1&i&&(se(0,"button",26),Qe(1,"mat-icon",27),ae()),2&i&&(Te(),ee("matMenuTriggerFor",ja(32)))}function Lce(i,e){if(1&i){const t=Ei();se(0,"button",28),nt("click",function(){const s=Qt(t).$implicit;return cn(Te().runCustomAction(s))}),se(1,"span"),Ze(2),ae()()}if(2&i){const t=e.$implicit;J(2),pi(t.title)}}const Fce=function(){return[]};let Nce=(()=>{class i{constructor(t,n,r,s,o){this.eelDelegate=t,this.mainService=n,this.dialog=r,this.snackBar=s,this.cdr=o,this.isInReversibleSerializationState=!1}serializeBlockReversible(){var t=this;return an(function*(){const n=Object.entries(t.mainService.changedDataBlocks).filter(([a,l])=>"__has_external_changes__"!=a),[r,s]=yield t.eelDelegate.serializeReversible(t.mainService.resourceData$.getValue().block_id,n.map(([a,l])=>({id:a,value:l}))),o=r.reduce((a,l)=>{let c=0;for(;c<a.length&&c<l.length&&a[c]===l[c];)c++;return a.substring(0,c)});yield t.eelDelegate.openFileWithSystemApp(o),t.isInReversibleSerializationState=s,t.cdr.markForCheck()})()}deserialize(){var t=this;return an(function*(){yield t.mainService.deserializeResource(t.mainService.resourceData$.getValue().block_id),t.isInReversibleSerializationState=!1,t.cdr.markForCheck()})()}saveResource(){var t=this;return an(function*(){try{const n=Object.entries(t.mainService.changedDataBlocks).filter(([r,s])=>"__has_external_changes__"!=r);yield t.eelDelegate.saveFile(n.map(([r,s])=>({id:r,value:s}))),t.mainService.clearUnsavedChanges(),t.snackBar.open("File Saved!","OK",{duration:1500})}catch(n){t.snackBar.open("Error while saving file! "+n.errorText,"OK :(",{duration:5e3})}})()}toggleUnknownsVisibility(){this.mainService.unknownsHidden$.next(!this.mainService.unknownsHidden$.getValue())}serializeResource(){var t=this;return an(function*(){const r=(yield t.eelDelegate.serializeResource(t.mainService.resourceData$.getValue().block_id)).reduce((s,o)=>{let a=0;for(;a<s.length&&a<o.length&&s[a]===o[a];)a++;return s.substring(0,a)});yield t.eelDelegate.openFileWithSystemApp(r)})()}reloadResource(){var t=this;return an(function*(){if(t.mainService.hasUnsavedChanges){let r=t.dialog.open(pB,{data:{text:"There are unsaved changes, which will be lost. Are you sure you want to reload file?"}});if(!(yield F1(r.afterClosed())))return}const n=t.mainService.eelDelegate.openedResourcePath$.getValue();n&&t.eelDelegate.openFile(n,!0).then(),t.cdr.markForCheck()})()}runCustomAction(t){var n=this;return an(function*(){if(n.mainService.hasUnsavedChanges){let o=n.dialog.open(pB,{data:{text:"Cannot run custom action on a file with not saved changes. Do you want to save them first?"}});if(!(yield F1(o.afterClosed())))return;yield n.saveResource()}let r=n.dialog.open(AZ,{data:t});const s=yield F1(r.afterClosed());if(s)try{yield n.mainService.runCustomAction(t,s),n.snackBar.open("Action performed!","OK",{duration:1500})}catch(o){n.mainService.clearUnsavedChanges(),n.reloadResource().then(),n.snackBar.open("Error while performing action! Reverting file state.. "+o.errorText||0,"OK :(",{duration:5e3})}})()}}return i.\u0275fac=function(t){return new(t||i)(R(lh),R(am),R(_M),R(NZ),R(ni))},i.\u0275cmp=St({type:i,selectors:[["app-root"]],decls:35,vars:34,consts:[["color","primary"],[1,"flex-spacer"],["mat-icon-button","","matTooltip","Show/hide unknown fields",3,"click"],["fontIcon","visibility_off",4,"ngIf"],["fontIcon","visibility_on",4,"ngIf"],["vertical",""],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Serialize to common format",3,"disabled","click",4,"ngIf"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor",4,"ngIf"],["mat-icon-button","","matTooltip","Reload file from disk",3,"disabled","click"],["fontIcon","refresh"],["mat-icon-button","","matTooltip","Save changes to file",3,"disabled","click"],["fontIcon","save"],["id","content-wrapper"],[3,"resourceData"],["id","bmac"],["href","https://www.buymeacoffee.com/andygura","target","_blank"],["src","https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png","alt","Buy Me A Coffee",2,"height","60px !important","width","217px !important"],["customActionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["fontIcon","visibility_off"],["fontIcon","visibility_on"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click"],["fontIcon","upload"],["mat-icon-button","","matTooltip","Serialize to common format",3,"disabled","click"],["fontIcon","download"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor"],["fontIcon","bolt"],["mat-menu-item","",3,"click"]],template:function(t,n){if(1&t&&(se(0,"mat-toolbar",0)(1,"span"),Ze(2),Et(3,"async"),ae(),Qe(4,"span",1),se(5,"button",2),nt("click",function(){return n.toggleUnknownsVisibility()}),Pe(6,Ice,1,0,"mat-icon",3),Et(7,"async"),Pe(8,Rce,1,0,"mat-icon",4),Et(9,"async"),ae(),Qe(10,"mat-divider",5),Pe(11,Pce,2,0,"button",6),Pe(12,kce,2,1,"button",7),Et(13,"async"),Pe(14,Oce,2,1,"button",8),Et(15,"async"),se(16,"button",9),nt("click",function(){return n.reloadResource()}),Et(17,"async"),Qe(18,"mat-icon",10),ae(),Qe(19,"mat-divider",5),se(20,"button",11),nt("click",function(){return n.saveResource()}),Et(21,"async"),Qe(22,"mat-icon",12),ae()(),se(23,"div",13),Qe(24,"app-editor",14),Et(25,"async"),Et(26,"async"),Et(27,"async"),se(28,"div",15)(29,"a",16),Qe(30,"img",17),ae()()(),se(31,"mat-menu",null,18),Pe(33,Lce,3,1,"button",19),Et(34,"async"),ae()),2&t){let r,s,o,a;J(2),sy("",(null==(r=Tt(3,11,n.mainService.resourceData$))?null:r.block_id)||"...","",n.mainService.hasUnsavedChanges?"*":"",""),J(4),ee("ngIf",Tt(7,13,n.mainService.unknownsHidden$)),J(2),ee("ngIf",!Tt(9,15,n.mainService.unknownsHidden$)),J(3),ee("ngIf",n.isInReversibleSerializationState),J(1),ee("ngIf",null==(s=Tt(13,17,n.mainService.resourceData$))?null:s.block.is_serializable_to_disk),J(2),ee("ngIf",(null==(o=Tt(15,19,n.mainService.resourceData$))||null==o.block.custom_actions?null:o.block.custom_actions.length)>0),J(2),ee("disabled",!Tt(17,21,n.mainService.eelDelegate.openedResourcePath$)),J(4),ee("disabled",!Tt(21,23,n.mainService.resourceData$)||!n.mainService.hasUnsavedChanges),J(4),ee("resourceData",Tt(25,25,n.mainService.customActionRunning$)?null:Tt(26,27,n.mainService.resourceData$)||Tt(27,29,n.mainService.resourceError$)),J(9),ee("ngForOf",(null==(a=Tt(34,31,n.mainService.resourceData$))?null:a.block.custom_actions)||Ns(33,Fce))}},dependencies:[pa,qi,HZ,TU,PM,nh,jU,IJ,BM,OJ,ig,Ac],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}#content-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding:1rem;height:100%}#bmac[_ngcontent-%COMP%]{text-align:end;margin-top:1rem}mat-divider[_ngcontent-%COMP%]{height:100%;margin:0 16px}"],changeDetection:0}),i})();function N4(i){return new _e(3e3,!1)}function yue(){return typeof window<"u"&&typeof window.document<"u"}function oP(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Qu(i){switch(i.length){case 0:return new Ky;case 1:return i[0];default:return new aB(i)}}function B4(i,e,t,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(d=>{const h=d.get("offset"),p=h==l,m=p&&c||new Map;d.forEach((_,b)=>{let v=b,y=_;if("offset"!==b)switch(v=e.normalizePropertyName(v,o),y){case"!":y=r.get(b);break;case Oc:y=s.get(b);break;default:y=e.normalizeStyleValue(b,v,y,o)}m.set(v,y)}),p||a.push(m),c=m,l=h}),o.length)throw function oue(i){return new _e(3502,!1)}();return a}function aP(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&lP(t,"start",i)));break;case"done":i.onDone(()=>n(t&&lP(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&lP(t,"destroy",i)))}}function lP(i,e,t){const s=cP(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t.totalTime??i.totalTime,!!t.disabled),o=i._data;return null!=o&&(s._data=o),s}function cP(i,e,t,n,r="",s=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function $o(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function U4(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}let uP=(i,e)=>!1,V4=(i,e,t)=>[],z4=null;function dP(i){const e=i.parentNode||i.host;return e===z4?null:e}(oP()||typeof Element<"u")&&(yue()?(z4=(()=>document.documentElement)(),uP=(i,e)=>{for(;e;){if(e===i)return!0;e=dP(e)}return!1}):uP=(i,e)=>i.contains(e),V4=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const n=i.querySelector(e);return n?[n]:[]});let $h=null,H4=!1;const G4=uP,W4=V4;let $4=(()=>{class i{validateStyleProperty(t){return function bue(i){$h||($h=function xue(){return typeof document<"u"?document.body:null}()||{},H4=!!$h.style&&"WebkitAppearance"in $h.style);let e=!0;return $h.style&&!function vue(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in $h.style,!e&&H4&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in $h.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return G4(t,n)}getParentElement(t){return dP(t)}query(t,n,r){return W4(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,o,a=[],l){return new Ky(r,s)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})(),hP=(()=>{class i{}return i.NOOP=new $4,i})();const fP="ng-enter",sS="ng-leave",oS="ng-trigger",aS=".ng-trigger",q4="ng-animating",pP=".ng-animating";function ed(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:mP(parseFloat(e[1]),e[2])}function mP(i,e){return"s"===e?1e3*i:i}function lS(i,e,t){return i.hasOwnProperty("duration")?i:function Cue(i,e,t){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(N4()),{duration:0,delay:0,easing:""};r=mP(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=mP(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(function Bce(){return new _e(3100,!1)}()),a=!0),s<0&&(e.push(function Uce(){return new _e(3101,!1)}()),a=!0),a&&e.splice(l,0,N4())}return{duration:r,delay:s,easing:o}}(i,e,t)}function Jv(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function X4(i){const e=new Map;return Object.keys(i).forEach(t=>{e.set(t,i[t])}),e}function td(i,e=new Map,t){if(t)for(let[n,r]of t)e.set(n,r);for(let[n,r]of i)e.set(n,r);return e}function K4(i,e,t){return t?e+":"+t+";":""}function Z4(i){let e="";for(let t=0;t<i.style.length;t++){const n=i.style.item(t);e+=K4(0,n,i.style.getPropertyValue(n))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=K4(0,Due(t),i.style[t]));i.setAttribute("style",e)}function jl(i,e,t){i.style&&(e.forEach((n,r)=>{const s=_P(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n}),oP()&&Z4(i))}function jh(i,e){i.style&&(e.forEach((t,n)=>{const r=_P(n);i.style[r]=""}),oP()&&Z4(i))}function Qv(i){return Array.isArray(i)?1==i.length?i[0]:sB(i):i}const gP=new RegExp("{{\\s*(.+?)\\s*}}","g");function J4(i){let e=[];if("string"==typeof i){let t;for(;t=gP.exec(i);)e.push(t[1]);gP.lastIndex=0}return e}function cS(i,e,t){const n=i.toString(),r=n.replace(gP,(s,o)=>{let a=e[o];return null==a&&(t.push(function zce(i){return new _e(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function uS(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const Aue=/-+([a-z0-9])/g;function _P(i){return i.replace(Aue,(...e)=>e[1].toUpperCase())}function Due(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jo(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw function Hce(i){return new _e(3004,!1)}()}}function Q4(i,e){return window.getComputedStyle(i)[e]}function Oue(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function Lue(i,e,t){if(":"==i[0]){const l=function Fue(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function nue(i){return new _e(3016,!1)}()),"* => *"}}(i,t);if("function"==typeof l)return void e.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function tue(i){return new _e(3015,!1)}()),e;const r=n[1],s=n[2],o=n[3];e.push(e5(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(e5(o,r))}(n,t,e)):t.push(i),t}const pS=new Set(["true","1"]),mS=new Set(["false","0"]);function e5(i,e){const t=pS.has(i)||mS.has(i),n=pS.has(e)||mS.has(e);return(r,s)=>{let o="*"==i||i==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?pS.has(i):mS.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?pS.has(e):mS.has(e)),o&&a}}const Nue=new RegExp("s*:selfs*,?","g");function yP(i,e,t,n){return new Bue(i).build(e,t,n)}class Bue{constructor(e){this._driver=e}build(e,t,n){const r=new zue(t);return this._resetContextStyleTimingState(r),jo(this,Qv(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Wce(){return new _e(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function $ce(){return new _e(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{J4(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(uS(s.values()),t.errors.push(function jce(i,e){return new _e(3008,!1)}()))}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=jo(this,Qv(e.animation),t);return{type:1,matchers:Oue(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:qh(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>jo(this,n,t)),options:qh(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=n;const a=jo(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:qh(e.options)}}visitAnimate(e,t){const n=function Gue(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return vP(lS(i,e).duration,0,"");const t=i;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=vP(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=lS(t,e);return vP(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:Zn({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=Zn(c)}t.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Oc?n.push(a):t.errors.push(new _e(3002,!1)):n.push(X4(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l);let h=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(t.errors.push(function Xce(i,e,t,n,r){return new _e(3010,!1)}()),h=!1),s=d.startTime),h&&c.set(l,{startTime:s,endTime:r}),t.options&&function Eue(i,e,t){const n=e.params||{},r=J4(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(function Vce(i){return new _e(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Yce(){return new _e(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const d=e.steps.map(y=>{const M=this._makeStyleAst(y,t);let x=null!=M.offset?M.offset:function Hue(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(M.styles),C=0;return null!=x&&(s++,C=M.offset=x),l=l||C<0||C>1,a=a||C<c,c=C,o.push(C),M});l&&t.errors.push(function Kce(){return new _e(3012,!1)}()),a&&t.errors.push(function Zce(){return new _e(3200,!1)}());const h=e.steps.length;let p=0;s>0&&s<h?t.errors.push(function Jce(){return new _e(3202,!1)}()):0==s&&(p=1/(h-1));const m=h-1,_=t.currentTime,b=t.currentAnimateTimings,v=b.duration;return d.forEach((y,M)=>{const x=p>0?M==m?1:p*M:o[M],C=x*v;t.currentTime=_+b.delay+C,b.duration=C,this._validateStyleAst(y,t),y.offset=x,n.styles.push(y)}),n}visitReference(e,t){return{type:8,animation:jo(this,Qv(e.animation),t),options:qh(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:qh(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:qh(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Uue(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(Nue,"")),i=i.replace(/@\*/g,aS).replace(/@\w+/g,t=>aS+"-"+t.slice(1)).replace(/:animating/g,pP),[i,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,$o(t.collectedStyles,t.currentQuerySelector,new Map);const a=jo(this,Qv(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:qh(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Qce(){return new _e(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:lS(e.timings,t.errors,!0);return{type:12,animation:jo(this,Qv(e.animation),t),timings:n,options:null}}}class zue{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function qh(i){return i?(i=Jv(i)).params&&(i.params=function Vue(i){return i?Jv(i):null}(i.params)):i={},i}function vP(i,e,t){return{duration:i,delay:e,easing:t}}function bP(i,e,t,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class gS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const jue=new RegExp(":enter","g"),Xue=new RegExp(":leave","g");function xP(i,e,t,n,r,s=new Map,o=new Map,a,l,c=[]){return(new Yue).buildKeyframes(i,e,t,n,r,s,o,a,l,c)}class Yue{buildKeyframes(e,t,n,r,s,o,a,l,c,d=[]){c=c||new gS;const h=new wP(e,t,c,r,s,d,[]);h.options=l;const p=l.delay?ed(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([o],null,h.errors,l),jo(this,n,h);const m=h.timelines.filter(_=>_.containsAnimation());if(m.length&&a.size){let _;for(let b=m.length-1;b>=0;b--){const v=m[b];if(v.element===t){_=v;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,h.errors,l)}return m.length?m.map(_=>_.buildKeyframes()):[bP(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const o=null!=n.duration?ed(n.duration):null,a=null!=n.delay?ed(n.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),jo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=_S);const o=ed(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>jo(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ed(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),jo(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return lS(t.params?cS(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?ed(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=_S);let o=n;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;const h=t.createSubContext(e.options,c);s&&h.delayNextStep(s),c===t.element&&(l=h.currentTimeline),jo(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const d=t.currentTimeline;l&&d.delayNextStep(l);const h=d.currentTime;jo(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-h+(r.startTime-n.currentTimeline.startTime)}}const _S={};class wP{constructor(e,t,n,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=_S,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new yS(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=ed(n.duration)),null!=n.delay&&(r.delay=ed(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=cS(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new wP(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=_S,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new Kue(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(jue,"."+this._enterClassName)).replace(Xue,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function eue(i){return new _e(3014,!1)}()),a}}class yS{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new yS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Oc),this._currentKeyframe.set(t,Oc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function Zue(i,e){const t=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||e.keys();for(let s of n)t.set(s,Oc)}else td(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=cS(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Oc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=td(a,new Map,this._backFill);c.forEach((d,h)=>{"!"===d?e.add(h):d===Oc&&t.add(h)}),n||c.set("offset",l/this.duration),r.push(c)});const s=e.size?uS(e.values()):[],o=t.size?uS(t.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return bP(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Kue extends yS{constructor(e,t,n,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=n+t,a=t/o,l=td(e[0]);l.set("offset",0),s.push(l);const c=td(e[0]);c.set("offset",i5(a)),s.push(c);const d=e.length-1;for(let h=1;h<=d;h++){let p=td(e[h]);const m=p.get("offset");p.set("offset",i5((t+m*n)/o)),s.push(p)}n=o,t=0,r="",e=s}return bP(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function i5(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class MP{}const Jue=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Que extends MP{normalizePropertyName(e,t){return _P(e)}normalizeStyleValue(e,t,n,r){let s="";const o=n.toString().trim();if(Jue.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Gce(i,e){return new _e(3005,!1)}())}return o+s}}function r5(i,e,t,n,r,s,o,a,l,c,d,h,p){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:h,errors:p}}const CP={};class s5{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function ede(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,o,a,l,c,d){const h=[],p=this.ast.options&&this.ast.options.params||CP,_=this.buildStyles(n,a&&a.params||CP,h),b=l&&l.params||CP,v=this.buildStyles(r,b,h),y=new Set,M=new Map,x=new Map,C="void"===r,E={params:tde(b,p),delay:this.ast.options?.delay},T=d?[]:xP(e,t,this.ast.animation,s,o,_,v,E,c,h);let O=0;if(T.forEach(A=>{O=Math.max(A.duration+A.delay,O)}),h.length)return r5(t,this._triggerName,n,r,C,_,v,[],[],M,x,O,h);T.forEach(A=>{const P=A.element,Y=$o(M,P,new Set);A.preStyleProps.forEach(H=>Y.add(H));const ie=$o(x,P,new Set);A.postStyleProps.forEach(H=>ie.add(H)),P!==t&&y.add(P)});const L=uS(y.values());return r5(t,this._triggerName,n,r,C,_,v,T,L,M,x,O)}}function tde(i,e){const t=Jv(e);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(t[n]=i[n]);return t}class nde{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,r=Jv(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=cS(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(l,o)})}),n}}class rde{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new nde(r.style,r.options&&r.options.params||{},n))}),o5(this.states,"true","1"),o5(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new s5(e,r,this.states))}),this.fallbackTransition=function sde(i,e,t){return new s5(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function o5(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}const ode=new gS;class ade{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],s=yP(this._driver,t,n,[]);if(n.length)throw function aue(i){return new _e(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,n){const r=e.element,s=B4(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=xP(this._driver,t,s,fP,sS,new Map,new Map,n,ode,r),o.forEach(d=>{const h=$o(a,d.element,new Map);d.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(function lue(){return new _e(3300,!1)}()),o=[]),r.length)throw function cue(i){return new _e(3504,!1)}();a.forEach((d,h)=>{d.forEach((p,m)=>{d.set(m,this._driver.computeStyle(h,m,Oc))})});const c=Qu(o.map(d=>{const h=a.get(d.element);return this._buildPlayer(d,new Map,h)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function uue(i){return new _e(3301,!1)}();return t}listen(e,t,n,r){const s=cP(t,"","","");return aP(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const a5="ng-animate-queued",SP="ng-animate-disabled",hde=[],l5={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fde={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Aa="__ng_removed";class EP{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function _de(i){return i??null}(n?e.value:e),n){const s=Jv(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(r=>{null==n[r]&&(n[r]=t[r])})}}}const e0="void",AP=new EP(e0);class pde{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Da(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw function due(i,e){return new _e(3302,!1)}();if(null==n||0==n.length)throw function hue(i){return new _e(3303,!1)}();if(!function yde(i){return"start"==i||"done"==i}(n))throw function fue(i,e){return new _e(3400,!1)}();const s=$o(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=$o(this._engine.statesByElement,e,new Map);return a.has(t)||(Da(e,oS),Da(e,oS+"-"+t),a.set(t,AP)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function pue(i){return new _e(3401,!1)}();return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),o=new DP(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Da(e,oS),Da(e,oS+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new EP(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=AP),c.value!==e0&&l.value===c.value){if(!function xde(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}(l.params,c.params)){const b=[],v=s.matchStyles(l.value,l.params,b),y=s.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{jh(e,v),jl(e,y)})}return}const p=$o(this._engine.playersByElement,e,[]);p.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let m=s.matchTransition(l.value,c.value,e,c.params),_=!1;if(!m){if(!r)return;m=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:l,toState:c,player:o,isFallbackTransition:_}),_||(Da(e,a5),o.onStart(()=>{rg(e,a5)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);const v=this._engine.playersByElement.get(e);if(v){let y=v.indexOf(o);y>=0&&v.splice(y,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,aS,!0);n.forEach(r=>{if(r[Aa])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const d=this.trigger(e,c,e0,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&Qu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||AP,d=new EP(e0),h=new DP(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:d,player:h,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Aa];(!s||s===l5)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Da(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=cP(s,n.triggerName,n.fromState.value,n.toState.value);l._data=e,aP(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class mde{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new pde(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,n,r){if(vS(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!vS(t))return;const s=t[Aa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Da(e,SP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),rg(e,SP))}removeNode(e,t,n,r){if(vS(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[Aa]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return vS(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,aS,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,pP,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Qu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Aa];if(t&&t.setForRemoval){if(e[Aa]=l5,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(SP)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Da(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?Qu(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw function mue(i){return new _e(3402,!1)}()}_flushAnimations(e,t){const n=new gS,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(q=>{d.add(q);const ne=this.driver.query(q,".ng-animate-queued",!0);for(let K=0;K<ne.length;K++)d.add(ne[K])});const h=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=d5(p,this.collectedEnterElements),_=new Map;let b=0;m.forEach((q,ne)=>{const K=fP+b++;_.set(ne,K),q.forEach(ce=>Da(ce,K))});const v=[],y=new Set,M=new Set;for(let q=0;q<this.collectedLeaveElements.length;q++){const ne=this.collectedLeaveElements[q],K=ne[Aa];K&&K.setForRemoval&&(v.push(ne),y.add(ne),K.hasAnimation?this.driver.query(ne,".ng-star-inserted",!0).forEach(ce=>y.add(ce)):M.add(ne))}const x=new Map,C=d5(p,Array.from(y));C.forEach((q,ne)=>{const K=sS+b++;x.set(ne,K),q.forEach(ce=>Da(ce,K))}),e.push(()=>{m.forEach((q,ne)=>{const K=_.get(ne);q.forEach(ce=>rg(ce,K))}),C.forEach((q,ne)=>{const K=x.get(ne);q.forEach(ce=>rg(ce,K))}),v.forEach(q=>{this.processLeaveNode(q)})});const E=[],T=[];for(let q=this._namespaceList.length-1;q>=0;q--)this._namespaceList[q].drainQueuedTransitions(t).forEach(K=>{const ce=K.player,xe=K.element;if(E.push(ce),this.collectedEnterElements.length){const Z=xe[Aa];if(Z&&Z.setForMove){if(Z.previousTriggersValues&&Z.previousTriggersValues.has(K.triggerName)){const ut=Z.previousTriggersValues.get(K.triggerName),it=this.statesByElement.get(K.element);if(it&&it.has(K.triggerName)){const De=it.get(K.triggerName);De.value=ut,it.set(K.triggerName,De)}}return void ce.destroy()}}const $e=!h||!this.driver.containsElement(h,xe),Le=x.get(xe),le=_.get(xe),ue=this._buildInstruction(K,n,le,Le,$e);if(ue.errors&&ue.errors.length)return void T.push(ue);if($e)return ce.onStart(()=>jh(xe,ue.fromStyles)),ce.onDestroy(()=>jl(xe,ue.toStyles)),void r.push(ce);if(K.isFallbackTransition)return ce.onStart(()=>jh(xe,ue.fromStyles)),ce.onDestroy(()=>jl(xe,ue.toStyles)),void r.push(ce);const Fe=[];ue.timelines.forEach(Z=>{Z.stretchStartingKeyframe=!0,this.disabledNodes.has(Z.element)||Fe.push(Z)}),ue.timelines=Fe,n.append(xe,ue.timelines),o.push({instruction:ue,player:ce,element:xe}),ue.queriedElements.forEach(Z=>$o(a,Z,[]).push(ce)),ue.preStyleProps.forEach((Z,ut)=>{if(Z.size){let it=l.get(ut);it||l.set(ut,it=new Set),Z.forEach((De,tt)=>it.add(tt))}}),ue.postStyleProps.forEach((Z,ut)=>{let it=c.get(ut);it||c.set(ut,it=new Set),Z.forEach((De,tt)=>it.add(tt))})});if(T.length){const q=[];T.forEach(ne=>{q.push(function gue(i,e){return new _e(3505,!1)}())}),E.forEach(ne=>ne.destroy()),this.reportError(q)}const O=new Map,L=new Map;o.forEach(q=>{const ne=q.element;n.has(ne)&&(L.set(ne,ne),this._beforeAnimationBuild(q.player.namespaceId,q.instruction,O))}),r.forEach(q=>{const ne=q.element;this._getPreviousPlayers(ne,!1,q.namespaceId,q.triggerName,null).forEach(ce=>{$o(O,ne,[]).push(ce),ce.destroy()})});const A=v.filter(q=>f5(q,l,c)),P=new Map;u5(P,this.driver,M,c,Oc).forEach(q=>{f5(q,l,c)&&A.push(q)});const ie=new Map;m.forEach((q,ne)=>{u5(ie,this.driver,new Set(q),l,"!")}),A.forEach(q=>{const ne=P.get(q),K=ie.get(q);P.set(q,new Map([...Array.from(ne?.entries()??[]),...Array.from(K?.entries()??[])]))});const H=[],$=[],te={};o.forEach(q=>{const{element:ne,player:K,instruction:ce}=q;if(n.has(ne)){if(d.has(ne))return K.onDestroy(()=>jl(ne,ce.toStyles)),K.disabled=!0,K.overrideTotalTime(ce.totalTime),void r.push(K);let xe=te;if(L.size>1){let Le=ne;const le=[];for(;Le=Le.parentNode;){const ue=L.get(Le);if(ue){xe=ue;break}le.push(Le)}le.forEach(ue=>L.set(ue,xe))}const $e=this._buildAnimation(K.namespaceId,ce,O,s,ie,P);if(K.setRealPlayer($e),xe===te)H.push(K);else{const Le=this.playersByElement.get(xe);Le&&Le.length&&(K.parentPlayer=Qu(Le)),r.push(K)}}else jh(ne,ce.fromStyles),K.onDestroy(()=>jl(ne,ce.toStyles)),$.push(K),d.has(ne)&&r.push(K)}),$.forEach(q=>{const ne=s.get(q.element);if(ne&&ne.length){const K=Qu(ne);q.setRealPlayer(K)}}),r.forEach(q=>{q.parentPlayer?q.syncPlayerEvents(q.parentPlayer):q.destroy()});for(let q=0;q<v.length;q++){const ne=v[q],K=ne[Aa];if(rg(ne,sS),K&&K.hasAnimation)continue;let ce=[];if(a.size){let $e=a.get(ne);$e&&$e.length&&ce.push(...$e);let Le=this.driver.query(ne,pP,!0);for(let le=0;le<Le.length;le++){let ue=a.get(Le[le]);ue&&ue.length&&ce.push(...ue)}}const xe=ce.filter($e=>!$e.destroyed);xe.length?vde(this,ne,xe):this.processLeaveNode(ne)}return v.length=0,H.forEach(q=>{this.players.push(q),q.onDone(()=>{q.destroy();const ne=this.players.indexOf(q);this.players.splice(ne,1)}),q.play()}),H}elementContainsData(e,t){let n=!1;const r=t[Aa];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==e0;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,d=c!==s,h=$o(n,c,[]);this._getPreviousPlayers(c,d,o,a,t.toState).forEach(m=>{const _=m.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),m.destroy(),h.push(m)})}jh(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,o){const a=t.triggerName,l=t.element,c=[],d=new Set,h=new Set,p=t.timelines.map(_=>{const b=_.element;d.add(b);const v=b[Aa];if(v&&v.removedBeforeQueried)return new Ky(_.duration,_.delay);const y=b!==l,M=function bde(i){const e=[];return h5(i,e),e}((n.get(b)||hde).map(O=>O.getRealPlayer())).filter(O=>!!O.element&&O.element===b),x=s.get(b),C=o.get(b),E=B4(0,this._normalizer,0,_.keyframes,x,C),T=this._buildPlayer(_,E,M);if(_.subTimeline&&r&&h.add(b),y){const O=new DP(e,a,b);O.setRealPlayer(T),c.push(O)}return T});c.forEach(_=>{$o(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>function gde(i,e,t){let n=i.get(e);if(n){if(n.length){const r=n.indexOf(t);n.splice(r,1)}0==n.length&&i.delete(e)}return n}(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>Da(_,q4));const m=Qu(p);return m.onDestroy(()=>{d.forEach(_=>rg(_,q4)),jl(l,t.toStyles)}),h.forEach(_=>{$o(r,_,[]).push(m)}),m}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Ky(e.duration,e.delay)}}class DP{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new Ky,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>aP(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$o(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function vS(i){return i&&1===i.nodeType}function c5(i,e){const t=i.style.display;return i.style.display=e??"none",t}function u5(i,e,t,n,r){const s=[];t.forEach(l=>s.push(c5(l)));const o=[];n.forEach((l,c)=>{const d=new Map;l.forEach(h=>{const p=e.computeStyle(c,h,r);d.set(h,p),(!p||0==p.length)&&(c[Aa]=fde,o.push(c))}),i.set(c,d)});let a=0;return t.forEach(l=>c5(l,s[a++])),o}function d5(i,e){const t=new Map;if(i.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Da(i,e){i.classList?.add(e)}function rg(i,e){i.classList?.remove(e)}function vde(i,e,t){Qu(t).onDone(()=>i.processLeaveNode(e))}function h5(i,e){for(let t=0;t<i.length;t++){const n=i[t];n instanceof aB?h5(n.players,e):e.push(n)}}function f5(i,e,t){const n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}class bS{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new mde(e,t,n),this._timelineEngine=new ade(e,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],d=yP(this._driver,s,l,[]);if(l.length)throw function sue(i,e){return new _e(3404,!1)}();a=function ide(i,e,t){return new rde(i,e,t)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[s,o]=U4(n);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[o,a]=U4(n);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Mde=(()=>{class i{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&jl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(jl(this._element,this._initialStyles),this._endStyles&&(jl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(jh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(jh(this._element,this._endStyles),this._endStyles=null),jl(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function TP(i){let e=null;return i.forEach((t,n)=>{(function Cde(i){return"display"===i||"position"===i})(n)&&(e=e||new Map,e.set(n,t))}),e}class p5{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&e.set(r,this._finished?n:Q4(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class Sde{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return G4(e,t)}getParentElement(e){return dP(e)}query(e,t,n){return W4(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,d=o.filter(m=>m instanceof p5);(function Tue(i,e){return 0===i||0===e})(n,r)&&d.forEach(m=>{m.currentSnapshot.forEach((_,b)=>c.set(b,_))});let h=function Sue(i){return i.length?i[0]instanceof Map?i:i.map(e=>X4(e)):[]}(t).map(m=>td(m));h=function Iue(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,Q4(i,a)))}}return e}(e,h,c);const p=function wde(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=TP(e[0]),e.length>1&&(n=TP(e[e.length-1]))):e instanceof Map&&(t=TP(e)),t||n?new Mde(i,t,n):null}(e,h);return new p5(e,h,l,p)}}let Ede=(()=>{class i extends iB{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:Zs.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?sB(t):t;return m5(this._renderer,null,n,"register",[r]),new Ade(n,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)(X(Mu),X(Ft))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();class Ade extends class IY{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Dde(this._id,e,t||{},this._renderer)}}class Dde{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return m5(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function m5(i,e,t,n,r){return i.setProperty(e,`@@${t}:${n}`,r)}const g5="@.disabled";let Tde=(()=>{class i{constructor(t,n,r){this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,n){const s=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let d=this._rendererCache.get(s);return d||(d=new _5("",s,this.engine),this._rendererCache.set(s,d)),d}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,t,d.name,d)};return n.data.animation.forEach(l),new Ide(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,r){t>=0&&t<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)(X(Mu),X(bS),X(Dt))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})();class _5{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==g5?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ide extends _5{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==g5?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function Rde(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Pde(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(e,t,n)}}const y5=[{provide:iB,useClass:Ede},{provide:MP,useFactory:function Ode(){return new Que}},{provide:bS,useClass:(()=>{class i extends bS{constructor(t,n,r,s){super(t.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)(X(Ft),X(hP),X(MP),X(Np))},i.\u0275prov=Oe({token:i,factory:i.\u0275fac}),i})()},{provide:Mu,useFactory:function Lde(i,e,t){return new Tde(i,e,t)},deps:[Rw,bS,Dt]}],IP=[{provide:hP,useFactory:()=>new Sde},{provide:oo,useValue:"BrowserAnimations"},...y5],v5=[{provide:hP,useClass:$4},{provide:oo,useValue:"NoopAnimations"},...y5];let Fde=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?v5:IP}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:IP,imports:[PN]}),i})();const b5=new Se("CdkAccordion");let Nde=0,Bde=(()=>{class i{constructor(t,n,r){this.accordion=t,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=nn.EMPTY,this.closed=new st,this.opened=new st,this.destroyed=new st,this.expandedChange=new st,this.id="cdk-accordion-child-"+Nde++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=Xn(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=Xn(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return i.\u0275fac=function(t){return new(t||i)(R(b5,12),R(ni),R(sV))},i.\u0275dir=Ne({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Hn([{provide:b5,useValue:void 0}])]}),i})(),Ude=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({}),i})();const Vde=["body"];function zde(i,e){}const Hde=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Gde=["mat-expansion-panel-header","*","mat-action-row"];function Wde(i,e){1&i&&Qe(0,"span",2),2&i&&ee("@indicatorRotate",Te()._getExpandedState())}const $de=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],jde=["mat-panel-title","mat-panel-description","*"],x5=new Se("MAT_ACCORDION"),w5="225ms cubic-bezier(0.4,0.0,0.2,1)",M5={indicatorRotate:Ol("indicatorRotate",[vs("collapsed, void",Zn({transform:"rotate(0deg)"})),vs("expanded",Zn({transform:"rotate(180deg)"})),Vs("expanded <=> collapsed, void => collapsed",co(w5))]),bodyExpansion:Ol("bodyExpansion",[vs("collapsed, void",Zn({height:"0px",visibility:"hidden"})),vs("expanded",Zn({height:"*",visibility:"visible"})),Vs("expanded <=> collapsed, void => collapsed",co(w5))])},C5=new Se("MAT_EXPANSION_PANEL");let qde=(()=>{class i{constructor(t,n){this._template=t,this._expansionPanel=n}}return i.\u0275fac=function(t){return new(t||i)(R(so),R(C5,8))},i.\u0275dir=Ne({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),Xde=0;const S5=new Se("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let E5=(()=>{class i extends Bde{constructor(t,n,r,s,o,a,l){super(t,n,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new st,this.afterCollapse=new st,this._inputChanges=new Ge,this._headerId="mat-expansion-panel-header-"+Xde++,this._bodyAnimationDone=new Ge,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(eh((c,d)=>c.fromState===d.fromState&&c.toState===d.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Xn(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(ns(null),Rn(()=>this.expanded&&!this._portal),Di(1)).subscribe(()=>{this._portal=new em(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,n=this._body.nativeElement;return t===n||n.contains(t)}return!1}}return i.\u0275fac=function(t){return new(t||i)(R(x5,12),R(ni),R(sV),R(ts),R(Ft),R(oo,8),R(S5,8))},i.\u0275cmp=St({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(t,n,r){if(1&t&&Ai(r,qde,5),2&t){let s;Kt(s=Zt())&&(n._lazyContent=s.first)}},viewQuery:function(t,n){if(1&t&&Qi(Vde,5),2&t){let r;Kt(r=Zt())&&(n._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,n){2&t&&fi("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Hn([{provide:x5,useValue:void 0},{provide:C5,useExisting:i}]),ht,ui],ngContentSelectors:Gde,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,n){1&t&&(ro(Hde),ti(0),se(1,"div",0,1),nt("@bodyExpansion.done",function(s){return n._bodyAnimationDone.next(s)}),se(3,"div",2),ti(4,1),Pe(5,zde,0,0,"ng-template",3),ae(),ti(6,2),ae()),2&t&&(J(1),ee("@bodyExpansion",n._getExpandedState())("id",n.id),Yt("aria-labelledby",n._headerId),J(4),ee("cdkPortalOutlet",n._portal))},dependencies:[tm],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[M5.bodyExpansion]},changeDetection:0}),i})();class Yde{}const Kde=j3(Yde);let Zde=(()=>{class i extends Kde{constructor(t,n,r,s,o,a,l){super(),this.panel=t,this._element=n,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=nn.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(Rn(d=>!(!d.hideToggle&&!d.togglePosition))):qs;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Ts(t.opened,t.closed,c,t._inputChanges.pipe(Rn(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Rn(()=>t._containsFocus())).subscribe(()=>r.focusVia(n,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:ga(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,n){t?this._focusMonitor.focusVia(this._element,t,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(t){return new(t||i)(R(E5,1),R($t),R(kc),R(ni),R(S5,8),R(oo,8),Va("tabindex"))},i.\u0275cmp=St({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,n){1&t&&nt("click",function(){return n._toggle()})("keydown",function(s){return n._keydown(s)}),2&t&&(Yt("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),wc("height",n._getHeaderHeight()),fi("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[ht],ngContentSelectors:jde,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,n){1&t&&(ro($de),se(0,"span",0),ti(1),ti(2,1),ti(3,2),ae(),Pe(4,Wde,1,1,"span",1)),2&t&&(J(4),ee("ngIf",n._showToggle()))},dependencies:[qi],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[M5.indicatorRotate]},changeDetection:0}),i})(),Jde=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),i})(),Qde=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Ne({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),ehe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Ja,Dn,Ude,nm]}),i})();function the(i,e){if(1&i&&(se(0,"mat-option",19),Ze(1),ae()),2&i){const t=e.$implicit;ee("value",t),J(1),es(" ",t," ")}}function nhe(i,e){if(1&i){const t=Ei();se(0,"mat-form-field",16)(1,"mat-select",17),nt("selectionChange",function(r){return Qt(t),cn(Te(2)._changePageSize(r.value))}),Pe(2,the,2,2,"mat-option",18),ae()()}if(2&i){const t=Te(2);ee("appearance",t._formFieldAppearance)("color",t.color),J(1),ee("value",t.pageSize)("disabled",t.disabled)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering)("aria-label",t._intl.itemsPerPageLabel),J(1),ee("ngForOf",t._displayedPageSizeOptions)}}function ihe(i,e){if(1&i&&(se(0,"div",20),Ze(1),ae()),2&i){const t=Te(2);J(1),pi(t.pageSize)}}function rhe(i,e){if(1&i&&(se(0,"div",12)(1,"div",13),Ze(2),ae(),Pe(3,nhe,3,8,"mat-form-field",14),Pe(4,ihe,2,1,"div",15),ae()),2&i){const t=Te();J(2),es(" ",t._intl.itemsPerPageLabel," "),J(1),ee("ngIf",t._displayedPageSizeOptions.length>1),J(1),ee("ngIf",t._displayedPageSizeOptions.length<=1)}}function she(i,e){if(1&i){const t=Ei();se(0,"button",21),nt("click",function(){return Qt(t),cn(Te().firstPage())}),ks(),se(1,"svg",7),Qe(2,"path",22),ae()()}if(2&i){const t=Te();ee("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),Yt("aria-label",t._intl.firstPageLabel)}}function ohe(i,e){if(1&i){const t=Ei();ks(),Ng(),se(0,"button",23),nt("click",function(){return Qt(t),cn(Te().lastPage())}),ks(),se(1,"svg",7),Qe(2,"path",24),ae()()}if(2&i){const t=Te();ee("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),Yt("aria-label",t._intl.lastPageLabel)}}let wS=(()=>{class i{constructor(){this.changes=new Ge,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,n,r)=>{if(0==r||0==n)return`0 of ${r}`;const s=t*n;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+n,r):s+n} of ${r}`}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Oe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const lhe={provide:wS,deps:[[new Io,new xl,wS]],useFactory:function ahe(i){return i||new wS}},uhe=new Se("MAT_PAGINATOR_DEFAULT_OPTIONS"),dhe=pM(_Y(class{}));let hhe=(()=>{class i extends dhe{constructor(t,n,r){if(super(),this._intl=t,this._changeDetectorRef=n,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new st,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:s,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=r;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(_a(t),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=_a(t),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(_a(t),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(n=>_a(n)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(t){this._hidePageSize=Xn(t)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(t){this._showFirstLastButtons=Xn(t)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,n)=>t-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return i.\u0275fac=function(t){bc()},i.\u0275dir=Ne({type:i,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[ht]}),i})(),fhe=(()=>{class i extends hhe{constructor(t,n,r){super(t,n,r),r&&null!=r.formFieldAppearance&&(this._formFieldAppearance=r.formFieldAppearance)}}return i.\u0275fac=function(t){return new(t||i)(R(wS),R(ni),R(uhe,8))},i.\u0275cmp=St({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[ht],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","panelClass","disableOptionCentering","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,n){1&t&&(se(0,"div",0)(1,"div",1),Pe(2,rhe,5,3,"div",2),se(3,"div",3)(4,"div",4),Ze(5),ae(),Pe(6,she,3,5,"button",5),se(7,"button",6),nt("click",function(){return n.previousPage()}),ks(),se(8,"svg",7),Qe(9,"path",8),ae()(),Ng(),se(10,"button",9),nt("click",function(){return n.nextPage()}),ks(),se(11,"svg",7),Qe(12,"path",10),ae()(),Pe(13,ohe,3,5,"button",11),ae()()()),2&t&&(J(2),ee("ngIf",!n.hidePageSize),J(3),es(" ",n._intl.getRangeLabel(n.pageIndex,n.pageSize,n.length)," "),J(1),ee("ngIf",n.showFirstLastButtons),J(1),ee("matTooltip",n._intl.previousPageLabel)("matTooltipDisabled",n._previousButtonsDisabled())("matTooltipPosition","above")("disabled",n._previousButtonsDisabled()),Yt("aria-label",n._intl.previousPageLabel),J(3),ee("matTooltip",n._intl.nextPageLabel)("matTooltipDisabled",n._nextButtonsDisabled())("matTooltipPosition","above")("disabled",n._nextButtonsDisabled()),Yt("aria-label",n._intl.nextPageLabel),J(3),ee("ngIf",n.showFirstLastButtons))},dependencies:[pa,qi,nh,oh,zM,Yy,PM],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{display:inline-block;width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}"],encapsulation:2,changeDetection:0}),i})(),phe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({providers:[lhe],imports:[Ja,L1,uV,OU,Dn]}),i})();const mhe=["*",[["mat-card-footer"]]],ghe=["*","mat-card-footer"];let _he=(()=>{class i{constructor(t){this._animationMode=t}}return i.\u0275fac=function(t){return new(t||i)(R(oo,8))},i.\u0275cmp=St({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,n){2&t&&fi("_mat-animation-noopable","NoopAnimations"===n._animationMode)},exportAs:["matCard"],ngContentSelectors:ghe,decls:2,vars:0,template:function(t,n){1&t&&(ro(mhe),ti(0),ti(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),i})(),yhe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i}),i.\u0275inj=Ut({imports:[Dn,Dn]}),i})(),vhe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Gt({type:i,bootstrap:[Nce]}),i.\u0275inj=Ut({providers:[lh,rV],imports:[PN,Dq,Fde,$K,GZ,IM,CZ,ehe,AU,IU,OU,L1,xJ,phe,aee,yhe,uV,GY,oce,LJ,yU]}),i})();jn(UM,[pa,qi,ig],[Ac]),jn(eV,[_y,pa,qi,dN,Lc,Fc,oh,E5,Zde,Qde,Jde,TU,fhe,zM,Yy,ig],[]),jn(tV,[pa,qi,Ll,rh,Lc,Fc,ah,ig],[Ac]),jn(aI,[pa,qi,HM,cI,_he,ig],[]),jn(iV,[ig,aI],[]),function k8(){OF=!1}(),Hj().bootstrapModule(vhe).catch(i=>console.error(i))},489:function(po,Ss,Vr){var qt;po=Vr.nmd(po),function(){var U,Mn="Expected a function",Ia="__lodash_hash_undefined__",di="__lodash_placeholder__",Cn=1/0,ka=9007199254740991,Zo=4294967295,s0=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Fn="[object Arguments]",An="[object Array]",Xe="[object Boolean]",Yl="[object Date]",id="[object Error]",ag="[object Function]",TS="[object GeneratorFunction]",Jo="[object Map]",Jh="[object Number]",dl="[object Object]",lg="[object Promise]",Zc="[object RegExp]",go="[object Set]",Qh="[object String]",cg="[object Symbol]",_o="[object WeakMap]",ef="[object ArrayBuffer]",Jc="[object DataView]",o0="[object Float32Array]",ug="[object Float64Array]",a0="[object Int8Array]",l0="[object Int16Array]",c0="[object Int32Array]",u0="[object Uint8Array]",d0="[object Uint8ClampedArray]",rd="[object Uint16Array]",tf="[object Uint32Array]",h0=/\b__p \+= '';/g,f0=/\b(__p \+=) '' \+/g,p0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,m0=/&(?:amp|lt|gt|quot|#39);/g,dg=/[&<>"']/g,g0=RegExp(m0.source),_0=RegExp(dg.source),y0=/<%-([\s\S]+?)%>/g,ar=/<%([\s\S]+?)%>/g,v0=/<%=([\s\S]+?)%>/g,PS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kS=/^\w*$/,OS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nf=/[\\^$.*+?()[\]{}|]/g,LS=RegExp(nf.source),hg=/^\s+/,Oa=/\s/,FS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Zi=/\{\n\/\* \[wrapped with (.+)\] \*/,Qc=/,? & /,qs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,BP=/[()=,{}\[\]\/\s]/,NS=/\\(\\)?/g,b0=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rf=/\w*$/,x0=/^[-+]0x[0-9a-f]+$/i,sd=/^0b[01]+$/i,BS=/^\[object .+?Constructor\]$/,w0=/^0o[0-7]+$/i,M0=/^(?:0|[1-9]\d*)$/,US=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sf=/($^)/,VS=/['\n\r\u2028\u2029\\]/g,af="\\ud800-\\udfff",Ri="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ts="\\u2700-\\u27bf",lf="a-z\\xdf-\\xf6\\xf8-\\xff",cf="A-Z\\xc0-\\xd6\\xd8-\\xde",S0="\\ufe0e\\ufe0f",Wn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mg="["+af+"]",GS="["+Wn+"]",_e="["+Ri+"]",od="\\d+",Bt="["+Ts+"]",Tn="["+lf+"]",E0="[^"+af+Wn+od+Ts+lf+cf+"]",A0="\\ud83c[\\udffb-\\udfff]",ad="[^"+af+"]",Hr="(?:\\ud83c[\\udde6-\\uddff]){2}",D0="[\\ud800-\\udbff][\\udc00-\\udfff]",eu="["+cf+"]",Qo="(?:"+Tn+"|"+E0+")",UP="(?:"+eu+"|"+E0+")",jS="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",qS="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",XS="(?:"+_e+"|"+A0+")?",T0="["+S0+"]?",os=T0+XS+"(?:\\u200d(?:"+[ad,Hr,D0].join("|")+")"+T0+XS+")*",Un="(?:"+[Bt,Hr,D0].join("|")+")"+os,HP="(?:"+[ad+_e+"?",_e,Hr,D0,mg].join("|")+")",GP=RegExp("['\u2019]","g"),WP=RegExp(_e,"g"),Oe=RegExp(A0+"(?="+A0+")|"+HP+os,"g"),$P=RegExp([eu+"?"+Tn+"+"+jS+"(?="+[GS,eu,"$"].join("|")+")",UP+"+"+qS+"(?="+[GS,eu+Qo,"$"].join("|")+")",eu+"?"+Qo+"+"+jS,eu+"+"+qS,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",od,Un].join("|"),"g"),Ut=RegExp("[\\u200d"+af+Ri+S0+"]"),gg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,I0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],KS=-1,ci={};ci[o0]=ci[ug]=ci[a0]=ci[l0]=ci[c0]=ci[u0]=ci[d0]=ci[rd]=ci[tf]=!0,ci[Fn]=ci[An]=ci[ef]=ci[Xe]=ci[Jc]=ci[Yl]=ci[id]=ci[ag]=ci[Jo]=ci[Jh]=ci[dl]=ci[Zc]=ci[go]=ci[Qh]=ci[_o]=!1;var ei={};ei[Fn]=ei[An]=ei[ef]=ei[Jc]=ei[Xe]=ei[Yl]=ei[o0]=ei[ug]=ei[a0]=ei[l0]=ei[c0]=ei[Jo]=ei[Jh]=ei[dl]=ei[Zc]=ei[go]=ei[Qh]=ei[cg]=ei[u0]=ei[d0]=ei[rd]=ei[tf]=!0,ei[id]=ei[ag]=ei[_o]=!1;var ZS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gt=parseFloat,yg=parseInt,P0="object"==typeof global&&global&&global.Object===Object&&global,Xs="object"==typeof self&&self&&self.Object===Object&&self,lr=P0||Xs||Function("return this")(),JS=Ss&&!Ss.nodeType&&Ss,Ys=JS&&po&&!po.nodeType&&po,Ks=Ys&&Ys.exports===JS,k0=Ks&&P0.process,yo=function(){try{return Ys&&Ys.require&&Ys.require("util").types||k0&&k0.binding&&k0.binding("util")}catch{}}(),Zs=yo&&yo.isArrayBuffer,$n=yo&&yo.isDate,QS=yo&&yo.isMap,eE=yo&&yo.isRegExp,Kl=yo&&yo.isSet,In=yo&&yo.isTypedArray;function Pr(W,he,oe){switch(oe.length){case 0:return W.call(he);case 1:return W.call(he,oe[0]);case 2:return W.call(he,oe[0],oe[1]);case 3:return W.call(he,oe[0],oe[1],oe[2])}return W.apply(he,oe)}function vg(W,he,oe,Ke){for(var Wt=-1,zn=null==W?0:W.length;++Wt<zn;){var dr=W[Wt];he(Ke,dr,oe(dr),W)}return Ke}function as(W,he){for(var oe=-1,Ke=null==W?0:W.length;++oe<Ke&&!1!==he(W[oe],oe,W););return W}function O0(W,he){for(var oe=null==W?0:W.length;oe--&&!1!==he(W[oe],oe,W););return W}function ea(W,he){for(var oe=-1,Ke=null==W?0:W.length;++oe<Ke;)if(!he(W[oe],oe,W))return!1;return!0}function Js(W,he){for(var oe=-1,Ke=null==W?0:W.length,Wt=0,zn=[];++oe<Ke;){var dr=W[oe];he(dr,oe,W)&&(zn[Wt++]=dr)}return zn}function df(W,he){return!(null==W||!W.length)&&zi(W,he,0)>-1}function St(W,he,oe){for(var Ke=-1,Wt=null==W?0:W.length;++Ke<Wt;)if(oe(he,W[Ke]))return!0;return!1}function jn(W,he){for(var oe=-1,Ke=null==W?0:W.length,Wt=Array(Ke);++oe<Ke;)Wt[oe]=he(W[oe],oe,W);return Wt}function La(W,he){for(var oe=-1,Ke=he.length,Wt=W.length;++oe<Ke;)W[Wt+oe]=he[oe];return W}function hf(W,he,oe,Ke){var Wt=-1,zn=null==W?0:W.length;for(Ke&&zn&&(oe=W[++Wt]);++Wt<zn;)oe=he(oe,W[Wt],Wt,W);return oe}function Gt(W,he,oe,Ke){var Wt=null==W?0:W.length;for(Ke&&Wt&&(oe=W[--Wt]);Wt--;)oe=he(oe,W[Wt],Wt,W);return oe}function bg(W,he){for(var oe=-1,Ke=null==W?0:W.length;++oe<Ke;)if(he(W[oe],oe,W))return!0;return!1}var L0=Vt("length");function Vn(W,he,oe){var Ke;return oe(W,function(Wt,zn,dr){if(he(Wt,zn,dr))return Ke=zn,!1}),Ke}function cr(W,he,oe,Ke){for(var Wt=W.length,zn=oe+(Ke?1:-1);Ke?zn--:++zn<Wt;)if(he(W[zn],zn,W))return zn;return-1}function zi(W,he,oe){return he==he?function pf(W,he,oe){for(var Ke=oe-1,Wt=W.length;++Ke<Wt;)if(W[Ke]===he)return Ke;return-1}(W,he,oe):cr(W,Rs,oe)}function Is(W,he,oe,Ke){for(var Wt=oe-1,zn=W.length;++Wt<zn;)if(Ke(W[Wt],he))return Wt;return-1}function Rs(W){return W!=W}function ze(W,he){var oe=null==W?0:W.length;return oe?Hi(W,he)/oe:NaN}function Vt(W){return function(he){return null==he?U:he[W]}}function ii(W){return function(he){return null==W?U:W[he]}}function cs(W,he,oe,Ke,Wt){return Wt(W,function(zn,dr,si){oe=Ke?(Ke=!1,zn):he(oe,zn,dr,si)}),oe}function Hi(W,he){for(var oe,Ke=-1,Wt=W.length;++Ke<Wt;){var zn=he(W[Ke]);zn!==U&&(oe=oe===U?zn:oe+zn)}return oe}function Fa(W,he){for(var oe=-1,Ke=Array(W);++oe<W;)Ke[oe]=he(oe);return Ke}function tu(W){return W&&W.slice(0,Gr(W)+1).replace(hg,"")}function ur(W){return function(he){return W(he)}}function Xt(W,he){return jn(he,function(oe){return W[oe]})}function hl(W,he){return W.has(he)}function Jl(W,he){for(var oe=-1,Ke=W.length;++oe<Ke&&zi(he,W[oe],0)>-1;);return oe}function ff(W,he){for(var oe=W.length;oe--&&zi(he,W[oe],0)>-1;);return oe}function Ql(W,he){for(var oe=W.length,Ke=0;oe--;)W[oe]===he&&++Ke;return Ke}var kr=ii({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),ld=ii({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nu(W){return"\\"+ZS[W]}function bo(W){return Ut.test(W)}function xg(W){var he=-1,oe=Array(W.size);return W.forEach(function(Ke,Wt){oe[++he]=[Wt,Ke]}),oe}function N0(W,he){return function(oe){return W(he(oe))}}function xo(W,he){for(var oe=-1,Ke=W.length,Wt=0,zn=[];++oe<Ke;){var dr=W[oe];(dr===he||dr===di)&&(W[oe]=di,zn[Wt++]=oe)}return zn}function iu(W){var he=-1,oe=Array(W.size);return W.forEach(function(Ke){oe[++he]=Ke}),oe}function Pi(W){return bo(W)?function wg(W){for(var he=Oe.lastIndex=0;Oe.test(W);)++he;return he}(W):L0(W)}function wo(W){return bo(W)?function mf(W){return W.match(Oe)||[]}(W):function Ne(W){return W.split("")}(W)}function Gr(W){for(var he=W.length;he--&&Oa.test(W.charAt(he)););return he}var Mo=ii({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),_f=function W(he){var u,oe=(he=null==he?lr:_f.defaults(lr.Object(),he,_f.pick(lr,I0))).Array,Ke=he.Date,Wt=he.Error,zn=he.Function,dr=he.Math,si=he.Object,B0=he.RegExp,jP=he.String,So=he.TypeError,Mg=oe.prototype,ud=si.prototype,Cg=he["__core-js_shared__"],Sg=zn.prototype.toString,Kn=ud.hasOwnProperty,U0=0,yf=(u=/[^.]+$/.exec(Cg&&Cg.keys&&Cg.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Eg=ud.toString,XP=Sg.call(si),YP=lr._,tc=B0("^"+Sg.call(Kn).replace(nf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vf=Ks?he.Buffer:U,ui=he.Symbol,dd=he.Uint8Array,V0=vf?vf.allocUnsafe:U,bf=N0(si.getPrototypeOf,si),Ag=si.create,Dg=ud.propertyIsEnumerable,xf=Mg.splice,wf=ui?ui.isConcatSpreadable:U,hd=ui?ui.iterator:U,hr=ui?ui.toStringTag:U,ru=function(){try{var u=fc(si,"defineProperty");return u({},"",{}),u}catch{}}(),tE=he.clearTimeout!==lr.clearTimeout&&he.clearTimeout,Tg=Ke&&Ke.now!==lr.Date.now&&Ke.now,nE=he.setTimeout!==lr.setTimeout&&he.setTimeout,Ig=dr.ceil,_i=dr.floor,Rg=si.getOwnPropertySymbols,KP=vf?vf.isBuffer:U,fd=he.isFinite,Qs=Mg.join,iE=N0(si.keys,si),ki=dr.max,Oi=dr.min,Ps=Ke.now,z0=he.parseInt,pd=dr.random,rE=Mg.reverse,ta=fc(he,"DataView"),su=fc(he,"Map"),md=fc(he,"Promise"),bt=fc(he,"Set"),ou=fc(he,"WeakMap"),Mf=fc(si,"create"),Cf=ou&&new ou,au={},sE=pc(ta),H0=pc(su),oE=pc(md),aE=pc(bt),we=pc(ou),hn=ui?ui.prototype:U,Qt=hn?hn.valueOf:U,cn=hn?hn.toString:U;function D(u){if(vi(u)&&!zt(u)&&!(u instanceof un)){if(u instanceof Li)return u;if(Kn.call(u,"__wrapped__"))return LE(u)}return new Li(u)}var nc=function(){function u(){}return function(f){if(!Ci(f))return{};if(Ag)return Ag(f);u.prototype=f;var g=new u;return u.prototype=U,g}}();function fl(){}function Li(u,f){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=U}function un(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zo,this.__views__=[]}function lu(u){var f=-1,g=null==u?0:u.length;for(this.clear();++f<g;){var w=u[f];this.set(w[0],w[1])}}function wr(u){var f=-1,g=null==u?0:u.length;for(this.clear();++f<g;){var w=u[f];this.set(w[0],w[1])}}function Eo(u){var f=-1,g=null==u?0:u.length;for(this.clear();++f<g;){var w=u[f];this.set(w[0],w[1])}}function pl(u){var f=-1,g=null==u?0:u.length;for(this.__data__=new Eo;++f<g;)this.add(u[f])}function eo(u){var f=this.__data__=new wr(u);this.size=f.size}function yi(u,f){var g=zt(u),w=!g&&yc(u),S=!g&&!w&&Cl(u),I=!g&&!w&&!S&&Ro(u),V=g||w||S||I,z=V?Fa(u.length,jP):[],j=z.length;for(var ye in u)(f||Kn.call(u,ye))&&(!V||!("length"==ye||S&&("offset"==ye||"parent"==ye)||I&&("buffer"==ye||"byteLength"==ye||"byteOffset"==ye)||hs(ye,j)))&&z.push(ye);return z}function ks(u){var f=u.length;return f?u[Md(0,f-1)]:U}function mE(u,f){return Id(us(u),ic(f,0,u.length))}function Ng(u){return Id(us(u))}function Bg(u,f,g){(g!==U&&!Kr(u[f],g)||g===U&&!(f in u))&&Ao(u,f,g)}function gd(u,f,g){var w=u[f];(!Kn.call(u,f)||!Kr(w,g)||g===U&&!(f in u))&&Ao(u,f,g)}function Ef(u,f){for(var g=u.length;g--;)if(Kr(u[g][0],f))return g;return-1}function Af(u,f,g,w){return na(u,function(S,I,V){f(w,S,g(S),V)}),w}function _d(u,f){return u&&sa(f,Wi(f),u)}function Ao(u,f,g){"__proto__"==f&&ru?ru(u,f,{configurable:!0,enumerable:!0,value:g,writable:!0}):u[f]=g}function Tf(u,f){for(var g=-1,w=f.length,S=oe(w),I=null==u;++g<w;)S[g]=I?U:up(u,f[g]);return S}function ic(u,f,g){return u==u&&(g!==U&&(u=u<=g?u:g),f!==U&&(u=u>=f?u:f)),u}function Ji(u,f,g,w,S,I){var V,z=1&f,j=2&f,ye=4&f;if(g&&(V=S?g(u,w,S,I):g(u)),V!==U)return V;if(!Ci(u))return u;var be=zt(u);if(be){if(V=function r_(u){var f=u.length,g=new u.constructor(f);return f&&"string"==typeof u[0]&&Kn.call(u,"index")&&(g.index=u.index,g.input=u.input),g}(u),!z)return us(u,V)}else{var Ce=Cr(u),He=Ce==ag||Ce==TS;if(Cl(u))return Xg(u,z);if(Ce==dl||Ce==Fn||He&&!S){if(V=j||He?{}:yb(u),!z)return j?function Bf(u,f){return sa(u,gb(u),f)}(u,function Df(u,f){return u&&sa(f,pr(f),u)}(V,u)):function Zg(u,f){return sa(u,$f(u),f)}(u,_d(V,u))}else{if(!ei[Ce])return S?u:{};V=function vb(u,f,g){var w=u.constructor;switch(f){case ef:return qr(u);case Xe:case Yl:return new w(+u);case Jc:return function Yg(u,f){var g=f?qr(u.buffer):u.buffer;return new u.constructor(g,u.byteOffset,u.byteLength)}(u,g);case o0:case ug:case a0:case l0:case c0:case u0:case d0:case rd:case tf:return Kg(u,g);case Jo:return new w;case Jh:case Qh:return new w(u);case Zc:return function pu(u){var f=new u.constructor(u.source,rf.exec(u));return f.lastIndex=u.lastIndex,f}(u);case go:return new w;case cg:return function rk(u){return Qt?si(Qt.call(u)):{}}(u)}}(u,Ce,z)}}I||(I=new eo);var Ye=I.get(u);if(Ye)return Ye;I.set(u,V),ap(u)?u.forEach(function(_t){V.add(Ji(_t,f,g,_t,u,I))}):AA(u)&&u.forEach(function(_t,sn){V.set(sn,Ji(_t,f,g,sn,u,I))});var tn=be?U:(ye?j?n_:hc:j?pr:Wi)(u);return as(tn||u,function(_t,sn){tn&&(_t=u[sn=_t]),gd(V,sn,Ji(_t,f,g,sn,u,I))}),V}function Y0(u,f,g){var w=g.length;if(null==u)return!w;for(u=si(u);w--;){var S=g[w],V=u[S];if(V===U&&!(S in u)||!(0,f[S])(V))return!1}return!0}function K0(u,f,g){if("function"!=typeof u)throw new So(Mn);return Td(function(){u.apply(U,g)},f)}function Ba(u,f,g,w){var S=-1,I=df,V=!0,z=u.length,j=[],ye=f.length;if(!z)return j;g&&(f=jn(f,ur(g))),w?(I=St,V=!1):f.length>=200&&(I=hl,V=!1,f=new pl(f));e:for(;++S<z;){var be=u[S],Ce=null==g?be:g(be);if(be=w||0!==be?be:0,V&&Ce==Ce){for(var He=ye;He--;)if(f[He]===Ce)continue e;j.push(be)}else I(f,Ce,w)||j.push(be)}return j}D.templateSettings={escape:y0,evaluate:ar,interpolate:v0,variable:"",imports:{_:D}},(D.prototype=fl.prototype).constructor=D,(Li.prototype=nc(fl.prototype)).constructor=Li,(un.prototype=nc(fl.prototype)).constructor=un,lu.prototype.clear=function Sf(){this.__data__=Mf?Mf(null):{},this.size=0},lu.prototype.delete=function Wr(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f},lu.prototype.get=function Na(u){var f=this.__data__;if(Mf){var g=f[u];return g===Ia?U:g}return Kn.call(f,u)?f[u]:U},lu.prototype.has=function G0(u){var f=this.__data__;return Mf?f[u]!==U:Kn.call(f,u)},lu.prototype.set=function cu(u,f){var g=this.__data__;return this.size+=this.has(u)?0:1,g[u]=Mf&&f===U?Ia:f,this},wr.prototype.clear=function cE(){this.__data__=[],this.size=0},wr.prototype.delete=function W0(u){var f=this.__data__,g=Ef(f,u);return!(g<0||(g==f.length-1?f.pop():xf.call(f,g,1),--this.size,0))},wr.prototype.get=function uE(u){var f=this.__data__,g=Ef(f,u);return g<0?U:f[g][1]},wr.prototype.has=function dE(u){return Ef(this.__data__,u)>-1},wr.prototype.set=function kg(u,f){var g=this.__data__,w=Ef(g,u);return w<0?(++this.size,g.push([u,f])):g[w][1]=f,this},Eo.prototype.clear=function $0(){this.size=0,this.__data__={hash:new lu,map:new(su||wr),string:new lu}},Eo.prototype.delete=function Og(u){var f=Gf(this,u).delete(u);return this.size-=f?1:0,f},Eo.prototype.get=function hE(u){return Gf(this,u).get(u)},Eo.prototype.has=function j0(u){return Gf(this,u).has(u)},Eo.prototype.set=function Lg(u,f){var g=Gf(this,u),w=g.size;return g.set(u,f),this.size+=g.size==w?0:1,this},pl.prototype.add=pl.prototype.push=function q0(u){return this.__data__.set(u,Ia),this},pl.prototype.has=function X0(u){return this.__data__.has(u)},eo.prototype.clear=function Fg(){this.__data__=new wr,this.size=0},eo.prototype.delete=function fE(u){var f=this.__data__,g=f.delete(u);return this.size=f.size,g},eo.prototype.get=function pE(u){return this.__data__.get(u)},eo.prototype.has=function $r(u){return this.__data__.has(u)},eo.prototype.set=function ml(u,f){var g=this.__data__;if(g instanceof wr){var w=g.__data__;if(!su||w.length<199)return w.push([u,f]),this.size=++g.size,this;g=this.__data__=new Eo(w)}return g.set(u,f),this.size=g.size,this};var na=Uf(Do),Z0=Uf(Rf,!0);function gE(u,f){var g=!0;return na(u,function(w,S,I){return g=!!f(w,S,I)}),g}function Ug(u,f,g){for(var w=-1,S=u.length;++w<S;){var I=u[w],V=f(I);if(null!=V&&(z===U?V==V&&!no(V):g(V,z)))var z=V,j=I}return j}function vd(u,f){var g=[];return na(u,function(w,S,I){f(w,S,I)&&g.push(w)}),g}function fr(u,f,g,w,S){var I=-1,V=u.length;for(g||(g=s_),S||(S=[]);++I<V;){var z=u[I];f>0&&g(z)?f>1?fr(z,f-1,g,w,S):La(S,z):w||(S[S.length]=z)}return S}var If=Sd(),bd=Sd(!0);function Do(u,f){return u&&If(u,f,Wi)}function Rf(u,f){return u&&bd(u,f,Wi)}function Ua(u,f){return Js(f,function(g){return Wa(u[g])})}function rc(u,f){for(var g=0,w=(f=vl(f,u)).length;null!=u&&g<w;)u=u[la(f[g++])];return g&&g==w?u:U}function sc(u,f,g){var w=f(u);return zt(u)?w:La(w,g(u))}function Mr(u){return null==u?u===U?"[object Undefined]":"[object Null]":hr&&hr in si(u)?function Wf(u){var f=Kn.call(u,hr),g=u[hr];try{u[hr]=U;var w=!0}catch{}var S=Eg.call(u);return w&&(f?u[hr]=g:delete u[hr]),S}(u):function kE(u){return Eg.call(u)}(u)}function uu(u,f){return u>f}function QP(u,f){return null!=u&&Kn.call(u,f)}function J0(u,f){return null!=u&&f in si(u)}function Vg(u,f,g){for(var w=g?St:df,S=u[0].length,I=u.length,V=I,z=oe(I),j=1/0,ye=[];V--;){var be=u[V];V&&f&&(be=jn(be,ur(f))),j=Oi(be.length,j),z[V]=!g&&(f||S>=120&&be.length>=120)?new pl(V&&be):U}be=u[0];var Ce=-1,He=z[0];e:for(;++Ce<S&&ye.length<j;){var Ye=be[Ce],mt=f?f(Ye):Ye;if(Ye=g||0!==Ye?Ye:0,!(He?hl(He,mt):w(ye,mt,g))){for(V=I;--V;){var tn=z[V];if(!(tn?hl(tn,mt):w(u[V],mt,g)))continue e}He&&He.push(mt),ye.push(Ye)}}return ye}function xd(u,f,g){var w=null==(u=fs(u,f=vl(f,u)))?u:u[la(ps(f))];return null==w?U:Pr(w,u,g)}function du(u){return vi(u)&&Mr(u)==Fn}function gl(u,f,g,w,S){return u===f||(null==u||null==f||!vi(u)&&!vi(f)?u!=u&&f!=f:function Pf(u,f,g,w,S,I){var V=zt(u),z=zt(f),j=V?An:Cr(u),ye=z?An:Cr(f),be=(j=j==Fn?dl:j)==dl,Ce=(ye=ye==Fn?dl:ye)==dl,He=j==ye;if(He&&Cl(u)){if(!Cl(f))return!1;V=!0,be=!1}if(He&&!be)return I||(I=new eo),V||Ro(u)?t_(u,f,g,w,S,I):function AE(u,f,g,w,S,I,V){switch(g){case Jc:if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case ef:return!(u.byteLength!=f.byteLength||!I(new dd(u),new dd(f)));case Xe:case Yl:case Jh:return Kr(+u,+f);case id:return u.name==f.name&&u.message==f.message;case Zc:case Qh:return u==f+"";case Jo:var z=xg;case go:if(z||(z=iu),u.size!=f.size&&!(1&w))return!1;var ye=V.get(u);if(ye)return ye==f;w|=2,V.set(u,f);var be=t_(z(u),z(f),w,S,I,V);return V.delete(u),be;case cg:if(Qt)return Qt.call(u)==Qt.call(f)}return!1}(u,f,j,g,w,S,I);if(!(1&g)){var Ye=be&&Kn.call(u,"__wrapped__"),mt=Ce&&Kn.call(f,"__wrapped__");if(Ye||mt){var tn=Ye?u.value():u,_t=mt?f.value():f;return I||(I=new eo),S(tn,_t,g,w,I)}}return!!He&&(I||(I=new eo),function DE(u,f,g,w,S,I){var V=1&g,z=hc(u),j=z.length;if(j!=hc(f).length&&!V)return!1;for(var Ce=j;Ce--;){var He=z[Ce];if(!(V?He in f:Kn.call(f,He)))return!1}var Ye=I.get(u),mt=I.get(f);if(Ye&&mt)return Ye==f&&mt==u;var tn=!0;I.set(u,f),I.set(f,u);for(var _t=V;++Ce<j;){var sn=u[He=z[Ce]],gn=f[He];if(w)var Jr=V?w(gn,sn,He,f,u,I):w(sn,gn,He,u,f,I);if(!(Jr===U?sn===gn||S(sn,gn,g,w,I):Jr)){tn=!1;break}_t||(_t="constructor"==He)}if(tn&&!_t){var Qr=u.constructor,$i=f.constructor;Qr!=$i&&"constructor"in u&&"constructor"in f&&!("function"==typeof Qr&&Qr instanceof Qr&&"function"==typeof $i&&$i instanceof $i)&&(tn=!1)}return I.delete(u),I.delete(f),tn}(u,f,g,w,S,I))}(u,f,g,w,gl,S))}function kf(u,f,g,w){var S=g.length,I=S,V=!w;if(null==u)return!I;for(u=si(u);S--;){var z=g[S];if(V&&z[2]?z[1]!==u[z[0]]:!(z[0]in u))return!1}for(;++S<I;){var j=(z=g[S])[0],ye=u[j],be=z[1];if(V&&z[2]){if(ye===U&&!(j in u))return!1}else{var Ce=new eo;if(w)var He=w(ye,be,j,u,f,Ce);if(!(He===U?gl(be,ye,3,w,Ce):He))return!1}}return!0}function Gg(u){return!(!Ci(u)||function a_(u){return!!yf&&yf in u}(u))&&(Wa(u)?tc:BS).test(pc(u))}function wd(u){return"function"==typeof u?u:null==u?gs:"object"==typeof u?zt(u)?nb(u[0],u[1]):ac(u):Ud(u)}function oc(u){if(!bu(u))return iE(u);var f=[];for(var g in si(u))Kn.call(u,g)&&"constructor"!=g&&f.push(g);return f}function Of(u,f){return u<f}function Wg(u,f){var g=-1,w=Zr(u)?oe(u.length):[];return na(u,function(S,I,V){w[++g]=f(S,I,V)}),w}function ac(u){var f=i_(u);return 1==f.length&&f[0][2]?wl(f[0][0],f[0][1]):function(g){return g===u||kf(g,u,f)}}function nb(u,f){return o_(u)&&l_(f)?wl(la(u),f):function(g){var w=up(g,u);return w===U&&w===f?Eu(g,u):gl(f,w,3)}}function Mi(u,f,g,w,S){u!==f&&If(f,function(I,V){if(S||(S=new eo),Ci(I))!function $g(u,f,g,w,S,I,V){var z=c_(u,g),j=c_(f,g),ye=V.get(j);if(ye)Bg(u,g,ye);else{var be=I?I(z,j,g+"",u,f,V):U,Ce=be===U;if(Ce){var He=zt(j),Ye=!He&&Cl(j),mt=!He&&!Ye&&Ro(j);be=j,He||Ye||mt?zt(z)?be=z:Fi(z)?be=us(z):Ye?(Ce=!1,be=Xg(j,!0)):mt?(Ce=!1,be=Kg(j,!0)):be=[]:Nd(j)||yc(j)?(be=z,yc(z)?be=O_(z):(!Ci(z)||Wa(z))&&(be=yb(j))):Ce=!1}Ce&&(V.set(j,be),S(be,j,w,I,V),V.delete(j)),Bg(u,g,be)}}(u,f,V,g,Mi,w,S);else{var z=w?w(c_(u,V),I,V+"",u,f,S):U;z===U&&(z=I),Bg(u,V,z)}},pr)}function ib(u,f){var g=u.length;if(g)return hs(f+=f<0?g:0,g)?u[f]:U}function jg(u,f,g){f=f.length?jn(f,function(I){return zt(I)?function(V){return rc(V,1===I.length?I[0]:I)}:I}):[gs];var w=-1;return f=jn(f,ur(xt())),function Zl(W,he){var oe=W.length;for(W.sort(he);oe--;)W[oe]=W[oe].value;return W}(Wg(u,function(I,V,z){return{criteria:jn(f,function(ye){return ye(I)}),index:++w,value:I}}),function(I,V){return function CE(u,f,g){for(var w=-1,S=u.criteria,I=f.criteria,V=S.length,z=g.length;++w<V;){var j=lb(S[w],I[w]);if(j)return w>=z?j:j*("desc"==g[w]?-1:1)}return u.index-f.index}(I,V,g)})}function lc(u,f,g){for(var w=-1,S=f.length,I={};++w<S;){var V=f[w],z=rc(u,V);g(z,V)&&Lf(I,vl(V,u),z)}return I}function _l(u,f,g,w){var S=w?Is:zi,I=-1,V=f.length,z=u;for(u===f&&(f=us(f)),g&&(z=jn(u,ur(g)));++I<V;)for(var j=0,ye=f[I],be=g?g(ye):ye;(j=S(z,be,j,w))>-1;)z!==u&&xf.call(z,j,1),xf.call(u,j,1);return u}function qg(u,f){for(var g=u?f.length:0,w=g-1;g--;){var S=f[g];if(g==w||S!==I){var I=S;hs(S)?xf.call(u,S,1):ob(u,S)}}return u}function Md(u,f){return u+_i(pd()*(f-u+1))}function rb(u,f){var g="";if(!u||f<1||f>ka)return g;do{f%2&&(g+=u),(f=_i(f/2))&&(u+=u)}while(f);return g}function rn(u,f){return u_(xb(u,f,gs),u+"")}function Se(u){return ks(Au(u))}function ek(u,f){var g=Au(u);return Id(g,ic(f,0,g.length))}function Lf(u,f,g,w){if(!Ci(u))return u;for(var S=-1,I=(f=vl(f,u)).length,V=I-1,z=u;null!=z&&++S<I;){var j=la(f[S]),ye=g;if("__proto__"===j||"constructor"===j||"prototype"===j)return u;if(S!=V){var be=z[j];(ye=w?w(be,j,z):U)===U&&(ye=Ci(be)?be:hs(f[S+1])?[]:{})}gd(z,j,ye),z=z[j]}return u}var bE=Cf?function(u,f){return Cf.set(u,f),u}:gs,tk=ru?function(u,f){return ru(u,"toString",{configurable:!0,enumerable:!1,value:G_(f),writable:!0})}:gs;function nk(u){return Id(Au(u))}function To(u,f,g){var w=-1,S=u.length;f<0&&(f=-f>S?0:S+f),(g=g>S?S:g)<0&&(g+=S),S=f>g?0:g-f>>>0,f>>>=0;for(var I=oe(S);++w<S;)I[w]=u[w+f];return I}function ik(u,f){var g;return na(u,function(w,S,I){return!(g=f(w,S,I))}),!!g}function yl(u,f,g){var w=0,S=null==u?w:u.length;if("number"==typeof f&&f==f&&S<=2147483647){for(;w<S;){var I=w+S>>>1,V=u[I];null!==V&&!no(V)&&(g?V<=f:V<f)?w=I+1:S=I}return S}return sb(u,f,gs,g)}function sb(u,f,g,w){var S=0,I=null==u?0:u.length;if(0===I)return 0;for(var V=(f=g(f))!=f,z=null===f,j=no(f),ye=f===U;S<I;){var be=_i((S+I)/2),Ce=g(u[be]),He=Ce!==U,Ye=null===Ce,mt=Ce==Ce,tn=no(Ce);if(V)var _t=w||mt;else _t=ye?mt&&(w||He):z?mt&&He&&(w||!Ye):j?mt&&He&&!Ye&&(w||!tn):!Ye&&!tn&&(w?Ce<=f:Ce<f);_t?S=be+1:I=be}return Oi(I,4294967294)}function xE(u,f){for(var g=-1,w=u.length,S=0,I=[];++g<w;){var V=u[g],z=f?f(V):V;if(!g||!Kr(z,j)){var j=z;I[S++]=0===V?0:V}}return I}function Gi(u){return"number"==typeof u?u:no(u)?NaN:+u}function jr(u){if("string"==typeof u)return u;if(zt(u))return jn(u,jr)+"";if(no(u))return cn?cn.call(u):"";var f=u+"";return"0"==f&&1/u==-Cn?"-0":f}function to(u,f,g){var w=-1,S=df,I=u.length,V=!0,z=[],j=z;if(g)V=!1,S=St;else if(I>=200){var ye=f?null:pb(u);if(ye)return iu(ye);V=!1,S=hl,j=new pl}else j=f?[]:z;e:for(;++w<I;){var be=u[w],Ce=f?f(be):be;if(be=g||0!==be?be:0,V&&Ce==Ce){for(var He=j.length;He--;)if(j[He]===Ce)continue e;f&&j.push(Ce),z.push(be)}else S(j,Ce,g)||(j!==z&&j.push(Ce),z.push(be))}return z}function ob(u,f){return null==(u=fs(u,f=vl(f,u)))||delete u[la(ps(f))]}function ab(u,f,g,w){return Lf(u,f,g(rc(u,f)),w)}function Or(u,f,g,w){for(var S=u.length,I=w?S:-1;(w?I--:++I<S)&&f(u[I],I,u););return g?To(u,w?0:I,w?I+1:S):To(u,w?I+1:0,w?S:I)}function ra(u,f){var g=u;return g instanceof un&&(g=g.value()),hf(f,function(w,S){return S.func.apply(S.thisArg,La([w],S.args))},g)}function Ff(u,f,g){var w=u.length;if(w<2)return w?to(u[0]):[];for(var S=-1,I=oe(w);++S<w;)for(var V=u[S],z=-1;++z<w;)z!=S&&(I[S]=Ba(I[S]||V,u[z],f,g));return to(fr(I,1),f,g)}function Cd(u,f,g){for(var w=-1,S=u.length,I=f.length,V={};++w<S;)g(V,u[w],w<I?f[w]:U);return V}function cc(u){return Fi(u)?u:[]}function Nf(u){return"function"==typeof u?u:gs}function vl(u,f){return zt(u)?u:o_(u,f)?[u]:Sb(Bn(u))}var wE=rn;function uc(u,f,g){var w=u.length;return g=g===U?w:g,!f&&g>=w?u:To(u,f,g)}var ME=tE||function(u){return lr.clearTimeout(u)};function Xg(u,f){if(f)return u.slice();var g=u.length,w=V0?V0(g):new u.constructor(g);return u.copy(w),w}function qr(u){var f=new u.constructor(u.byteLength);return new dd(f).set(new dd(u)),f}function Kg(u,f){var g=f?qr(u.buffer):u.buffer;return new u.constructor(g,u.byteOffset,u.length)}function lb(u,f){if(u!==f){var g=u!==U,w=null===u,S=u==u,I=no(u),V=f!==U,z=null===f,j=f==f,ye=no(f);if(!z&&!ye&&!I&&u>f||I&&V&&j&&!z&&!ye||w&&V&&j||!g&&j||!S)return 1;if(!w&&!I&&!ye&&u<f||ye&&g&&S&&!w&&!I||z&&g&&S||!V&&S||!j)return-1}return 0}function cb(u,f,g,w){for(var S=-1,I=u.length,V=g.length,z=-1,j=f.length,ye=ki(I-V,0),be=oe(j+ye),Ce=!w;++z<j;)be[z]=f[z];for(;++S<V;)(Ce||S<I)&&(be[g[S]]=u[S]);for(;ye--;)be[z++]=u[S++];return be}function ub(u,f,g,w){for(var S=-1,I=u.length,V=-1,z=g.length,j=-1,ye=f.length,be=ki(I-z,0),Ce=oe(be+ye),He=!w;++S<be;)Ce[S]=u[S];for(var Ye=S;++j<ye;)Ce[Ye+j]=f[j];for(;++V<z;)(He||S<I)&&(Ce[Ye+g[V]]=u[S++]);return Ce}function us(u,f){var g=-1,w=u.length;for(f||(f=oe(w));++g<w;)f[g]=u[g];return f}function sa(u,f,g,w){var S=!g;g||(g={});for(var I=-1,V=f.length;++I<V;){var z=f[I],j=w?w(g[z],u[z],z,g,u):U;j===U&&(j=u[z]),S?Ao(g,z,j):gd(g,z,j)}return g}function Jg(u,f){return function(g,w){var S=zt(g)?vg:Af,I=f?f():{};return S(g,u,xt(w,2),I)}}function oa(u){return rn(function(f,g){var w=-1,S=g.length,I=S>1?g[S-1]:U,V=S>2?g[2]:U;for(I=u.length>3&&"function"==typeof I?(S--,I):U,V&&Xr(g[0],g[1],V)&&(I=S<3?U:I,S=1),f=si(f);++w<S;){var z=g[w];z&&u(f,z,w,I)}return f})}function Uf(u,f){return function(g,w){if(null==g)return g;if(!Zr(g))return u(g,w);for(var S=g.length,I=f?S:-1,V=si(g);(f?I--:++I<S)&&!1!==w(V[I],I,V););return g}}function Sd(u){return function(f,g,w){for(var S=-1,I=si(f),V=w(f),z=V.length;z--;){var j=V[u?z:++S];if(!1===g(I[j],j,I))break}return f}}function db(u){return function(f){var g=bo(f=Bn(f))?wo(f):U,w=g?g[0]:f.charAt(0),S=g?uc(g,1).join(""):f.slice(1);return w[u]()+S}}function mu(u){return function(f){return hf(Rx(Lt(f).replace(GP,"")),u,"")}}function gu(u){return function(){var f=arguments;switch(f.length){case 0:return new u;case 1:return new u(f[0]);case 2:return new u(f[0],f[1]);case 3:return new u(f[0],f[1],f[2]);case 4:return new u(f[0],f[1],f[2],f[3]);case 5:return new u(f[0],f[1],f[2],f[3],f[4]);case 6:return new u(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new u(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var g=nc(u.prototype),w=u.apply(g,f);return Ci(w)?w:g}}function dc(u){return function(f,g,w){var S=si(f);if(!Zr(f)){var I=xt(g,3);f=Wi(f),g=function(z){return I(S[z],z,S)}}var V=u(f,g,w);return V>-1?S[I?f[V]:V]:U}}function hb(u){return ds(function(f){var g=f.length,w=g,S=Li.prototype.thru;for(u&&f.reverse();w--;){var I=f[w];if("function"!=typeof I)throw new So(Mn);if(S&&!V&&"wrapper"==Dd(I))var V=new Li([],!0)}for(w=V?w:g;++w<g;){var z=Dd(I=f[w]),j="wrapper"==z?mb(I):U;V=j&&vu(j[0])&&424==j[1]&&!j[4].length&&1==j[9]?V[Dd(j[0])].apply(V,j[3]):1==I.length&&vu(I)?V[z]():V.thru(I)}return function(){var ye=arguments,be=ye[0];if(V&&1==ye.length&&zt(be))return V.plant(be).value();for(var Ce=0,He=g?f[Ce].apply(this,ye):be;++Ce<g;)He=f[Ce].call(this,He);return He}})}function X(u,f,g,w,S,I,V,z,j,ye){var be=128&f,Ce=1&f,He=2&f,Ye=24&f,mt=512&f,tn=He?U:gu(u);return function _t(){for(var sn=arguments.length,gn=oe(sn),Jr=sn;Jr--;)gn[Jr]=arguments[Jr];if(Ye)var Qr=yu(_t),$i=Ql(gn,Qr);if(w&&(gn=cb(gn,w,S,Ye)),I&&(gn=ub(gn,I,V,Ye)),sn-=$i,Ye&&sn<ye){var Si=xo(gn,Qr);return zf(u,f,X,_t.placeholder,g,gn,Si,z,j,ye-sn)}var Lo=Ce?g:this,Fo=He?Lo[u]:u;return sn=gn.length,z?gn=aa(gn,z):mt&&sn>1&&gn.reverse(),be&&j<sn&&(gn.length=j),this&&this!==lr&&this instanceof _t&&(Fo=tn||gu(Fo)),Fo.apply(Lo,gn)}}function Qg(u,f){return function(g,w){return function ia(u,f,g,w){return Do(u,function(S,I,V){f(w,g(S),I,V)}),w}(g,u,f(w),{})}}function qn(u,f){return function(g,w){var S;if(g===U&&w===U)return f;if(g!==U&&(S=g),w!==U){if(S===U)return w;"string"==typeof g||"string"==typeof w?(g=jr(g),w=jr(w)):(g=Gi(g),w=Gi(w)),S=u(g,w)}return S}}function Ad(u){return ds(function(f){return f=jn(f,ur(xt())),rn(function(g){var w=this;return u(f,function(S){return Pr(S,w,g)})})})}function bl(u,f){var g=(f=f===U?" ":jr(f)).length;if(g<2)return g?rb(f,u):f;var w=rb(f,Ig(u/Pi(f)));return bo(f)?uc(wo(w),0,u).join(""):w.slice(0,u)}function fb(u){return function(f,g,w){return w&&"number"!=typeof w&&Xr(f,g,w)&&(g=w=U),f=$a(f),g===U?(g=f,f=0):g=$a(g),function fu(u,f,g,w){for(var S=-1,I=ki(Ig((f-u)/(g||1)),0),V=oe(I);I--;)V[w?I:++S]=u,u+=g;return V}(f,g,w=w===U?f<g?1:-1:$a(w),u)}}function Vf(u){return function(f,g){return"string"==typeof f&&"string"==typeof g||(f=io(f),g=io(g)),u(f,g)}}function zf(u,f,g,w,S,I,V,z,j,ye){var be=8&f;f|=be?32:64,4&(f&=~(be?64:32))||(f&=-4);var tn=[u,f,S,be?I:U,be?V:U,be?U:I,be?U:V,z,j,ye],_t=g.apply(U,tn);return vu(u)&&wb(_t,tn),_t.placeholder=w,Mb(_t,u,f)}function Io(u){var f=dr[u];return function(g,w){if(g=io(g),(w=null==w?0:Oi(en(w),292))&&fd(g)){var S=(Bn(g)+"e").split("e");return+((S=(Bn(f(S[0]+"e"+(+S[1]+w)))+"e").split("e"))[0]+"e"+(+S[1]-w))}return f(g)}}var pb=bt&&1/iu(new bt([,-0]))[1]==Cn?function(u){return new bt(u)}:j_;function xl(u){return function(f){var g=Cr(f);return g==Jo?xg(f):g==go?function cd(W){var he=-1,oe=Array(W.size);return W.forEach(function(Ke){oe[++he]=[Ke,Ke]}),oe}(f):function wi(W,he){return jn(he,function(oe){return[oe,W[oe]]})}(f,u(f))}}function za(u,f,g,w,S,I,V,z){var j=2&f;if(!j&&"function"!=typeof u)throw new So(Mn);var ye=w?w.length:0;if(ye||(f&=-97,w=S=U),V=V===U?V:ki(en(V),0),z=z===U?z:en(z),ye-=S?S.length:0,64&f){var be=w,Ce=S;w=S=U}var He=j?U:mb(u),Ye=[u,f,g,w,S,be,Ce,I,V,z];if(He&&function RE(u,f){var g=u[1],w=f[1],S=g|w;if(!(S<131||(128==w&&8==g||128==w&&256==g&&u[7].length<=f[8]||384==w&&f[7].length<=f[8]&&8==g)))return u;1&w&&(u[2]=f[2],S|=1&g?0:4);var z=f[3];if(z){var j=u[3];u[3]=j?cb(j,z,f[4]):z,u[4]=j?xo(u[3],di):f[4]}(z=f[5])&&(u[5]=(j=u[5])?ub(j,z,f[6]):z,u[6]=j?xo(u[5],di):f[6]),(z=f[7])&&(u[7]=z),128&w&&(u[8]=null==u[8]?f[8]:Oi(u[8],f[8])),null==u[9]&&(u[9]=f[9]),u[0]=f[0],u[1]=S}(Ye,He),u=Ye[0],f=Ye[1],g=Ye[2],w=Ye[3],S=Ye[4],!(z=Ye[9]=Ye[9]===U?j?0:u.length:ki(Ye[9]-ye,0))&&24&f&&(f&=-25),f&&1!=f)mt=8==f||16==f?function Ed(u,f,g){var w=gu(u);return function S(){for(var I=arguments.length,V=oe(I),z=I,j=yu(S);z--;)V[z]=arguments[z];var ye=I<3&&V[0]!==j&&V[I-1]!==j?[]:xo(V,j);return(I-=ye.length)<g?zf(u,f,X,S.placeholder,U,V,ye,U,U,g-I):Pr(this&&this!==lr&&this instanceof S?w:u,this,V)}}(u,f,z):32!=f&&33!=f||S.length?X.apply(U,Ye):function EE(u,f,g,w){var S=1&f,I=gu(u);return function V(){for(var z=-1,j=arguments.length,ye=-1,be=w.length,Ce=oe(be+j),He=this&&this!==lr&&this instanceof V?I:u;++ye<be;)Ce[ye]=w[ye];for(;j--;)Ce[ye++]=arguments[++z];return Pr(He,S?g:this,Ce)}}(u,f,g,w);else var mt=function SE(u,f,g){var w=1&f,S=gu(u);return function I(){return(this&&this!==lr&&this instanceof I?S:u).apply(w?g:this,arguments)}}(u,f,g);return Mb((He?bE:wb)(mt,Ye),u,f)}function e_(u,f,g,w){return u===U||Kr(u,ud[g])&&!Kn.call(w,g)?f:u}function _u(u,f,g,w,S,I){return Ci(u)&&Ci(f)&&(I.set(f,u),Mi(u,f,U,_u,I),I.delete(f)),u}function Hf(u){return Nd(u)?U:u}function t_(u,f,g,w,S,I){var V=1&g,z=u.length,j=f.length;if(z!=j&&!(V&&j>z))return!1;var ye=I.get(u),be=I.get(f);if(ye&&be)return ye==f&&be==u;var Ce=-1,He=!0,Ye=2&g?new pl:U;for(I.set(u,f),I.set(f,u);++Ce<z;){var mt=u[Ce],tn=f[Ce];if(w)var _t=V?w(tn,mt,Ce,f,u,I):w(mt,tn,Ce,u,f,I);if(_t!==U){if(_t)continue;He=!1;break}if(Ye){if(!bg(f,function(sn,gn){if(!hl(Ye,gn)&&(mt===sn||S(mt,sn,g,w,I)))return Ye.push(gn)})){He=!1;break}}else if(mt!==tn&&!S(mt,tn,g,w,I)){He=!1;break}}return I.delete(u),I.delete(f),He}function ds(u){return u_(xb(u,U,Yf),u+"")}function hc(u){return sc(u,Wi,$f)}function n_(u){return sc(u,pr,gb)}var mb=Cf?function(u){return Cf.get(u)}:j_;function Dd(u){for(var f=u.name+"",g=au[f],w=Kn.call(au,f)?g.length:0;w--;){var S=g[w],I=S.func;if(null==I||I==u)return S.name}return f}function yu(u){return(Kn.call(D,"placeholder")?D:u).placeholder}function xt(){var u=D.iteratee||fp;return u=u===fp?wd:u,arguments.length?u(arguments[0],arguments[1]):u}function Gf(u,f){var g=u.__data__;return function ok(u){var f=typeof u;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u}(f)?g["string"==typeof f?"string":"hash"]:g.map}function i_(u){for(var f=Wi(u),g=f.length;g--;){var w=f[g],S=u[w];f[g]=[w,S,l_(S)]}return f}function fc(u,f){var g=function vo(W,he){return null==W?U:W[he]}(u,f);return Gg(g)?g:U}var $f=Rg?function(u){return null==u?[]:(u=si(u),Js(Rg(u),function(f){return Dg.call(u,f)}))}:Vd,gb=Rg?function(u){for(var f=[];u;)La(f,$f(u)),u=bf(u);return f}:Vd,Cr=Mr;function TE(u,f,g){for(var w=-1,S=(f=vl(f,u)).length,I=!1;++w<S;){var V=la(f[w]);if(!(I=null!=u&&g(u,V)))break;u=u[V]}return I||++w!=S?I:!!(S=null==u?0:u.length)&&D_(S)&&hs(V,S)&&(zt(u)||yc(u))}function yb(u){return"function"!=typeof u.constructor||bu(u)?{}:nc(bf(u))}function s_(u){return zt(u)||yc(u)||!!(wf&&u&&u[wf])}function hs(u,f){var g=typeof u;return!!(f=f??ka)&&("number"==g||"symbol"!=g&&M0.test(u))&&u>-1&&u%1==0&&u<f}function Xr(u,f,g){if(!Ci(g))return!1;var w=typeof f;return!!("number"==w?Zr(g)&&hs(f,g.length):"string"==w&&f in g)&&Kr(g[f],u)}function o_(u,f){if(zt(u))return!1;var g=typeof u;return!("number"!=g&&"symbol"!=g&&"boolean"!=g&&null!=u&&!no(u))||kS.test(u)||!PS.test(u)||null!=f&&u in si(f)}function vu(u){var f=Dd(u),g=D[f];if("function"!=typeof g||!(f in un.prototype))return!1;if(u===g)return!0;var w=mb(g);return!!w&&u===w[0]}(ta&&Cr(new ta(new ArrayBuffer(1)))!=Jc||su&&Cr(new su)!=Jo||md&&Cr(md.resolve())!=lg||bt&&Cr(new bt)!=go||ou&&Cr(new ou)!=_o)&&(Cr=function(u){var f=Mr(u),g=f==dl?u.constructor:U,w=g?pc(g):"";if(w)switch(w){case sE:return Jc;case H0:return Jo;case oE:return lg;case aE:return go;case we:return _o}return f});var bb=Cg?Wa:Oo;function bu(u){var f=u&&u.constructor;return u===("function"==typeof f&&f.prototype||ud)}function l_(u){return u==u&&!Ci(u)}function wl(u,f){return function(g){return null!=g&&g[u]===f&&(f!==U||u in si(g))}}function xb(u,f,g){return f=ki(f===U?u.length-1:f,0),function(){for(var w=arguments,S=-1,I=ki(w.length-f,0),V=oe(I);++S<I;)V[S]=w[f+S];S=-1;for(var z=oe(f+1);++S<f;)z[S]=w[S];return z[f]=g(V),Pr(u,this,z)}}function fs(u,f){return f.length<2?u:rc(u,To(f,0,-1))}function aa(u,f){for(var g=u.length,w=Oi(f.length,g),S=us(u);w--;){var I=f[w];u[w]=hs(I,g)?S[I]:U}return u}function c_(u,f){if(("constructor"!==f||"function"!=typeof u[f])&&"__proto__"!=f)return u[f]}var wb=Cb(bE),Td=nE||function(u,f){return lr.setTimeout(u,f)},u_=Cb(tk);function Mb(u,f,g){var w=f+"";return u_(u,function jf(u,f){var g=f.length;if(!g)return u;var w=g-1;return f[w]=(g>1?"& ":"")+f[w],f=f.join(g>2?", ":" "),u.replace(FS,"{\n/* [wrapped with "+f+"] */\n")}(w,function OE(u,f){return as(s0,function(g){var w="_."+g[0];f&g[1]&&!df(u,w)&&u.push(w)}),u.sort()}(function _b(u){var f=u.match(Zi);return f?f[1].split(Qc):[]}(w),g)))}function Cb(u){var f=0,g=0;return function(){var w=Ps(),S=16-(w-g);if(g=w,S>0){if(++f>=800)return arguments[0]}else f=0;return u.apply(U,arguments)}}function Id(u,f){var g=-1,w=u.length,S=w-1;for(f=f===U?w:f;++g<f;){var I=Md(g,S),V=u[I];u[I]=u[g],u[g]=V}return u.length=f,u}var Sb=function IE(u){var f=sp(u,function(w){return 500===g.size&&g.clear(),w}),g=f.cache;return f}(function(u){var f=[];return 46===u.charCodeAt(0)&&f.push(""),u.replace(OS,function(g,w,S,I){f.push(S?I.replace(NS,"$1"):w||g)}),f});function la(u){if("string"==typeof u||no(u))return u;var f=u+"";return"0"==f&&1/u==-Cn?"-0":f}function pc(u){if(null!=u){try{return Sg.call(u)}catch{}try{return u+""}catch{}}return""}function LE(u){if(u instanceof un)return u.clone();var f=new Li(u.__wrapped__,u.__chain__);return f.__actions__=us(u.__actions__),f.__index__=u.__index__,f.__values__=u.__values__,f}var ca=rn(function(u,f){return Fi(u)?Ba(u,fr(f,1,Fi,!0)):[]}),Pd=rn(function(u,f){var g=ps(f);return Fi(g)&&(g=U),Fi(u)?Ba(u,fr(f,1,Fi,!0),xt(g,2)):[]}),Ab=rn(function(u,f){var g=ps(f);return Fi(g)&&(g=U),Fi(u)?Ba(u,fr(f,1,Fi,!0),U,g):[]});function qf(u,f,g){var w=null==u?0:u.length;if(!w)return-1;var S=null==g?0:en(g);return S<0&&(S=ki(w+S,0)),cr(u,xt(f,3),S)}function Xf(u,f,g){var w=null==u?0:u.length;if(!w)return-1;var S=w-1;return g!==U&&(S=en(g),S=g<0?ki(w+S,0):Oi(S,w-1)),cr(u,xt(f,3),S,!0)}function Yf(u){return null!=u&&u.length?fr(u,1):[]}function Rb(u){return u&&u.length?u[0]:U}var UE=rn(function(u){var f=jn(u,cc);return f.length&&f[0]===u[0]?Vg(f):[]}),Pb=rn(function(u){var f=ps(u),g=jn(u,cc);return f===ps(g)?f=U:g.pop(),g.length&&g[0]===u[0]?Vg(g,xt(f,2)):[]}),Kf=rn(function(u){var f=ps(u),g=jn(u,cc);return(f="function"==typeof f?f:U)&&g.pop(),g.length&&g[0]===u[0]?Vg(g,U,f):[]});function ps(u){var f=null==u?0:u.length;return f?u[f-1]:U}var zE=rn(Ob);function Ob(u,f){return u&&u.length&&f&&f.length?_l(u,f):u}var HE=ds(function(u,f){var g=null==u?0:u.length,w=Tf(u,f);return qg(u,jn(f,function(S){return hs(S,g)?+S:S}).sort(lb)),w});function d_(u){return null==u?u:rE.call(u)}var qE=rn(function(u){return to(fr(u,1,Fi,!0))}),p_=rn(function(u){var f=ps(u);return Fi(f)&&(f=U),to(fr(u,1,Fi,!0),xt(f,2))}),zb=rn(function(u){var f=ps(u);return f="function"==typeof f?f:U,to(fr(u,1,Fi,!0),U,f)});function Od(u){if(!u||!u.length)return[];var f=0;return u=Js(u,function(g){if(Fi(g))return f=ki(g.length,f),!0}),Fa(f,function(g){return jn(u,Vt(g))})}function Ld(u,f){if(!u||!u.length)return[];var g=Od(u);return null==f?g:jn(g,function(w){return Pr(f,U,w)})}var YE=rn(function(u,f){return Fi(u)?Ba(u,f):[]}),m_=rn(function(u){return Ff(Js(u,Fi))}),Jf=rn(function(u){var f=ps(u);return Fi(f)&&(f=U),Ff(Js(u,Fi),xt(f,2))}),Ml=rn(function(u){var f=ps(u);return f="function"==typeof f?f:U,Ff(Js(u,Fi),U,f)}),Gb=rn(Od),ZE=rn(function(u){var f=u.length,g=f>1?u[f-1]:U;return g="function"==typeof g?(u.pop(),g):U,Ld(u,g)});function __(u){var f=D(u);return f.__chain__=!0,f}function Qf(u,f){return f(u)}var JE=ds(function(u){var f=u.length,g=f?u[0]:0,w=this.__wrapped__,S=function(I){return Tf(I,u)};return!(f>1||this.__actions__.length)&&w instanceof un&&hs(g)?((w=w.slice(g,+g+(f?1:0))).__actions__.push({func:Qf,args:[S],thisArg:U}),new Li(w,this.__chain__).thru(function(I){return f&&!I.length&&I.push(U),I})):this.thru(S)}),mk=Jg(function(u,f,g){Kn.call(u,g)?++u[g]:Ao(u,g,1)}),rA=dc(qf),wu=dc(Xf);function Mu(u,f){return(zt(u)?as:na)(u,xt(f,3))}function ua(u,f){return(zt(u)?O0:Z0)(u,xt(f,3))}var oA=Jg(function(u,f,g){Kn.call(u,g)?u[g].push(f):Ao(u,g,[f])}),_c=rn(function(u,f,g){var w=-1,S="function"==typeof f,I=Zr(u)?oe(u.length):[];return na(u,function(V){I[++w]=S?Pr(f,V,g):xd(V,f,g)}),I}),lA=Jg(function(u,f,g){Ao(u,g,f)});function Cu(u,f){return(zt(u)?jn:Wg)(u,xt(f,3))}var uA=Jg(function(u,f,g){u[g?0:1].push(f)},function(){return[[],[]]}),Mk=rn(function(u,f){if(null==u)return[];var g=f.length;return g>1&&Xr(u,f[0],f[1])?f=[]:g>2&&Xr(f[0],f[1],f[2])&&(f=[f[0]]),jg(u,fr(f,1),[])}),ep=Tg||function(){return lr.Date.now()};function tp(u,f,g){return f=g?U:f,za(u,128,U,U,U,U,f=u&&null==f?u.length:f)}function x_(u,f){var g;if("function"!=typeof f)throw new So(Mn);return u=en(u),function(){return--u>0&&(g=f.apply(this,arguments)),u<=1&&(f=U),g}}var np=rn(function(u,f,g){var w=1;if(g.length){var S=xo(g,yu(np));w|=32}return za(u,w,f,g,S)}),w_=rn(function(u,f,g){var w=3;if(g.length){var S=xo(g,yu(w_));w|=32}return za(f,w,u,g,S)});function rp(u,f,g){var w,S,I,V,z,j,ye=0,be=!1,Ce=!1,He=!0;if("function"!=typeof u)throw new So(Mn);function Ye(Si){var Lo=w,Fo=S;return w=S=U,ye=Si,V=u.apply(Fo,Lo)}function mt(Si){return ye=Si,z=Td(sn,f),be?Ye(Si):V}function _t(Si){var Lo=Si-j;return j===U||Lo>=f||Lo<0||Ce&&Si-ye>=I}function sn(){var Si=ep();if(_t(Si))return gn(Si);z=Td(sn,function tn(Si){var Hx=f-(Si-j);return Ce?Oi(Hx,I-(Si-ye)):Hx}(Si))}function gn(Si){return z=U,He&&w?Ye(Si):(w=S=U,V)}function $i(){var Si=ep(),Lo=_t(Si);if(w=arguments,S=this,j=Si,Lo){if(z===U)return mt(j);if(Ce)return ME(z),z=Td(sn,f),Ye(j)}return z===U&&(z=Td(sn,f)),V}return f=io(f)||0,Ci(g)&&(be=!!g.leading,I=(Ce="maxWait"in g)?ki(io(g.maxWait)||0,f):I,He="trailing"in g?!!g.trailing:He),$i.cancel=function Jr(){z!==U&&ME(z),ye=0,w=j=S=z=U},$i.flush=function Qr(){return z===U?V:gn(ep())},$i}var Ha=rn(function(u,f){return K0(u,1,f)}),dA=rn(function(u,f,g){return K0(u,io(f)||0,g)});function sp(u,f){if("function"!=typeof u||null!=f&&"function"!=typeof f)throw new So(Mn);var g=function(){var w=arguments,S=f?f.apply(this,w):w[0],I=g.cache;if(I.has(S))return I.get(S);var V=u.apply(this,w);return g.cache=I.set(S,V)||I,V};return g.cache=new(sp.Cache||Eo),g}function Fd(u){if("function"!=typeof u)throw new So(Mn);return function(){var f=arguments;switch(f.length){case 0:return!u.call(this);case 1:return!u.call(this,f[0]);case 2:return!u.call(this,f[0],f[1]);case 3:return!u.call(this,f[0],f[1],f[2])}return!u.apply(this,f)}}sp.Cache=Eo;var pA=wE(function(u,f){var g=(f=1==f.length&&zt(f[0])?jn(f[0],ur(xt())):jn(fr(f,1),ur(xt()))).length;return rn(function(w){for(var S=-1,I=Oi(w.length,g);++S<I;)w[S]=f[S].call(this,w[S]);return Pr(u,this,w)})}),M_=rn(function(u,f){var g=xo(f,yu(M_));return za(u,32,U,f,g)}),Xb=rn(function(u,f){var g=xo(f,yu(Xb));return za(u,64,U,f,g)}),C_=ds(function(u,f){return za(u,256,U,U,U,f)});function Kr(u,f){return u===f||u!=u&&f!=f}var A_=Vf(uu),bA=Vf(function(u,f){return u>=f}),yc=du(function(){return arguments}())?du:function(u){return vi(u)&&Kn.call(u,"callee")&&!Dg.call(u,"callee")},zt=oe.isArray,xA=Zs?ur(Zs):function zg(u){return vi(u)&&Mr(u)==ef};function Zr(u){return null!=u&&D_(u.length)&&!Wa(u)}function Fi(u){return vi(u)&&Zr(u)}var Cl=KP||Oo,wA=$n?ur($n):function Hg(u){return vi(u)&&Mr(u)==Yl};function Sl(u){if(!vi(u))return!1;var f=Mr(u);return f==id||"[object DOMException]"==f||"string"==typeof u.message&&"string"==typeof u.name&&!Nd(u)}function Wa(u){if(!Ci(u))return!1;var f=Mr(u);return f==ag||f==TS||"[object AsyncFunction]"==f||"[object Proxy]"==f}function Jb(u){return"number"==typeof u&&u==en(u)}function D_(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=ka}function Ci(u){var f=typeof u;return null!=u&&("object"==f||"function"==f)}function vi(u){return null!=u&&"object"==typeof u}var AA=QS?ur(QS):function _E(u){return vi(u)&&Cr(u)==Jo};function Su(u){return"number"==typeof u||vi(u)&&Mr(u)==Jh}function Nd(u){if(!vi(u)||Mr(u)!=dl)return!1;var f=bf(u);if(null===f)return!0;var g=Kn.call(f,"constructor")&&f.constructor;return"function"==typeof g&&g instanceof g&&Sg.call(g)==XP}var op=eE?ur(eE):function eb(u){return vi(u)&&Mr(u)==Zc},ap=Kl?ur(Kl):function tb(u){return vi(u)&&Cr(u)==go};function Bd(u){return"string"==typeof u||!zt(u)&&vi(u)&&Mr(u)==Qh}function no(u){return"symbol"==typeof u||vi(u)&&Mr(u)==cg}var Ro=In?ur(In):function yE(u){return vi(u)&&D_(u.length)&&!!ci[Mr(u)]},k_=Vf(Of),RA=Vf(function(u,f){return u<=f});function tx(u){if(!u)return[];if(Zr(u))return Bd(u)?wo(u):us(u);if(hd&&u[hd])return function ri(W){for(var he,oe=[];!(he=W.next()).done;)oe.push(he.value);return oe}(u[hd]());var f=Cr(u);return(f==Jo?xg:f==go?iu:Au)(u)}function $a(u){return u?(u=io(u))===Cn||u===-Cn?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function en(u){var f=$a(u),g=f%1;return f==f?g?f-g:f:0}function nx(u){return u?ic(en(u),0,Zo):0}function io(u){if("number"==typeof u)return u;if(no(u))return NaN;if(Ci(u)){var f="function"==typeof u.valueOf?u.valueOf():u;u=Ci(f)?f+"":f}if("string"!=typeof u)return 0===u?u:+u;u=tu(u);var g=sd.test(u);return g||w0.test(u)?yg(u.slice(2),g?2:8):x0.test(u)?NaN:+u}function O_(u){return sa(u,pr(u))}function Bn(u){return null==u?"":jr(u)}var F_=oa(function(u,f){if(bu(f)||Zr(f))sa(f,Wi(f),u);else for(var g in f)Kn.call(f,g)&&gd(u,g,f[g])}),ix=oa(function(u,f){sa(f,pr(f),u)}),lp=oa(function(u,f,g,w){sa(f,pr(f),u,w)}),rx=oa(function(u,f,g,w){sa(f,Wi(f),u,w)}),sx=ds(Tf),ox=rn(function(u,f){u=si(u);var g=-1,w=f.length,S=w>2?f[2]:U;for(S&&Xr(f[0],f[1],S)&&(w=1);++g<w;)for(var I=f[g],V=pr(I),z=-1,j=V.length;++z<j;){var ye=V[z],be=u[ye];(be===U||Kr(be,ud[ye])&&!Kn.call(u,ye))&&(u[ye]=I[ye])}return u}),ax=rn(function(u){return u.push(U,_u),Pr(px,U,u)});function up(u,f,g){var w=null==u?U:rc(u,f);return w===U?g:w}function Eu(u,f){return null!=u&&TE(u,f,J0)}var dx=Qg(function(u,f,g){null!=f&&"function"!=typeof f.toString&&(f=Eg.call(f)),u[f]=g},G_(gs)),B_=Qg(function(u,f,g){null!=f&&"function"!=typeof f.toString&&(f=Eg.call(f)),Kn.call(u,f)?u[f].push(g):u[f]=[g]},xt),hx=rn(xd);function Wi(u){return Zr(u)?yi(u):oc(u)}function pr(u){return Zr(u)?yi(u,!0):function vE(u){if(!Ci(u))return function PE(u){var f=[];if(null!=u)for(var g in si(u))f.push(g);return f}(u);var f=bu(u),g=[];for(var w in u)"constructor"==w&&(f||!Kn.call(u,w))||g.push(w);return g}(u)}var LA=oa(function(u,f,g){Mi(u,f,g)}),px=oa(function(u,f,g,w){Mi(u,f,g,w)}),mx=ds(function(u,f){var g={};if(null==u)return g;var w=!1;f=jn(f,function(I){return I=vl(I,u),w||(w=I.length>1),I}),sa(u,n_(u),g),w&&(g=Ji(g,7,Hf));for(var S=f.length;S--;)ob(g,f[S]);return g}),gx=ds(function(u,f){return null==u?{}:function Va(u,f){return lc(u,f,function(g,w){return Eu(u,w)})}(u,f)});function FA(u,f){if(null==u)return{};var g=jn(n_(u),function(w){return[w]});return f=xt(f),lc(u,g,function(w,S){return f(w,S[0])})}var vx=xl(Wi),bx=xl(pr);function Au(u){return null==u?[]:Xt(u,Wi(u))}var GA=mu(function(u,f,g){return f=f.toLowerCase(),u+(g?Mx(f):f)});function Mx(u){return El(Bn(u).toLowerCase())}function Lt(u){return(u=Bn(u))&&u.replace(US,kr).replace(WP,"")}var WA=mu(function(u,f,g){return u+(g?"-":"")+f.toLowerCase()}),$A=mu(function(u,f,g){return u+(g?" ":"")+f.toLowerCase()}),Ex=db("toLowerCase"),Tx=mu(function(u,f,g){return u+(g?"_":"")+f.toLowerCase()}),YA=mu(function(u,f,g){return u+(g?" ":"")+El(f)}),JA=mu(function(u,f,g){return u+(g?" ":"")+f.toUpperCase()}),El=db("toUpperCase");function Rx(u,f,g){return u=Bn(u),(f=g?U:f)===U?function F0(W){return gg.test(W)}(u)?function gf(W){return W.match($P)||[]}(u):function ls(W){return W.match(qs)||[]}(u):u.match(f)||[]}var H_=rn(function(u,f){try{return Pr(u,U,f)}catch(g){return Sl(g)?g:new Wt(g)}}),hp=ds(function(u,f){return as(f,function(g){g=la(g),Ao(u,g,np(u[g],u))}),u});function G_(u){return function(){return u}}var tD=hb(),nD=hb(!0);function gs(u){return u}function fp(u){return wd("function"==typeof u?u:Ji(u,1))}var Ox=rn(function(u,f){return function(g){return xd(g,u,f)}}),W_=rn(function(u,f){return function(g){return xd(u,g,f)}});function Lx(u,f,g){var w=Wi(f),S=Ua(f,w);null==g&&(!Ci(f)||!S.length&&w.length)&&(g=f,f=u,u=this,S=Ua(f,Wi(f)));var I=!(Ci(g)&&"chain"in g&&!g.chain),V=Wa(u);return as(S,function(z){var j=f[z];u[z]=j,V&&(u.prototype[z]=function(){var ye=this.__chain__;if(I||ye){var be=u(this.__wrapped__),Ce=be.__actions__=us(this.__actions__);return Ce.push({func:j,args:arguments,thisArg:u}),be.__chain__=ye,be}return j.apply(u,La([this.value()],arguments))})}),u}function j_(){}var R=Ad(jn),bc=Ad(ea),Fx=Ad(bg);function Ud(u){return o_(u)?Vt(la(u)):function hu(u){return function(f){return rc(f,u)}}(u)}var Nx=fb(),rD=fb(!0);function Vd(){return[]}function Oo(){return!1}var pp=qn(function(u,f){return u+f},0),mp=Io("ceil"),Y_=qn(function(u,f){return u/f},1),K_=Io("floor"),Vx=qn(function(u,f){return u*f},1),Ok=Io("round"),cD=qn(function(u,f){return u-f},0);return D.after=function jb(u,f){if("function"!=typeof f)throw new So(Mn);return u=en(u),function(){if(--u<1)return f.apply(this,arguments)}},D.ary=tp,D.assign=F_,D.assignIn=ix,D.assignInWith=lp,D.assignWith=rx,D.at=sx,D.before=x_,D.bind=np,D.bindAll=hp,D.bindKey=w_,D.castArray=function vA(){if(!arguments.length)return[];var u=arguments[0];return zt(u)?u:[u]},D.chain=__,D.chunk=function FE(u,f,g){f=(g?Xr(u,f,g):f===U)?1:ki(en(f),0);var w=null==u?0:u.length;if(!w||f<1)return[];for(var S=0,I=0,V=oe(Ig(w/f));S<w;)V[I++]=To(u,S,S+=f);return V},D.compact=function Rd(u){for(var f=-1,g=null==u?0:u.length,w=0,S=[];++f<g;){var I=u[f];I&&(S[w++]=I)}return S},D.concat=function Eb(){var u=arguments.length;if(!u)return[];for(var f=oe(u-1),g=arguments[0],w=u;w--;)f[w-1]=arguments[w];return La(zt(g)?us(g):[g],fr(f,1))},D.cond=function QA(u){var f=null==u?0:u.length,g=xt();return u=f?jn(u,function(w){if("function"!=typeof w[1])throw new So(Mn);return[g(w[0]),w[1]]}):[],rn(function(w){for(var S=-1;++S<f;){var I=u[S];if(Pr(I[0],this,w))return Pr(I[1],this,w)}})},D.conforms=function Px(u){return function yd(u){var f=Wi(u);return function(g){return Y0(g,u,f)}}(Ji(u,1))},D.constant=G_,D.countBy=mk,D.create=function vc(u,f){var g=nc(u);return null==f?g:_d(g,f)},D.curry=function ip(u,f,g){var w=za(u,8,U,U,U,U,U,f=g?U:f);return w.placeholder=ip.placeholder,w},D.curryRight=function qb(u,f,g){var w=za(u,16,U,U,U,U,U,f=g?U:f);return w.placeholder=qb.placeholder,w},D.debounce=rp,D.defaults=ox,D.defaultsDeep=ax,D.defer=Ha,D.delay=dA,D.difference=ca,D.differenceBy=Pd,D.differenceWith=Ab,D.drop=function Db(u,f,g){var w=null==u?0:u.length;return w?To(u,(f=g||f===U?1:en(f))<0?0:f,w):[]},D.dropRight=function Tb(u,f,g){var w=null==u?0:u.length;return w?To(u,0,(f=w-(f=g||f===U?1:en(f)))<0?0:f):[]},D.dropRightWhile=function ak(u,f){return u&&u.length?Or(u,xt(f,3),!0,!0):[]},D.dropWhile=function lk(u,f){return u&&u.length?Or(u,xt(f,3),!0):[]},D.fill=function ck(u,f,g,w){var S=null==u?0:u.length;return S?(g&&"number"!=typeof g&&Xr(u,f,g)&&(g=0,w=S),function JP(u,f,g,w){var S=u.length;for((g=en(g))<0&&(g=-g>S?0:S+g),(w=w===U||w>S?S:en(w))<0&&(w+=S),w=g>w?0:nx(w);g<w;)u[g++]=f;return u}(u,f,g,w)):[]},D.filter=function gc(u,f){return(zt(u)?Js:vd)(u,xt(f,3))},D.flatMap=function $t(u,f){return fr(Cu(u,f),1)},D.flatMapDeep=function sA(u,f){return fr(Cu(u,f),Cn)},D.flatMapDepth=function gk(u,f,g){return g=g===U?1:en(g),fr(Cu(u,f),g)},D.flatten=Yf,D.flattenDeep=function uk(u){return null!=u&&u.length?fr(u,Cn):[]},D.flattenDepth=function dk(u,f){return null!=u&&u.length?fr(u,f=f===U?1:en(f)):[]},D.flip=function hA(u){return za(u,512)},D.flow=tD,D.flowRight=nD,D.fromPairs=function Ib(u){for(var f=-1,g=null==u?0:u.length,w={};++f<g;){var S=u[f];w[S[0]]=S[1]}return w},D.functions=function ux(u){return null==u?[]:Ua(u,Wi(u))},D.functionsIn=function N_(u){return null==u?[]:Ua(u,pr(u))},D.groupBy=oA,D.initial=function BE(u){return null!=u&&u.length?To(u,0,-1):[]},D.intersection=UE,D.intersectionBy=Pb,D.intersectionWith=Kf,D.invert=dx,D.invertBy=B_,D.invokeMap=_c,D.iteratee=fp,D.keyBy=lA,D.keys=Wi,D.keysIn=pr,D.map=Cu,D.mapKeys=function OA(u,f){var g={};return f=xt(f,3),Do(u,function(w,S,I){Ao(g,f(w,S,I),w)}),g},D.mapValues=function fx(u,f){var g={};return f=xt(f,3),Do(u,function(w,S,I){Ao(g,S,f(w,S,I))}),g},D.matches=function iD(u){return ac(Ji(u,1))},D.matchesProperty=function kx(u,f){return nb(u,Ji(f,1))},D.memoize=sp,D.merge=LA,D.mergeWith=px,D.method=Ox,D.methodOf=W_,D.mixin=Lx,D.negate=Fd,D.nthArg=function Ik(u){return u=en(u),rn(function(f){return ib(f,u)})},D.omit=mx,D.omitBy=function U_(u,f){return FA(u,Fd(xt(f)))},D.once=function fA(u){return x_(2,u)},D.orderBy=function cA(u,f,g,w){return null==u?[]:(zt(f)||(f=null==f?[]:[f]),zt(g=w?U:g)||(g=null==g?[]:[g]),jg(u,f,g))},D.over=R,D.overArgs=pA,D.overEvery=bc,D.overSome=Fx,D.partial=M_,D.partialRight=Xb,D.partition=uA,D.pick=gx,D.pickBy=FA,D.property=Ud,D.propertyOf=function ko(u){return function(f){return null==u?U:rc(u,f)}},D.pull=zE,D.pullAll=Ob,D.pullAllBy=function Zf(u,f,g){return u&&u.length&&f&&f.length?_l(u,f,xt(g,2)):u},D.pullAllWith=function Lb(u,f,g){return u&&u.length&&f&&f.length?_l(u,f,U,g):u},D.pullAt=HE,D.range=Nx,D.rangeRight=rD,D.rearg=C_,D.reject=function yk(u,f){return(zt(u)?Js:vd)(u,Fd(xt(f,3)))},D.remove=function GE(u,f){var g=[];if(!u||!u.length)return g;var w=-1,S=[],I=u.length;for(f=xt(f,3);++w<I;){var V=u[w];f(V,w,u)&&(g.push(V),S.push(w))}return qg(u,S),g},D.rest=function mA(u,f){if("function"!=typeof u)throw new So(Mn);return rn(u,f=f===U?f:en(f))},D.reverse=d_,D.sampleSize=function vk(u,f,g){return f=(g?Xr(u,f,g):f===U)?1:en(f),(zt(u)?mE:ek)(u,f)},D.set=function NA(u,f,g){return null==u?u:Lf(u,f,g)},D.setWith=function yx(u,f,g,w){return w="function"==typeof w?w:U,null==u?u:Lf(u,f,g,w)},D.shuffle=function bk(u){return(zt(u)?Ng:nk)(u)},D.slice=function WE(u,f,g){var w=null==u?0:u.length;return w?(g&&"number"!=typeof g&&Xr(u,f,g)?(f=0,g=w):(f=null==f?0:en(f),g=g===U?w:en(g)),To(u,f,g)):[]},D.sortBy=Mk,D.sortedUniq=function Nb(u){return u&&u.length?xE(u):[]},D.sortedUniqBy=function Bb(u,f){return u&&u.length?xE(u,xt(f,2)):[]},D.split=function bi(u,f,g){return g&&"number"!=typeof g&&Xr(u,f,g)&&(f=g=U),(g=g===U?Zo:g>>>0)?(u=Bn(u))&&("string"==typeof f||null!=f&&!op(f))&&!(f=jr(f))&&bo(u)?uc(wo(u),0,g):u.split(f,g):[]},D.spread=function gA(u,f){if("function"!=typeof u)throw new So(Mn);return f=null==f?0:ki(en(f),0),rn(function(g){var w=g[f],S=uc(g,0,f);return w&&La(S,w),Pr(u,this,S)})},D.tail=function jE(u){var f=null==u?0:u.length;return f?To(u,1,f):[]},D.take=function Ub(u,f,g){return u&&u.length?To(u,0,(f=g||f===U?1:en(f))<0?0:f):[]},D.takeRight=function Vb(u,f,g){var w=null==u?0:u.length;return w?To(u,(f=w-(f=g||f===U?1:en(f)))<0?0:f,w):[]},D.takeRightWhile=function f_(u,f){return u&&u.length?Or(u,xt(f,3),!1,!0):[]},D.takeWhile=function pk(u,f){return u&&u.length?Or(u,xt(f,3)):[]},D.tap=function xu(u,f){return f(u),u},D.throttle=function _A(u,f,g){var w=!0,S=!0;if("function"!=typeof u)throw new So(Mn);return Ci(g)&&(w="leading"in g?!!g.leading:w,S="trailing"in g?!!g.trailing:S),rp(u,f,{leading:w,maxWait:f,trailing:S})},D.thru=Qf,D.toArray=tx,D.toPairs=vx,D.toPairsIn=bx,D.toPath=function Ux(u){return zt(u)?jn(u,la):no(u)?[u]:us(Sb(Bn(u)))},D.toPlainObject=O_,D.transform=function Po(u,f,g){var w=zt(u),S=w||Cl(u)||Ro(u);if(f=xt(f,4),null==g){var I=u&&u.constructor;g=S?w?new I:[]:Ci(u)&&Wa(I)?nc(bf(u)):{}}return(S?as:Do)(u,function(V,z,j){return f(g,V,z,j)}),g},D.unary=function Yb(u){return tp(u,1)},D.union=qE,D.unionBy=p_,D.unionWith=zb,D.uniq=function Hb(u){return u&&u.length?to(u):[]},D.uniqBy=function mc(u,f){return u&&u.length?to(u,xt(f,2)):[]},D.uniqWith=function XE(u,f){return f="function"==typeof f?f:U,u&&u.length?to(u,U,f):[]},D.unset=function BA(u,f){return null==u||ob(u,f)},D.unzip=Od,D.unzipWith=Ld,D.update=function xx(u,f,g){return null==u?u:ab(u,f,Nf(g))},D.updateWith=function UA(u,f,g,w){return w="function"==typeof w?w:U,null==u?u:ab(u,f,Nf(g),w)},D.values=Au,D.valuesIn=function VA(u){return null==u?[]:Xt(u,pr(u))},D.without=YE,D.words=Rx,D.wrap=function yA(u,f){return M_(Nf(f),u)},D.xor=m_,D.xorBy=Jf,D.xorWith=Ml,D.zip=Gb,D.zipObject=function g_(u,f){return Cd(u||[],f||[],gd)},D.zipObjectDeep=function KE(u,f){return Cd(u||[],f||[],Lf)},D.zipWith=ZE,D.entries=vx,D.entriesIn=bx,D.extend=ix,D.extendWith=lp,Lx(D,D),D.add=pp,D.attempt=H_,D.camelCase=GA,D.capitalize=Mx,D.ceil=mp,D.clamp=function zA(u,f,g){return g===U&&(g=f,f=U),g!==U&&(g=(g=io(g))==g?g:0),f!==U&&(f=(f=io(f))==f?f:0),ic(io(u),f,g)},D.clone=function Yr(u){return Ji(u,4)},D.cloneDeep=function Kb(u){return Ji(u,5)},D.cloneDeepWith=function E_(u,f){return Ji(u,5,f="function"==typeof f?f:U)},D.cloneWith=function S_(u,f){return Ji(u,4,f="function"==typeof f?f:U)},D.conformsTo=function Lr(u,f){return null==f||Y0(u,f,Wi(f))},D.deburr=Lt,D.defaultTo=function eD(u,f){return null==u||u!=u?f:u},D.divide=Y_,D.endsWith=function J(u,f,g){u=Bn(u),f=jr(f);var w=u.length,S=g=g===U?w:ic(en(g),0,w);return(g-=f.length)>=0&&u.slice(g,S)==f},D.eq=Kr,D.escape=function Cx(u){return(u=Bn(u))&&_0.test(u)?u.replace(dg,ld):u},D.escapeRegExp=function Sx(u){return(u=Bn(u))&&LS.test(u)?u.replace(nf,"\\$&"):u},D.every=function iA(u,f,g){var w=zt(u)?ea:gE;return g&&Xr(u,f,g)&&(f=U),w(u,xt(f,3))},D.find=rA,D.findIndex=qf,D.findKey=function PA(u,f){return Vn(u,xt(f,3),Do)},D.findLast=wu,D.findLastIndex=Xf,D.findLastKey=function Ck(u,f){return Vn(u,xt(f,3),Rf)},D.floor=K_,D.forEach=Mu,D.forEachRight=ua,D.forIn=function cp(u,f){return null==u?u:If(u,xt(f,3),pr)},D.forInRight=function kA(u,f){return null==u?u:bd(u,xt(f,3),pr)},D.forOwn=function lx(u,f){return u&&Do(u,xt(f,3))},D.forOwnRight=function cx(u,f){return u&&Rf(u,xt(f,3))},D.get=up,D.gt=A_,D.gte=bA,D.has=function dp(u,f){return null!=u&&TE(u,f,QP)},D.hasIn=Eu,D.head=Rb,D.identity=gs,D.includes=function aA(u,f,g,w){u=Zr(u)?u:Au(u),g=g&&!w?en(g):0;var S=u.length;return g<0&&(g=ki(S+g,0)),Bd(u)?g<=S&&u.indexOf(f,g)>-1:!!S&&zi(u,f,g)>-1},D.indexOf=function NE(u,f,g){var w=null==u?0:u.length;if(!w)return-1;var S=null==g?0:en(g);return S<0&&(S=ki(w+S,0)),zi(u,f,S)},D.inRange=function wx(u,f,g){return f=$a(f),g===U?(g=f,f=0):g=$a(g),function Q0(u,f,g){return u>=Oi(f,g)&&u<ki(f,g)}(u=io(u),f,g)},D.invoke=hx,D.isArguments=yc,D.isArray=zt,D.isArrayBuffer=xA,D.isArrayLike=Zr,D.isArrayLikeObject=Fi,D.isBoolean=function Zb(u){return!0===u||!1===u||vi(u)&&Mr(u)==Xe},D.isBuffer=Cl,D.isDate=wA,D.isElement=function MA(u){return vi(u)&&1===u.nodeType&&!Nd(u)},D.isEmpty=function CA(u){if(null==u)return!0;if(Zr(u)&&(zt(u)||"string"==typeof u||"function"==typeof u.splice||Cl(u)||Ro(u)||yc(u)))return!u.length;var f=Cr(u);if(f==Jo||f==go)return!u.size;if(bu(u))return!oc(u).length;for(var g in u)if(Kn.call(u,g))return!1;return!0},D.isEqual=function SA(u,f){return gl(u,f)},D.isEqualWith=function EA(u,f,g){var w=(g="function"==typeof g?g:U)?g(u,f):U;return w===U?gl(u,f,U,g):!!w},D.isError=Sl,D.isFinite=function Ga(u){return"number"==typeof u&&fd(u)},D.isFunction=Wa,D.isInteger=Jb,D.isLength=D_,D.isMap=AA,D.isMatch=function ms(u,f){return u===f||kf(u,f,i_(f))},D.isMatchWith=function T_(u,f,g){return g="function"==typeof g?g:U,kf(u,f,i_(f),g)},D.isNaN=function I_(u){return Su(u)&&u!=+u},D.isNative=function DA(u){if(bb(u))throw new Wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Gg(u)},D.isNil=function TA(u){return null==u},D.isNull=function Qb(u){return null===u},D.isNumber=Su,D.isObject=Ci,D.isObjectLike=vi,D.isPlainObject=Nd,D.isRegExp=op,D.isSafeInteger=function R_(u){return Jb(u)&&u>=-ka&&u<=ka},D.isSet=ap,D.isString=Bd,D.isSymbol=no,D.isTypedArray=Ro,D.isUndefined=function P_(u){return u===U},D.isWeakMap=function ex(u){return vi(u)&&Cr(u)==_o},D.isWeakSet=function IA(u){return vi(u)&&"[object WeakSet]"==Mr(u)},D.join=function kb(u,f){return null==u?"":Qs.call(u,f)},D.kebabCase=WA,D.last=ps,D.lastIndexOf=function VE(u,f,g){var w=null==u?0:u.length;if(!w)return-1;var S=w;return g!==U&&(S=(S=en(g))<0?ki(w+S,0):Oi(S,w-1)),f==f?function ec(W,he,oe){for(var Ke=oe+1;Ke--;)if(W[Ke]===he)return Ke;return Ke}(u,f,S):cr(u,Rs,S,!0)},D.lowerCase=$A,D.lowerFirst=Ex,D.lt=k_,D.lte=RA,D.max=function Z_(u){return u&&u.length?Ug(u,gs,uu):U},D.maxBy=function kk(u,f){return u&&u.length?Ug(u,xt(f,2),uu):U},D.mean=function sD(u){return ze(u,gs)},D.meanBy=function oD(u,f){return ze(u,xt(f,2))},D.min=function aD(u){return u&&u.length?Ug(u,gs,Of):U},D.minBy=function lD(u,f){return u&&u.length?Ug(u,xt(f,2),Of):U},D.stubArray=Vd,D.stubFalse=Oo,D.stubObject=function q_(){return{}},D.stubString=function Bx(){return""},D.stubTrue=function X_(){return!0},D.multiply=Vx,D.nth=function Nn(u,f){return u&&u.length?ib(u,en(f)):U},D.noConflict=function $_(){return lr._===this&&(lr._=YP),this},D.noop=j_,D.now=ep,D.pad=function jA(u,f,g){u=Bn(u);var w=(f=en(f))?Pi(u):0;if(!f||w>=f)return u;var S=(f-w)/2;return bl(_i(S),g)+u+bl(Ig(S),g)},D.padEnd=function Ax(u,f,g){u=Bn(u);var w=(f=en(f))?Pi(u):0;return f&&w<f?u+bl(f-w,g):u},D.padStart=function qA(u,f,g){u=Bn(u);var w=(f=en(f))?Pi(u):0;return f&&w<f?bl(f-w,g)+u:u},D.parseInt=function XA(u,f,g){return g||null==f?f=0:f&&(f=+f),z0(Bn(u).replace(hg,""),f||0)},D.random=function HA(u,f,g){if(g&&"boolean"!=typeof g&&Xr(u,f,g)&&(f=g=U),g===U&&("boolean"==typeof f?(g=f,f=U):"boolean"==typeof u&&(g=u,u=U)),u===U&&f===U?(u=0,f=1):(u=$a(u),f===U?(f=u,u=0):f=$a(f)),u>f){var w=u;u=f,f=w}if(g||u%1||f%1){var S=pd();return Oi(u+S*(f-u+gt("1e-"+((S+"").length-1))),f)}return Md(u,f)},D.reduce=function v_(u,f,g){var w=zt(u)?hf:cs,S=arguments.length<3;return w(u,xt(f,4),g,S,na)},D.reduceRight=function _k(u,f,g){var w=zt(u)?Gt:cs,S=arguments.length<3;return w(u,xt(f,4),g,S,Z0)},D.repeat=function Sk(u,f,g){return f=(g?Xr(u,f,g):f===U)?1:en(f),rb(Bn(u),f)},D.replace=function Dx(){var u=arguments,f=Bn(u[0]);return u.length<3?f:f.replace(u[1],u[2])},D.result=function _x(u,f,g){var w=-1,S=(f=vl(f,u)).length;for(S||(S=1,u=U);++w<S;){var I=null==u?U:u[la(f[w])];I===U&&(w=S,I=g),u=Wa(I)?I.call(u):I}return u},D.round=Ok,D.runInContext=W,D.sample=function b_(u){return(zt(u)?ks:Se)(u)},D.size=function xk(u){if(null==u)return 0;if(Zr(u))return Bd(u)?Pi(u):u.length;var f=Cr(u);return f==Jo||f==go?u.size:oc(u).length},D.snakeCase=Tx,D.some=function wk(u,f,g){var w=zt(u)?bg:ik;return g&&Xr(u,f,g)&&(f=U),w(u,xt(f,3))},D.sortedIndex=function $E(u,f){return yl(u,f)},D.sortedIndexBy=function hk(u,f,g){return sb(u,f,xt(g,2))},D.sortedIndexOf=function fk(u,f){var g=null==u?0:u.length;if(g){var w=yl(u,f);if(w<g&&Kr(u[w],f))return w}return-1},D.sortedLastIndex=function kd(u,f){return yl(u,f,!0)},D.sortedLastIndexBy=function h_(u,f,g){return sb(u,f,xt(g,2),!0)},D.sortedLastIndexOf=function Fb(u,f){if(null!=u&&u.length){var w=yl(u,f,!0)-1;if(Kr(u[w],f))return w}return-1},D.startCase=YA,D.startsWith=function V_(u,f,g){return u=Bn(u),g=null==g?0:ic(en(g),0,u.length),f=jr(f),u.slice(g,g+f.length)==f},D.subtract=cD,D.sum=function Lk(u){return u&&u.length?Hi(u,gs):0},D.sumBy=function zx(u,f){return u&&u.length?Hi(u,xt(f,2)):0},D.template=function z_(u,f,g){var w=D.templateSettings;g&&Xr(u,f,g)&&(f=U),u=Bn(u),f=lp({},f,w,e_);var z,j,S=lp({},f.imports,w.imports,e_),I=Wi(S),V=Xt(S,I),ye=0,be=f.interpolate||sf,Ce="__p += '",He=B0((f.escape||sf).source+"|"+be.source+"|"+(be===v0?b0:sf).source+"|"+(f.evaluate||sf).source+"|$","g"),Ye="//# sourceURL="+(Kn.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++KS+"]")+"\n";u.replace(He,function(_t,sn,gn,Jr,Qr,$i){return gn||(gn=Jr),Ce+=u.slice(ye,$i).replace(VS,nu),sn&&(z=!0,Ce+="' +\n__e("+sn+") +\n'"),Qr&&(j=!0,Ce+="';\n"+Qr+";\n__p += '"),gn&&(Ce+="' +\n((__t = ("+gn+")) == null ? '' : __t) +\n'"),ye=$i+_t.length,_t}),Ce+="';\n";var mt=Kn.call(f,"variable")&&f.variable;if(mt){if(BP.test(mt))throw new Wt("Invalid `variable` option passed into `_.template`")}else Ce="with (obj) {\n"+Ce+"\n}\n";Ce=(j?Ce.replace(h0,""):Ce).replace(f0,"$1").replace(p0,"$1;"),Ce="function("+(mt||"obj")+") {\n"+(mt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(z?", __e = _.escape":"")+(j?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ce+"return __p\n}";var tn=H_(function(){return zn(I,Ye+"return "+Ce).apply(U,V)});if(tn.source=Ce,Sl(tn))throw tn;return tn},D.times=function Rk(u,f){if((u=en(u))<1||u>ka)return[];var g=Zo,w=Oi(u,Zo);f=xt(f),u-=Zo;for(var S=Fa(w,f);++g<u;)f(g);return S},D.toFinite=$a,D.toInteger=en,D.toLength=nx,D.toLower=function KA(u){return Bn(u).toLowerCase()},D.toNumber=io,D.toSafeInteger=function L_(u){return u?ic(en(u),-ka,ka):0===u?u:0},D.toString=Bn,D.toUpper=function Ek(u){return Bn(u).toUpperCase()},D.trim=function Ak(u,f,g){if((u=Bn(u))&&(g||f===U))return tu(u);if(!u||!(f=jr(f)))return u;var w=wo(u),S=wo(f);return uc(w,Jl(w,S),ff(w,S)+1).join("")},D.trimEnd=function Dk(u,f,g){if((u=Bn(u))&&(g||f===U))return u.slice(0,Gr(u)+1);if(!u||!(f=jr(f)))return u;var w=wo(u);return uc(w,0,ff(w,wo(f))+1).join("")},D.trimStart=function ZA(u,f,g){if((u=Bn(u))&&(g||f===U))return u.replace(hg,"");if(!u||!(f=jr(f)))return u;var w=wo(u);return uc(w,Jl(w,wo(f))).join("")},D.truncate=function Ix(u,f){var g=30,w="...";if(Ci(f)){var S="separator"in f?f.separator:S;g="length"in f?en(f.length):g,w="omission"in f?jr(f.omission):w}var I=(u=Bn(u)).length;if(bo(u)){var V=wo(u);I=V.length}if(g>=I)return u;var z=g-Pi(w);if(z<1)return w;var j=V?uc(V,0,z).join(""):u.slice(0,z);if(S===U)return j+w;if(V&&(z+=j.length-z),op(S)){if(u.slice(z).search(S)){var ye,be=j;for(S.global||(S=B0(S.source,Bn(rf.exec(S))+"g")),S.lastIndex=0;ye=S.exec(be);)var Ce=ye.index;j=j.slice(0,Ce===U?z:Ce)}}else if(u.indexOf(jr(S),z)!=z){var He=j.lastIndexOf(S);He>-1&&(j=j.slice(0,He))}return j+w},D.unescape=function Tk(u){return(u=Bn(u))&&g0.test(u)?u.replace(m0,Mo):u},D.uniqueId=function Pk(u){var f=++U0;return Bn(u)+f},D.upperCase=JA,D.upperFirst=El,D.each=Mu,D.eachRight=ua,D.first=Rb,Lx(D,function(){var u={};return Do(D,function(f,g){Kn.call(D.prototype,g)||(u[g]=f)}),u}(),{chain:!1}),D.VERSION="4.17.21",as(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){D[u].placeholder=D}),as(["drop","take"],function(u,f){un.prototype[u]=function(g){g=g===U?1:ki(en(g),0);var w=this.__filtered__&&!f?new un(this):this.clone();return w.__filtered__?w.__takeCount__=Oi(g,w.__takeCount__):w.__views__.push({size:Oi(g,Zo),type:u+(w.__dir__<0?"Right":"")}),w},un.prototype[u+"Right"]=function(g){return this.reverse()[u](g).reverse()}}),as(["filter","map","takeWhile"],function(u,f){var g=f+1,w=1==g||3==g;un.prototype[u]=function(S){var I=this.clone();return I.__iteratees__.push({iteratee:xt(S,3),type:g}),I.__filtered__=I.__filtered__||w,I}}),as(["head","last"],function(u,f){var g="take"+(f?"Right":"");un.prototype[u]=function(){return this[g](1).value()[0]}}),as(["initial","tail"],function(u,f){var g="drop"+(f?"":"Right");un.prototype[u]=function(){return this.__filtered__?new un(this):this[g](1)}}),un.prototype.compact=function(){return this.filter(gs)},un.prototype.find=function(u){return this.filter(u).head()},un.prototype.findLast=function(u){return this.reverse().find(u)},un.prototype.invokeMap=rn(function(u,f){return"function"==typeof u?new un(this):this.map(function(g){return xd(g,u,f)})}),un.prototype.reject=function(u){return this.filter(Fd(xt(u)))},un.prototype.slice=function(u,f){u=en(u);var g=this;return g.__filtered__&&(u>0||f<0)?new un(g):(u<0?g=g.takeRight(-u):u&&(g=g.drop(u)),f!==U&&(g=(f=en(f))<0?g.dropRight(-f):g.take(f-u)),g)},un.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},un.prototype.toArray=function(){return this.take(Zo)},Do(un.prototype,function(u,f){var g=/^(?:filter|find|map|reject)|While$/.test(f),w=/^(?:head|last)$/.test(f),S=D[w?"take"+("last"==f?"Right":""):f],I=w||/^find/.test(f);!S||(D.prototype[f]=function(){var V=this.__wrapped__,z=w?[1]:arguments,j=V instanceof un,ye=z[0],be=j||zt(V),Ce=function(sn){var gn=S.apply(D,La([sn],z));return w&&He?gn[0]:gn};be&&g&&"function"==typeof ye&&1!=ye.length&&(j=be=!1);var He=this.__chain__,Ye=!!this.__actions__.length,mt=I&&!He,tn=j&&!Ye;if(!I&&be){V=tn?V:new un(this);var _t=u.apply(V,z);return _t.__actions__.push({func:Qf,args:[Ce],thisArg:U}),new Li(_t,He)}return mt&&tn?u.apply(this,z):(_t=this.thru(Ce),mt?w?_t.value()[0]:_t.value():_t)})}),as(["pop","push","shift","sort","splice","unshift"],function(u){var f=Mg[u],g=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",w=/^(?:pop|shift)$/.test(u);D.prototype[u]=function(){var S=arguments;if(w&&!this.__chain__){var I=this.value();return f.apply(zt(I)?I:[],S)}return this[g](function(V){return f.apply(zt(V)?V:[],S)})}}),Do(un.prototype,function(u,f){var g=D[f];if(g){var w=g.name+"";Kn.call(au,w)||(au[w]=[]),au[w].push({name:f,func:g})}}),au[X(U,2).name]=[{name:"wrapper",func:U}],un.prototype.clone=function Pg(){var u=new un(this.__wrapped__);return u.__actions__=us(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=us(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=us(this.__views__),u},un.prototype.reverse=function ZP(){if(this.__filtered__){var u=new un(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},un.prototype.value=function lE(){var u=this.__wrapped__.value(),f=this.__dir__,g=zt(u),w=f<0,S=g?u.length:0,I=function sk(u,f,g){for(var w=-1,S=g.length;++w<S;){var I=g[w],V=I.size;switch(I.type){case"drop":u+=V;break;case"dropRight":f-=V;break;case"take":f=Oi(f,u+V);break;case"takeRight":u=ki(u,f-V)}}return{start:u,end:f}}(0,S,this.__views__),V=I.start,z=I.end,j=z-V,ye=w?z:V-1,be=this.__iteratees__,Ce=be.length,He=0,Ye=Oi(j,this.__takeCount__);if(!g||!w&&S==j&&Ye==j)return ra(u,this.__actions__);var mt=[];e:for(;j--&&He<Ye;){for(var tn=-1,_t=u[ye+=f];++tn<Ce;){var sn=be[tn],Jr=sn.type,Qr=(0,sn.iteratee)(_t);if(2==Jr)_t=Qr;else if(!Qr){if(1==Jr)continue e;break e}}mt[He++]=_t}return mt},D.prototype.at=JE,D.prototype.chain=function QE(){return __(this)},D.prototype.commit=function eA(){return new Li(this.value(),this.__chain__)},D.prototype.next=function y_(){this.__values__===U&&(this.__values__=tx(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?U:this.__values__[this.__index__++]}},D.prototype.plant=function Wb(u){for(var f,g=this;g instanceof fl;){var w=LE(g);w.__index__=0,w.__values__=U,f?S.__wrapped__=w:f=w;var S=w;g=g.__wrapped__}return S.__wrapped__=u,f},D.prototype.reverse=function nA(){var u=this.__wrapped__;if(u instanceof un){var f=u;return this.__actions__.length&&(f=new un(this)),(f=f.reverse()).__actions__.push({func:Qf,args:[d_],thisArg:U}),new Li(f,this.__chain__)}return this.thru(d_)},D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=function $b(){return ra(this.__wrapped__,this.__actions__)},D.prototype.first=D.prototype.head,hd&&(D.prototype[hd]=function tA(){return this}),D}();lr._=_f,(qt=function(){return _f}.call(Ss,Vr,Ss,po))!==U&&(po.exports=qt)}.call(this)},738:function(po){var Ss;po.exports=((Ss=function(){function Vr(di){return Rr.appendChild(di.dom),di}function qt(di){for(var hi=0;hi<Rr.children.length;hi++)Rr.children[hi].style.display=hi===di?"block":"none";U=di}var U=0,Rr=document.createElement("div");Rr.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",Rr.addEventListener("click",function(di){di.preventDefault(),qt(++U%Rr.children.length)},!1);var zr=(performance||Date).now(),nn=zr,Mn=0,ll=Vr(new Ss.Panel("FPS","#0ff","#002")),Ia=Vr(new Ss.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var Es=Vr(new Ss.Panel("MB","#f08","#201"));return qt(0),{REVISION:16,dom:Rr,addPanel:Vr,showPanel:qt,begin:function(){zr=(performance||Date).now()},end:function(){Mn++;var di=(performance||Date).now();if(Ia.update(di-zr,200),di>nn+1e3&&(ll.update(1e3*Mn/(di-nn),100),nn=di,Mn=0,Es)){var hi=performance.memory;Es.update(hi.usedJSHeapSize/1048576,hi.jsHeapSizeLimit/1048576)}return di},update:function(){zr=this.end()},domElement:Rr,setMode:qt}}).Panel=function(Vr,qt,U){var Rr=1/0,zr=0,nn=Math.round,Mn=nn(window.devicePixelRatio||1),ll=80*Mn,Ia=48*Mn,Es=3*Mn,di=2*Mn,hi=3*Mn,ss=15*Mn,As=74*Mn,Ds=30*Mn,mo=document.createElement("canvas");mo.width=ll,mo.height=Ia,mo.style.cssText="width:80px;height:48px";var vn=mo.getContext("2d");return vn.font="bold "+9*Mn+"px Helvetica,Arial,sans-serif",vn.textBaseline="top",vn.fillStyle=U,vn.fillRect(0,0,ll,Ia),vn.fillStyle=qt,vn.fillText(Vr,Es,di),vn.fillRect(hi,ss,As,Ds),vn.fillStyle=U,vn.globalAlpha=.9,vn.fillRect(hi,ss,As,Ds),{dom:mo,update:function(or,Xl){Rr=Math.min(Rr,or),zr=Math.max(zr,or),vn.fillStyle=U,vn.globalAlpha=1,vn.fillRect(0,0,ll,ss),vn.fillStyle=qt,vn.fillText(nn(or)+" "+Vr+" ("+nn(Rr)+"-"+nn(zr)+")",Es,di),vn.drawImage(mo,hi+Mn,ss,As-Mn,Ds,hi,ss,As-Mn,Ds),vn.fillRect(hi+As-Mn,ss,Mn,Ds),vn.fillStyle=U,vn.globalAlpha=.9,vn.fillRect(hi+As-Mn,ss,Mn,nn((1-or/Xl)*Ds))}}},Ss)}},po=>{po(po.s=937)}]);